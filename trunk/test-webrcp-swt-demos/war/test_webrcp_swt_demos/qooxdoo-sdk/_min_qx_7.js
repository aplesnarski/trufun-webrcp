qx.Class.define("qx.theme.manager.Meta",{type:"singleton",extend:qx.core.Object,properties:{theme:{check:"Theme",nullable:true,apply:"_applyTheme"}},members:{_applyTheme:function(h,c){var d=null;var j=null;var b=null;var g=null;var f=null;if(h){d=h.meta.color||null;j=h.meta.decoration||null;b=h.meta.font||null;g=h.meta.icon||null;f=h.meta.appearance||null}var a=qx.theme.manager.Color.getInstance();var l=qx.theme.manager.Decoration.getInstance();var e=qx.theme.manager.Font.getInstance();var i=qx.theme.manager.Icon.getInstance();var k=qx.theme.manager.Appearance.getInstance();a.setTheme(d);l.setTheme(j);e.setTheme(b);i.setTheme(g);k.setTheme(f)},initialize:function(){var a=qx.core.Environment;var c,b;c=a.get("qx.theme");if(c){b=qx.Theme.getByName(c);if(!b){throw new Error("The theme to use is not available: "+c)}this.setTheme(b)}}},environment:{"qx.theme":"qx.theme.Modern"}});qx.Class.define("qx.theme.manager.Decoration",{type:"singleton",extend:qx.core.Object,properties:{theme:{check:"Theme",nullable:true,apply:"_applyTheme",event:"changeTheme"}},members:{__dynamic:null,resolve:function(g){if(!g){return null}if(typeof g==="object"){return g}var d=this.getTheme();if(!d){return null}var a=this.__dynamic;if(!a){a=this.__dynamic={}}var l=a[g];if(l){return l}var h=d.decorations[g];if(!h){return null}if(!h.style){h.style={}}var j=h;while(j.include){j=d.decorations[j.include];if(!h.decorator&&j.decorator){h.decorator=j.decorator}if(j.style){for(var k in j.style){if(h.style[k]==undefined){h.style[k]=j.style[k]}}}}var e=h.decorator;if(e==null){throw new Error("Missing definition of which decorator to use in entry: "+g+"!")}if(e instanceof Array){var f=e.concat([]);for(var c=0;c<f.length;c++){f[c]=f[c].basename.replace(".","")}var b="qx.ui.decoration."+f.join("_");if(!qx.Class.getByName(b)){qx.Class.define(b,{extend:qx.ui.decoration.DynamicDecorator,include:e})}e=qx.Class.getByName(b)}return a[g]=(new e).set(h.style)},isValidPropertyValue:function(b){if(typeof b==="string"){return this.isDynamic(b)}else{if(typeof b==="object"){var a=b.constructor;return qx.Class.hasInterface(a,qx.ui.decoration.IDecorator)}}return false},isDynamic:function(a){if(!a){return false}var b=this.getTheme();if(!b){return false}return !!b.decorations[a]},_applyTheme:function(c,a){var d=qx.util.AliasManager.getInstance();if(a){for(var b in a.aliases){d.remove(b)}}if(c){for(var b in c.aliases){d.add(b,c.aliases[b])}}if(!c){this.__dynamic={}}}},destruct:function(){this._disposeMap("__dynamic")}});qx.Class.define("qx.ui.decoration.DynamicDecorator",{extend:qx.ui.decoration.Abstract,type:"abstract",members:{getMarkup:function(){if(this._markup){return this._markup}var c={};for(var a in this){if(a.indexOf("_style")==0&&this[a] instanceof Function){this[a](c)}}if(!this._generateMarkup){var b=['<div style="'];b.push(qx.bom.element.Style.compile(c));b.push('"></div>');b=b.join("")}else{var b=this._generateMarkup(c)}return this._markup=b},resize:function(d,e,a){var f={};for(var b in this){if(b.indexOf("_resize")==0&&this[b] instanceof Function){var c=this[b](d,e,a);if(f.left==undefined){f.left=c.left;f.top=c.top}if(f.width==undefined){f.width=c.width;f.height=c.height}if(c.elementToApplyDimensions){f.elementToApplyDimensions=c.elementToApplyDimensions}f.left=c.left<f.left?c.left:f.left;f.top=c.top<f.top?c.top:f.top;f.width=c.width>f.width?c.width:f.width;f.height=c.height>f.height?c.height:f.height}}if(f.left!=undefined){d.style.left=f.left+"px";d.style.top=f.top+"px"}if(f.width!=undefined){if(f.width<0){f.width=0}if(f.height<0){f.height=0}if(f.elementToApplyDimensions){d=f.elementToApplyDimensions}d.style.width=f.width+"px";d.style.height=f.height+"px"}},tint:function(c,a){for(var b in this){if(b.indexOf("_tint")==0&&this[b] instanceof Function){this[b](c,a,c.style)}}},_isInitialized:function(){return !!this._markup},_getDefaultInsets:function(){var f=["top","right","bottom","left"];var d={};for(var a in this){if(a.indexOf("_getDefaultInsetsFor")==0&&this[a] instanceof Function){var e=this[a]();for(var b=0;b<f.length;b++){var c=f[b];if(d[c]==undefined){d[c]=e[c]}if(e[c]<d[c]){d[c]=e[c]}}}}if(d.top!=undefined){return d}return{top:0,right:0,bottom:0,left:0}}}});qx.Class.define("qx.theme.manager.Font",{type:"singleton",extend:qx.util.ValueManager,properties:{theme:{check:"Theme",nullable:true,apply:"_applyTheme",event:"changeTheme"}},members:{resolveDynamic:function(a){var b=this._dynamic;return a instanceof qx.bom.Font?a:b[a]},resolve:function(c){var b=this._dynamic;var a=b[c];if(a){return a}var d=this.getTheme();if(d!==null&&d.fonts[c]){return b[c]=(new qx.bom.Font).set(d.fonts[c])}return c},isDynamic:function(b){var a=this._dynamic;if(b&&(b instanceof qx.bom.Font||a[b]!==undefined)){return true}var c=this.getTheme();if(c!==null&&b&&c.fonts[b]){a[b]=(new qx.bom.Font).set(c.fonts[b]);return true}return false},__resolveInclude:function(c,a){if(c[a].include){var b=c[c[a].include];c[a].include=null;delete c[a].include;c[a]=qx.lang.Object.mergeWith(c[a],b,false);this.__resolveInclude(c,a)}},_applyTheme:function(e){var b=this._getDynamic();for(var c in b){if(b[c].themed){b[c].dispose();delete b[c]}}if(e){var d=e.fonts;var a=qx.bom.Font;for(var c in d){if(d[c].include&&d[d[c].include]){this.__resolveInclude(d,c)}b[c]=(new a).set(d[c]);b[c].themed=true}}this._setDynamic(b)}}});qx.Class.define("qx.bom.Font",{extend:qx.core.Object,construct:function(a,b){this.base(arguments);if(a!==undefined){this.setSize(a)}if(b!==undefined){this.setFamily(b)}},statics:{fromString:function(g){var b=new qx.bom.Font();var f=g.split(/\s+/);var d=[];var c;for(var e=0;e<f.length;e++){switch(c=f[e]){case"bold":b.setBold(true);break;case"italic":b.setItalic(true);break;case"underline":b.setDecoration("underline");break;default:var a=parseInt(c,10);if(a==c||qx.lang.String.contains(c,"px")){b.setSize(a)}else{d.push(c)}break}}if(d.length>0){b.setFamily(d)}return b},fromConfig:function(b){var a=new qx.bom.Font;a.set(b);return a},__defaultStyles:{fontFamily:"",fontSize:"",fontWeight:"",fontStyle:"",textDecoration:"",lineHeight:1.2,textColor:""},getDefaultStyles:function(){return this.__defaultStyles}},properties:{size:{check:"Integer",nullable:true,apply:"_applySize"},lineHeight:{check:"Number",nullable:true,apply:"_applyLineHeight"},family:{check:"Array",nullable:true,apply:"_applyFamily"},bold:{check:"Boolean",nullable:true,apply:"_applyBold"},italic:{check:"Boolean",nullable:true,apply:"_applyItalic"},decoration:{check:["underline","line-through","overline"],nullable:true,apply:"_applyDecoration"},color:{check:"Color",nullable:true,apply:"_applyColor"}},members:{__size:null,__family:null,__bold:null,__italic:null,__decoration:null,__lineHeight:null,__color:null,_applySize:function(b,a){this.__size=b===null?null:b+"px"},_applyLineHeight:function(b,a){this.__lineHeight=b===null?null:b},_applyFamily:function(e,b){var d="";for(var c=0,a=e.length;c<a;c++){if(e[c].indexOf(" ")>0){d+='"'+e[c]+'"'}else{d+=e[c]}if(c!==a-1){d+=","}}this.__family=d},_applyBold:function(b,a){this.__bold=b===null?null:b?"bold":"normal"},_applyItalic:function(b,a){this.__italic=b===null?null:b?"italic":"normal"},_applyDecoration:function(b,a){this.__decoration=b===null?null:b},_applyColor:function(b,a){this.__color=b===null?null:b},getStyles:function(){return{fontFamily:this.__family,fontSize:this.__size,fontWeight:this.__bold,fontStyle:this.__italic,textDecoration:this.__decoration,lineHeight:this.__lineHeight,textColor:this.__color}}}});qx.Class.define("qx.lang.Object",{statics:{empty:function(b){if(qx.core.Environment.get("qx.debug")){qx.core.Assert&&qx.core.Assert.assertMap(b,"Invalid argument 'map'")}for(var a in b){if(b.hasOwnProperty(a)){delete b[a]}}},isEmpty:(qx.core.Environment.get("ecmascript.objectcount"))?function(a){if(qx.core.Environment.get("qx.debug")){qx.core.Assert&&qx.core.Assert.assertMap(a,"Invalid argument 'map'")}return a.__count__===0}:function(b){if(qx.core.Environment.get("qx.debug")){qx.core.Assert&&qx.core.Assert.assertMap(b,"Invalid argument 'map'")}for(var a in b){return false}return true},hasMinLength:(qx.core.Environment.get("ecmascript.objectcount"))?function(b,a){if(qx.core.Environment.get("qx.debug")){qx.core.Assert&&qx.core.Assert.assertMap(b,"Invalid argument 'map'");qx.core.Assert&&qx.core.Assert.assertInteger(a,"Invalid argument 'minLength'")}return b.__count__>=a}:function(d,a){if(qx.core.Environment.get("qx.debug")){qx.core.Assert&&qx.core.Assert.assertMap(d,"Invalid argument 'map'");qx.core.Assert&&qx.core.Assert.assertInteger(a,"Invalid argument 'minLength'")}if(a<=0){return true}var c=0;for(var b in d){if((++c)>=a){return true}}return false},getLength:qx.Bootstrap.objectGetLength,getKeys:qx.Bootstrap.getKeys,getKeysAsString:qx.Bootstrap.getKeysAsString,getValues:function(e){if(qx.core.Environment.get("qx.debug")){qx.core.Assert&&qx.core.Assert.assertMap(e,"Invalid argument 'map'")}var a=[];var d=this.getKeys(e);for(var c=0,b=d.length;c<b;c++){a.push(e[d[c]])}return a},mergeWith:qx.Bootstrap.objectMergeWith,carefullyMergeWith:function(b,a){if(qx.core.Environment.get("qx.debug")){qx.core.Assert&&qx.core.Assert.assertMap(b,"Invalid argument 'target'");qx.core.Assert&&qx.core.Assert.assertMap(a,"Invalid argument 'source'")}return qx.lang.Object.mergeWith(b,a,false)},merge:function(d,b){if(qx.core.Environment.get("qx.debug")){qx.core.Assert&&qx.core.Assert.assertMap(d,"Invalid argument 'target'")}var a=arguments.length;for(var c=1;c<a;c++){qx.lang.Object.mergeWith(d,arguments[c])}return d},clone:function(b){if(qx.core.Environment.get("qx.debug")){qx.core.Assert&&qx.core.Assert.assertMap(b,"Invalid argument 'source'")}var c={};for(var a in b){c[a]=b[a]}return c},invert:function(c){if(qx.core.Environment.get("qx.debug")){qx.core.Assert&&qx.core.Assert.assertMap(c,"Invalid argument 'map'")}var a={};for(var b in c){a[c[b].toString()]=b}return a},getKeyFromValue:function(c,b){if(qx.core.Environment.get("qx.debug")){qx.core.Assert&&qx.core.Assert.assertMap(c,"Invalid argument 'map'")}for(var a in c){if(c.hasOwnProperty(a)&&c[a]===b){return a}}return null},contains:function(b,a){if(qx.core.Environment.get("qx.debug")){qx.core.Assert&&qx.core.Assert.assertMap(b,"Invalid argument 'map'")}return this.getKeyFromValue(b,a)!==null},select:function(a,b){if(qx.core.Environment.get("qx.debug")){qx.core.Assert&&qx.core.Assert.assertMap(b,"Invalid argument 'map'")}return b[a]},fromArray:function(d){if(qx.core.Environment.get("qx.debug")){qx.core.Assert&&qx.core.Assert.assertArray(d,"Invalid argument 'array'")}var c={};for(var b=0,a=d.length;b<a;b++){if(qx.core.Environment.get("qx.debug")){switch(typeof d[b]){case"object":case"function":case"undefined":throw new Error("Could not convert complex objects like "+d[b]+" at array index "+b+" to map syntax")}}c[d[b].toString()]=true}return c},toUriParameter:function(e,b){var a,d=[],c=window.encodeURIComponent;for(a in e){if(e.hasOwnProperty(a)){if(b){d.push(c(a).replace(/%20/g,"+")+"="+c(e[a]).replace(/%20/g,"+"))}else{d.push(c(a)+"="+c(e[a]))}}}return d.join("&")}}});qx.Class.define("qx.theme.manager.Icon",{type:"singleton",extend:qx.core.Object,properties:{theme:{check:"Theme",nullable:true,apply:"_applyTheme",event:"changeTheme"}},members:{_applyTheme:function(c,a){var d=qx.util.AliasManager.getInstance();if(a){for(var b in a.aliases){d.remove(b)}}if(c){for(var b in c.aliases){d.add(b,c.aliases[b])}}}}});qx.Class.define("qx.theme.manager.Appearance",{type:"singleton",extend:qx.core.Object,construct:function(){this.base(arguments);this.__styleCache={};this.__aliasMap={}},properties:{theme:{check:"Theme",nullable:true,event:"changeTheme",apply:"_applyTheme"}},members:{__defaultStates:{},__styleCache:null,__aliasMap:null,_applyTheme:function(b,a){this.__aliasMap={};this.__styleCache={}},__resolveId:function(a,f,d){var n=f.appearances;var l=n[a];if(!l){var c="/";var b=[];var j=a.split(c);var g;while(!l&&j.length>0){b.unshift(j.pop());var k=j.join(c);l=n[k];if(l){g=l.alias||l;if(typeof g==="string"){var h=g+c+b.join(c);return this.__resolveId(h,f,d)}}}for(var e=0;e<b.length-1;e++){b.shift();var k=b.join(c);var m=this.__resolveId(k,f);if(m){return m}}if(d!=null){return this.__resolveId(d,f)}return null}else{if(typeof l==="string"){return this.__resolveId(l,f,d)}else{if(l.include&&!l.style){return this.__resolveId(l.include,f,d)}}}return a},styleFrom:function(d,o,h,g){if(!h){h=this.getTheme()}var q=this.__aliasMap;var m=q[d];if(!m){m=q[d]=this.__resolveId(d,h,g)}var k=h.appearances[m];if(!k){this.warn("Missing appearance: "+d);return null}if(!k.style){return null}var f=m;if(o){var n=k.$$bits;if(!n){n=k.$$bits={};k.$$length=0}var i=0;for(var b in o){if(!o[b]){continue}if(n[b]==null){n[b]=1<<k.$$length++}i+=n[b]}if(i>0){f+=":"+i}}var a=this.__styleCache;if(a[f]!==undefined){return a[f]}if(!o){o=this.__defaultStates}var p;if(k.include||k.base){var e;if(k.include){e=this.styleFrom(k.include,o,h,g)}var j=k.style(o,e);p={};if(k.base){var c=this.styleFrom(m,o,k.base,g);if(k.include){for(var l in c){if(!e.hasOwnProperty(l)&&!j.hasOwnProperty(l)){p[l]=c[l]}}}else{for(var l in c){if(!j.hasOwnProperty(l)){p[l]=c[l]}}}}if(k.include){for(var l in e){if(!j.hasOwnProperty(l)){p[l]=e[l]}}}for(var l in j){p[l]=j[l]}}else{p=k.style(o)}return a[f]=p||null}},destruct:function(){this.__styleCache=this.__aliasMap=null}});qx.Class.define("qx.ui.tooltip.Manager",{type:"singleton",extend:qx.core.Object,construct:function(){this.base(arguments);qx.event.Registration.addListener(document.body,"mouseover",this.__onMouseOverRoot,this,true);this.__showTimer=new qx.event.Timer();this.__showTimer.addListener("interval",this.__onShowInterval,this);this.__hideTimer=new qx.event.Timer();this.__hideTimer.addListener("interval",this.__onHideInterval,this);this.__mousePosition={left:0,top:0}},properties:{current:{check:"qx.ui.tooltip.ToolTip",nullable:true,apply:"_applyCurrent"},showInvalidToolTips:{check:"Boolean",init:true},showToolTips:{check:"Boolean",init:true}},members:{__mousePosition:null,__hideTimer:null,__showTimer:null,__sharedToolTip:null,__sharedErrorToolTip:null,__getSharedTooltip:function(){if(!this.__sharedToolTip){this.__sharedToolTip=new qx.ui.tooltip.ToolTip().set({rich:true})}return this.__sharedToolTip},__getSharedErrorTooltip:function(){if(!this.__sharedErrorToolTip){this.__sharedErrorToolTip=new qx.ui.tooltip.ToolTip().set({appearance:"tooltip-error"});this.__sharedErrorToolTip.syncAppearance()}return this.__sharedErrorToolTip},_applyCurrent:function(d,a){if(a&&qx.ui.core.Widget.contains(a,d)){return}if(a){if(!a.isDisposed()){a.exclude()}this.__showTimer.stop();this.__hideTimer.stop()}var b=qx.event.Registration;var c=document.body;if(d){this.__showTimer.startWith(d.getShowTimeout());b.addListener(c,"mouseout",this.__onMouseOutRoot,this,true);b.addListener(c,"focusout",this.__onFocusOutRoot,this,true);b.addListener(c,"mousemove",this.__onMouseMoveRoot,this,true)}else{b.removeListener(c,"mouseout",this.__onMouseOutRoot,this,true);b.removeListener(c,"focusout",this.__onFocusOutRoot,this,true);b.removeListener(c,"mousemove",this.__onMouseMoveRoot,this,true)}},__onShowInterval:function(b){var a=this.getCurrent();if(a&&!a.isDisposed()){this.__hideTimer.startWith(a.getHideTimeout());if(a.getPlaceMethod()=="widget"){a.placeToWidget(a.getOpener())}else{a.placeToPoint(this.__mousePosition)}a.show()}this.__showTimer.stop()},__onHideInterval:function(b){var a=this.getCurrent();if(a&&!a.isDisposed()){a.exclude()}this.__hideTimer.stop();this.resetCurrent()},__onMouseMoveRoot:function(a){var b=this.__mousePosition;b.left=a.getDocumentLeft();b.top=a.getDocumentTop()},__onMouseOverRoot:function(f){var d=qx.ui.core.Widget.getWidgetByElement(f.getTarget());if(!d){return}var b,g,a,c;while(d!=null){b=d.getToolTip();g=d.getToolTipText()||null;a=d.getToolTipIcon()||null;if(qx.Class.hasInterface(d.constructor,qx.ui.form.IForm)&&!d.isValid()){c=d.getInvalidMessage()}if(b||g||a||c){break}d=d.getLayoutParent()}if(!d||!d.getEnabled()||d.isBlockToolTip()||(!c&&!this.getShowToolTips())||(c&&!this.getShowInvalidToolTips())){return}if(c){b=this.__getSharedErrorTooltip().set({label:c})}if(!b){b=this.__getSharedTooltip().set({label:g,icon:a})}this.setCurrent(b);b.setOpener(d)},__onMouseOutRoot:function(d){var c=qx.ui.core.Widget.getWidgetByElement(d.getTarget());if(!c){return}var b=qx.ui.core.Widget.getWidgetByElement(d.getRelatedTarget());if(!b){return}var a=this.getCurrent();if(a&&(b==a||qx.ui.core.Widget.contains(a,b))){return}if(b&&c&&qx.ui.core.Widget.contains(c,b)){return}if(a&&!b){this.setCurrent(null)}else{this.resetCurrent()}},__onFocusOutRoot:function(c){var b=qx.ui.core.Widget.getWidgetByElement(c.getTarget());if(!b){return}var a=this.getCurrent();if(a&&a==b.getToolTip()){this.setCurrent(null)}}},destruct:function(){qx.event.Registration.removeListener(document.body,"mouseover",this.__onMouseOverRoot,this,true);this._disposeObjects("__showTimer","__hideTimer","__sharedToolTip");this.__mousePosition=null}});qx.Class.define("qx.event.Timer",{extend:qx.core.Object,construct:function(b){this.base(arguments);this.setEnabled(false);if(b!=null){this.setInterval(b)}var a=this;this.__oninterval=function(){a._oninterval.call(a)}},events:{interval:"qx.event.type.Event"},statics:{once:function(a,c,b){if(qx.core.Environment.get("qx.debug")){qx.core.Assert.assertFunction(a,"func is not a function");qx.core.Assert.assertNotUndefined(b,"No timeout given")}var d=new qx.event.Timer(b);d.__onceFunc=a;d.addListener("interval",function(f){d.stop();a.call(c,f);d.dispose();c=null},c);d.start();return d}},properties:{enabled:{init:true,check:"Boolean",apply:"_applyEnabled"},interval:{check:"Integer",init:1000,apply:"_applyInterval"}},members:{__intervalHandler:null,__oninterval:null,_applyInterval:function(b,a){if(this.getEnabled()){this.restart()}},_applyEnabled:function(b,a){if(a){window.clearInterval(this.__intervalHandler);this.__intervalHandler=null}else{if(b){this.__intervalHandler=window.setInterval(this.__oninterval,this.getInterval())}}},start:function(){this.setEnabled(true)},startWith:function(a){this.setInterval(a);this.start()},stop:function(){this.setEnabled(false)},restart:function(){this.stop();this.start()},restartWith:function(a){this.stop();this.startWith(a)},_oninterval:qx.event.GlobalError.observeMethod(function(){if(this.$$disposed){return}if(this.getEnabled()){this.fireEvent("interval")}})},destruct:function(){if(this.__intervalHandler){window.clearInterval(this.__intervalHandler)}this.__intervalHandler=this.__oninterval=null}});qx.Mixin.define("qx.ui.core.MLayoutHandling",{members:{setLayout:function(a){return this._setLayout(a)},getLayout:function(){return this._getLayout()}},statics:{remap:function(a){a.getLayout=a._getLayout;a.setLayout=a._setLayout}}});qx.Class.define("qx.ui.core.DecoratorFactory",{extend:qx.core.Object,construct:function(){this.base(arguments);this.__pool={}},statics:{MAX_SIZE:15,__NO_POOL_ID:"$$nopool$$"},members:{__pool:null,getDecoratorElement:function(a){var b=qx.ui.core.DecoratorFactory;if(qx.lang.Type.isString(a)){var f=a;var e=qx.theme.manager.Decoration.getInstance().resolve(a)}else{var f=b.__NO_POOL_ID;e=a}var d=this.__pool;if(d[f]&&d[f].length>0){var c=d[f].pop()}else{var c=this._createDecoratorElement(e,f)}c.$$pooled=false;return c},poolDecorator:function(a){if(!a||a.$$pooled||a.isDisposed()){return}var b=qx.ui.core.DecoratorFactory;var d=a.getId();if(d==b.__NO_POOL_ID){a.dispose();return}var c=this.__pool;if(!c[d]){c[d]=[]}if(c[d].length>b.MAX_SIZE){a.dispose()}else{a.$$pooled=true;c[d].push(a)}},_createDecoratorElement:function(a,c){var b=new qx.html.Decorator(a,c);if(qx.core.Environment.get("qx.debug")){b.setAttribute("qxType","decorator")}return b},toString:qx.core.Environment.select("qx.debug",{"true":function(){var b=0;var c=0;for(var a in this.__pool){b+=1;c+=this.__pool[a].length}return["qx.ui.core.DecoratorFactory[",this.$$hash,"] ","keys: ",b,", elements: ",c].join("")},"false":function(){return this.base(arguments)}})},destruct:function(){if(!qx.core.ObjectRegistry.inShutDown){var b=this.__pool;for(var a in b){qx.util.DisposeUtil.disposeArray(b,a)}}this.__pool=null}});qx.Class.define("qx.ui.core.LayoutItem",{type:"abstract",extend:qx.core.Object,properties:{minWidth:{check:"Integer",nullable:true,apply:"_applyDimension",init:null,themeable:true},width:{check:"Integer",nullable:true,apply:"_applyDimension",init:null,themeable:true},maxWidth:{check:"Integer",nullable:true,apply:"_applyDimension",init:null,themeable:true},minHeight:{check:"Integer",nullable:true,apply:"_applyDimension",init:null,themeable:true},height:{check:"Integer",nullable:true,apply:"_applyDimension",init:null,themeable:true},maxHeight:{check:"Integer",nullable:true,apply:"_applyDimension",init:null,themeable:true},allowGrowX:{check:"Boolean",apply:"_applyStretching",init:true,themeable:true},allowShrinkX:{check:"Boolean",apply:"_applyStretching",init:true,themeable:true},allowGrowY:{check:"Boolean",apply:"_applyStretching",init:true,themeable:true},allowShrinkY:{check:"Boolean",apply:"_applyStretching",init:true,themeable:true},allowStretchX:{group:["allowGrowX","allowShrinkX"],mode:"shorthand",themeable:true},allowStretchY:{group:["allowGrowY","allowShrinkY"],mode:"shorthand",themeable:true},marginTop:{check:"Integer",init:0,apply:"_applyMargin",themeable:true},marginRight:{check:"Integer",init:0,apply:"_applyMargin",themeable:true},marginBottom:{check:"Integer",init:0,apply:"_applyMargin",themeable:true},marginLeft:{check:"Integer",init:0,apply:"_applyMargin",themeable:true},margin:{group:["marginTop","marginRight","marginBottom","marginLeft"],mode:"shorthand",themeable:true},alignX:{check:["left","center","right"],nullable:true,apply:"_applyAlign",themeable:true},alignY:{check:["top","middle","bottom","baseline"],nullable:true,apply:"_applyAlign",themeable:true}},members:{__computedHeightForWidth:null,__computedLayout:null,__hasInvalidLayout:null,__sizeHint:null,__updateMargin:null,__userBounds:null,__layoutProperties:null,getBounds:function(){return this.__userBounds||this.__computedLayout||null},clearSeparators:function(){},renderSeparator:function(b,a){},renderLayout:function(g,f,c,a){if(qx.core.Environment.get("qx.debug")){var h="Something went wrong with the layout of "+this.toString()+"!";this.assertInteger(g,"Wrong 'left' argument. "+h);this.assertInteger(f,"Wrong 'top' argument. "+h);this.assertInteger(c,"Wrong 'width' argument. "+h);this.assertInteger(a,"Wrong 'height' argument. "+h)}var e=null;if(this.getHeight()==null&&this._hasHeightForWidth()){var e=this._getHeightForWidth(c)}if(e!=null&&e!==this.__computedHeightForWidth){this.__computedHeightForWidth=e;qx.ui.core.queue.Layout.add(this);return null}var d=this.__computedLayout;if(!d){d=this.__computedLayout={}}var b={};if(g!==d.left||f!==d.top){b.position=true;d.left=g;d.top=f}if(c!==d.width||a!==d.height){b.size=true;d.width=c;d.height=a}if(this.__hasInvalidLayout){b.local=true;delete this.__hasInvalidLayout}if(this.__updateMargin){b.margin=true;delete this.__updateMargin}return b},isExcluded:function(){return false},hasValidLayout:function(){return !this.__hasInvalidLayout},scheduleLayoutUpdate:function(){qx.ui.core.queue.Layout.add(this)},invalidateLayoutCache:function(){this.__hasInvalidLayout=true;this.__sizeHint=null},getSizeHint:function(a){var b=this.__sizeHint;if(b){return b}if(a===false){return null}b=this.__sizeHint=this._computeSizeHint();if(this._hasHeightForWidth()&&this.__computedHeightForWidth&&this.getHeight()==null){b.height=this.__computedHeightForWidth}if(b.minWidth>b.width){b.width=b.minWidth}if(b.maxWidth<b.width){b.width=b.maxWidth}if(!this.getAllowGrowX()){b.maxWidth=b.width}if(!this.getAllowShrinkX()){b.minWidth=b.width}if(b.minHeight>b.height){b.height=b.minHeight}if(b.maxHeight<b.height){b.height=b.maxHeight}if(!this.getAllowGrowY()){b.maxHeight=b.height}if(!this.getAllowShrinkY()){b.minHeight=b.height}return b},_computeSizeHint:function(){var c=this.getMinWidth()||0;var f=this.getMinHeight()||0;var b=this.getWidth()||c;var a=this.getHeight()||f;var e=this.getMaxWidth()||Infinity;var d=this.getMaxHeight()||Infinity;return{minWidth:c,width:b,maxWidth:e,minHeight:f,height:a,maxHeight:d}},_hasHeightForWidth:function(){var a=this._getLayout();if(a){return a.hasHeightForWidth()}return false},_getHeightForWidth:function(a){var b=this._getLayout();if(b&&b.hasHeightForWidth()){return b.getHeightForWidth(a)}return null},_getLayout:function(){return null},_applyMargin:function(){this.__updateMargin=true;var a=this.$$parent;if(a){a.updateLayoutProperties()}},_applyAlign:function(){var a=this.$$parent;if(a){a.updateLayoutProperties()}},_applyDimension:function(){qx.ui.core.queue.Layout.add(this)},_applyStretching:function(){qx.ui.core.queue.Layout.add(this)},hasUserBounds:function(){return !!this.__userBounds},setUserBounds:function(d,c,b,a){this.__userBounds={left:d,top:c,width:b,height:a};qx.ui.core.queue.Layout.add(this)},resetUserBounds:function(){delete this.__userBounds;qx.ui.core.queue.Layout.add(this)},__emptyProperties:{},setLayoutProperties:function(c){if(c==null){return}var d=this.__layoutProperties;if(!d){d=this.__layoutProperties={}}var b=this.getLayoutParent();if(b){b.updateLayoutProperties(c)}for(var a in c){if(c[a]==null){delete d[a]}else{d[a]=c[a]}}},getLayoutProperties:function(){return this.__layoutProperties||this.__emptyProperties},clearLayoutProperties:function(){delete this.__layoutProperties},updateLayoutProperties:function(b){var c=this._getLayout();if(c){if(qx.core.Environment.get("qx.debug")){if(b){for(var a in b){if(b[a]!==null){c.verifyLayoutProperty(this,a,b[a])}}}}c.invalidateChildrenCache()}qx.ui.core.queue.Layout.add(this)},getApplicationRoot:function(){return qx.core.Init.getApplication().getRoot()},getLayoutParent:function(){return this.$$parent||null},setLayoutParent:function(a){if(this.$$parent===a){return}this.$$parent=a||null;qx.ui.core.queue.Visibility.add(this)},isRootWidget:function(){return false},_getRoot:function(){var a=this;while(a){if(a.isRootWidget()){return a}a=a.$$parent}return null},clone:function(){var b=this.base(arguments);var a=this.__layoutProperties;if(a){b.__layoutProperties=qx.lang.Object.clone(a)}return b}},destruct:function(){this.$$parent=this.$$subparent=this.__layoutProperties=this.__computedLayout=this.__userBounds=this.__sizeHint=null}});qx.Class.define("qx.ui.core.Widget",{extend:qx.ui.core.LayoutItem,include:[qx.locale.MTranslation],construct:function(){this.base(arguments);this.__containerElement=this._createContainerElement();this.__contentElement=this.__createContentElement();this.__containerElement.add(this.__contentElement);this.initFocusable();this.initSelectable();this.initNativeContextMenu()},events:{appear:"qx.event.type.Event",disappear:"qx.event.type.Event",createChildControl:"qx.event.type.Data",resize:"qx.event.type.Data",move:"qx.event.type.Data",syncAppearance:"qx.event.type.Data",mousemove:"qx.event.type.Mouse",mouseover:"qx.event.type.Mouse",mouseout:"qx.event.type.Mouse",mousedown:"qx.event.type.Mouse",mouseup:"qx.event.type.Mouse",click:"qx.event.type.Mouse",dblclick:"qx.event.type.Mouse",contextmenu:"qx.event.type.Mouse",beforeContextmenuOpen:"qx.event.type.Data",mousewheel:"qx.event.type.MouseWheel",touchstart:"qx.event.type.Touch",touchend:"qx.event.type.Touch",touchmove:"qx.event.type.Touch",touchcancel:"qx.event.type.Touch",tap:"qx.event.type.Touch",swipe:"qx.event.type.Touch",keyup:"qx.event.type.KeySequence",keydown:"qx.event.type.KeySequence",keypress:"qx.event.type.KeySequence",keyinput:"qx.event.type.KeyInput",focus:"qx.event.type.Focus",blur:"qx.event.type.Focus",focusin:"qx.event.type.Focus",focusout:"qx.event.type.Focus",activate:"qx.event.type.Focus",deactivate:"qx.event.type.Focus",capture:"qx.event.type.Event",losecapture:"qx.event.type.Event",drop:"qx.event.type.Drag",dragleave:"qx.event.type.Drag",dragover:"qx.event.type.Drag",drag:"qx.event.type.Drag",dragstart:"qx.event.type.Drag",dragend:"qx.event.type.Drag",dragchange:"qx.event.type.Drag",droprequest:"qx.event.type.Drag"},properties:{paddingTop:{check:"Integer",init:0,apply:"_applyPadding",themeable:true},paddingRight:{check:"Integer",init:0,apply:"_applyPadding",themeable:true},paddingBottom:{check:"Integer",init:0,apply:"_applyPadding",themeable:true},paddingLeft:{check:"Integer",init:0,apply:"_applyPadding",themeable:true},padding:{group:["paddingTop","paddingRight","paddingBottom","paddingLeft"],mode:"shorthand",themeable:true},zIndex:{nullable:true,init:null,apply:"_applyZIndex",event:"changeZIndex",check:"Integer",themeable:true},decorator:{nullable:true,init:null,apply:"_applyDecorator",event:"changeDecorator",check:"Decorator",themeable:true},shadow:{nullable:true,init:null,apply:"_applyShadow",event:"changeShadow",check:"Decorator",themeable:true},backgroundColor:{nullable:true,check:"Color",apply:"_applyBackgroundColor",event:"changeBackgroundColor",themeable:true},textColor:{nullable:true,check:"Color",apply:"_applyTextColor",event:"changeTextColor",themeable:true,inheritable:true},font:{nullable:true,apply:"_applyFont",check:"Font",event:"changeFont",themeable:true,inheritable:true,dereference:true},opacity:{check:"Number",apply:"_applyOpacity",themeable:true,nullable:true,init:null},cursor:{check:"String",apply:"_applyCursor",themeable:true,inheritable:true,nullable:true,init:null},toolTip:{check:"qx.ui.tooltip.ToolTip",nullable:true},toolTipText:{check:"String",nullable:true,event:"changeToolTipText",apply:"_applyToolTipText"},toolTipIcon:{check:"String",nullable:true,event:"changeToolTipText"},blockToolTip:{check:"Boolean",init:false},visibility:{check:["visible","hidden","excluded"],init:"visible",apply:"_applyVisibility",event:"changeVisibility"},enabled:{init:true,check:"Boolean",inheritable:true,apply:"_applyEnabled",event:"changeEnabled"},anonymous:{init:false,check:"Boolean"},tabIndex:{check:"Integer",nullable:true,apply:"_applyTabIndex"},focusable:{check:"Boolean",init:false,apply:"_applyFocusable"},keepFocus:{check:"Boolean",init:false,apply:"_applyKeepFocus"},keepActive:{check:"Boolean",init:false,apply:"_applyKeepActive"},draggable:{check:"Boolean",init:false,apply:"_applyDraggable"},droppable:{check:"Boolean",init:false,apply:"_applyDroppable"},selectable:{check:"Boolean",init:false,event:"changeSelectable",apply:"_applySelectable"},contextMenu:{check:"qx.ui.menu.Menu",apply:"_applyContextMenu",nullable:true,event:"changeContextMenu"},nativeContextMenu:{check:"Boolean",init:false,themeable:true,event:"changeNativeContextMenu",apply:"_applyNativeContextMenu"},appearance:{check:"String",init:"widget",apply:"_applyAppearance",event:"changeAppearance"}},statics:{DEBUG:false,getWidgetByElement:function(b,a){while(b){var f=b.$$widget;if(f!=null){var c=qx.core.ObjectRegistry.fromHashCode(f);if(!a||!c.getAnonymous()){return c}}try{b=b.parentNode}catch(d){return null}}return null},contains:function(a,b){while(b){if(a==b){return true}b=b.getLayoutParent()}return false},__decoratorPool:new qx.ui.core.DecoratorFactory(),__shadowPool:new qx.ui.core.DecoratorFactory()},members:{__containerElement:null,__contentElement:null,__decoratorElement:null,__shadowElement:null,__protectorElement:null,__initialAppearanceApplied:null,__toolTipTextListenerId:null,__layoutManager:null,_getLayout:function(){return this.__layoutManager},_setLayout:function(a){if(qx.core.Environment.get("qx.debug")){if(a){this.assertInstance(a,qx.ui.layout.Abstract)}}if(this.__layoutManager){this.__layoutManager.connectToWidget(null)}if(a){a.connectToWidget(this)}this.__layoutManager=a;qx.ui.core.queue.Layout.add(this)},setLayoutParent:function(b){if(this.$$parent===b){return}var a=this.getContainerElement();if(this.$$parent&&!this.$$parent.$$disposed){this.$$parent.getContentElement().remove(a)}this.$$parent=b||null;if(b&&!b.$$disposed){this.$$parent.getContentElement().add(a)}this.$$refreshInheritables();qx.ui.core.queue.Visibility.add(this)},_updateInsets:null,__checkInsetsModified:function(d,c){if(d==c){return false}if(d==null||c==null){return true}var f=qx.theme.manager.Decoration.getInstance();var g=f.resolve(d).getInsets();var e=f.resolve(c).getInsets();if(g.top!=e.top||g.right!=e.right||g.bottom!=e.bottom||g.left!=e.left){return true}return false},renderLayout:function(g,l,e,p){var n=this.base(arguments,g,l,e,p);if(!n){return null}var c=this.getContainerElement();var j=this.getContentElement();var q=n.size||this._updateInsets;var d="px";var b={};if(n.position){b.left=g+d;b.top=l+d}if(n.size){b.width=e+d;b.height=p+d}if(n.position||n.size){c.setStyles(b)}if(q||n.local||n.margin){var f=this.getInsets();var k=e-f.left-f.right;var a=p-f.top-f.bottom;k=k<0?0:k;a=a<0?0:a}var o={};if(this._updateInsets){o.left=f.left+d;o.top=f.top+d}if(q){o.width=k+d;o.height=a+d}if(q||this._updateInsets){j.setStyles(o)}if(n.size){var m=this.__protectorElement;if(m){m.setStyles({width:e+"px",height:p+"px"})}}if(n.size||this._updateInsets){if(this.__decoratorElement){this.__decoratorElement.resize(e,p)}}if(n.size){if(this.__shadowElement){var f=this.__shadowElement.getInsets();var h=e+f.left+f.right;var i=p+f.top+f.bottom;this.__shadowElement.resize(h,i)}}if(q||n.local||n.margin){if(this.__layoutManager&&this.hasLayoutChildren()){this.__layoutManager.renderLayout(k,a)}else{if(this.hasLayoutChildren()){throw new Error("At least one child in control "+this._findTopControl()+" requires a layout, but no one was defined!")}}}if(n.position&&this.hasListener("move")){this.fireDataEvent("move",this.getBounds())}if(n.size&&this.hasListener("resize")){this.fireDataEvent("resize",this.getBounds())}delete this._updateInsets;return n},__separators:null,clearSeparators:function(){var d=this.__separators;if(!d){return}var c=qx.ui.core.Widget.__decoratorPool;var f=this.getContentElement();var e;for(var b=0,a=d.length;b<a;b++){e=d[b];c.poolDecorator(e);f.remove(e)}d.length=0},renderSeparator:function(c,b){var a=qx.ui.core.Widget.__decoratorPool.getDecoratorElement(c);this.getContentElement().add(a);a.resize(b.width,b.height);a.setStyles({left:b.left+"px",top:b.top+"px"});if(!this.__separators){this.__separators=[a]}else{this.__separators.push(a)}},_computeSizeHint:function(){var b=this.getWidth();var a=this.getMinWidth();var g=this.getMaxWidth();var j=this.getHeight();var i=this.getMinHeight();var h=this.getMaxHeight();if(qx.core.Environment.get("qx.debug")){if(a!==null&&g!==null){this.assert(a<=g,"minWidth is larger than maxWidth!")}if(i!==null&&h!==null){this.assert(i<=h,"minHeight is larger than maxHeight!")}}var f=this._getContentHint();var c=this.getInsets();var e=c.left+c.right;var d=c.top+c.bottom;if(b==null){b=f.width+e}if(j==null){j=f.height+d}if(a==null){a=e;if(f.minWidth!=null){a+=f.minWidth}}if(i==null){i=d;if(f.minHeight!=null){i+=f.minHeight}}if(g==null){if(f.maxWidth==null){g=Infinity}else{g=f.maxWidth+e}}if(h==null){if(f.maxHeight==null){h=Infinity}else{h=f.maxHeight+d}}return{width:b,minWidth:a,maxWidth:g,height:j,minHeight:i,maxHeight:h}},invalidateLayoutCache:function(){this.base(arguments);if(this.__layoutManager){this.__layoutManager.invalidateLayoutCache()}},_getContentHint:function(){var a=this.__layoutManager;if(a){if(this.hasLayoutChildren()){var c=a.getSizeHint();if(qx.core.Environment.get("qx.debug")){var b="The layout of the widget"+this.toString()+" returned an invalid size hint!";this.assertInteger(c.width,"Wrong 'left' argument. "+b);this.assertInteger(c.height,"Wrong 'top' argument. "+b)}return c}else{return{width:0,height:0}}}else{return{width:100,height:50}}},_getHeightForWidth:function(e){var c=this.getInsets();var h=c.left+c.right;var d=c.top+c.bottom;var b=e-h;var g=this._getLayout();if(g&&g.hasHeightForWidth()){var f=g.getHeightForWidth(e)}else{f=this._getContentHeightForWidth(b)}var a=f+d;return a},_getContentHeightForWidth:function(a){throw new Error("Abstract method call: _getContentHeightForWidth()!")},getInsets:function(){var e=this.getPaddingTop();var c=this.getPaddingRight();var b=this.getPaddingBottom();var d=this.getPaddingLeft();if(this.__decoratorElement){var a=this.__decoratorElement.getInsets();if(qx.core.Environment.get("qx.debug")){this.assertNumber(a.top,"Invalid top decorator inset detected: "+a.top);this.assertNumber(a.right,"Invalid right decorator inset detected: "+a.right);this.assertNumber(a.bottom,"Invalid bottom decorator inset detected: "+a.bottom);this.assertNumber(a.left,"Invalid left decorator inset detected: "+a.left)}e+=a.top;c+=a.right;b+=a.bottom;d+=a.left}return{top:e,right:c,bottom:b,left:d}},getInnerSize:function(){var b=this.getBounds();if(!b){return null}var a=this.getInsets();return{width:b.width-a.left-a.right,height:b.height-a.top-a.bottom}},show:function(){this.setVisibility("visible")},hide:function(){this.setVisibility("hidden")},exclude:function(){this.setVisibility("excluded")},isVisible:function(){return this.getVisibility()==="visible"},isHidden:function(){return this.getVisibility()!=="visible"},isExcluded:function(){return this.getVisibility()==="excluded"},isSeeable:function(){var a=this.getContainerElement().getDomElement();if(a){return a.offsetWidth>0}var b=this;do{if(!b.isVisible()){return false}if(b.isRootWidget()){return true}b=b.getLayoutParent()}while(b);return false},_createContainerElement:function(){var a={"$$widget":this.toHashCode()};if(qx.core.Environment.get("qx.debug")){a.qxType="container";a.qxClass=this.classname}var b={zIndex:0,position:"absolute"};return new qx.html.Element("div",b,a)},__createContentElement:function(){var a=this._createContentElement();if(qx.core.Environment.get("qx.debug")){a.setAttribute("qxType","content")}a.setStyles({position:"absolute",zIndex:10});return a},_createContentElement:function(){return new qx.html.Element("div",{overflowX:"hidden",overflowY:"hidden"})},getContainerElement:function(){return this.__containerElement},getContentElement:function(){return this.__contentElement},getDecoratorElement:function(){return this.__decoratorElement||null},getShadowElement:function(){return this.__shadowElement||null},__widgetChildren:null,getLayoutChildren:function(){var c=this.__widgetChildren;if(!c){return this.__emptyChildren}var d;for(var b=0,a=c.length;b<a;b++){var e=c[b];if(e.hasUserBounds()||e.isExcluded()){if(d==null){d=c.concat()}qx.lang.Array.remove(d,e)}}return d||c},scheduleLayoutUpdate:function(){qx.ui.core.queue.Layout.add(this)},invalidateLayoutChildren:function(){var a=this.__layoutManager;if(a){a.invalidateChildrenCache()}qx.ui.core.queue.Layout.add(this)},hasLayoutChildren:function(){var c=this.__widgetChildren;if(!c){return false}var d;for(var b=0,a=c.length;b<a;b++){d=c[b];if(!d.hasUserBounds()&&!d.isExcluded()){return true}}return false},getChildrenContainer:function(){return this},__emptyChildren:[],_getChildren:function(){return this.__widgetChildren||this.__emptyChildren},_indexOf:function(b){var a=this.__widgetChildren;if(!a){return -1}return a.indexOf(b)},_hasChildren:function(){var a=this.__widgetChildren;return a!=null&&(!!a[0])},addChildrenToQueue:function(a){var d=this.__widgetChildren;if(!d){return}var e;for(var c=0,b=d.length;c<b;c++){e=d[c];a.push(e);e.addChildrenToQueue(a)}},_add:function(b,a){if(b.getLayoutParent()==this){qx.lang.Array.remove(this.__widgetChildren,b)}if(this.__widgetChildren){this.__widgetChildren.push(b)}else{this.__widgetChildren=[b]}this.__addHelper(b,a)},_addAt:function(d,b,a){if(!this.__widgetChildren){this.__widgetChildren=[]}if(d.getLayoutParent()==this){qx.lang.Array.remove(this.__widgetChildren,d)}var c=this.__widgetChildren[b];if(c===d){d.setLayoutProperties(a)}if(c){qx.lang.Array.insertBefore(this.__widgetChildren,d,c)}else{this.__widgetChildren.push(d)}this.__addHelper(d,a)},_addBefore:function(c,b,a){if(qx.core.Environment.get("qx.debug")){this.assertInArray(b,this._getChildren(),"The 'before' widget is not a child of this widget!")}if(c==b){return}if(!this.__widgetChildren){this.__widgetChildren=[]}if(c.getLayoutParent()==this){qx.lang.Array.remove(this.__widgetChildren,c)}qx.lang.Array.insertBefore(this.__widgetChildren,c,b);this.__addHelper(c,a)},_addAfter:function(c,b,a){if(qx.core.Environment.get("qx.debug")){this.assertInArray(b,this._getChildren(),"The 'after' widget is not a child of this widget!")}if(c==b){return}if(!this.__widgetChildren){this.__widgetChildren=[]}if(c.getLayoutParent()==this){qx.lang.Array.remove(this.__widgetChildren,c)}qx.lang.Array.insertAfter(this.__widgetChildren,c,b);this.__addHelper(c,a)},_remove:function(a){if(!this.__widgetChildren){throw new Error("This widget has no children!")}qx.lang.Array.remove(this.__widgetChildren,a);this.__removeHelper(a)},_removeAt:function(a){if(!this.__widgetChildren){throw new Error("This widget has no children!")}var b=this.__widgetChildren[a];qx.lang.Array.removeAt(this.__widgetChildren,a);this.__removeHelper(b);return b},_removeAll:function(){if(!this.__widgetChildren){return[]}var b=this.__widgetChildren.concat();this.__widgetChildren.length=0;for(var a=b.length-1;a>=0;a--){this.__removeHelper(b[a])}qx.ui.core.queue.Layout.add(this);return b},_afterAddChild:null,_afterRemoveChild:null,__addHelper:function(c,a){if(qx.core.Environment.get("qx.debug")){this.assertInstance(c,qx.ui.core.LayoutItem,"Invalid widget to add: "+c);this.assertNotIdentical(c,this,"Could not add widget to itself: "+c);if(a!=null){this.assertType(a,"object","Invalid layout data: "+a)}}var b=c.getLayoutParent();if(b&&b!=this){b._remove(c)}c.setLayoutParent(this);if(a){c.setLayoutProperties(a)}else{this.updateLayoutProperties()}if(this._afterAddChild){this._afterAddChild(c)}},__removeHelper:function(a){if(qx.core.Environment.get("qx.debug")){this.assertNotUndefined(a)}if(a.getLayoutParent()!==this){throw new Error("Remove Error: "+a+" is not a child of this widget!")}a.setLayoutParent(null);if(this.__layoutManager){this.__layoutManager.invalidateChildrenCache()}qx.ui.core.queue.Layout.add(this);if(this._afterRemoveChild){this._afterRemoveChild(a)}},capture:function(a){this.getContainerElement().capture(a)},releaseCapture:function(){this.getContainerElement().releaseCapture()},_applyPadding:function(c,a,b){this._updateInsets=true;qx.ui.core.queue.Layout.add(this)},_createProtectorElement:function(){if(this.__protectorElement){return}var a=this.__protectorElement=new qx.html.Element;if(qx.core.Environment.get("qx.debug")){a.setAttribute("qxType","protector")}a.setStyles({position:"absolute",top:0,left:0,zIndex:7});var b=this.getBounds();if(b){this.__protectorElement.setStyles({width:b.width+"px",height:b.height+"px"})}if((qx.core.Environment.get("engine.name")=="mshtml")){a.setStyles({backgroundImage:"url("+qx.util.ResourceManager.getInstance().toUri("qx/static/blank.gif")+")",backgroundRepeat:"repeat"})}this.getContainerElement().add(a)},_applyDecorator:function(f,b){if(qx.core.Environment.get("qx.debug")){if(f&&typeof f==="object"){if(qx.ui.core.Widget.DEBUG){this.warn("Decorator instances may increase memory usage and processing time. Often it is better to lay them out to a theme file. Hash code of decorator object: "+f)}}}var c=qx.ui.core.Widget.__decoratorPool;var a=this.getContainerElement();if(!this.__protectorElement&&!qx.core.Environment.get("event.pointer")){this._createProtectorElement()}if(b){a.remove(this.__decoratorElement);c.poolDecorator(this.__decoratorElement)}if(f){var e=this.__decoratorElement=c.getDecoratorElement(f);e.setStyle("zIndex",5);a.add(e)}else{delete this.__decoratorElement}this._applyBackgroundColor(this.getBackgroundColor());if(this.__checkInsetsModified(b,f)){this._updateInsets=true;qx.ui.core.queue.Layout.add(this)}else{if(f){var d=this.getBounds();if(d){e.resize(d.width,d.height);this.__protectorElement&&this.__protectorElement.setStyles({width:d.width+"px",height:d.height+"px"})}}}},_applyShadow:function(i,c){var h=qx.ui.core.Widget.__shadowPool;var b=this.getContainerElement();if(c){b.remove(this.__shadowElement);h.poolDecorator(this.__shadowElement)}if(i){var d=this.__shadowElement=h.getDecoratorElement(i);b.add(d);var e=d.getInsets();d.setStyles({left:(-e.left)+"px",top:(-e.top)+"px"});var a=this.getBounds();if(a){var f=a.width+e.left+e.right;var g=a.height+e.top+e.bottom;d.resize(f,g)}d.tint(null)}else{delete this.__shadowElement}},_applyToolTipText:function(c,a){if(qx.core.Environment.get("qx.dynlocale")){if(this.__toolTipTextListenerId){return}var b=qx.locale.Manager.getInstance();this.__toolTipTextListenerId=b.addListener("changeLocale",function(){var d=this.getToolTipText();if(d&&d.translate){this.setToolTipText(d.translate())}},this)}},_applyTextColor:function(b,a){},_applyZIndex:function(b,a){this.getContainerElement().setStyle("zIndex",b==null?0:b)},_applyVisibility:function(d,b){var a=this.getContainerElement();if(d==="visible"){a.show()}else{a.hide()}var c=this.$$parent;if(c&&(b==null||d==null||b==="excluded"||d==="excluded")){c.invalidateLayoutChildren()}qx.ui.core.queue.Visibility.add(this)},_applyOpacity:function(b,a){this.getContainerElement().setStyle("opacity",b==1?null:b);if((qx.core.Environment.get("engine.name")=="mshtml")&&qx.bom.element.Decoration.isAlphaImageLoaderEnabled()){if(!qx.Class.isSubClassOf(this.getContentElement().constructor,qx.html.Image)){var c=(b==1||b==null)?null:0.99;this.getContentElement().setStyle("opacity",c)}}},_applyCursor:function(b,a){if(b==null&&!this.isSelectable()){b="default"}this.getContainerElement().setStyle("cursor",b,qx.core.Environment.get("engine.name")=="opera")},_applyBackgroundColor:function(e,c){var d=this.getBackgroundColor();var b=this.getContainerElement();if(this.__decoratorElement){this.__decoratorElement.tint(d);b.setStyle("backgroundColor",null)}else{var a=qx.theme.manager.Color.getInstance().resolve(d);b.setStyle("backgroundColor",a)}},_applyFont:function(b,a){},__states:null,$$stateChanges:null,_forwardStates:null,hasState:function(b){var a=this.__states;return !!a&&!!a[b]},addState:function(d){var b=this.__states;if(!b){b=this.__states={}}if(b[d]){return}this.__states[d]=true;if(d==="hovered"){this.syncAppearance()}else{if(!qx.ui.core.queue.Visibility.isVisible(this)){this.$$stateChanges=true}else{qx.ui.core.queue.Appearance.add(this)}}var c=this._forwardStates;var a=this.__childControls;if(c&&c[d]&&a){var e;for(var f in a){e=a[f];if(e instanceof qx.ui.core.Widget){a[f].addState(d)}}}},removeState:function(d){var b=this.__states;if(!b||!b[d]){return}delete this.__states[d];if(d==="hovered"){this.syncAppearance()}else{if(!qx.ui.core.queue.Visibility.isVisible(this)){this.$$stateChanges=true}else{qx.ui.core.queue.Appearance.add(this)}}var c=this._forwardStates;var a=this.__childControls;if(c&&c[d]&&a){for(var f in a){var e=a[f];if(e instanceof qx.ui.core.Widget){e.removeState(d)}}}},replaceState:function(a,e){var c=this.__states;if(!c){c=this.__states={}}if(!c[e]){c[e]=true}if(c[a]){delete c[a]}if(!qx.ui.core.queue.Visibility.isVisible(this)){this.$$stateChanges=true}else{qx.ui.core.queue.Appearance.add(this)}var d=this._forwardStates;var b=this.__childControls;if(d&&d[e]&&b){for(var g in b){var f=b[g];if(f instanceof qx.ui.core.Widget){f.replaceState(a,e)}}}},__appearanceSelector:null,__updateSelector:null,syncAppearance:function(){var h=this.__states;var c=this.__appearanceSelector;var d=qx.theme.manager.Appearance.getInstance();var j=qx.core.Property.$$method.setThemed;var g=qx.core.Property.$$method.resetThemed;if(this.__updateSelector){delete this.__updateSelector;if(c){var f=d.styleFrom(c,h,null,this.getAppearance());c=null}}if(!c){var e=this;var b=[];do{b.push(e.$$subcontrol||e.getAppearance())}while(e=e.$$subparent);c=b.reverse().join("/").replace(/#[0-9]+/g,"");this.__appearanceSelector=c}var i=d.styleFrom(c,h,null,this.getAppearance());if(i){if(f){for(var a in f){if(i[a]===undefined){this[g[a]]()}}}if(qx.core.Environment.get("qx.debug")){for(var a in i){if(!this[j[a]]){throw new Error(this.classname+' has no themeable property "'+a+'" while styling '+c)}}}for(var a in i){i[a]===undefined?this[g[a]]():this[j[a]](i[a])}}else{if(f){for(var a in f){this[g[a]]()}}}this.fireDataEvent("syncAppearance",this.__states)},_applyAppearance:function(b,a){this.updateAppearance()},checkAppearanceNeeds:function(){if(!this.__initialAppearanceApplied){qx.ui.core.queue.Appearance.add(this);this.__initialAppearanceApplied=true}else{if(this.$$stateChanges){qx.ui.core.queue.Appearance.add(this);delete this.$$stateChanges}}},updateAppearance:function(){this.__updateSelector=true;qx.ui.core.queue.Appearance.add(this);var a=this.__childControls;if(a){var b;for(var c in a){b=a[c];if(b instanceof qx.ui.core.Widget){b.updateAppearance()}}}},syncWidget:function(){},getEventTarget:function(){var a=this;while(a.getAnonymous()){a=a.getLayoutParent();if(!a){return null}}return a},getFocusTarget:function(){var a=this;if(!a.getEnabled()){return null}while(a.getAnonymous()||!a.getFocusable()){a=a.getLayoutParent();if(!a||!a.getEnabled()){return null}}return a},getFocusElement:function(){return this.getContainerElement()},isTabable:function(){return(!!this.getContainerElement().getDomElement())&&this.isFocusable()},_applyFocusable:function(c,b){var d=this.getFocusElement();if(c){var a=this.getTabIndex();if(a==null){a=1}d.setAttribute("tabIndex",a);if((qx.core.Environment.get("engine.name")=="mshtml")){d.setAttribute("hideFocus","true")}else{d.setStyle("outline","none")}}else{if(d.isNativelyFocusable()){d.setAttribute("tabIndex",-1)}else{if(b){d.setAttribute("tabIndex",null)}}}},_applyKeepFocus:function(a){var b=this.getFocusElement();b.setAttribute("qxKeepFocus",a?"on":null)},_applyKeepActive:function(a){var b=this.getContainerElement();b.setAttribute("qxKeepActive",a?"on":null)},_applyTabIndex:function(a){if(a==null){a=1}else{if(a<1||a>32000){throw new Error("TabIndex property must be between 1 and 32000")}}if(this.getFocusable()&&a!=null){this.getFocusElement().setAttribute("tabIndex",a)}},_applySelectable:function(b,a){if(a!==null){this._applyCursor(this.getCursor())}this.getContentElement().setSelectable(b)},_applyEnabled:function(b,a){if(b===false){this.addState("disabled");this.removeState("hovered");if(this.isFocusable()){this.removeState("focused");this._applyFocusable(false,true)}if(this.isDraggable()){this._applyDraggable(false,true)}if(this.isDroppable()){this._applyDroppable(false,true)}}else{this.removeState("disabled");if(this.isFocusable()){this._applyFocusable(true,false)}if(this.isDraggable()){this._applyDraggable(true,false)}if(this.isDroppable()){this._applyDroppable(true,false)}}},_applyNativeContextMenu:function(c,a,b){},_applyContextMenu:function(b,a){if(a){a.removeState("contextmenu");if(a.getOpener()==this){a.resetOpener()}if(!b){this.removeListener("contextmenu",this._onContextMenuOpen);a.removeListener("changeVisibility",this._onBeforeContextMenuOpen,this)}}if(b){b.setOpener(this);b.addState("contextmenu");if(!a){this.addListener("contextmenu",this._onContextMenuOpen);b.addListener("changeVisibility",this._onBeforeContextMenuOpen,this)}}},_onContextMenuOpen:function(a){this.getContextMenu().openAtMouse(a);a.stop()},_onBeforeContextMenuOpen:function(a){if(a.getData()=="visible"&&this.hasListener("beforeContextmenuOpen")){this.fireDataEvent("beforeContextmenuOpen",a)}},_onStopEvent:function(a){a.stopPropagation()},_applyDraggable:function(b,a){if(!this.isEnabled()&&b===true){b=false}qx.ui.core.DragDropCursor.getInstance();if(b){this.addListener("dragstart",this._onDragStart);this.addListener("drag",this._onDrag);this.addListener("dragend",this._onDragEnd);this.addListener("dragchange",this._onDragChange)}else{this.removeListener("dragstart",this._onDragStart);this.removeListener("drag",this._onDrag);this.removeListener("dragend",this._onDragEnd);this.removeListener("dragchange",this._onDragChange)}this.getContainerElement().setAttribute("qxDraggable",b?"on":null)},_applyDroppable:function(b,a){if(!this.isEnabled()&&b===true){b=false}this.getContainerElement().setAttribute("qxDroppable",b?"on":null)},_onDragStart:function(a){qx.ui.core.DragDropCursor.getInstance().placeToMouse(a);this.getApplicationRoot().setGlobalCursor("default")},_onDrag:function(a){qx.ui.core.DragDropCursor.getInstance().placeToMouse(a)},_onDragEnd:function(a){qx.ui.core.DragDropCursor.getInstance().moveTo(-1000,-1000);this.getApplicationRoot().resetGlobalCursor()},_onDragChange:function(b){var c=qx.ui.core.DragDropCursor.getInstance();var a=b.getCurrentAction();a?c.setAction(a):c.resetAction()},visualizeFocus:function(){this.addState("focused")},visualizeBlur:function(){this.removeState("focused")},scrollChildIntoView:function(f,b,a,e){e=typeof e=="undefined"?true:e;var d=qx.ui.core.queue.Layout;var c;if(e){e=!d.isScheduled(f);c=f.getLayoutParent();if(e&&c){e=!d.isScheduled(c);if(e){c.getChildren().forEach(function(g){e=e&&!d.isScheduled(g)})}}}this.scrollChildIntoViewX(f,b,e);this.scrollChildIntoViewY(f,a,e)},scrollChildIntoViewX:function(c,b,a){this.getContentElement().scrollChildIntoViewX(c.getContainerElement(),b,a)},scrollChildIntoViewY:function(c,b,a){this.getContentElement().scrollChildIntoViewY(c.getContainerElement(),b,a)},focus:function(){if(this.isFocusable()){this.getFocusElement().focus()}else{throw new Error("Widget is not focusable!")}},blur:function(){if(this.isFocusable()){this.getFocusElement().blur()}else{throw new Error("Widget is not focusable!")}},activate:function(){this.getContainerElement().activate()},deactivate:function(){this.getContainerElement().deactivate()},tabFocus:function(){this.getFocusElement().focus()},hasChildControl:function(a){if(!this.__childControls){return false}return !!this.__childControls[a]},__childControls:null,_getCreatedChildControls:function(){return this.__childControls},getChildControl:function(c,a){if(!this.__childControls){if(a){return null}this.__childControls={}}var b=this.__childControls[c];if(b){return b}if(a===true){return null}return this._createChildControl(c)},_showChildControl:function(b){var a=this.getChildControl(b);a.show();return a},_excludeChildControl:function(b){var a=this.getChildControl(b,true);if(a){a.exclude()}},_isChildControlVisible:function(b){var a=this.getChildControl(b,true);if(a){return a.isVisible()}return false},_createChildControl:function(f){if(!this.__childControls){this.__childControls={}}else{if(this.__childControls[f]){throw new Error("Child control '"+f+"' already created!")}}var e=f.indexOf("#");if(e==-1){var d=this._createChildControlImpl(f)}else{var d=this._createChildControlImpl(f.substring(0,e),f.substring(e+1,f.length))}if(!d){throw new Error("Unsupported control: "+f)}d.$$subcontrol=f;d.$$subparent=this;var a=this.__states;var b=this._forwardStates;if(a&&b&&d instanceof qx.ui.core.Widget){for(var c in a){if(b[c]){d.addState(c)}}}this.fireDataEvent("createChildControl",d);return this.__childControls[f]=d},_createChildControlImpl:function(b,a){return null},_disposeChildControls:function(){var a=this.__childControls;if(!a){return}var b=qx.ui.core.Widget;for(var d in a){var c=a[d];if(!b.contains(this,c)){c.destroy()}else{c.dispose()}}delete this.__childControls},_findTopControl:function(){var a=this;while(a){if(!a.$$subparent){return a}a=a.$$subparent}return null},getContainerLocation:function(b){var a=this.getContainerElement().getDomElement();return a?qx.bom.element.Location.get(a,b):null},getContentLocation:function(b){var a=this.getContentElement().getDomElement();return a?qx.bom.element.Location.get(a,b):null},setDomLeft:function(b){var a=this.getContainerElement().getDomElement();if(a){a.style.left=b+"px"}else{throw new Error("DOM element is not yet created!")}},setDomTop:function(b){var a=this.getContainerElement().getDomElement();if(a){a.style.top=b+"px"}else{throw new Error("DOM element is not yet created!")}},setDomPosition:function(c,b){var a=this.getContainerElement().getDomElement();if(a){a.style.left=c+"px";a.style.top=b+"px"}else{throw new Error("DOM element is not yet created!")}},destroy:function(){if(this.$$disposed){return}var a=this.$$parent;if(a){a._remove(this)}qx.ui.core.queue.Dispose.add(this)},clone:function(){var d=this.base(arguments);if(this.getChildren){var c=this.getChildren();for(var b=0,a=c.length;b<a;b++){d.add(c[b].clone())}}return d}},destruct:function(){if(!qx.core.ObjectRegistry.inShutDown){if(qx.core.Environment.get("qx.dynlocale")){if(this.__toolTipTextListenerId){qx.locale.Manager.getInstance().removeListenerById(this.__toolTipTextListenerId)}}this.getContainerElement().setAttribute("$$widget",null,true);this._disposeChildControls();qx.ui.core.queue.Appearance.remove(this);qx.ui.core.queue.Layout.remove(this);qx.ui.core.queue.Visibility.remove(this);qx.ui.core.queue.Widget.remove(this)}if(!qx.core.ObjectRegistry.inShutDown){var b=qx.ui.core.Widget;var a=this.getContainerElement();if(this.__decoratorElement){a.remove(this.__decoratorElement);b.__decoratorPool.poolDecorator(this.__decoratorElement)}if(this.__shadowElement){a.remove(this.__shadowElement);b.__shadowPool.poolDecorator(this.__shadowElement)}this.clearSeparators();this.__decoratorElement=this.__shadowElement=this.__separators=null}else{this._disposeArray("__separators");this._disposeObjects("__decoratorElement","__shadowElement")}this._disposeArray("__widgetChildren");this.__states=this.__childControls=null;this._disposeObjects("__layoutManager","__containerElement","__contentElement","__protectorElement")}});qx.Mixin.define("qx.ui.core.MChildrenHandling",{members:{getChildren:function(){return this._getChildren()},hasChildren:function(){return this._hasChildren()},indexOf:function(a){return this._indexOf(a)},add:function(b,a){this._add(b,a)},addAt:function(c,b,a){this._addAt(c,b,a)},addBefore:function(c,b,a){this._addBefore(c,b,a)},addAfter:function(c,b,a){this._addAfter(c,b,a)},remove:function(a){this._remove(a)},removeAt:function(a){return this._removeAt(a)},removeAll:function(){return this._removeAll()}},statics:{remap:function(a){a.getChildren=a._getChildren;a.hasChildren=a._hasChildren;a.indexOf=a._indexOf;a.add=a._add;a.addAt=a._addAt;a.addBefore=a._addBefore;a.addAfter=a._addAfter;a.remove=a._remove;a.removeAt=a._removeAt;a.removeAll=a._removeAll}}});qx.Class.define("qx.ui.container.Composite",{extend:qx.ui.core.Widget,include:[qx.ui.core.MChildrenHandling,qx.ui.core.MLayoutHandling],construct:function(a){this.base(arguments);if(a!=null){this._setLayout(a)}},events:{addChildWidget:"qx.event.type.Data",removeChildWidget:"qx.event.type.Data"},members:{_afterAddChild:function(a){this.fireNonBubblingEvent("addChildWidget",qx.event.type.Data,[a])},_afterRemoveChild:function(a){this.fireNonBubblingEvent("removeChildWidget",qx.event.type.Data,[a])}},defer:function(b,a){qx.ui.core.MChildrenHandling.remap(a);qx.ui.core.MLayoutHandling.remap(a)}});qx.Mixin.define("qx.ui.core.MPlacement",{statics:{__visible:null,setVisibleElement:function(a){this.__visible=a},getVisibleElement:function(){return this.__visible}},properties:{position:{check:["top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"],init:"bottom-left",themeable:true},placeMethod:{check:["widget","mouse"],init:"mouse",themeable:true},domMove:{check:"Boolean",init:false},placementModeX:{check:["direct","keep-align","best-fit"],init:"keep-align",themeable:true},placementModeY:{check:["direct","keep-align","best-fit"],init:"keep-align",themeable:true},offsetLeft:{check:"Integer",init:0,themeable:true},offsetTop:{check:"Integer",init:0,themeable:true},offsetRight:{check:"Integer",init:0,themeable:true},offsetBottom:{check:"Integer",init:0,themeable:true},offset:{group:["offsetTop","offsetRight","offsetBottom","offsetLeft"],mode:"shorthand",themeable:true}},members:{__ptwLiveUpdater:null,__ptwLiveDisappearListener:null,__ptwLiveUpdateDisappearListener:null,getLayoutLocation:function(e){var b,d,g,f;d=e.getBounds();g=d.left;f=d.top;var c=d;e=e.getLayoutParent();while(e&&!e.isRootWidget()){d=e.getBounds();g+=d.left;f+=d.top;b=e.getInsets();g+=b.left;f+=b.top;e=e.getLayoutParent()}if(e.isRootWidget()){var a=e.getContainerLocation();if(a){g+=a.left;f+=a.top}}return{left:g,top:f,right:g+c.width,bottom:f+c.height}},moveTo:function(f,e){var g=qx.ui.core.MPlacement.getVisibleElement();if(g){var d=this.getBounds();var c=g.getContentLocation();if(d&&c){var a=e+d.height;var b=f+d.width;if((b>c.left&&f<c.right)&&(a>c.top&&e<c.bottom)){f=Math.max(c.left-d.width,0)}}}if(this.getDomMove()){this.setDomPosition(f,e)}else{this.setLayoutProperties({left:f,top:e})}},placeToWidget:function(c,a){if(a){this.__cleanupFromLastPlaceToWidgetLiveUpdate();this.__ptwLiveUpdater=qx.lang.Function.bind(this.placeToWidget,this,c,false);qx.event.Idle.getInstance().addListener("interval",this.__ptwLiveUpdater);this.__ptwLiveUpdateDisappearListener=function(){this.__cleanupFromLastPlaceToWidgetLiveUpdate()};this.addListener("disappear",this.__ptwLiveUpdateDisappearListener,this)}var b=c.getContainerLocation()||this.getLayoutLocation(c);this.__place(b)},__cleanupFromLastPlaceToWidgetLiveUpdate:function(){if(this.__ptwLiveUpdater){qx.event.Idle.getInstance().removeListener("interval",this.__ptwLiveUpdater);this.__ptwLiveUpdater=null}if(this.__ptwLiveUpdateDisappearListener){this.removeListener("disappear",this.__ptwLiveUpdateDisappearListener,this);this.__ptwLiveUpdateDisappearListener=null}},placeToMouse:function(a){var d=a.getDocumentLeft();var c=a.getDocumentTop();var b={left:d,top:c,right:d,bottom:c};this.__place(b)},placeToElement:function(c,b){var a=qx.bom.element.Location.get(c);var d={left:a.left,top:a.top,right:a.left+c.offsetWidth,bottom:a.top+c.offsetHeight};if(b){this.__ptwLiveUpdater=qx.lang.Function.bind(this.placeToElement,this,c,false);qx.event.Idle.getInstance().addListener("interval",this.__ptwLiveUpdater);this.addListener("disappear",function(){if(this.__ptwLiveUpdater){qx.event.Idle.getInstance().removeListener("interval",this.__ptwLiveUpdater);this.__ptwLiveUpdater=null}},this)}this.__place(d)},placeToPoint:function(a){var b={left:a.left,top:a.top,right:a.left,bottom:a.top};this.__place(b)},_getPlacementOffsets:function(){return{left:this.getOffsetLeft(),top:this.getOffsetTop(),right:this.getOffsetRight(),bottom:this.getOffsetBottom()}},__getPlacementSize:function(b){var a=null;if(this._computePlacementSize){var a=this._computePlacementSize()}else{if(this.isVisible()){var a=this.getBounds()}}if(a==null){this.addListenerOnce("appear",function(){this.__getPlacementSize(b)},this)}else{b.call(this,a)}},__place:function(a){this.__getPlacementSize(function(c){var b=qx.util.placement.Placement.compute(c,this.getLayoutParent().getBounds(),a,this._getPlacementOffsets(),this.getPosition(),this.getPlacementModeX(),this.getPlacementModeY());this.moveTo(b.left,b.top)})}},destruct:function(){this.__cleanupFromLastPlaceToWidgetLiveUpdate()}});qx.Class.define("qx.ui.popup.Popup",{extend:qx.ui.container.Composite,include:qx.ui.core.MPlacement,construct:function(a){this.base(arguments,a);this.initVisibility()},properties:{appearance:{refine:true,init:"popup"},visibility:{refine:true,init:"excluded"},autoHide:{check:"Boolean",init:true}},members:{show:function(){if(this.getLayoutParent()==null){qx.core.Init.getApplication().getRoot().add(this)}this.base(arguments)},_applyVisibility:function(c,a){this.base(arguments,c,a);var b=qx.ui.popup.Manager.getInstance();c==="visible"?b.add(this):b.remove(this)}},destruct:function(){qx.ui.popup.Manager.getInstance().remove(this)}});qx.Class.define("qx.ui.tooltip.ToolTip",{extend:qx.ui.popup.Popup,construct:function(a,b){this.base(arguments);this.setLayout(new qx.ui.layout.Grow);this._createChildControl("atom");if(a!=null){this.setLabel(a)}if(b!=null){this.setIcon(b)}this.addListener("mouseover",this._onMouseOver,this)},properties:{appearance:{refine:true,init:"tooltip"},showTimeout:{check:"Integer",init:700,themeable:true},hideTimeout:{check:"Integer",init:4000,themeable:true},label:{check:"String",nullable:true,apply:"_applyLabel"},icon:{check:"String",nullable:true,apply:"_applyIcon",themeable:true},rich:{check:"Boolean",init:false,apply:"_applyRich"},opener:{check:"qx.ui.core.Widget",nullable:true}},members:{_createChildControlImpl:function(c,b){var a;switch(c){case"atom":a=new qx.ui.basic.Atom;this._add(a);break}return a||this.base(arguments,c)},_onMouseOver:function(a){this.hide()},_applyIcon:function(c,a){var b=this.getChildControl("atom");c==null?b.resetIcon():b.setIcon(c)},_applyLabel:function(c,a){var b=this.getChildControl("atom");c==null?b.resetLabel():b.setLabel(c)},_applyRich:function(c,a){var b=this.getChildControl("atom");b.setRich(c)}}});qx.Class.define("qx.util.DeferredCallManager",{extend:qx.core.Object,type:"singleton",construct:function(){this.__calls={};this.__timeoutWrapper=qx.lang.Function.bind(this.__timeout,this);this.__hasCalls=false},members:{__timeoutId:null,__currentQueue:null,__calls:null,__hasCalls:null,__timeoutWrapper:null,schedule:function(b){if(this.__timeoutId==null){this.__timeoutId=window.setTimeout(this.__timeoutWrapper,0)}var a=b.toHashCode();if(this.__currentQueue&&this.__currentQueue[a]){return}this.__calls[a]=b;this.__hasCalls=true},cancel:function(b){var a=b.toHashCode();if(this.__currentQueue&&this.__currentQueue[a]){this.__currentQueue[a]=null;return}delete this.__calls[a];if(qx.lang.Object.isEmpty(this.__calls)&&this.__timeoutId!=null){window.clearTimeout(this.__timeoutId);this.__timeoutId=null}},__timeout:qx.event.GlobalError.observeMethod(function(){this.__timeoutId=null;while(this.__hasCalls){this.__currentQueue=qx.lang.Object.clone(this.__calls);this.__calls={};this.__hasCalls=false;for(var a in this.__currentQueue){var b=this.__currentQueue[a];if(b){this.__currentQueue[a]=null;b.call()}}}this.__currentQueue=null})},destruct:function(){if(this.__timeoutId!=null){window.clearTimeout(this.__timeoutId)}this.__timeoutWrapper=this.__calls=null}});qx.Class.define("qx.util.DeferredCall",{extend:qx.core.Object,construct:function(b,a){this.base(arguments);this.__callback=b;this.__context=a||null;this.__manager=qx.util.DeferredCallManager.getInstance()},members:{__callback:null,__context:null,__manager:null,cancel:function(){this.__manager.cancel(this)},schedule:function(){this.__manager.schedule(this)},call:function(){if(qx.core.Environment.get("qx.debug")){var a=this.__context;if(a&&a.isDisposed&&a.isDisposed()){this.warn("The context object '"+a+"' of the defered call '"+this+"'is already disposed.")}}this.__context?this.__callback.apply(this.__context):this.__callback()}},destruct:function(b,a){this.cancel();this.__context=this.__callback=this.__manager=null}});qx.Class.define("qx.html.Element",{extend:qx.core.Object,construct:function(b,c,a){this.base(arguments);this.__nodeName=b||"div";this.__styleValues=c||null;this.__attribValues=a||null},statics:{DEBUG:false,_modified:{},_visibility:{},_scroll:{},_actions:[],__selection:{},_scheduleFlush:function(a){qx.html.Element.__deferredCall.schedule()},flush:function(){var m;if(qx.core.Environment.get("qx.debug")){if(this.DEBUG){qx.log.Logger.debug(this,"Flushing elements...")}}var d=this.__getFocusHandler();var q=d.getFocus();if(q&&this.__willBecomeInvisible(q)){d.blur(q)}var f=d.getActive();if(f&&this.__willBecomeInvisible(f)){qx.bom.Element.deactivate(f)}var k=this.__getCaptureElement();if(k&&this.__willBecomeInvisible(k)){qx.bom.Element.releaseCapture(k)}var e=[];var j=this._modified;for(var g in j){m=j[g];if(m.__willBeSeeable()){if(m.__element&&qx.dom.Hierarchy.isRendered(m.__element)){e.push(m)}else{if(qx.core.Environment.get("qx.debug")){if(this.DEBUG){m.debug("Flush invisible element")}}m.__flush()}delete j[g]}}for(var u=0,p=e.length;u<p;u++){m=e[u];if(qx.core.Environment.get("qx.debug")){if(this.DEBUG){m.debug("Flush rendered element")}}m.__flush()}var v=this._visibility;for(var g in v){m=v[g];var b=m.__element;if(!b){delete v[g];continue}if(qx.core.Environment.get("qx.debug")){if(this.DEBUG){qx.log.Logger.debug(this,"Switching visibility to: "+m.__visible)}}if(!m.$$disposed){b.style.display=m.__visible?"":"none";if((qx.core.Environment.get("engine.name")=="mshtml")){if(!(document.documentMode>=8)){b.style.visibility=m.__visible?"visible":"hidden"}}}delete v[g]}var a=this._scroll;for(var g in a){m=a[g];var w=m.__element;if(w&&w.offsetWidth){var n=true;if(m.__lazyScrollX!=null){m.__element.scrollLeft=m.__lazyScrollX;delete m.__lazyScrollX}if(m.__lazyScrollY!=null){m.__element.scrollTop=m.__lazyScrollY;delete m.__lazyScrollY}var t=m.__lazyScrollIntoViewX;if(t!=null){var h=t.element.getDomElement();if(h&&h.offsetWidth){qx.bom.element.Scroll.intoViewX(h,w,t.align);delete m.__lazyScrollIntoViewX}else{n=false}}var s=m.__lazyScrollIntoViewY;if(s!=null){var h=s.element.getDomElement();if(h&&h.offsetWidth){qx.bom.element.Scroll.intoViewY(h,w,s.align);delete m.__lazyScrollIntoViewY}else{n=false}}if(n){delete a[g]}}}var o={releaseCapture:1,blur:1,deactivate:1};for(var u=0;u<this._actions.length;u++){var r=this._actions[u];var b=r.element.__element;if(!b||!o[r.type]&&!r.element.__willBeSeeable()){continue}var c=r.args;c.unshift(b);qx.bom.Element[r.type].apply(qx.bom.Element,c)}this._actions=[];for(var g in this.__selection){var x=this.__selection[g];var w=x.element.__element;if(w){qx.bom.Selection.set(w,x.start,x.end);delete this.__selection[g]}}qx.event.handler.Appear.refresh()},__getFocusHandler:function(){if(!this.__focusHandler){var a=qx.event.Registration.getManager(window);this.__focusHandler=a.getHandler(qx.event.handler.Focus)}return this.__focusHandler},__getCaptureElement:function(){if(!this.__mouseCapture){var a=qx.event.Registration.getManager(window);this.__mouseCapture=a.getDispatcher(qx.event.dispatch.MouseCapture)}return this.__mouseCapture.getCaptureElement()},__willBecomeInvisible:function(b){var a=qx.core.ObjectRegistry.fromHashCode(b.$$element);return a&&!a.__willBeSeeable()}},members:{__nodeName:null,__element:null,__root:false,__included:true,__visible:true,__lazyScrollIntoViewX:null,__lazyScrollIntoViewY:null,__lazyScrollX:null,__lazyScrollY:null,__styleJobs:null,__attribJobs:null,__propertyJobs:null,__styleValues:null,__attribValues:null,__propertyValues:null,__eventValues:null,__children:null,__modifiedChildren:null,__parent:null,_scheduleChildrenUpdate:function(){if(this.__modifiedChildren){return}this.__modifiedChildren=true;qx.html.Element._modified[this.$$hash]=this;qx.html.Element._scheduleFlush("element")},_createDomElement:function(){return qx.bom.Element.create(this.__nodeName)},__flush:function(){if(qx.core.Environment.get("qx.debug")){if(this.DEBUG){this.debug("Flush: "+this.getAttribute("id"))}}var c;var b=this.__children;if(b){c=b.length;var d;for(var a=0;a<c;a++){d=b[a];if(d.__visible&&d.__included&&!d.__element){d.__flush()}}}if(!this.__element){this.__element=this._createDomElement();this.__element.$$element=this.$$hash;this._copyData(false);if(b&&c>0){this._insertChildren()}}else{this._syncData();if(this.__modifiedChildren){this._syncChildren()}}delete this.__modifiedChildren},_insertChildren:function(){var b=this.__children;var c=b.length;var e;if(c>2){var d=document.createDocumentFragment();for(var a=0;a<c;a++){e=b[a];if(e.__element&&e.__included){d.appendChild(e.__element)}}this.__element.appendChild(d)}else{var d=this.__element;for(var a=0;a<c;a++){e=b[a];if(e.__element&&e.__included){d.appendChild(e.__element)}}}},_syncChildren:function(){var c=qx.core.ObjectRegistry;var l=this.__children;var a=l.length;var f;var d;var h=this.__element;var j=h.childNodes;var e=0;var b;if(qx.core.Environment.get("qx.debug")){var k=0}for(var g=j.length-1;g>=0;g--){b=j[g];d=c.fromHashCode(b.$$element);if(!d||!d.__included||d.__parent!==this){h.removeChild(b);if(qx.core.Environment.get("qx.debug")){k++}}}for(var g=0;g<a;g++){f=l[g];if(f.__included){d=f.__element;b=j[e];if(!d){continue}if(d!=b){if(b){h.insertBefore(d,b)}else{h.appendChild(d)}if(qx.core.Environment.get("qx.debug")){k++}}e++}}if(qx.core.Environment.get("qx.debug")){if(qx.html.Element.DEBUG){this.debug("Synced DOM with "+k+" operations")}}},_copyData:function(f){var d=this.__element;var e=this.__attribValues;if(e){var c=qx.bom.element.Attribute;for(var b in e){c.set(d,b,e[b])}}var e=this.__styleValues;if(e){var a=qx.bom.element.Style;if(f){a.setStyles(d,e)}else{a.setCss(d,a.compile(e))}}var e=this.__propertyValues;if(e){for(var b in e){this._applyProperty(b,e[b])}}var e=this.__eventValues;if(e){qx.event.Registration.getManager(d).importListeners(d,e);delete this.__eventValues}},_syncData:function(){var f=this.__element;var d=qx.bom.element.Attribute;var b=qx.bom.element.Style;var a=this.__attribJobs;if(a){var h=this.__attribValues;if(h){var g;for(var c in a){g=h[c];if(g!==undefined){d.set(f,c,g)}else{d.reset(f,c)}}}this.__attribJobs=null}var a=this.__styleJobs;if(a){var h=this.__styleValues;if(h){var e={};for(var c in a){e[c]=h[c]}b.setStyles(f,e)}this.__styleJobs=null}var a=this.__propertyJobs;if(a){var h=this.__propertyValues;if(h){var g;for(var c in a){this._applyProperty(c,h[c])}}this.__propertyJobs=null}},__willBeSeeable:function(){var a=this;while(a){if(a.__root){return true}if(!a.__included||!a.__visible){return false}a=a.__parent}return false},__addChildHelper:function(a){if(a.__parent===this){throw new Error("Child is already in: "+a)}if(a.__root){throw new Error("Root elements could not be inserted into other ones.")}if(a.__parent){a.__parent.remove(a)}a.__parent=this;if(!this.__children){this.__children=[]}if(this.__element){this._scheduleChildrenUpdate()}},__removeChildHelper:function(a){if(a.__parent!==this){throw new Error("Has no child: "+a)}if(this.__element){this._scheduleChildrenUpdate()}delete a.__parent},__moveChildHelper:function(a){if(a.__parent!==this){throw new Error("Has no child: "+a)}if(this.__element){this._scheduleChildrenUpdate()}},getChildren:function(){return this.__children||null},getChild:function(a){var b=this.__children;return b&&b[a]||null},hasChildren:function(){var a=this.__children;return a&&a[0]!==undefined},indexOf:function(b){var a=this.__children;return a?a.indexOf(b):-1},hasChild:function(b){var a=this.__children;return a&&a.indexOf(b)!==-1},add:function(b){if(arguments[1]){for(var c=0,a=arguments.length;c<a;c++){this.__addChildHelper(arguments[c])}this.__children.push.apply(this.__children,arguments)}else{this.__addChildHelper(b);this.__children.push(b)}return this},addAt:function(b,a){this.__addChildHelper(b);qx.lang.Array.insertAt(this.__children,b,a);return this},remove:function(d){var c=this.__children;if(!c){return}if(arguments[1]){var e;for(var b=0,a=arguments.length;b<a;b++){e=arguments[b];this.__removeChildHelper(e);qx.lang.Array.remove(c,e)}}else{this.__removeChildHelper(d);qx.lang.Array.remove(c,d)}return this},removeAt:function(a){var b=this.__children;if(!b){throw new Error("Has no children!")}var c=b[a];if(!c){throw new Error("Has no child at this position!")}this.__removeChildHelper(c);qx.lang.Array.removeAt(this.__children,a);return this},removeAll:function(){var c=this.__children;if(c){for(var b=0,a=c.length;b<a;b++){this.__removeChildHelper(c[b])}c.length=0}return this},getParent:function(){return this.__parent||null},insertInto:function(b,a){b.__addChildHelper(this);if(a==null){b.__children.push(this)}else{qx.lang.Array.insertAt(this.__children,this,a)}return this},insertBefore:function(a){var b=a.__parent;b.__addChildHelper(this);qx.lang.Array.insertBefore(b.__children,this,a);return this},insertAfter:function(a){var b=a.__parent;b.__addChildHelper(this);qx.lang.Array.insertAfter(b.__children,this,a);return this},moveTo:function(a){var b=this.__parent;b.__moveChildHelper(this);var c=b.__children.indexOf(this);if(c===a){throw new Error("Could not move to same index!")}else{if(c<a){a--}}qx.lang.Array.removeAt(b.__children,c);qx.lang.Array.insertAt(b.__children,this,a);return this},moveBefore:function(a){var b=this.__parent;return this.moveTo(b.__children.indexOf(a))},moveAfter:function(a){var b=this.__parent;return this.moveTo(b.__children.indexOf(a)+1)},free:function(){var a=this.__parent;if(!a){throw new Error("Has no parent to remove from.")}if(!a.__children){return}a.__removeChildHelper(this);qx.lang.Array.remove(a.__children,this);return this},getDomElement:function(){return this.__element||null},getNodeName:function(){return this.__nodeName},setNodeName:function(a){this.__nodeName=a},setRoot:function(a){this.__root=a},useMarkup:function(a){if(this.__element){throw new Error("Could not overwrite existing element!")}if((qx.core.Environment.get("engine.name")=="mshtml")){var b=document.createElement("div")}else{var b=qx.bom.Element.getHelperElement()}b.innerHTML=a;this.useElement(b.firstChild);return this.__element},useElement:function(a){if(this.__element){throw new Error("Could not overwrite existing element!")}this.__element=a;this.__element.$$element=this.$$hash;this._copyData(true)},isFocusable:function(){var a=this.getAttribute("tabIndex");if(a>=1){return true}var b=qx.event.handler.Focus.FOCUSABLE_ELEMENTS;if(a>=0&&b[this.__nodeName]){return true}return false},setSelectable:qx.core.Environment.select("engine.name",{webkit:function(a){this.setAttribute("qxSelectable",a?"on":"off");this.setStyle("userSelect",a?"text":"none")},gecko:function(a){this.setAttribute("qxSelectable",a?"on":"off");this.setStyle("MozUserSelect",a?"text":"-moz-none")},"default":function(a){this.setAttribute("qxSelectable",a?"on":"off")}}),isNativelyFocusable:function(){return !!qx.event.handler.Focus.FOCUSABLE_ELEMENTS[this.__nodeName]},include:function(){if(this.__included){return}delete this.__included;if(this.__parent){this.__parent._scheduleChildrenUpdate()}return this},exclude:function(){if(!this.__included){return}this.__included=false;if(this.__parent){this.__parent._scheduleChildrenUpdate()}return this},isIncluded:function(){return this.__included===true},show:function(){if(this.__visible){return}if(this.__element){qx.html.Element._visibility[this.$$hash]=this;qx.html.Element._scheduleFlush("element")}if(this.__parent){this.__parent._scheduleChildrenUpdate()}delete this.__visible},hide:function(){if(!this.__visible){return}if(this.__element){qx.html.Element._visibility[this.$$hash]=this;qx.html.Element._scheduleFlush("element")}this.__visible=false},isVisible:function(){return this.__visible===true},scrollChildIntoViewX:function(c,e,d){var b=this.__element;var a=c.getDomElement();if(d!==false&&b&&b.offsetWidth&&a&&a.offsetWidth){qx.bom.element.Scroll.intoViewX(a,b,e)}else{this.__lazyScrollIntoViewX={element:c,align:e};qx.html.Element._scroll[this.$$hash]=this;qx.html.Element._scheduleFlush("element")}delete this.__lazyScrollX},scrollChildIntoViewY:function(c,e,d){var b=this.__element;var a=c.getDomElement();if(d!==false&&b&&b.offsetWidth&&a&&a.offsetWidth){qx.bom.element.Scroll.intoViewY(a,b,e)}else{this.__lazyScrollIntoViewY={element:c,align:e};qx.html.Element._scroll[this.$$hash]=this;qx.html.Element._scheduleFlush("element")}delete this.__lazyScrollY},scrollToX:function(a,b){var c=this.__element;if(b!==true&&c&&c.offsetWidth){c.scrollLeft=a;delete this.__lazyScrollX}else{this.__lazyScrollX=a;qx.html.Element._scroll[this.$$hash]=this;qx.html.Element._scheduleFlush("element")}delete this.__lazyScrollIntoViewX},getScrollX:function(){var a=this.__element;if(a){return a.scrollLeft}return this.__lazyScrollX||0},scrollToY:function(c,a){var b=this.__element;if(a!==true&&b&&b.offsetWidth){b.scrollTop=c;delete this.__lazyScrollY}else{this.__lazyScrollY=c;qx.html.Element._scroll[this.$$hash]=this;qx.html.Element._scheduleFlush("element")}delete this.__lazyScrollIntoViewY},getScrollY:function(){var a=this.__element;if(a){return a.scrollTop}return this.__lazyScrollY||0},disableScrolling:function(){this.enableScrolling();this.scrollToX(0);this.scrollToY(0);this.addListener("scroll",this.__onScroll,this)},enableScrolling:function(){this.removeListener("scroll",this.__onScroll,this)},__inScroll:null,__onScroll:function(a){if(!this.__inScroll){this.__inScroll=true;this.__element.scrollTop=0;this.__element.scrollLeft=0;delete this.__inScroll}},getTextSelection:function(){var a=this.__element;if(a){return qx.bom.Selection.get(a)}return null},getTextSelectionLength:function(){var a=this.__element;if(a){return qx.bom.Selection.getLength(a)}return null},getTextSelectionStart:function(){var a=this.__element;if(a){return qx.bom.Selection.getStart(a)}return null},getTextSelectionEnd:function(){var a=this.__element;if(a){return qx.bom.Selection.getEnd(a)}return null},setTextSelection:function(c,a){var b=this.__element;if(b){qx.bom.Selection.set(b,c,a);return}qx.html.Element.__selection[this.toHashCode()]={element:this,start:c,end:a};qx.html.Element._scheduleFlush("element")},clearTextSelection:function(){var a=this.__element;if(a){qx.bom.Selection.clear(a)}delete qx.html.Element.__selection[this.toHashCode()]},__performAction:function(b,a){var c=qx.html.Element._actions;c.push({type:b,element:this,args:a||[]});qx.html.Element._scheduleFlush("element")},focus:function(){this.__performAction("focus")},blur:function(){this.__performAction("blur")},activate:function(){this.__performAction("activate")},deactivate:function(){this.__performAction("deactivate")},capture:function(a){this.__performAction("capture",[a!==false])},releaseCapture:function(){this.__performAction("releaseCapture")},setStyle:function(a,b,c){if(!this.__styleValues){this.__styleValues={}}if(this.__styleValues[a]==b){return}if(b==null){delete this.__styleValues[a]}else{this.__styleValues[a]=b}if(this.__element){if(c){qx.bom.element.Style.set(this.__element,a,b);return this}if(!this.__styleJobs){this.__styleJobs={}}this.__styleJobs[a]=true;qx.html.Element._modified[this.$$hash]=this;qx.html.Element._scheduleFlush("element")}return this},setStyles:function(d,e){var a=qx.bom.element.Style;if(!this.__styleValues){this.__styleValues={}}if(this.__element){if(!this.__styleJobs){this.__styleJobs={}}for(var b in d){var c=d[b];if(this.__styleValues[b]==c){continue}if(c==null){delete this.__styleValues[b]}else{this.__styleValues[b]=c}if(e){a.set(this.__element,b,c);continue}this.__styleJobs[b]=true}qx.html.Element._modified[this.$$hash]=this;qx.html.Element._scheduleFlush("element")}else{for(var b in d){var c=d[b];if(this.__styleValues[b]==c){continue}if(c==null){delete this.__styleValues[b]}else{this.__styleValues[b]=c}}}return this},removeStyle:function(a,b){this.setStyle(a,null,b)},getStyle:function(a){return this.__styleValues?this.__styleValues[a]:null},getAllStyles:function(){return this.__styleValues||null},setAttribute:function(a,b,c){if(!this.__attribValues){this.__attribValues={}}if(this.__attribValues[a]==b){return}if(b==null){delete this.__attribValues[a]}else{this.__attribValues[a]=b}if(this.__element){if(c){qx.bom.element.Attribute.set(this.__element,a,b);return this}if(!this.__attribJobs){this.__attribJobs={}}this.__attribJobs[a]=true;qx.html.Element._modified[this.$$hash]=this;qx.html.Element._scheduleFlush("element")}return this},setAttributes:function(b,c){for(var a in b){this.setAttribute(a,b[a],c)}return this},removeAttribute:function(a,b){this.setAttribute(a,null,b)},getAttribute:function(a){return this.__attribValues?this.__attribValues[a]:null},_applyProperty:function(a,b){},_setProperty:function(a,b,c){if(!this.__propertyValues){this.__propertyValues={}}if(this.__propertyValues[a]==b){return}if(b==null){delete this.__propertyValues[a]}else{this.__propertyValues[a]=b}if(this.__element){if(c){this._applyProperty(a,b);return this}if(!this.__propertyJobs){this.__propertyJobs={}}this.__propertyJobs[a]=true;qx.html.Element._modified[this.$$hash]=this;qx.html.Element._scheduleFlush("element")}return this},_removeProperty:function(a,b){this._setProperty(a,null,b)},_getProperty:function(b){var a=this.__propertyValues;if(!a){return null}var c=a[b];return c==null?null:c},addListener:function(c,d,b,a){if(this.$$disposed){return null}if(qx.core.Environment.get("qx.debug")){var f="Failed to add event listener for type '"+c+"' to the target '"+this+"': ";this.assertString(c,f+"Invalid event type.");this.assertFunction(d,f+"Invalid callback function");if(b!==undefined){this.assertObject(b,"Invalid context for callback.")}if(a!==undefined){this.assertBoolean(a,"Invalid capture flag.")}}if(this.__element){return qx.event.Registration.addListener(this.__element,c,d,b,a)}if(!this.__eventValues){this.__eventValues={}}if(a==null){a=false}var e=qx.event.Manager.getNextUniqueId();var g=c+(a?"|capture|":"|bubble|")+e;this.__eventValues[g]={type:c,listener:d,self:b,capture:a,unique:e};return g},removeListener:function(e,g,c,b){if(this.$$disposed){return null}if(qx.core.Environment.get("qx.debug")){var h="Failed to remove event listener for type '"+e+"' from the target '"+this+"': ";this.assertString(e,h+"Invalid event type.");this.assertFunction(g,h+"Invalid callback function");if(c!==undefined){this.assertObject(c,"Invalid context for callback.")}if(b!==undefined){this.assertBoolean(b,"Invalid capture flag.")}}if(this.__element){qx.event.Registration.removeListener(this.__element,e,g,c,b)}else{var a=this.__eventValues;var f;if(b==null){b=false}for(var d in a){f=a[d];if(f.listener===g&&f.self===c&&f.capture===b&&f.type===e){delete a[d];break}}}return this},removeListenerById:function(a){if(this.$$disposed){return null}if(this.__element){qx.event.Registration.removeListenerById(this.__element,a)}else{delete this.__eventValues[a]}return this},hasListener:function(d,b){if(this.$$disposed){return false}if(this.__element){return qx.event.Registration.hasListener(this.__element,d,b)}var a=this.__eventValues;var e;if(b==null){b=false}for(var c in a){e=a[c];if(e.capture===b&&e.type===d){return true}}return false}},defer:function(a){a.__deferredCall=new qx.util.DeferredCall(a.flush,a)},destruct:function(){var b=this.__element;if(b){qx.event.Registration.getManager(b).removeAllListeners(b);b.$$element=""}if(!qx.core.ObjectRegistry.inShutDown){var a=this.__parent;if(a&&!a.$$disposed){a.remove(this)}}this._disposeArray("__children");this.__attribValues=this.__styleValues=this.__eventValues=this.__propertyValues=this.__attribJobs=this.__styleJobs=this.__propertyJobs=this.__element=this.__parent=this.__lazyScrollIntoViewX=this.__lazyScrollIntoViewY=null}});qx.Class.define("qx.html.Decorator",{extend:qx.html.Element,construct:function(b,a){var c={position:"absolute",top:0,left:0};if(qx.core.Environment.get("event.pointer")){c.pointerEvents="none"}this.base(arguments,null,c);this.__decorator=b;this.__id=a||b.toHashCode();this.useMarkup(b.getMarkup())},members:{__id:null,__decorator:null,getId:function(){return this.__id},getDecorator:function(){return this.__decorator},resize:function(b,a){this.__decorator.resize(this.getDomElement(),b,a)},tint:function(a){this.__decorator.tint(this.getDomElement(),a)},getInsets:function(){return this.__decorator.getInsets()}},destruct:function(){this.__decorator=null}});qx.Class.define("qx.event.handler.Appear",{extend:qx.core.Object,implement:qx.event.IEventHandler,construct:function(a){this.base(arguments);this.__manager=a;this.__targets={};qx.event.handler.Appear.__instances[this.$$hash]=this},statics:{PRIORITY:qx.event.Registration.PRIORITY_NORMAL,SUPPORTED_TYPES:{appear:true,disappear:true},TARGET_CHECK:qx.event.IEventHandler.TARGET_DOMNODE,IGNORE_CAN_HANDLE:true,__instances:{},refresh:function(){var a=this.__instances;for(var b in a){a[b].refresh()}}},members:{__manager:null,__targets:null,canHandleEvent:function(b,a){},registerEvent:function(e,c,b){var d=qx.core.ObjectRegistry.toHashCode(e)+c;var a=this.__targets;if(a&&!a[d]){a[d]=e;e.$$displayed=e.offsetWidth>0}},unregisterEvent:function(e,c,b){var d=qx.core.ObjectRegistry.toHashCode(e)+c;var a=this.__targets;if(!a){return}if(a[d]){delete a[d]}},refresh:function(){var b=this.__targets;var d;for(var e in b){d=b[e];var c=d.offsetWidth>0;if((!!d.$$displayed)!==c){d.$$displayed=c;var a=qx.event.Registration.createEvent(c?"appear":"disappear");this.__manager.dispatchEvent(d,a)}}}},destruct:function(){this.__manager=this.__targets=null;delete qx.event.handler.Appear.__instances[this.$$hash]},defer:function(a){qx.event.Registration.addHandler(a)}});qx.Class.define("qx.event.dispatch.AbstractBubbling",{extend:qx.core.Object,implement:qx.event.IEventDispatcher,type:"abstract",construct:function(a){this._manager=a},members:{_getParent:function(a){throw new Error("Missing implementation")},canDispatchEvent:function(c,b,a){return b.getBubbles()},dispatchEvent:function(u,p,d){var h=u;var l=this._manager;var n,a;var b;var e,c;var v;var f=[];n=l.getListeners(u,d,true);a=l.getListeners(u,d,false);if(n){f.push(n)}if(a){f.push(a)}var h=this._getParent(u);var m=[];var s=[];var g=[];var t=[];while(h!=null){n=l.getListeners(h,d,true);if(n){g.push(n);t.push(h)}a=l.getListeners(h,d,false);if(a){m.push(a);s.push(h)}h=this._getParent(h)}p.setEventPhase(qx.event.type.Event.CAPTURING_PHASE);for(var q=g.length-1;q>=0;q--){v=t[q];p.setCurrentTarget(v);b=g[q];for(var o=0,r=b.length;o<r;o++){e=b[o];c=e.context||v;if(qx.core.Environment.get("qx.debug")){if(c&&c.isDisposed&&c.isDisposed()){this.warn("The context object '"+c+"' for the event '"+d+"' of '"+v+"'is already disposed.")}}e.handler.call(c,p)}if(p.getPropagationStopped()){return}}p.setEventPhase(qx.event.type.Event.AT_TARGET);p.setCurrentTarget(u);for(var q=0,k=f.length;q<k;q++){b=f[q];for(var o=0,r=b.length;o<r;o++){e=b[o];c=e.context||u;if(qx.core.Environment.get("qx.debug")){if(c&&c.isDisposed&&c.isDisposed()){this.warn("The context object '"+c+"' for the event '"+d+"' of '"+u+"'is already disposed.")}}e.handler.call(c,p)}if(p.getPropagationStopped()){return}}p.setEventPhase(qx.event.type.Event.BUBBLING_PHASE);for(var q=0,k=m.length;q<k;q++){v=s[q];p.setCurrentTarget(v);b=m[q];for(var o=0,r=b.length;o<r;o++){e=b[o];c=e.context||v;if(qx.core.Environment.get("qx.debug")){if(c&&c.isDisposed&&c.isDisposed()){this.warn("The context object '"+c+"' for the event '"+d+"' of '"+v+"'is already disposed.")}}e.handler.call(c,p)}if(p.getPropagationStopped()){return}}}}});qx.Class.define("qx.event.dispatch.DomBubbling",{extend:qx.event.dispatch.AbstractBubbling,statics:{PRIORITY:qx.event.Registration.PRIORITY_NORMAL},members:{_getParent:function(a){return a.parentNode},canDispatchEvent:function(c,b,a){return c.nodeType!==undefined&&b.getBubbles()}},defer:function(a){qx.event.Registration.addDispatcher(a)}});qx.Class.define("qx.event.handler.Element",{extend:qx.core.Object,implement:qx.event.IEventHandler,construct:function(a){this.base(arguments);this._manager=a;this._registeredEvents={}},statics:{PRIORITY:qx.event.Registration.PRIORITY_NORMAL,SUPPORTED_TYPES:{abort:true,load:true,scroll:true,select:true,reset:true,submit:true},CANCELABLE:{selectstart:true},TARGET_CHECK:qx.event.IEventHandler.TARGET_DOMNODE,IGNORE_CAN_HANDLE:false},members:{canHandleEvent:function(b,a){if(a==="load"){return b.tagName.toLowerCase()!=="iframe"}else{return true}},registerEvent:function(f,d,b){var a=qx.core.ObjectRegistry.toHashCode(f);var c=a+"-"+d;var e=qx.lang.Function.listener(this._onNative,this,c);qx.bom.Event.addNativeListener(f,d,e);this._registeredEvents[c]={element:f,type:d,listener:e}},unregisterEvent:function(g,e,b){var c=this._registeredEvents;if(!c){return}var a=qx.core.ObjectRegistry.toHashCode(g);var d=a+"-"+e;var f=this._registeredEvents[d];if(f){qx.bom.Event.removeNativeListener(g,e,f.listener)}delete this._registeredEvents[d]},_onNative:qx.event.GlobalError.observeMethod(function(a,c){var b=this._registeredEvents;if(!b){return}var d=b[c];var e=this.constructor.CANCELABLE[d.type];qx.event.Registration.fireNonBubblingEvent(d.element,d.type,qx.event.type.Native,[a,undefined,undefined,undefined,e])})},destruct:function(){var b;var a=this._registeredEvents;for(var c in a){b=a[c];qx.bom.Event.removeNativeListener(b.element,b.type,b.listener)}this._manager=this._registeredEvents=null},defer:function(a){qx.event.Registration.addHandler(a)}});qx.Class.define("qx.event.handler.UserAction",{extend:qx.core.Object,implement:qx.event.IEventHandler,construct:function(a){this.base(arguments);this.__manager=a;this.__window=a.getWindow()},statics:{PRIORITY:qx.event.Registration.PRIORITY_NORMAL,SUPPORTED_TYPES:{useraction:1},TARGET_CHECK:qx.event.IEventHandler.TARGET_WINDOW,IGNORE_CAN_HANDLE:true},members:{__manager:null,__window:null,canHandleEvent:function(b,a){},registerEvent:function(c,b,a){},unregisterEvent:function(c,b,a){}},destruct:function(){this.__manager=this.__window=null},defer:function(a){qx.event.Registration.addHandler(a)}});qx.Class.define("qx.event.handler.Mouse",{extend:qx.core.Object,implement:qx.event.IEventHandler,construct:function(a){this.base(arguments);this.__manager=a;this.__window=a.getWindow();this.__root=this.__window.document;this._initButtonObserver();this._initMoveObserver();this._initWheelObserver()},statics:{PRIORITY:qx.event.Registration.PRIORITY_NORMAL,SUPPORTED_TYPES:{mousemove:1,mouseover:1,mouseout:1,mousedown:1,mouseup:1,click:1,dblclick:1,contextmenu:1,mousewheel:1},TARGET_CHECK:qx.event.IEventHandler.TARGET_DOMNODE+qx.event.IEventHandler.TARGET_DOCUMENT+qx.event.IEventHandler.TARGET_WINDOW,IGNORE_CAN_HANDLE:true},members:{__onButtonEventWrapper:null,__onMoveEventWrapper:null,__onWheelEventWrapper:null,__lastEventType:null,__lastMouseDownTarget:null,__manager:null,__window:null,__root:null,canHandleEvent:function(b,a){},registerEvent:qx.core.Environment.get("os.name")==="ios"?function(c,b,a){c["on"+b]=qx.lang.Function.returnNull}:qx.lang.Function.returnNull,unregisterEvent:qx.core.Environment.get("os.name")==="ios"?function(c,b,a){c["on"+b]=undefined}:qx.lang.Function.returnNull,__fireEvent:function(b,a,c){if(!c){c=qx.bom.Event.getTarget(b)}if(c&&c.nodeType){qx.event.Registration.fireEvent(c,a||b.type,a=="mousewheel"?qx.event.type.MouseWheel:qx.event.type.Mouse,[b,c,null,true,true])}qx.event.Registration.fireEvent(this.__window,"useraction",qx.event.type.Data,[a||b.type])},__getMouseWheelTarget:function(){var a=[this.__window,this.__root,this.__root.body];var d=this.__window;var c="DOMMouseScroll";for(var b=0;b<a.length;b++){if(qx.bom.Event.supportsEvent(a[b],"mousewheel")){c="mousewheel";d=a[b];break}}return{type:c,target:d}},_initButtonObserver:function(){this.__onButtonEventWrapper=qx.lang.Function.listener(this._onButtonEvent,this);var a=qx.bom.Event;a.addNativeListener(this.__root,"mousedown",this.__onButtonEventWrapper);a.addNativeListener(this.__root,"mouseup",this.__onButtonEventWrapper);a.addNativeListener(this.__root,"click",this.__onButtonEventWrapper);a.addNativeListener(this.__root,"dblclick",this.__onButtonEventWrapper);a.addNativeListener(this.__root,"contextmenu",this.__onButtonEventWrapper)},_initMoveObserver:function(){this.__onMoveEventWrapper=qx.lang.Function.listener(this._onMoveEvent,this);var a=qx.bom.Event;a.addNativeListener(this.__root,"mousemove",this.__onMoveEventWrapper);a.addNativeListener(this.__root,"mouseover",this.__onMoveEventWrapper);a.addNativeListener(this.__root,"mouseout",this.__onMoveEventWrapper)},_initWheelObserver:function(){this.__onWheelEventWrapper=qx.lang.Function.listener(this._onWheelEvent,this);var a=this.__getMouseWheelTarget();qx.bom.Event.addNativeListener(a.target,a.type,this.__onWheelEventWrapper)},_stopButtonObserver:function(){var a=qx.bom.Event;a.removeNativeListener(this.__root,"mousedown",this.__onButtonEventWrapper);a.removeNativeListener(this.__root,"mouseup",this.__onButtonEventWrapper);a.removeNativeListener(this.__root,"click",this.__onButtonEventWrapper);a.removeNativeListener(this.__root,"dblclick",this.__onButtonEventWrapper);a.removeNativeListener(this.__root,"contextmenu",this.__onButtonEventWrapper)},_stopMoveObserver:function(){var a=qx.bom.Event;a.removeNativeListener(this.__root,"mousemove",this.__onMoveEventWrapper);a.removeNativeListener(this.__root,"mouseover",this.__onMoveEventWrapper);a.removeNativeListener(this.__root,"mouseout",this.__onMoveEventWrapper)},_stopWheelObserver:function(){var a=this.__getMouseWheelTarget();qx.bom.Event.removeNativeListener(a.target,a.type,this.__onWheelEventWrapper)},_onMoveEvent:qx.event.GlobalError.observeMethod(function(a){this.__fireEvent(a)}),_onButtonEvent:qx.event.GlobalError.observeMethod(function(b){var a=b.type;var c=qx.bom.Event.getTarget(b);if(qx.core.Environment.get("engine.name")=="gecko"||qx.core.Environment.get("engine.name")=="webkit"){if(c&&c.nodeType==3){c=c.parentNode}}if(this.__rightClickFixPre){this.__rightClickFixPre(b,a,c)}if(this.__doubleClickFixPre){this.__doubleClickFixPre(b,a,c)}this.__fireEvent(b,a,c);if(this.__rightClickFixPost){this.__rightClickFixPost(b,a,c)}if(this.__differentTargetClickFixPost){this.__differentTargetClickFixPost(b,a,c)}this.__lastEventType=a}),_onWheelEvent:qx.event.GlobalError.observeMethod(function(a){this.__fireEvent(a,"mousewheel")}),__rightClickFixPre:qx.core.Environment.select("engine.name",{webkit:function(b,a,c){if(parseFloat(qx.core.Environment.get("engine.version"))<530){if(a=="contextmenu"){this.__fireEvent(b,"mouseup",c)}}},"default":null}),__rightClickFixPost:qx.core.Environment.select("engine.name",{opera:function(b,a,c){if(a=="mouseup"&&b.button==2){this.__fireEvent(b,"contextmenu",c)}},"default":null}),__doubleClickFixPre:qx.core.Environment.select("engine.name",{mshtml:function(b,a,c){if(b.target!==undefined){return}if(a=="mouseup"&&this.__lastEventType=="click"){this.__fireEvent(b,"mousedown",c)}else{if(a=="dblclick"){this.__fireEvent(b,"click",c)}}},"default":null}),__differentTargetClickFixPost:qx.core.Environment.select("engine.name",{mshtml:null,"default":function(b,a,c){switch(a){case"mousedown":this.__lastMouseDownTarget=c;break;case"mouseup":if(c!==this.__lastMouseDownTarget){var d=qx.dom.Hierarchy.getCommonParent(c,this.__lastMouseDownTarget);this.__fireEvent(b,"click",d)}}}})},destruct:function(){this._stopButtonObserver();this._stopMoveObserver();this._stopWheelObserver();this.__manager=this.__window=this.__root=this.__lastMouseDownTarget=null},defer:function(a){qx.event.Registration.addHandler(a)}});qx.Class.define("qx.event.handler.Keyboard",{extend:qx.core.Object,implement:qx.event.IEventHandler,construct:function(a){this.base(arguments);this.__manager=a;this.__window=a.getWindow();if((qx.core.Environment.get("engine.name")=="gecko")){this.__root=this.__window}else{this.__root=this.__window.document.documentElement}this.__lastUpDownType={};this._initKeyObserver()},statics:{PRIORITY:qx.event.Registration.PRIORITY_NORMAL,SUPPORTED_TYPES:{keyup:1,keydown:1,keypress:1,keyinput:1},TARGET_CHECK:qx.event.IEventHandler.TARGET_DOMNODE,IGNORE_CAN_HANDLE:true,isValidKeyIdentifier:function(a){if(this._identifierToKeyCodeMap[a]){return true}if(a.length!=1){return false}if(a>="0"&&a<="9"){return true}if(a>="A"&&a<="Z"){return true}switch(a){case"+":case"-":case"*":case"/":return true;default:return false}},isPrintableKeyIdentifier:function(a){if(a==="Space"){return true}else{return this._identifierToKeyCodeMap[a]?false:true}}},members:{__onKeyUpDownWrapper:null,__manager:null,__window:null,__root:null,__lastUpDownType:null,__lastKeyCode:null,__inputListeners:null,__onKeyPressWrapper:null,canHandleEvent:function(b,a){},registerEvent:function(c,b,a){},unregisterEvent:function(c,b,a){},_fireInputEvent:function(b,a){var d=this.__getEventTarget();if(d&&d.offsetWidth!=0){var c=qx.event.Registration.createEvent("keyinput",qx.event.type.KeyInput,[b,d,a]);this.__manager.dispatchEvent(d,c)}if(this.__window){qx.event.Registration.fireEvent(this.__window,"useraction",qx.event.type.Data,["keyinput"])}},_fireSequenceEvent:function(b,a,f){var e=this.__getEventTarget();var d=b.keyCode;var c=qx.event.Registration.createEvent(a,qx.event.type.KeySequence,[b,e,f]);this.__manager.dispatchEvent(e,c);if(qx.core.Environment.get("engine.name")=="mshtml"||qx.core.Environment.get("engine.name")=="webkit"){if(a=="keydown"&&c.getDefaultPrevented()){if(!this._isNonPrintableKeyCode(d)&&!this._emulateKeyPress[d]){this._fireSequenceEvent(b,"keypress",f)}}}if(this.__window){qx.event.Registration.fireEvent(this.__window,"useraction",qx.event.type.Data,[a])}},__getEventTarget:function(){var a=this.__manager.getHandler(qx.event.handler.Focus);var b=a.getActive();if(!b||b.offsetWidth==0){b=a.getFocus()}if(!b||b.offsetWidth==0){b=this.__manager.getWindow().document.body}return b},_initKeyObserver:function(){this.__onKeyUpDownWrapper=qx.lang.Function.listener(this.__onKeyUpDown,this);this.__onKeyPressWrapper=qx.lang.Function.listener(this.__onKeyPress,this);var a=qx.bom.Event;a.addNativeListener(this.__root,"keyup",this.__onKeyUpDownWrapper);a.addNativeListener(this.__root,"keydown",this.__onKeyUpDownWrapper);a.addNativeListener(this.__root,"keypress",this.__onKeyPressWrapper)},_stopKeyObserver:function(){var a=qx.bom.Event;a.removeNativeListener(this.__root,"keyup",this.__onKeyUpDownWrapper);a.removeNativeListener(this.__root,"keydown",this.__onKeyUpDownWrapper);a.removeNativeListener(this.__root,"keypress",this.__onKeyPressWrapper);for(var b in (this.__inputListeners||{})){var c=this.__inputListeners[b];a.removeNativeListener(c.target,"keypress",c.callback)}delete (this.__inputListeners)},__onKeyUpDown:qx.event.GlobalError.observeMethod(qx.core.Environment.select("engine.name",{mshtml:function(c){c=window.event||c;var d=c.keyCode;var a=0;var b=c.type;if(!(this.__lastUpDownType[d]=="keydown"&&b=="keydown")){this._idealKeyHandler(d,a,b,c)}if(b=="keydown"){if(this._isNonPrintableKeyCode(d)||this._emulateKeyPress[d]){this._idealKeyHandler(d,a,"keypress",c)}}this.__lastUpDownType[d]=b},gecko:function(c){var e=this._keyCodeFix[c.keyCode]||c.keyCode;var a=0;var b=c.type;if(qx.core.Environment.get("os.name")=="win"){var d=e?this._keyCodeToIdentifier(e):this._charCodeToIdentifier(a);if(!(this.__lastUpDownType[d]=="keydown"&&b=="keydown")){this._idealKeyHandler(e,a,b,c)}this.__lastUpDownType[d]=b}else{this._idealKeyHandler(e,a,b,c)}this.__firefoxInputFix(c.target,b,e)},webkit:function(c){var d=0;var a=0;var b=c.type;if(parseFloat(qx.core.Environment.get("engine.version"))<525.13){if(b=="keyup"||b=="keydown"){d=this._charCode2KeyCode[c.charCode]||c.keyCode}else{if(this._charCode2KeyCode[c.charCode]){d=this._charCode2KeyCode[c.charCode]}else{a=c.charCode}}this._idealKeyHandler(d,a,b,c)}else{d=c.keyCode;this._idealKeyHandler(d,a,b,c);if(b=="keydown"){if(this._isNonPrintableKeyCode(d)||this._emulateKeyPress[d]){this._idealKeyHandler(d,a,"keypress",c)}}this.__lastUpDownType[d]=b}},opera:function(a){this.__lastKeyCode=a.keyCode;this._idealKeyHandler(a.keyCode,0,a.type,a)}})),__firefoxInputFix:qx.core.Environment.select("engine.name",{gecko:function(f,b,e){if(b==="keydown"&&(e==33||e==34||e==38||e==40)&&f.type=="text"&&f.tagName.toLowerCase()==="input"&&f.getAttribute("autoComplete")!=="off"){if(!this.__inputListeners){this.__inputListeners={}}var d=qx.core.ObjectRegistry.toHashCode(f);if(this.__inputListeners[d]){return}var a=this;this.__inputListeners[d]={target:f,callback:function(g){qx.bom.Event.stopPropagation(g);a.__onKeyPress(g)}};var c=qx.event.GlobalError.observeMethod(this.__inputListeners[d].callback);qx.bom.Event.addNativeListener(f,"keypress",c)}},"default":null}),__onKeyPress:qx.event.GlobalError.observeMethod(qx.core.Environment.select("engine.name",{mshtml:function(a){a=window.event||a;if(this._charCode2KeyCode[a.keyCode]){this._idealKeyHandler(this._charCode2KeyCode[a.keyCode],0,a.type,a)}else{this._idealKeyHandler(0,a.keyCode,a.type,a)}},gecko:function(c){var d=this._keyCodeFix[c.keyCode]||c.keyCode;var a=c.charCode;var b=c.type;this._idealKeyHandler(d,a,b,c)},webkit:function(c){if(parseFloat(qx.core.Environment.get("engine.version"))<525.13){var d=0;var a=0;var b=c.type;if(b=="keyup"||b=="keydown"){d=this._charCode2KeyCode[c.charCode]||c.keyCode}else{if(this._charCode2KeyCode[c.charCode]){d=this._charCode2KeyCode[c.charCode]}else{a=c.charCode}}this._idealKeyHandler(d,a,b,c)}else{if(this._charCode2KeyCode[c.keyCode]){this._idealKeyHandler(this._charCode2KeyCode[c.keyCode],0,c.type,c)}else{this._idealKeyHandler(0,c.keyCode,c.type,c)}}},opera:function(b){var c=b.keyCode;var a=b.type;if(c!=this.__lastKeyCode){this._idealKeyHandler(0,this.__lastKeyCode,a,b)}else{if(this._keyCodeToIdentifierMap[b.keyCode]){this._idealKeyHandler(b.keyCode,0,b.type,b)}else{this._idealKeyHandler(0,b.keyCode,b.type,b)}}}})),_idealKeyHandler:function(e,a,b,c){var d;if(e||(!e&&!a)){d=this._keyCodeToIdentifier(e);this._fireSequenceEvent(c,b,d)}else{d=this._charCodeToIdentifier(a);this._fireSequenceEvent(c,"keypress",d);this._fireInputEvent(c,a)}},_specialCharCodeMap:{8:"Backspace",9:"Tab",13:"Enter",27:"Escape",32:"Space"},_emulateKeyPress:qx.core.Environment.select("engine.name",{mshtml:{8:true,9:true},webkit:{8:true,9:true,27:true},"default":{}}),_keyCodeToIdentifierMap:{16:"Shift",17:"Control",18:"Alt",20:"CapsLock",224:"Meta",37:"Left",38:"Up",39:"Right",40:"Down",33:"PageUp",34:"PageDown",35:"End",36:"Home",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",44:"PrintScreen",145:"Scroll",19:"Pause",91:qx.core.Environment.get("os.name")=="osx"?"cmd":"Win",92:"Win",93:qx.core.Environment.get("os.name")=="osx"?"cmd":"Apps"},_numpadToCharCode:{96:"0".charCodeAt(0),97:"1".charCodeAt(0),98:"2".charCodeAt(0),99:"3".charCodeAt(0),100:"4".charCodeAt(0),101:"5".charCodeAt(0),102:"6".charCodeAt(0),103:"7".charCodeAt(0),104:"8".charCodeAt(0),105:"9".charCodeAt(0),106:"*".charCodeAt(0),107:"+".charCodeAt(0),109:"-".charCodeAt(0),110:",".charCodeAt(0),111:"/".charCodeAt(0)},_charCodeA:"A".charCodeAt(0),_charCodeZ:"Z".charCodeAt(0),_charCode0:"0".charCodeAt(0),_charCode9:"9".charCodeAt(0),_isNonPrintableKeyCode:function(a){return this._keyCodeToIdentifierMap[a]?true:false},_isIdentifiableKeyCode:function(a){if(a>=this._charCodeA&&a<=this._charCodeZ){return true}if(a>=this._charCode0&&a<=this._charCode9){return true}if(this._specialCharCodeMap[a]){return true}if(this._numpadToCharCode[a]){return true}if(this._isNonPrintableKeyCode(a)){return true}return false},_keyCodeToIdentifier:function(b){if(this._isIdentifiableKeyCode(b)){var a=this._numpadToCharCode[b];if(a){return String.fromCharCode(a)}return(this._keyCodeToIdentifierMap[b]||this._specialCharCodeMap[b]||String.fromCharCode(b))}else{return"Unidentified"}},_charCodeToIdentifier:function(a){return this._specialCharCodeMap[a]||String.fromCharCode(a).toUpperCase()},_identifierToKeyCode:function(a){return qx.event.handler.Keyboard._identifierToKeyCodeMap[a]||a.charCodeAt(0)}},destruct:function(){this._stopKeyObserver();this.__lastKeyCode=this.__manager=this.__window=this.__root=this.__lastUpDownType=null},defer:function(c,a){qx.event.Registration.addHandler(c);if(!c._identifierToKeyCodeMap){c._identifierToKeyCodeMap={};for(var b in a._keyCodeToIdentifierMap){c._identifierToKeyCodeMap[a._keyCodeToIdentifierMap[b]]=parseInt(b,10)}for(var b in a._specialCharCodeMap){c._identifierToKeyCodeMap[a._specialCharCodeMap[b]]=parseInt(b,10)}}if((qx.core.Environment.get("engine.name")=="mshtml")){a._charCode2KeyCode={13:13,27:27}}else{if((qx.core.Environment.get("engine.name")=="gecko")){a._keyCodeFix={12:a._identifierToKeyCode("NumLock")}}else{if((qx.core.Environment.get("engine.name")=="webkit")){if(parseFloat(qx.core.Environment.get("engine.version"))<525.13){a._charCode2KeyCode={63289:a._identifierToKeyCode("NumLock"),63276:a._identifierToKeyCode("PageUp"),63277:a._identifierToKeyCode("PageDown"),63275:a._identifierToKeyCode("End"),63273:a._identifierToKeyCode("Home"),63234:a._identifierToKeyCode("Left"),63232:a._identifierToKeyCode("Up"),63235:a._identifierToKeyCode("Right"),63233:a._identifierToKeyCode("Down"),63272:a._identifierToKeyCode("Delete"),63302:a._identifierToKeyCode("Insert"),63236:a._identifierToKeyCode("F1"),63237:a._identifierToKeyCode("F2"),63238:a._identifierToKeyCode("F3"),63239:a._identifierToKeyCode("F4"),63240:a._identifierToKeyCode("F5"),63241:a._identifierToKeyCode("F6"),63242:a._identifierToKeyCode("F7"),63243:a._identifierToKeyCode("F8"),63244:a._identifierToKeyCode("F9"),63245:a._identifierToKeyCode("F10"),63246:a._identifierToKeyCode("F11"),63247:a._identifierToKeyCode("F12"),63248:a._identifierToKeyCode("PrintScreen"),3:a._identifierToKeyCode("Enter"),12:a._identifierToKeyCode("NumLock"),13:a._identifierToKeyCode("Enter")}}else{a._charCode2KeyCode={13:13,27:27}}}}}}});qx.Class.define("qx.event.handler.Orientation",{extend:qx.core.Object,implement:qx.event.IEventHandler,construct:function(a){this.base(arguments);this.__manager=a;this.__window=a.getWindow();this._initObserver()},statics:{PRIORITY:qx.event.Registration.PRIORITY_NORMAL,SUPPORTED_TYPES:{orientationchange:1},TARGET_CHECK:qx.event.IEventHandler.TARGET_WINDOW,IGNORE_CAN_HANDLE:true},members:{__manager:null,__window:null,__nativeEventType:null,__currentOrientation:null,__onNativeWrapper:null,canHandleEvent:function(b,a){},registerEvent:function(c,b,a){},unregisterEvent:function(c,b,a){},_initObserver:function(){this.__onNativeWrapper=qx.lang.Function.listener(this._onNative,this);this.__nativeEventType=qx.bom.Event.supportsEvent(this.__window,"orientationchange")?"orientationchange":"resize";var a=qx.bom.Event;a.addNativeListener(this.__window,this.__nativeEventType,this.__onNativeWrapper)},_stopObserver:function(){var a=qx.bom.Event;a.removeNativeListener(this.__window,this.__nativeEventType,this.__onNativeWrapper)},_onNative:qx.event.GlobalError.observeMethod(function(c){var a=qx.bom.Viewport;var b=a.getOrientation();if(this.__currentOrientation!=b){this.__currentOrientation=b;var d=a.isLandscape()?"landscape":"portrait";qx.event.Registration.fireEvent(this.__window,"orientationchange",qx.event.type.Orientation,[b,d])}})},destruct:function(){this._stopObserver();this.__manager=this.__window=null},defer:function(a){qx.event.Registration.addHandler(a)}});qx.Class.define("qx.event.handler.Touch",{extend:qx.core.Object,implement:qx.event.IEventHandler,construct:function(a){this.base(arguments);this.__manager=a;this.__window=a.getWindow();this.__root=this.__window.document;this._initTouchObserver();this._initMouseObserver()},statics:{PRIORITY:qx.event.Registration.PRIORITY_NORMAL,SUPPORTED_TYPES:{touchstart:1,touchmove:1,touchend:1,touchcancel:1,tap:1,swipe:1},TARGET_CHECK:qx.event.IEventHandler.TARGET_DOMNODE+qx.event.IEventHandler.TARGET_DOCUMENT,IGNORE_CAN_HANDLE:true,MOUSE_TO_TOUCH_MAPPING:{mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},SWIPE_DIRECTION:{x:["left","right"],y:["up","down"]},TAP_MAX_DISTANCE:qx.core.Environment.get("os.name")!="android"?10:40,SWIPE_MIN_DISTANCE:qx.core.Environment.get("os.name")!="android"?11:41,SWIPE_MIN_VELOCITY:0},members:{__onTouchEventWrapper:null,__onMouseEventWrapper:null,__manager:null,__window:null,__root:null,__startPageX:null,__startPageY:null,__startTime:null,__isSingleTouchGesture:null,__isInTouch:false,__originalTarget:null,canHandleEvent:function(b,a){},registerEvent:function(c,b,a){},unregisterEvent:function(c,b,a){},__getTarget:function(a){var b=qx.bom.Event.getTarget(a);if((qx.core.Environment.get("engine.name")=="webkit")){if(b&&b.nodeType==3){b=b.parentNode}}return b},__fireEvent:function(c,b,d,a){if(!d){d=this.__getTarget(c)}var b=b||c.type;if(d&&d.nodeType){qx.event.Registration.fireEvent(d,b,a||qx.event.type.Touch,[c,d,null,true,true])}qx.event.Registration.fireEvent(this.__window,"useraction",qx.event.type.Data,[b])},__checkAndFireGesture:function(b,a,c){if(!c){c=this.__getTarget(b)}var a=a||b.type;if(a=="touchstart"){this.__gestureStart(b,c)}else{if(a=="touchmove"){this.__gestureChange(b,c)}else{if(a=="touchend"){this.__gestureEnd(b,c)}}}},__gestureStart:function(a,b){var c=a.changedTouches[0];this.__startPageX=c.screenX;this.__startPageY=c.screenY;this.__startTime=new Date().getTime();this.__isSingleTouchGesture=a.changedTouches.length===1},__gestureChange:function(a,b){if(this.__isSingleTouchGesture&&a.changedTouches.length>1){this.__isSingleTouchGesture=false}},__gestureEnd:function(d,e){if(this.__isSingleTouchGesture){var f=d.changedTouches[0];var c={x:f.screenX-this.__startPageX,y:f.screenY-this.__startPageY};var b=qx.event.handler.Touch;if(this.__originalTarget==e&&Math.abs(c.x)<=b.TAP_MAX_DISTANCE&&Math.abs(c.y)<=b.TAP_MAX_DISTANCE){this.__fireEvent(d,"tap",e,qx.event.type.Tap)}else{var a=this.__getSwipeGesture(d,e,c);if(a){d.swipe=a;this.__fireEvent(d,"swipe",e,qx.event.type.Swipe)}}}},__getSwipeGesture:function(g,i,e){var h=qx.event.handler.Touch;var d=new Date().getTime()-this.__startTime;var b=(Math.abs(e.x)>=Math.abs(e.y))?"x":"y";var a=e[b];var j=h.SWIPE_DIRECTION[b][a<0?0:1];var c=(d!==0)?a/d:0;var f=null;if(Math.abs(c)>=h.SWIPE_MIN_VELOCITY&&Math.abs(a)>=h.SWIPE_MIN_DISTANCE){f={startTime:this.__startTime,duration:d,axis:b,direction:j,distance:a,velocity:c}}return f},__normalizeMouseEvent:qx.core.Environment.select("qx.mobile.emulatetouch",{"true":function(e){var d=e.type;var a=qx.event.handler.Touch.MOUSE_TO_TOUCH_MAPPING;if(a[d]){d=a[d];if(d=="touchstart"&&this.__isLeftMouseButtonPressed(e)){this.__isInTouch=true}else{if(d=="touchend"){this.__isInTouch=false}}var c=this.__createTouchObject(e);var b=(d=="touchend"?[]:[c]);e.touches=b;e.targetTouches=b;e.changedTouches=[c]}return d},"default":qx.lang.Function.empty}),__isLeftMouseButtonPressed:qx.core.Environment.select("qx.mobile.emulatetouch",{"true":function(a){if((qx.core.Environment.get("engine.name")=="mshtml")){var b=1}else{var b=0}return a.button==b},"default":qx.lang.Function.empty}),__createTouchObject:qx.core.Environment.select("qx.mobile.emulatetouch",{"true":function(a){var b=this.__getTarget(a);return{clientX:a.clientX,clientY:a.clientY,screenX:a.screenX,screenY:a.screenY,pageX:a.pageX,pageY:a.pageY,identifier:1,target:b}},"default":qx.lang.Function.empty}),_initTouchObserver:function(){this.__onTouchEventWrapper=qx.lang.Function.listener(this._onTouchEvent,this);var a=qx.bom.Event;a.addNativeListener(this.__root,"touchstart",this.__onTouchEventWrapper);a.addNativeListener(this.__root,"touchmove",this.__onTouchEventWrapper);a.addNativeListener(this.__root,"touchend",this.__onTouchEventWrapper);a.addNativeListener(this.__root,"touchcancel",this.__onTouchEventWrapper)},_initMouseObserver:qx.core.Environment.select("qx.mobile.emulatetouch",{"true":function(){if(!qx.core.Environment.get("event.touch")){this.__onMouseEventWrapper=qx.lang.Function.listener(this._onMouseEvent,this);var a=qx.bom.Event;a.addNativeListener(this.__root,"mousedown",this.__onMouseEventWrapper);a.addNativeListener(this.__root,"mousemove",this.__onMouseEventWrapper);a.addNativeListener(this.__root,"mouseup",this.__onMouseEventWrapper)}},"default":qx.lang.Function.empty}),_stopTouchObserver:function(){var a=qx.bom.Event;a.removeNativeListener(this.__root,"touchstart",this.__onTouchEventWrapper);a.removeNativeListener(this.__root,"touchmove",this.__onTouchEventWrapper);a.removeNativeListener(this.__root,"touchend",this.__onTouchEventWrapper);a.removeNativeListener(this.__root,"touchcancel",this.__onTouchEventWrapper)},_stopMouseObserver:qx.core.Environment.select("qx.mobile.emulatetouch",{"true":function(){if(!qx.core.Environment.get("event.touch")){var a=qx.bom.Event;a.removeNativeListener(this.__root,"mousedown",this.__onMouseEventWrapper);a.removeNativeListener(this.__root,"mousemove",this.__onMouseEventWrapper);a.removeNativeListener(this.__root,"mouseup",this.__onMouseEventWrapper)}},"default":qx.lang.Function.empty}),_onTouchEvent:qx.event.GlobalError.observeMethod(function(a){this._commonTouchEventHandler(a)}),_onMouseEvent:qx.core.Environment.select("qx.mobile.emulatetouch",{"true":qx.event.GlobalError.observeMethod(function(b){if(!qx.core.Environment.get("event.touch")){if(b.type=="mousemove"&&!this.__isInTouch){return}var a=this.__normalizeMouseEvent(b);this._commonTouchEventHandler(b,a)}}),"default":qx.lang.Function.empty}),_commonTouchEventHandler:function(b,a){var a=a||b.type;if(a=="touchstart"){this.__originalTarget=this.__getTarget(b)}this.__fireEvent(b,a);this.__checkAndFireGesture(b,a)}},destruct:function(){this._stopTouchObserver();this._stopMouseObserver();this.__manager=this.__window=this.__root=this.__originalTarget=null},defer:function(a){qx.event.Registration.addHandler(a);if(qx.core.Environment.get("event.touch")){if(qx.core.Environment.get("qx.mobile.nativescroll")==false){document.addEventListener("touchmove",function(b){b.preventDefault()})}qx.event.Registration.getManager(document).getHandler(a)}}});qx.Class.define("qx.event.handler.Capture",{extend:qx.core.Object,implement:qx.event.IEventHandler,statics:{PRIORITY:qx.event.Registration.PRIORITY_NORMAL,SUPPORTED_TYPES:{capture:true,losecapture:true},TARGET_CHECK:qx.event.IEventHandler.TARGET_DOMNODE,IGNORE_CAN_HANDLE:true},members:{canHandleEvent:function(b,a){},registerEvent:function(c,b,a){},unregisterEvent:function(c,b,a){}},defer:function(a){qx.event.Registration.addHandler(a)}});qx.Class.define("qx.event.handler.DragDrop",{extend:qx.core.Object,implement:qx.event.IEventHandler,construct:function(a){this.base(arguments);this.__manager=a;this.__root=a.getWindow().document.documentElement;this.__manager.addListener(this.__root,"mousedown",this._onMouseDown,this);this.__rebuildStructures()},statics:{PRIORITY:qx.event.Registration.PRIORITY_NORMAL,SUPPORTED_TYPES:{dragstart:1,dragend:1,dragover:1,dragleave:1,drop:1,drag:1,dragchange:1,droprequest:1},IGNORE_CAN_HANDLE:true},members:{__manager:null,__root:null,__dropTarget:null,__dragTarget:null,__types:null,__actions:null,__keys:null,__cache:null,__currentType:null,__currentAction:null,__sessionActive:false,__startLeft:0,__startTop:0,canHandleEvent:function(b,a){},registerEvent:function(c,b,a){},unregisterEvent:function(c,b,a){},addType:function(a){this.__types[a]=true},addAction:function(a){this.__actions[a]=true},supportsType:function(a){return !!this.__types[a]},supportsAction:function(a){return !!this.__actions[a]},getData:function(a){if(!this.__validDrop||!this.__dropTarget){throw new Error("This method must not be used outside the drop event listener!")}if(!this.__types[a]){throw new Error("Unsupported data type: "+a+"!")}if(!this.__cache[a]){this.__currentType=a;this.__fireEvent("droprequest",this.__dragTarget,this.__dropTarget,false)}if(!this.__cache[a]){throw new Error("Please use a droprequest listener to the drag source to fill the manager with data!")}return this.__cache[a]||null},getCurrentAction:function(){return this.__currentAction},addData:function(a,b){this.__cache[a]=b},getCurrentType:function(){return this.__currentType},isSessionActive:function(){return this.__sessionActive},__rebuildStructures:function(){this.__types={};this.__actions={};this.__keys={};this.__cache={}},__detectAction:function(){if(this.__dragTarget==null){return}var c=this.__actions;var a=this.__keys;var b=null;if(this.__validDrop){if(a.Shift&&a.Ctrl&&c.alias){b="alias"}else{if(a.Shift&&a.Alt&&c.copy){b="copy"}else{if(a.Shift&&c.move){b="move"}else{if(a.Alt&&c.alias){b="alias"}else{if(a.Ctrl&&c.copy){b="copy"}else{if(c.move){b="move"}else{if(c.copy){b="copy"}else{if(c.alias){b="alias"}}}}}}}}}if(b!=this.__currentAction){this.__currentAction=b;this.__fireEvent("dragchange",this.__dragTarget,this.__dropTarget,false)}},__fireEvent:function(e,g,b,a,d){var c=qx.event.Registration;var f=c.createEvent(e,qx.event.type.Drag,[a,d]);if(g!==b){f.setRelatedTarget(b)}return c.dispatchEvent(g,f)},__findDraggable:function(a){while(a&&a.nodeType==1){if(a.getAttribute("qxDraggable")=="on"){return a}a=a.parentNode}return null},__findDroppable:function(a){while(a&&a.nodeType==1){if(a.getAttribute("qxDroppable")=="on"){return a}a=a.parentNode}return null},__clearInit:function(){this.__dragTarget=null;this.__manager.removeListener(this.__root,"mousemove",this._onMouseMove,this,true);this.__manager.removeListener(this.__root,"mouseup",this._onMouseUp,this,true);qx.event.Registration.removeListener(window,"blur",this._onWindowBlur,this);this.__rebuildStructures()},__clearSession:function(){if(this.__sessionActive){this.__manager.removeListener(this.__root,"mouseover",this._onMouseOver,this,true);this.__manager.removeListener(this.__root,"mouseout",this._onMouseOut,this,true);this.__manager.removeListener(this.__root,"keydown",this._onKeyDown,this,true);this.__manager.removeListener(this.__root,"keyup",this._onKeyUp,this,true);this.__fireEvent("dragend",this.__dragTarget,this.__dropTarget,false);this.__sessionActive=false}this.__validDrop=false;this.__dropTarget=null;this.__clearInit()},__validDrop:false,_onWindowBlur:function(a){this.__clearSession()},_onKeyDown:function(b){var a=b.getKeyIdentifier();switch(a){case"Alt":case"Ctrl":case"Shift":if(!this.__keys[a]){this.__keys[a]=true;this.__detectAction()}}},_onKeyUp:function(b){var a=b.getKeyIdentifier();switch(a){case"Alt":case"Ctrl":case"Shift":if(this.__keys[a]){this.__keys[a]=false;this.__detectAction()}}},_onMouseDown:function(b){if(this.__sessionActive){return}var a=this.__findDraggable(b.getTarget());if(a){this.__startLeft=b.getDocumentLeft();this.__startTop=b.getDocumentTop();this.__dragTarget=a;this.__manager.addListener(this.__root,"mousemove",this._onMouseMove,this,true);this.__manager.addListener(this.__root,"mouseup",this._onMouseUp,this,true);qx.event.Registration.addListener(window,"blur",this._onWindowBlur,this)}},_onMouseUp:function(a){if(this.__validDrop){this.__fireEvent("drop",this.__dropTarget,this.__dragTarget,false,a)}if(this.__sessionActive){a.stopPropagation()}this.__clearSession()},_onMouseMove:function(b){if(this.__sessionActive){if(!this.__fireEvent("drag",this.__dragTarget,this.__dropTarget,true,b)){this.__clearSession()}}else{if(Math.abs(b.getDocumentLeft()-this.__startLeft)>3||Math.abs(b.getDocumentTop()-this.__startTop)>3){if(this.__fireEvent("dragstart",this.__dragTarget,this.__dropTarget,true,b)){this.__sessionActive=true;this.__manager.addListener(this.__root,"mouseover",this._onMouseOver,this,true);this.__manager.addListener(this.__root,"mouseout",this._onMouseOut,this,true);this.__manager.addListener(this.__root,"keydown",this._onKeyDown,this,true);this.__manager.addListener(this.__root,"keyup",this._onKeyUp,this,true);var a=this.__keys;a.Ctrl=b.isCtrlPressed();a.Shift=b.isShiftPressed();a.Alt=b.isAltPressed();this.__detectAction()}else{this.__fireEvent("dragend",this.__dragTarget,this.__dropTarget,false);this.__clearInit()}}}},_onMouseOver:function(c){var b=c.getTarget();var a=this.__findDroppable(b);if(a&&a!=this.__dropTarget){this.__validDrop=this.__fireEvent("dragover",a,this.__dragTarget,true,c);this.__dropTarget=a;this.__detectAction()}},_onMouseOut:function(b){var a=this.__findDroppable(b.getTarget());var c=this.__findDroppable(b.getRelatedTarget());if(a&&a!==c&&a==this.__dropTarget){this.__fireEvent("dragleave",this.__dropTarget,c,false,b);this.__dropTarget=null;this.__validDrop=false;qx.event.Timer.once(this.__detectAction,this,0)}}},destruct:function(){this.__dragTarget=this.__dropTarget=this.__manager=this.__root=this.__types=this.__actions=this.__keys=this.__cache=null},defer:function(a){qx.event.Registration.addHandler(a)}});qx.Class.define("qx.bom.Element",{statics:{__initialAttributes:{onload:true,onpropertychange:true,oninput:true,onchange:true,name:true,type:true,checked:true,disabled:true},__helperElement:{},__allowMarkup:{},allowCreationWithMarkup:function(c){if(!c){c=window}var a=c.location.href;if(qx.bom.Element.__allowMarkup[a]==undefined){try{c.document.createElement("<INPUT TYPE='RADIO' NAME='RADIOTEST' VALUE='Second Choice'>");qx.bom.Element.__allowMarkup[a]=true}catch(b){qx.bom.Element.__allowMarkup[a]=false}}return qx.bom.Element.__allowMarkup[a]},getHelperElement:function(c){if(!c){c=window}var a=c.location.href;if(!qx.bom.Element.__helperElement[a]){var b=qx.bom.Element.__helperElement[a]=c.document.createElement("div");if(qx.core.Environment.get("engine.name")=="webkit"){b.style.display="none";c.document.body.appendChild(b)}}return qx.bom.Element.__helperElement[a]},create:function(d,b,h){if(!h){h=window}if(!d){throw new Error("The tag name is missing!")}var c=this.__initialAttributes;var a="";for(var f in b){if(c[f]){a+=f+"='"+b[f]+"' "}}var e;if(a!=""){if(qx.bom.Element.allowCreationWithMarkup(h)){e=h.document.createElement("<"+d+" "+a+">")}else{var g=qx.bom.Element.getHelperElement(h);g.innerHTML="<"+d+" "+a+"></"+d+">";e=g.firstChild}}else{e=h.document.createElement(d)}for(var f in b){if(!c[f]){qx.bom.element.Attribute.set(e,f,b[f])}}return e},empty:function(a){return a.innerHTML=""},addListener:function(c,d,e,b,a){return qx.event.Registration.addListener(c,d,e,b,a)},removeListener:function(c,d,e,b,a){return qx.event.Registration.removeListener(c,d,e,b,a)},removeListenerById:function(a,b){return qx.event.Registration.removeListenerById(a,b)},hasListener:function(b,c,a){return qx.event.Registration.hasListener(b,c,a)},focus:function(a){qx.event.Registration.getManager(a).getHandler(qx.event.handler.Focus).focus(a)},blur:function(a){qx.event.Registration.getManager(a).getHandler(qx.event.handler.Focus).blur(a)},activate:function(a){qx.event.Registration.getManager(a).getHandler(qx.event.handler.Focus).activate(a)},deactivate:function(a){qx.event.Registration.getManager(a).getHandler(qx.event.handler.Focus).deactivate(a)},capture:function(a,b){qx.event.Registration.getManager(a).getDispatcher(qx.event.dispatch.MouseCapture).activateCapture(a,b)},releaseCapture:function(a){qx.event.Registration.getManager(a).getDispatcher(qx.event.dispatch.MouseCapture).releaseCapture(a)},matchesSelector:function(b,a){if(a){return qx.bom.Selector.query(a,b.parentNode).length>0}else{return false}},clone:function(g,r){var k;if(r||((qx.core.Environment.get("engine.name")=="mshtml")&&!qx.xml.Document.isXmlDocument(g))){var q=qx.event.Registration.getManager(g);var o=qx.dom.Hierarchy.getDescendants(g);o.push(g)}if((qx.core.Environment.get("engine.name")=="mshtml")){for(var h=0,d=o.length;h<d;h++){q.toggleAttachedEvents(o[h],false)}}var k=g.cloneNode(true);if((qx.core.Environment.get("engine.name")=="mshtml")){for(var h=0,d=o.length;h<d;h++){q.toggleAttachedEvents(o[h],true)}}if(r===true){var p=qx.dom.Hierarchy.getDescendants(k);p.push(k);var a,b,m,c;for(var h=0,n=o.length;h<n;h++){m=o[h];a=q.serializeListeners(m);if(a.length>0){b=p[h];for(var e=0,f=a.length;e<f;e++){c=a[e];q.addListener(b,c.type,c.handler,c.self,c.capture)}}}}return k}}});qx.Class.define("qx.event.type.Dom",{extend:qx.event.type.Native,statics:{SHIFT_MASK:1,CTRL_MASK:2,ALT_MASK:4,META_MASK:8},members:{_cloneNativeEvent:function(a,b){var b=this.base(arguments,a,b);b.shiftKey=a.shiftKey;b.ctrlKey=a.ctrlKey;b.altKey=a.altKey;b.metaKey=a.metaKey;return b},getModifiers:function(){var b=0;var a=this._native;if(a.shiftKey){b|=qx.event.type.Dom.SHIFT_MASK}if(a.ctrlKey){b|=qx.event.type.Dom.CTRL_MASK}if(a.altKey){b|=qx.event.type.Dom.ALT_MASK}if(a.metaKey){b|=qx.event.type.Dom.META_MASK}return b},isCtrlPressed:function(){return this._native.ctrlKey},isShiftPressed:function(){return this._native.shiftKey},isAltPressed:function(){return this._native.altKey},isMetaPressed:function(){return this._native.metaKey},isCtrlOrCommandPressed:function(){if(qx.core.Environment.get("os.name")=="osx"){return this._native.metaKey}else{return this._native.ctrlKey}}}});qx.Class.define("qx.event.type.Mouse",{extend:qx.event.type.Dom,members:{_cloneNativeEvent:function(a,b){var b=this.base(arguments,a,b);b.button=a.button;b.clientX=a.clientX;b.clientY=a.clientY;b.pageX=a.pageX;b.pageY=a.pageY;b.screenX=a.screenX;b.screenY=a.screenY;b.wheelDelta=a.wheelDelta;b.detail=a.detail;b.srcElement=a.srcElement;b.target=a.target;return b},__buttonsDom2EventModel:{0:"left",2:"right",1:"middle"},__buttonsMshtmlEventModel:{1:"left",2:"right",4:"middle"},stop:function(){this.stopPropagation()},getButton:function(){switch(this._type){case"contextmenu":return"right";case"click":if(this.__normalizeIEClick){return this.__normalizeIEClick()}default:if(this._native.target!==undefined){return this.__buttonsDom2EventModel[this._native.button]||"none"}else{return this.__buttonsMshtmlEventModel[this._native.button]||"none"}}},__normalizeIEClick:qx.core.Environment.select("engine.name",{mshtml:function(){return"left"},"default":null}),isLeftPressed:function(){return this.getButton()==="left"},isMiddlePressed:function(){return this.getButton()==="middle"},isRightPressed:function(){return this.getButton()==="right"},getRelatedTarget:function(){return this._relatedTarget},getViewportLeft:function(){return this._native.clientX},getViewportTop:function(){return this._native.clientY},getDocumentLeft:function(){if(this._native.pageX!==undefined){return this._native.pageX}else{var a=qx.dom.Node.getWindow(this._native.srcElement);return this._native.clientX+qx.bom.Viewport.getScrollLeft(a)}},getDocumentTop:function(){if(this._native.pageY!==undefined){return this._native.pageY}else{var a=qx.dom.Node.getWindow(this._native.srcElement);return this._native.clientY+qx.bom.Viewport.getScrollTop(a)}},getScreenLeft:function(){return this._native.screenX},getScreenTop:function(){return this._native.screenY}}});qx.Class.define("qx.event.type.MouseWheel",{extend:qx.event.type.Mouse,statics:{MAXSCROLL:null,MINSCROLL:null,FACTOR:1},members:{stop:function(){this.stopPropagation();this.preventDefault()},__normalize:function(d){var a=Math.abs(d);if(qx.event.type.MouseWheel.MINSCROLL==null||qx.event.type.MouseWheel.MINSCROLL>a){qx.event.type.MouseWheel.MINSCROLL=a;this.__recalculateMultiplicator()}if(qx.event.type.MouseWheel.MAXSCROLL==null||qx.event.type.MouseWheel.MAXSCROLL<a){qx.event.type.MouseWheel.MAXSCROLL=a;this.__recalculateMultiplicator()}if(qx.event.type.MouseWheel.MAXSCROLL===a&&qx.event.type.MouseWheel.MINSCROLL===a){return 2*(d/a)}var b=qx.event.type.MouseWheel.MAXSCROLL-qx.event.type.MouseWheel.MINSCROLL;var c=(d/b)*Math.log(b)*qx.event.type.MouseWheel.FACTOR;return c<0?Math.min(c,-1):Math.max(c,1)},__recalculateMultiplicator:function(){var a=qx.event.type.MouseWheel.MAXSCROLL||0;var d=qx.event.type.MouseWheel.MINSCROLL||a;if(a<=d){return}var b=a-d;var c=(a/b)*Math.log(b);if(c==0){c=1}qx.event.type.MouseWheel.FACTOR=6/c},getWheelDelta:function(){if(qx.core.Environment.get("qx.dynamicmousewheel")){if(this._native.detail){return this.__normalize(this._native.detail)}return this.__normalize(-this._native.wheelDelta)}else{var a=qx.core.Environment.select("engine.name",{"default":function(){return -(this._native.wheelDelta/40)},gecko:function(){return this._native.detail},webkit:function(){if(qx.core.Environment.get("browser.name")=="chrome"){if(qx.core.Environment.get("os.name")=="osx"){return -(this._native.wheelDelta/60)}else{return -(this._native.wheelDelta/120)}}else{if(qx.core.Environment.get("os.name")=="win"){var b=120;if(parseFloat(qx.core.Environment.get("engine.version"))==533.16){b=1200}}else{b=40;if(parseFloat(qx.core.Environment.get("engine.version"))==533.16||parseFloat(qx.core.Environment.get("engine.version"))==533.17||parseFloat(qx.core.Environment.get("engine.version"))==533.18){b=1200}}return -(this._native.wheelDelta/b)}}});return a.call(this)}}}});qx.Class.define("qx.dom.Hierarchy",{statics:{getNodeIndex:function(b){var a=0;while(b&&(b=b.previousSibling)){a++}return a},getElementIndex:function(b){var a=0;var c=qx.dom.Node.ELEMENT;while(b&&(b=b.previousSibling)){if(b.nodeType==c){a++}}return a},getNextElementSibling:function(a){while(a&&(a=a.nextSibling)&&!qx.dom.Node.isElement(a)){continue}return a||null},getPreviousElementSibling:function(a){while(a&&(a=a.previousSibling)&&!qx.dom.Node.isElement(a)){continue}return a||null},contains:qx.core.Environment.select("engine.name",{"webkit|mshtml|opera":function(a,c){if(qx.dom.Node.isDocument(a)){var b=qx.dom.Node.getDocument(c);return a&&b==a}else{if(qx.dom.Node.isDocument(c)){return false}else{return a.contains(c)}}},gecko:function(a,b){return !!(a.compareDocumentPosition(b)&16)},"default":function(a,b){while(b){if(a==b){return true}b=b.parentNode}return false}}),isRendered:qx.core.Environment.select("engine.name",{mshtml:function(a){if(!a.parentNode||!a.offsetParent){return false}var b=a.ownerDocument||a.document;return b.body.contains(a)},gecko:function(a){var b=a.ownerDocument||a.document;return !!(b.compareDocumentPosition(a)&16)},"default":function(a){if(!a.parentNode||!a.offsetParent){return false}var b=a.ownerDocument||a.document;return b.body.contains(a)}}),isDescendantOf:function(b,a){return this.contains(a,b)},getCommonParent:qx.core.Environment.select("engine.name",{"mshtml|opera":function(b,a){if(b===a){return b}while(b&&qx.dom.Node.isElement(b)){if(b.contains(a)){return b}b=b.parentNode}return null},"default":function(e,d){if(e===d){return e}var c={};var f=qx.core.ObjectRegistry;var b,a;while(e||d){if(e){b=f.toHashCode(e);if(c[b]){return c[b]}c[b]=e;e=e.parentNode}if(d){a=f.toHashCode(d);if(c[a]){return c[a]}c[a]=d;d=d.parentNode}}return null}}),getAncestors:function(a){return this._recursivelyCollect(a,"parentNode")},getChildElements:function(b){b=b.firstChild;if(!b){return[]}var a=this.getNextSiblings(b);if(b.nodeType===1){a.unshift(b)}return a},getDescendants:function(a){return qx.lang.Array.fromCollection(a.getElementsByTagName("*"))},getFirstDescendant:function(a){a=a.firstChild;while(a&&a.nodeType!=1){a=a.nextSibling}return a},getLastDescendant:function(a){a=a.lastChild;while(a&&a.nodeType!=1){a=a.previousSibling}return a},getPreviousSiblings:function(a){return this._recursivelyCollect(a,"previousSibling")},getNextSiblings:function(a){return this._recursivelyCollect(a,"nextSibling")},_recursivelyCollect:function(a,c){var b=[];while(a=a[c]){if(a.nodeType==1){b.push(a)}}return b},getSiblings:function(a){return this.getPreviousSiblings(a).reverse().concat(this.getNextSiblings(a))},isEmpty:function(a){a=a.firstChild;while(a){if(a.nodeType===qx.dom.Node.ELEMENT||a.nodeType===qx.dom.Node.TEXT){return false}a=a.nextSibling}return true},cleanWhitespace:function(b){var c=b.firstChild;while(c){var a=c.nextSibling;if(c.nodeType==3&&!/\S/.test(c.nodeValue)){b.removeChild(c)}c=a}}}});qx.Class.define("qx.event.type.KeyInput",{extend:qx.event.type.Dom,members:{init:function(b,c,a){this.base(arguments,b,c,null,true,true);this._charCode=a;return this},clone:function(a){var b=this.base(arguments,a);b._charCode=this._charCode;return b},getCharCode:function(){return this._charCode},getChar:function(){return String.fromCharCode(this._charCode)}}});qx.Class.define("qx.event.type.KeySequence",{extend:qx.event.type.Dom,members:{init:function(b,c,a){this.base(arguments,b,c,null,true,true);this._keyCode=b.keyCode;this._identifier=a;return this},clone:function(a){var b=this.base(arguments,a);b._keyCode=this._keyCode;b._identifier=this._identifier;return b},getKeyIdentifier:function(){return this._identifier},getKeyCode:function(){return this._keyCode},isPrintable:function(){return qx.event.handler.Keyboard.isPrintableKeyIdentifier(this._identifier)}}});qx.Class.define("qx.event.handler.Focus",{extend:qx.core.Object,implement:qx.event.IEventHandler,construct:function(a){this.base(arguments);this._manager=a;this._window=a.getWindow();this._document=this._window.document;this._root=this._document.documentElement;this._body=this._document.body;this._initObserver()},properties:{active:{apply:"_applyActive",nullable:true},focus:{apply:"_applyFocus",nullable:true}},statics:{PRIORITY:qx.event.Registration.PRIORITY_NORMAL,SUPPORTED_TYPES:{focus:1,blur:1,focusin:1,focusout:1,activate:1,deactivate:1},IGNORE_CAN_HANDLE:true,FOCUSABLE_ELEMENTS:qx.core.Environment.select("engine.name",{"mshtml|gecko":{a:1,body:1,button:1,frame:1,iframe:1,img:1,input:1,object:1,select:1,textarea:1},"opera|webkit":{button:1,input:1,select:1,textarea:1}})},members:{__onNativeMouseDownWrapper:null,__onNativeMouseUpWrapper:null,__onNativeFocusWrapper:null,__onNativeBlurWrapper:null,__onNativeDragGestureWrapper:null,__onNativeSelectStartWrapper:null,__onNativeFocusInWrapper:null,__onNativeFocusOutWrapper:null,__previousFocus:null,__previousActive:null,canHandleEvent:function(b,a){},registerEvent:function(c,b,a){},unregisterEvent:function(c,b,a){},focus:function(b){if((qx.core.Environment.get("engine.name")=="mshtml")){window.setTimeout(function(){try{b.focus();var d=qx.bom.Selection.get(b);if(d.length==0){var e=b.createTextRange();e.moveStart("character",b.value.length);e.collapse();e.select()}}catch(c){}},0)}else{try{b.focus()}catch(a){}}this.setFocus(b);this.setActive(b)},activate:function(a){this.setActive(a)},blur:function(b){try{b.blur()}catch(a){}if(this.getActive()===b){this.resetActive()}if(this.getFocus()===b){this.resetFocus()}},deactivate:function(a){if(this.getActive()===a){this.resetActive()}},tryActivate:function(a){var b=this.__findActivatableElement(a);if(b){this.setActive(b)}},__fireEvent:function(f,e,d,b){var c=qx.event.Registration;var a=c.createEvent(d,qx.event.type.Focus,[f,e,b]);c.dispatchEvent(f,a)},_windowFocused:true,__doWindowBlur:function(){if(this._windowFocused){this._windowFocused=false;this.__fireEvent(this._window,null,"blur",false)}},__doWindowFocus:function(){if(!this._windowFocused){this._windowFocused=true;this.__fireEvent(this._window,null,"focus",false)}},_initObserver:qx.core.Environment.select("engine.name",{gecko:function(){this.__onNativeMouseDownWrapper=qx.lang.Function.listener(this.__onNativeMouseDown,this);this.__onNativeMouseUpWrapper=qx.lang.Function.listener(this.__onNativeMouseUp,this);this.__onNativeFocusWrapper=qx.lang.Function.listener(this.__onNativeFocus,this);this.__onNativeBlurWrapper=qx.lang.Function.listener(this.__onNativeBlur,this);this.__onNativeDragGestureWrapper=qx.lang.Function.listener(this.__onNativeDragGesture,this);qx.bom.Event.addNativeListener(this._document,"mousedown",this.__onNativeMouseDownWrapper,true);qx.bom.Event.addNativeListener(this._document,"mouseup",this.__onNativeMouseUpWrapper,true);qx.bom.Event.addNativeListener(this._window,"focus",this.__onNativeFocusWrapper,true);qx.bom.Event.addNativeListener(this._window,"blur",this.__onNativeBlurWrapper,true);qx.bom.Event.addNativeListener(this._window,"draggesture",this.__onNativeDragGestureWrapper,true)},mshtml:function(){this.__onNativeMouseDownWrapper=qx.lang.Function.listener(this.__onNativeMouseDown,this);this.__onNativeMouseUpWrapper=qx.lang.Function.listener(this.__onNativeMouseUp,this);this.__onNativeFocusInWrapper=qx.lang.Function.listener(this.__onNativeFocusIn,this);this.__onNativeFocusOutWrapper=qx.lang.Function.listener(this.__onNativeFocusOut,this);this.__onNativeSelectStartWrapper=qx.lang.Function.listener(this.__onNativeSelectStart,this);qx.bom.Event.addNativeListener(this._document,"mousedown",this.__onNativeMouseDownWrapper);qx.bom.Event.addNativeListener(this._document,"mouseup",this.__onNativeMouseUpWrapper);qx.bom.Event.addNativeListener(this._document,"focusin",this.__onNativeFocusInWrapper);qx.bom.Event.addNativeListener(this._document,"focusout",this.__onNativeFocusOutWrapper);qx.bom.Event.addNativeListener(this._document,"selectstart",this.__onNativeSelectStartWrapper)},webkit:function(){this.__onNativeMouseDownWrapper=qx.lang.Function.listener(this.__onNativeMouseDown,this);this.__onNativeMouseUpWrapper=qx.lang.Function.listener(this.__onNativeMouseUp,this);this.__onNativeFocusOutWrapper=qx.lang.Function.listener(this.__onNativeFocusOut,this);this.__onNativeFocusWrapper=qx.lang.Function.listener(this.__onNativeFocus,this);this.__onNativeBlurWrapper=qx.lang.Function.listener(this.__onNativeBlur,this);this.__onNativeSelectStartWrapper=qx.lang.Function.listener(this.__onNativeSelectStart,this);qx.bom.Event.addNativeListener(this._document,"mousedown",this.__onNativeMouseDownWrapper,true);qx.bom.Event.addNativeListener(this._document,"mouseup",this.__onNativeMouseUpWrapper,true);qx.bom.Event.addNativeListener(this._document,"selectstart",this.__onNativeSelectStartWrapper,false);qx.bom.Event.addNativeListener(this._window,"DOMFocusOut",this.__onNativeFocusOutWrapper,true);qx.bom.Event.addNativeListener(this._window,"focus",this.__onNativeFocusWrapper,true);qx.bom.Event.addNativeListener(this._window,"blur",this.__onNativeBlurWrapper,true)},opera:function(){this.__onNativeMouseDownWrapper=qx.lang.Function.listener(this.__onNativeMouseDown,this);this.__onNativeMouseUpWrapper=qx.lang.Function.listener(this.__onNativeMouseUp,this);this.__onNativeFocusInWrapper=qx.lang.Function.listener(this.__onNativeFocusIn,this);this.__onNativeFocusOutWrapper=qx.lang.Function.listener(this.__onNativeFocusOut,this);qx.bom.Event.addNativeListener(this._document,"mousedown",this.__onNativeMouseDownWrapper,true);qx.bom.Event.addNativeListener(this._document,"mouseup",this.__onNativeMouseUpWrapper,true);qx.bom.Event.addNativeListener(this._window,"DOMFocusIn",this.__onNativeFocusInWrapper,true);qx.bom.Event.addNativeListener(this._window,"DOMFocusOut",this.__onNativeFocusOutWrapper,true)}}),_stopObserver:qx.core.Environment.select("engine.name",{gecko:function(){qx.bom.Event.removeNativeListener(this._document,"mousedown",this.__onNativeMouseDownWrapper,true);qx.bom.Event.removeNativeListener(this._document,"mouseup",this.__onNativeMouseUpWrapper,true);qx.bom.Event.removeNativeListener(this._window,"focus",this.__onNativeFocusWrapper,true);qx.bom.Event.removeNativeListener(this._window,"blur",this.__onNativeBlurWrapper,true);qx.bom.Event.removeNativeListener(this._window,"draggesture",this.__onNativeDragGestureWrapper,true)},mshtml:function(){qx.bom.Event.removeNativeListener(this._document,"mousedown",this.__onNativeMouseDownWrapper);qx.bom.Event.removeNativeListener(this._document,"mouseup",this.__onNativeMouseUpWrapper);qx.bom.Event.removeNativeListener(this._document,"focusin",this.__onNativeFocusInWrapper);qx.bom.Event.removeNativeListener(this._document,"focusout",this.__onNativeFocusOutWrapper);qx.bom.Event.removeNativeListener(this._document,"selectstart",this.__onNativeSelectStartWrapper)},webkit:function(){qx.bom.Event.removeNativeListener(this._document,"mousedown",this.__onNativeMouseDownWrapper,true);qx.bom.Event.removeNativeListener(this._document,"mouseup",this.__onNativeMouseUpWrapper,true);qx.bom.Event.removeNativeListener(this._document,"selectstart",this.__onNativeSelectStartWrapper,false);qx.bom.Event.removeNativeListener(this._window,"DOMFocusOut",this.__onNativeFocusOutWrapper,true);qx.bom.Event.removeNativeListener(this._window,"focus",this.__onNativeFocusWrapper,true);qx.bom.Event.removeNativeListener(this._window,"blur",this.__onNativeBlurWrapper,true)},opera:function(){qx.bom.Event.removeNativeListener(this._document,"mousedown",this.__onNativeMouseDownWrapper,true);qx.bom.Event.removeNativeListener(this._document,"mouseup",this.__onNativeMouseUpWrapper,true);qx.bom.Event.removeNativeListener(this._window,"DOMFocusIn",this.__onNativeFocusInWrapper,true);qx.bom.Event.removeNativeListener(this._window,"DOMFocusOut",this.__onNativeFocusOutWrapper,true)}}),__onNativeDragGesture:qx.event.GlobalError.observeMethod(qx.core.Environment.select("engine.name",{gecko:function(a){var b=qx.bom.Event.getTarget(a);if(!this.__isSelectable(b)){qx.bom.Event.preventDefault(a)}},"default":null})),__onNativeFocusIn:qx.event.GlobalError.observeMethod(qx.core.Environment.select("engine.name",{mshtml:function(b){this.__doWindowFocus();var c=qx.bom.Event.getTarget(b);var a=this.__findFocusableElement(c);if(a){this.setFocus(a)}this.tryActivate(c)},opera:function(a){var b=qx.bom.Event.getTarget(a);if(b==this._document||b==this._window){this.__doWindowFocus();if(this.__previousFocus){this.setFocus(this.__previousFocus);delete this.__previousFocus}if(this.__previousActive){this.setActive(this.__previousActive);delete this.__previousActive}}else{this.setFocus(b);this.tryActivate(b);if(!this.__isSelectable(b)){b.selectionStart=0;b.selectionEnd=0}}},"default":null})),__onNativeFocusOut:qx.event.GlobalError.observeMethod(qx.core.Environment.select("engine.name",{mshtml:function(b){var a=qx.bom.Event.getRelatedTarget(b);if(a==null){this.__doWindowBlur();this.resetFocus();this.resetActive()}},webkit:function(a){var b=qx.bom.Event.getTarget(a);if(b===this.getFocus()){this.resetFocus()}if(b===this.getActive()){this.resetActive()}},opera:function(a){var b=qx.bom.Event.getTarget(a);if(b==this._document){this.__doWindowBlur();this.__previousFocus=this.getFocus();this.__previousActive=this.getActive();this.resetFocus();this.resetActive()}else{if(b===this.getFocus()){this.resetFocus()}if(b===this.getActive()){this.resetActive()}}},"default":null})),__onNativeBlur:qx.event.GlobalError.observeMethod(qx.core.Environment.select("engine.name",{gecko:function(a){var b=qx.bom.Event.getTarget(a);if(b===this._window||b===this._document){this.__doWindowBlur();this.resetActive();this.resetFocus()}},webkit:function(a){var b=qx.bom.Event.getTarget(a);if(b===this._window||b===this._document){this.__doWindowBlur();this.__previousFocus=this.getFocus();this.__previousActive=this.getActive();this.resetActive();this.resetFocus()}},"default":null})),__onNativeFocus:qx.event.GlobalError.observeMethod(qx.core.Environment.select("engine.name",{gecko:function(a){var b=qx.bom.Event.getTarget(a);if(b===this._window||b===this._document){this.__doWindowFocus();b=this._body}this.setFocus(b);this.tryActivate(b)},webkit:function(a){var b=qx.bom.Event.getTarget(a);if(b===this._window||b===this._document){this.__doWindowFocus();if(this.__previousFocus){this.setFocus(this.__previousFocus);delete this.__previousFocus}if(this.__previousActive){this.setActive(this.__previousActive);delete this.__previousActive}}else{this.setFocus(b);this.tryActivate(b)}},"default":null})),__onNativeMouseDown:qx.event.GlobalError.observeMethod(qx.core.Environment.select("engine.name",{gecko:function(b){var c=qx.bom.Event.getTarget(b);var a=this.__findFocusableElement(c);if(!a){qx.bom.Event.preventDefault(b)}else{if(a===this._body){this.setFocus(a)}}},mshtml:function(c){var d=qx.bom.Event.getTarget(c);var a=this.__findFocusableElement(d);if(a){if(!this.__isSelectable(d)){d.unselectable="on";try{document.selection.empty()}catch(b){}try{a.focus()}catch(b){}}}else{qx.bom.Event.preventDefault(c);if(!this.__isSelectable(d)){d.unselectable="on"}}},webkit:function(b){var c=qx.bom.Event.getTarget(b);var a=this.__findFocusableElement(c);if(a){this.setFocus(a)}else{qx.bom.Event.preventDefault(b)}},opera:function(b){var d=qx.bom.Event.getTarget(b);var a=this.__findFocusableElement(d);if(!this.__isSelectable(d)){qx.bom.Event.preventDefault(b);if(a){var c=this.getFocus();if(c&&c.selectionEnd){c.selectionStart=0;c.selectionEnd=0;c.blur()}if(a){this.setFocus(a)}}}else{if(a){this.setFocus(a)}}},"default":null})),__onNativeMouseUp:qx.event.GlobalError.observeMethod(qx.core.Environment.select("engine.name",{mshtml:function(a){var b=qx.bom.Event.getTarget(a);if(b.unselectable){b.unselectable="off"}this.tryActivate(this.__fixFocus(b))},gecko:function(a){var b=qx.bom.Event.getTarget(a);while(b&&b.offsetWidth===undefined){b=b.parentNode}if(b){this.tryActivate(b)}},"webkit|opera":function(a){var b=qx.bom.Event.getTarget(a);this.tryActivate(this.__fixFocus(b))},"default":null})),__fixFocus:qx.event.GlobalError.observeMethod(qx.core.Environment.select("engine.name",{"mshtml|webkit":function(a){var b=this.getFocus();if(b&&a!=b&&(b.nodeName.toLowerCase()==="input"||b.nodeName.toLowerCase()==="textarea")){a=b}return a},"default":function(a){return a}})),__onNativeSelectStart:qx.event.GlobalError.observeMethod(qx.core.Environment.select("engine.name",{"mshtml|webkit":function(a){var b=qx.bom.Event.getTarget(a);if(!this.__isSelectable(b)){qx.bom.Event.preventDefault(a)}},"default":null})),__isFocusable:function(b){var a=qx.bom.element.Attribute.get(b,"tabIndex");if(a>=1){return true}var c=qx.event.handler.Focus.FOCUSABLE_ELEMENTS;if(a>=0&&c[b.tagName]){return true}return false},__findFocusableElement:function(a){while(a&&a.nodeType===1){if(a.getAttribute("qxKeepFocus")=="on"){return null}if(this.__isFocusable(a)){return a}a=a.parentNode}return this._body},__findActivatableElement:function(a){var b=a;while(a&&a.nodeType===1){if(a.getAttribute("qxKeepActive")=="on"){return null}a=a.parentNode}return b},__isSelectable:function(b){while(b&&b.nodeType===1){var a=b.getAttribute("qxSelectable");if(a!=null){return a==="on"}b=b.parentNode}return true},_applyActive:function(b,a){if(a){this.__fireEvent(a,b,"deactivate",true)}if(b){this.__fireEvent(b,a,"activate",true)}},_applyFocus:function(b,a){if(a){this.__fireEvent(a,b,"focusout",true)}if(b){this.__fireEvent(b,a,"focusin",true)}if(a){this.__fireEvent(a,b,"blur",false)}if(b){this.__fireEvent(b,a,"focus",false)}}},destruct:function(){this._stopObserver();this._manager=this._window=this._document=this._root=this._body=this.__mouseActive=null},defer:function(c){qx.event.Registration.addHandler(c);var b=c.FOCUSABLE_ELEMENTS;for(var a in b){b[a.toUpperCase()]=1}}});qx.Class.define("qx.bom.Selection",{statics:{getSelectionObject:qx.core.Environment.select("engine.name",{mshtml:function(a){return a.selection},"default":function(a){return qx.dom.Node.getWindow(a).getSelection()}}),get:qx.core.Environment.select("engine.name",{mshtml:function(b){var a=qx.bom.Range.get(qx.dom.Node.getDocument(b));return a.text},"default":function(a){if(this.__isInputOrTextarea(a)){return a.value.substring(a.selectionStart,a.selectionEnd)}else{return this.getSelectionObject(qx.dom.Node.getDocument(a)).toString()}}}),getLength:qx.core.Environment.select("engine.name",{mshtml:function(c){var b=this.get(c);var a=qx.util.StringSplit.split(b,/\r\n/);return b.length-(a.length-1)},opera:function(e){var c,d,b;if(this.__isInputOrTextarea(e)){var f=e.selectionStart;var a=e.selectionEnd;c=e.value.substring(f,a);d=a-f}else{c=qx.bom.Selection.get(e);d=c.length}b=qx.util.StringSplit.split(c,/\r\n/);return d-(b.length-1)},"default":function(a){if(this.__isInputOrTextarea(a)){return a.selectionEnd-a.selectionStart}else{return this.get(a).length}}}),getStart:qx.core.Environment.select("engine.name",{mshtml:function(d){if(this.__isInputOrTextarea(d)){var c=qx.bom.Range.get();if(!d.contains(c.parentElement())){return -1}var e=qx.bom.Range.get(d);var f=d.value.length;e.moveToBookmark(c.getBookmark());e.moveEnd("character",f);return f-e.text.length}else{var e=qx.bom.Range.get(d);var j=e.parentElement();var b=qx.bom.Range.get();try{b.moveToElementText(j)}catch(g){return 0}var a=qx.bom.Range.get(qx.dom.Node.getBodyElement(d));a.setEndPoint("StartToStart",e);a.setEndPoint("EndToEnd",b);if(b.compareEndPoints("StartToStart",a)==0){return 0}var i;var h=0;while(true){i=a.moveStart("character",-1);if(b.compareEndPoints("StartToStart",a)==0){break}if(i==0){break}else{h++}}return ++h}},"gecko|webkit":function(a){if(this.__isInputOrTextarea(a)){return a.selectionStart}else{var b=qx.dom.Node.getDocument(a);var c=this.getSelectionObject(b);if(c.anchorOffset<c.focusOffset){return c.anchorOffset}else{return c.focusOffset}}},"default":function(a){if(this.__isInputOrTextarea(a)){return a.selectionStart}else{return qx.bom.Selection.getSelectionObject(qx.dom.Node.getDocument(a)).anchorOffset}}}),getEnd:qx.core.Environment.select("engine.name",{mshtml:function(d){if(this.__isInputOrTextarea(d)){var c=qx.bom.Range.get();if(!d.contains(c.parentElement())){return -1}var e=qx.bom.Range.get(d);var f=d.value.length;e.moveToBookmark(c.getBookmark());e.moveStart("character",-f);return e.text.length}else{var e=qx.bom.Range.get(d);var j=e.parentElement();var b=qx.bom.Range.get();try{b.moveToElementText(j)}catch(g){return 0}var f=b.text.length;var a=qx.bom.Range.get(qx.dom.Node.getBodyElement(d));a.setEndPoint("EndToEnd",e);a.setEndPoint("StartToStart",b);if(b.compareEndPoints("EndToEnd",a)==0){return f-1}var i;var h=0;while(true){i=a.moveEnd("character",1);if(b.compareEndPoints("EndToEnd",a)==0){break}if(i==0){break}else{h++}}return f-(++h)}},"gecko|webkit":function(a){if(this.__isInputOrTextarea(a)){return a.selectionEnd}else{var b=qx.dom.Node.getDocument(a);var c=this.getSelectionObject(b);if(c.focusOffset>c.anchorOffset){return c.focusOffset}else{return c.anchorOffset}}},"default":function(a){if(this.__isInputOrTextarea(a)){return a.selectionEnd}else{return qx.bom.Selection.getSelectionObject(qx.dom.Node.getDocument(a)).focusOffset}}}),__isInputOrTextarea:function(a){return qx.dom.Node.isElement(a)&&(a.nodeName.toLowerCase()=="input"||a.nodeName.toLowerCase()=="textarea")},set:qx.core.Environment.select("engine.name",{mshtml:function(d,e,b){var a;if(qx.dom.Node.isDocument(d)){d=d.body}if(qx.dom.Node.isElement(d)||qx.dom.Node.isText(d)){switch(d.nodeName.toLowerCase()){case"input":case"textarea":case"button":if(b===undefined){b=d.value.length}if(e>=0&&e<=d.value.length&&b>=0&&b<=d.value.length){a=qx.bom.Range.get(d);a.collapse(true);a.moveStart("character",e);a.moveEnd("character",b-e);a.select();return true}break;case"#text":if(b===undefined){b=d.nodeValue.length}if(e>=0&&e<=d.nodeValue.length&&b>=0&&b<=d.nodeValue.length){a=qx.bom.Range.get(qx.dom.Node.getBodyElement(d));a.moveToElementText(d.parentNode);a.collapse(true);a.moveStart("character",e);a.moveEnd("character",b-e);a.select();return true}break;default:if(b===undefined){b=d.childNodes.length-1}if(d.childNodes[e]&&d.childNodes[b]){a=qx.bom.Range.get(qx.dom.Node.getBodyElement(d));a.moveToElementText(d.childNodes[e]);a.collapse(true);var c=qx.bom.Range.get(qx.dom.Node.getBodyElement(d));c.moveToElementText(d.childNodes[b]);a.setEndPoint("EndToEnd",c);a.select();return true}}}return false},"default":function(c,g,b){var f=c.nodeName.toLowerCase();if(qx.dom.Node.isElement(c)&&(f=="input"||f=="textarea")){if(b===undefined){b=c.value.length}if(g>=0&&g<=c.value.length&&b>=0&&b<=c.value.length){c.focus();c.select();c.setSelectionRange(g,b);return true}}else{var e=false;var d=qx.dom.Node.getWindow(c).getSelection();var a=qx.bom.Range.get(c);if(qx.dom.Node.isText(c)){if(b===undefined){b=c.length}if(g>=0&&g<c.length&&b>=0&&b<=c.length){e=true}}else{if(qx.dom.Node.isElement(c)){if(b===undefined){b=c.childNodes.length-1}if(g>=0&&c.childNodes[g]&&b>=0&&c.childNodes[b]){e=true}}else{if(qx.dom.Node.isDocument(c)){c=c.body;if(b===undefined){b=c.childNodes.length-1}if(g>=0&&c.childNodes[g]&&b>=0&&c.childNodes[b]){e=true}}}}if(e){if(!d.isCollapsed){d.collapseToStart()}a.setStart(c,g);if(qx.dom.Node.isText(c)){a.setEnd(c,b)}else{a.setEndAfter(c.childNodes[b])}if(d.rangeCount>0){d.removeAllRanges()}d.addRange(a);return true}}return false}}),setAll:function(a){return qx.bom.Selection.set(a,0)},clear:qx.core.Environment.select("engine.name",{mshtml:function(c){var d=qx.bom.Selection.getSelectionObject(qx.dom.Node.getDocument(c));var a=qx.bom.Range.get(c);var b=a.parentElement();var e=qx.bom.Range.get(qx.dom.Node.getDocument(c));if(b==e.parentElement()&&b==c){d.empty()}},"default":function(c){var e=qx.bom.Selection.getSelectionObject(qx.dom.Node.getDocument(c));var f=c.nodeName.toLowerCase();if(qx.dom.Node.isElement(c)&&(f=="input"||f=="textarea")){c.setSelectionRange(0,0);qx.bom.Element.blur(c)}else{if(qx.dom.Node.isDocument(c)||f=="body"){e.collapse(c.body?c.body:c,0)}else{var a=qx.bom.Range.get(c);if(!a.collapsed){var d;var b=a.commonAncestorContainer;if(qx.dom.Node.isElement(c)&&qx.dom.Node.isText(b)){d=b.parentNode}else{d=b}if(d==c){e.collapse(c,0)}}}}}})}});qx.Class.define("qx.bom.Range",{statics:{get:qx.core.Environment.select("engine.name",{mshtml:function(a){if(qx.dom.Node.isElement(a)){switch(a.nodeName.toLowerCase()){case"input":switch(a.type){case"text":case"password":case"hidden":case"button":case"reset":case"file":case"submit":return a.createTextRange();break;default:return qx.bom.Selection.getSelectionObject(qx.dom.Node.getDocument(a)).createRange()}break;case"textarea":case"body":case"button":return a.createTextRange();break;default:return qx.bom.Selection.getSelectionObject(qx.dom.Node.getDocument(a)).createRange()}}else{if(a==null){a=window}return qx.bom.Selection.getSelectionObject(qx.dom.Node.getDocument(a)).createRange()}},"default":function(a){var c=qx.dom.Node.getDocument(a);var b=qx.bom.Selection.getSelectionObject(c);if(b.rangeCount>0){return b.getRangeAt(0)}else{return c.createRange()}}})}});qx.Class.define("qx.util.StringSplit",{statics:{split:function(j,g,f){if(Object.prototype.toString.call(g)!=="[object RegExp]"){return String.prototype.split.call(j,g,f)}var d=[],b=0,e=(g.ignoreCase?"i":"")+(g.multiline?"m":"")+(g.sticky?"y":""),g=RegExp(g.source,e+"g"),c,h,i,k,a=/()??/.exec("")[1]===undefined;j=j+"";if(!a){c=RegExp("^"+g.source+"$(?!\\s)",e)}if(f===undefined||+f<0){f=Infinity}else{f=Math.floor(+f);if(!f){return[]}}while(h=g.exec(j)){i=h.index+h[0].length;if(i>b){d.push(j.slice(b,h.index));if(!a&&h.length>1){h[0].replace(c,function(){for(var l=1;l<arguments.length-2;l++){if(arguments[l]===undefined){h[l]=undefined}}})}if(h.length>1&&h.index<j.length){Array.prototype.push.apply(d,h.slice(1))}k=h[0].length;b=i;if(d.length>=f){break}}if(g.lastIndex===h.index){g.lastIndex++}}if(b===j.length){if(k||!g.test("")){d.push("")}}else{d.push(j.slice(b))}return d.length>f?d.slice(0,f):d}}});qx.Class.define("qx.event.type.Focus",{extend:qx.event.type.Event,members:{init:function(c,a,b){this.base(arguments,b,false);this._target=c;this._relatedTarget=a;return this}}});qx.Class.define("qx.bom.element.Attribute",{statics:{__hints:{names:{"class":"className","for":"htmlFor",html:"innerHTML",text:(qx.core.Environment.get("engine.name")=="mshtml")?"innerText":"textContent",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",datetime:"dateTime",accesskey:"accessKey",tabindex:"tabIndex",maxlength:"maxLength",readonly:"readOnly",longdesc:"longDesc",cellpadding:"cellPadding",cellspacing:"cellSpacing",frameborder:"frameBorder",usemap:"useMap"},runtime:{html:1,text:1},bools:{compact:1,nowrap:1,ismap:1,declare:1,noshade:1,checked:1,disabled:1,readOnly:1,multiple:1,selected:1,noresize:1,defer:1,allowTransparency:1},property:{$$html:1,$$widget:1,disabled:1,checked:1,readOnly:1,multiple:1,selected:1,value:1,maxLength:1,className:1,innerHTML:1,innerText:1,textContent:1,htmlFor:1,tabIndex:1},qxProperties:{$$widget:1,$$html:1},propertyDefault:{disabled:false,checked:false,readOnly:false,multiple:false,selected:false,value:"",className:"",innerHTML:"",innerText:"",textContent:"",htmlFor:"",tabIndex:0,maxLength:qx.core.Environment.select("engine.name",{mshtml:2147483647,webkit:524288,"default":-1})},removeableProperties:{disabled:1,multiple:1,maxLength:1},original:{href:1,src:1,type:1}},compile:function(d){var b=[];var c=this.__hints.runtime;for(var a in d){if(!c[a]){b.push(a,"='",d[a],"'")}}return b.join("")},get:qx.core.Environment.select("engine.name",{mshtml:function(b,a){var d=this.__hints;var c;a=d.names[a]||a;if(d.original[a]){c=b.getAttribute(a,2)}else{if(d.property[a]){c=b[a];if(typeof d.propertyDefault[a]!=="undefined"&&c==d.propertyDefault[a]){if(typeof d.bools[a]==="undefined"){return null}else{return c}}}else{c=b.getAttribute(a)}}if(d.bools[a]){return !!c}return c},"default":function(b,a){var d=this.__hints;var c;a=d.names[a]||a;if(d.property[a]){c=b[a];if(typeof d.propertyDefault[a]!=="undefined"&&c==d.propertyDefault[a]){if(typeof d.bools[a]==="undefined"){return null}else{return c}}}else{c=b.getAttribute(a)}if(d.bools[a]){return !!c}return c}}),set:function(b,a,d){if(typeof d==="undefined"){return}var c=this.__hints;a=c.names[a]||a;if(c.bools[a]){d=!!d}if(c.property[a]&&(!(b[a]===undefined)||c.qxProperties[a])){if(d==null){if(c.removeableProperties[a]){b.removeAttribute(a);return}else{if(typeof c.propertyDefault[a]!=="undefined"){d=c.propertyDefault[a]}}}b[a]=d}else{if(d===true){b.setAttribute(a,a)}else{if(d===false||d===null){b.removeAttribute(a)}else{b.setAttribute(a,d)}}}},reset:function(b,a){this.set(b,a,null)}}});qx.Class.define("qx.event.type.Orientation",{extend:qx.event.type.Event,members:{__orientation:null,__mode:null,init:function(a,b){this.base(arguments,false,false);this.__orientation=a;this.__mode=b;return this},clone:function(a){var b=this.base(arguments,a);b.__orientation=this.__orientation;b.__mode=this.__mode;return b},getOrientation:function(){return this.__orientation},isLandscape:function(){return this.__mode=="landscape"},isPortrait:function(){return this.__mode=="portrait"}}});qx.Class.define("qx.event.type.Touch",{extend:qx.event.type.Dom,members:{_cloneNativeEvent:function(a,c){var c=this.base(arguments,a,c);c.pageX=a.pageX;c.pageY=a.pageY;c.layerX=a.layerX;c.layerY=a.layerY;c.scale=a.scale;c.rotation=a.rotation;c.srcElement=a.srcElement;c.targetTouches=[];for(var b=0;b<a.targetTouches.length;b++){c.targetTouches[b]=a.targetTouches[b]}c.changedTouches=[];for(var b=0;b<a.changedTouches.length;b++){c.changedTouches[b]=a.changedTouches[b]}c.touches=[];for(var b=0;b<a.touches.length;b++){c.touches[b]=a.touches[b]}return c},stop:function(){this.stopPropagation()},getAllTouches:function(){return this._native.touches},getTargetTouches:function(){return this._native.targetTouches},getChangedTargetTouches:function(){return this._native.changedTouches},isMultiTouch:function(){return this.__getEventSpecificTouches().length>1},getScale:function(){return this._native.scale},getRotation:function(){return this._native.rotation},getDocumentLeft:function(a){return this.__getEventSpecificTouch(a).pageX},getDocumentTop:function(a){return this.__getEventSpecificTouch(a).pageY},getScreenLeft:function(a){return this.__getEventSpecificTouch(a).screenX},getScreenTop:function(a){return this.__getEventSpecificTouch(a).screenY},getViewportLeft:function(a){return this.__getEventSpecificTouch(a).clientX},getViewportTop:function(a){return this.__getEventSpecificTouch(a).clientY},getIdentifier:function(a){return this.__getEventSpecificTouch(a).identifier},__getEventSpecificTouch:function(a){a=a==null?0:a;return this.__getEventSpecificTouches()[a]},__getEventSpecificTouches:function(){var a=(this._isTouchEnd()?this.getChangedTargetTouches():this.getTargetTouches());return a},_isTouchEnd:function(){return(this.getType()=="touchend"||this.getType()=="touchcancel")}}});qx.Class.define("qx.event.type.Tap",{extend:qx.event.type.Touch,members:{_isTouchEnd:function(){return true}}});qx.Class.define("qx.event.type.Swipe",{extend:qx.event.type.Touch,members:{_cloneNativeEvent:function(a,b){var b=this.base(arguments,a,b);b.swipe=a.swipe;return b},_isTouchEnd:function(){return true},getStartTime:function(){return this._native.swipe.startTime},getDuration:function(){return this._native.swipe.duration},getAxis:function(){return this._native.swipe.axis},getDirection:function(){return this._native.swipe.direction},getVelocity:function(){return this._native.swipe.velocity},getDistance:function(){return this._native.swipe.distance}}});qx.Class.define("qx.event.type.Drag",{extend:qx.event.type.Event,members:{init:function(b,a){this.base(arguments,true,b);if(a){this._native=a.getNativeEvent()||null;this._originalTarget=a.getTarget()||null}else{this._native=null;this._originalTarget=null}return this},clone:function(a){var b=this.base(arguments,a);b._native=this._native;return b},getDocumentLeft:function(){if(this._native==null){return 0}if(this._native.pageX!==undefined){return this._native.pageX}else{var a=qx.dom.Node.getWindow(this._native.srcElement);return this._native.clientX+qx.bom.Viewport.getScrollLeft(a)}},getDocumentTop:function(){if(this._native==null){return 0}if(this._native.pageY!==undefined){return this._native.pageY}else{var a=qx.dom.Node.getWindow(this._native.srcElement);return this._native.clientY+qx.bom.Viewport.getScrollTop(a)}},getManager:function(){return qx.event.Registration.getManager(this.getTarget()).getHandler(qx.event.handler.DragDrop)},addType:function(a){this.getManager().addType(a)},addAction:function(a){this.getManager().addAction(a)},supportsType:function(a){return this.getManager().supportsType(a)},supportsAction:function(a){return this.getManager().supportsAction(a)},addData:function(a,b){this.getManager().addData(a,b)},getData:function(a){return this.getManager().getData(a)},getCurrentType:function(){return this.getManager().getCurrentType()},getCurrentAction:function(){return this.getManager().getCurrentAction()}}});qx.Class.define("qx.event.dispatch.MouseCapture",{extend:qx.event.dispatch.AbstractBubbling,construct:function(b,a){this.base(arguments,b);this.__window=b.getWindow();this.__registration=a;b.addListener(this.__window,"blur",this.releaseCapture,this);b.addListener(this.__window,"focus",this.releaseCapture,this);b.addListener(this.__window,"scroll",this.releaseCapture,this)},statics:{PRIORITY:qx.event.Registration.PRIORITY_FIRST},members:{__registration:null,__captureElement:null,__containerCapture:true,__window:null,_getParent:function(a){return a.parentNode},canDispatchEvent:function(c,b,a){return !!(this.__captureElement&&this.__captureEvents[a])},dispatchEvent:function(c,b,a){if(a=="click"){b.stopPropagation();this.releaseCapture();return}if(this.__containerCapture||!qx.dom.Hierarchy.contains(this.__captureElement,c)){c=this.__captureElement}this.base(arguments,c,b,a)},__captureEvents:{mouseup:1,mousedown:1,click:1,dblclick:1,mousemove:1,mouseout:1,mouseover:1},activateCapture:function(b,c){var c=c!==false;if(this.__captureElement===b&&this.__containerCapture==c){return}if(this.__captureElement){this.releaseCapture()}this.nativeSetCapture(b,c);if(this.hasNativeCapture){var a=this;qx.bom.Event.addNativeListener(b,"losecapture",function(){qx.bom.Event.removeNativeListener(b,"losecapture",arguments.callee);a.releaseCapture()})}this.__containerCapture=c;this.__captureElement=b;this.__registration.fireEvent(b,"capture",qx.event.type.Event,[true,false])},getCaptureElement:function(){return this.__captureElement},releaseCapture:function(){var a=this.__captureElement;if(!a){return}this.__captureElement=null;this.__registration.fireEvent(a,"losecapture",qx.event.type.Event,[true,false]);this.nativeReleaseCapture(a)},hasNativeCapture:qx.core.Environment.get("engine.name")=="mshtml",nativeSetCapture:qx.core.Environment.select("engine.name",{mshtml:function(a,b){a.setCapture(b!==false)},"default":qx.lang.Function.empty}),nativeReleaseCapture:qx.core.Environment.select("engine.name",{mshtml:function(a){a.releaseCapture()},"default":qx.lang.Function.empty})},destruct:function(){this.__captureElement=this.__window=this.__registration=null},defer:function(a){qx.event.Registration.addDispatcher(a)}});qx.Class.define("qx.bom.Selector",{statics:{query:null,matches:null}});
/*
 * Sizzle CSS Selector Engine
 *  Copyright 2011, The Dojo Foundation
 *  Released under the MIT, BSD, and GPL Licenses.
 *  More information: http://sizzlejs.com/
 */
(function(){var l=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,m=0,p=Object.prototype.toString,g=false,f=true,n=/\\/g,u=/\W/;[0,0].sort(function(){f=false;return 0});var c=function(z,e,C,D){C=C||[];e=e||document;var F=e;if(e.nodeType!==1&&e.nodeType!==9){return[]}if(!z||typeof z!=="string"){return C}var w,H,K,v,G,J,I,B,y=true,x=c.isXML(e),A=[],E=z;do{l.exec("");w=l.exec(E);if(w){E=w[3];A.push(w[1]);if(w[2]){v=w[3];break}}}while(w);if(A.length>1&&h.exec(z)){if(A.length===2&&i.relative[A[0]]){H=r(A[0]+A[1],e)}else{H=i.relative[A[0]]?[e]:c(A.shift(),e);while(A.length){z=A.shift();if(i.relative[z]){z+=A.shift()}H=r(z,H)}}}else{if(!D&&A.length>1&&e.nodeType===9&&!x&&i.match.ID.test(A[0])&&!i.match.ID.test(A[A.length-1])){G=c.find(A.shift(),e,x);e=G.expr?c.filter(G.expr,G.set)[0]:G.set[0]}if(e){G=D?{expr:A.pop(),set:j(D)}:c.find(A.pop(),A.length===1&&(A[0]==="~"||A[0]==="+")&&e.parentNode?e.parentNode:e,x);H=G.expr?c.filter(G.expr,G.set):G.set;if(A.length>0){K=j(H)}else{y=false}while(A.length){J=A.pop();I=J;if(!i.relative[J]){J=""}else{I=A.pop()}if(I==null){I=e}i.relative[J](K,I,x)}}else{K=A=[]}}if(!K){K=H}if(!K){c.error(J||z)}if(p.call(K)==="[object Array]"){if(!y){C.push.apply(C,K)}else{if(e&&e.nodeType===1){for(B=0;K[B]!=null;B++){if(K[B]&&(K[B]===true||K[B].nodeType===1&&c.contains(e,K[B]))){C.push(H[B])}}}else{for(B=0;K[B]!=null;B++){if(K[B]&&K[B].nodeType===1){C.push(H[B])}}}}}else{j(K,C)}if(v){c(v,F,C,D);c.uniqueSort(C)}return C};c.uniqueSort=function(v){if(o){g=f;v.sort(o);if(g){for(var e=1;e<v.length;e++){if(v[e]===v[e-1]){v.splice(e--,1)}}}}return v};c.matches=function(e,v){return c(e,null,null,v)};c.matchesSelector=function(e,v){return c(v,null,null,[e]).length>0};c.find=function(B,e,C){var A;if(!B){return[]}for(var x=0,w=i.order.length;x<w;x++){var y,z=i.order[x];if((y=i.leftMatch[z].exec(B))){var v=y[1];y.splice(1,1);if(v.substr(v.length-1)!=="\\"){y[1]=(y[1]||"").replace(n,"");A=i.find[z](y,e,C);if(A!=null){B=B.replace(i.match[z],"");break}}}}if(!A){A=typeof e.getElementsByTagName!=="undefined"?e.getElementsByTagName("*"):[]}return{set:A,expr:B}};c.filter=function(F,E,I,y){var A,e,w=F,K=[],C=E,B=E&&E[0]&&c.isXML(E[0]);while(F&&E.length){for(var D in i.filter){if((A=i.leftMatch[D].exec(F))!=null&&A[2]){var J,H,v=i.filter[D],x=A[1];e=false;A.splice(1,1);if(x.substr(x.length-1)==="\\"){continue}if(C===K){K=[]}if(i.preFilter[D]){A=i.preFilter[D](A,C,I,K,y,B);if(!A){e=J=true}else{if(A===true){continue}}}if(A){for(var z=0;(H=C[z])!=null;z++){if(H){J=v(H,A,z,C);var G=y^!!J;if(I&&J!=null){if(G){e=true}else{C[z]=false}}else{if(G){K.push(H);e=true}}}}}if(J!==undefined){if(!I){C=K}F=F.replace(i.match[D],"");if(!e){return[]}break}}}if(F===w){if(e==null){c.error(F)}else{break}}w=F}return C};c.error=function(e){throw"Syntax error, unrecognized expression: "+e};var i=c.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(A,v){var x=typeof v==="string",z=x&&!u.test(v),B=x&&!z;if(z){v=v.toLowerCase()}for(var w=0,e=A.length,y;w<e;w++){if((y=A[w])){while((y=y.previousSibling)&&y.nodeType!==1){}A[w]=B||y&&y.nodeName.toLowerCase()===v?y||false:y===v}}if(B){c.filter(v,A,true)}},">":function(A,v){var z,y=typeof v==="string",w=0,e=A.length;if(y&&!u.test(v)){v=v.toLowerCase();for(;w<e;w++){z=A[w];if(z){var x=z.parentNode;A[w]=x.nodeName.toLowerCase()===v?x:false}}}else{for(;w<e;w++){z=A[w];if(z){A[w]=y?z.parentNode:z.parentNode===v}}if(y){c.filter(v,A,true)}}},"":function(x,v,z){var y,w=m++,e=s;if(typeof v==="string"&&!u.test(v)){v=v.toLowerCase();y=v;e=a}e("parentNode",v,w,x,y,z)},"~":function(x,v,z){var y,w=m++,e=s;if(typeof v==="string"&&!u.test(v)){v=v.toLowerCase();y=v;e=a}e("previousSibling",v,w,x,y,z)}},find:{ID:function(v,w,x){if(typeof w.getElementById!=="undefined"&&!x){var e=w.getElementById(v[1]);return e&&e.parentNode?[e]:[]}},NAME:function(w,z){if(typeof z.getElementsByName!=="undefined"){var v=[],y=z.getElementsByName(w[1]);for(var x=0,e=y.length;x<e;x++){if(y[x].getAttribute("name")===w[1]){v.push(y[x])}}return v.length===0?null:v}},TAG:function(e,v){if(typeof v.getElementsByTagName!=="undefined"){return v.getElementsByTagName(e[1])}}},preFilter:{CLASS:function(x,v,w,e,A,B){x=" "+x[1].replace(n,"")+" ";if(B){return x}for(var y=0,z;(z=v[y])!=null;y++){if(z){if(A^(z.className&&(" "+z.className+" ").replace(/[\t\n\r]/g," ").indexOf(x)>=0)){if(!w){e.push(z)}}else{if(w){v[y]=false}}}}return false},ID:function(e){return e[1].replace(n,"")},TAG:function(v,e){return v[1].replace(n,"").toLowerCase()},CHILD:function(e){if(e[1]==="nth"){if(!e[2]){c.error(e[0])}e[2]=e[2].replace(/^\+|\s*/g,"");var v=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=(v[1]+(v[2]||1))-0;e[3]=v[3]-0}else{if(e[2]){c.error(e[0])}}e[0]=m++;return e},ATTR:function(y,v,w,e,z,A){var x=y[1]=y[1].replace(n,"");if(!A&&i.attrMap[x]){y[1]=i.attrMap[x]}y[4]=(y[4]||y[5]||"").replace(n,"");if(y[2]==="~="){y[4]=" "+y[4]+" "}return y},PSEUDO:function(y,v,w,e,z){if(y[1]==="not"){if((l.exec(y[3])||"").length>1||/^\w/.test(y[3])){y[3]=c(y[3],null,null,v)}else{var x=c.filter(y[3],v,w,true^z);if(!w){e.push.apply(e,x)}return false}}else{if(i.match.POS.test(y[0])||i.match.CHILD.test(y[0])){return true}}return y},POS:function(e){e.unshift(true);return e}},filters:{enabled:function(e){return e.disabled===false&&e.type!=="hidden"},disabled:function(e){return e.disabled===true},checked:function(e){return e.checked===true},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},parent:function(e){return !!e.firstChild},empty:function(e){return !e.firstChild},has:function(w,v,e){return !!c(e[3],w).length},header:function(e){return(/h\d/i).test(e.nodeName)},text:function(e){return"text"===e.getAttribute("type")},radio:function(e){return"radio"===e.type},checkbox:function(e){return"checkbox"===e.type},file:function(e){return"file"===e.type},password:function(e){return"password"===e.type},submit:function(e){return"submit"===e.type},image:function(e){return"image"===e.type},reset:function(e){return"reset"===e.type},button:function(e){return"button"===e.type||e.nodeName.toLowerCase()==="button"},input:function(e){return(/input|select|textarea|button/i).test(e.nodeName)}},setFilters:{first:function(v,e){return e===0},last:function(w,v,e,x){return v===x.length-1},even:function(v,e){return e%2===0},odd:function(v,e){return e%2===1},lt:function(w,v,e){return v<e[3]-0},gt:function(w,v,e){return v>e[3]-0},nth:function(w,v,e){return e[3]-0===v},eq:function(w,v,e){return e[3]-0===v}},filter:{PSEUDO:function(w,B,A,C){var e=B[1],v=i.filters[e];if(v){return v(w,A,B,C)}else{if(e==="contains"){return(w.textContent||w.innerText||c.getText([w])||"").indexOf(B[3])>=0}else{if(e==="not"){var x=B[3];for(var z=0,y=x.length;z<y;z++){if(x[z]===w){return false}}return true}else{c.error(e)}}}},CHILD:function(e,x){var A=x[1],v=e;switch(A){case"only":case"first":while((v=v.previousSibling)){if(v.nodeType===1){return false}}if(A==="first"){return true}v=e;case"last":while((v=v.nextSibling)){if(v.nodeType===1){return false}}return true;case"nth":var w=x[2],D=x[3];if(w===1&&D===0){return true}var z=x[0],C=e.parentNode;if(C&&(C.sizcache!==z||!e.nodeIndex)){var y=0;for(v=C.firstChild;v;v=v.nextSibling){if(v.nodeType===1){v.nodeIndex=++y}}C.sizcache=z}var B=e.nodeIndex-D;if(w===0){return B===0}else{return(B%w===0&&B/w>=0)}}},ID:function(v,e){return v.nodeType===1&&v.getAttribute("id")===e},TAG:function(v,e){return(e==="*"&&v.nodeType===1)||v.nodeName.toLowerCase()===e},CLASS:function(v,e){return(" "+(v.className||v.getAttribute("class"))+" ").indexOf(e)>-1},ATTR:function(z,x){var w=x[1],e=i.attrHandle[w]?i.attrHandle[w](z):z[w]!=null?z[w]:z.getAttribute(w),A=e+"",y=x[2],v=x[4];return e==null?y==="!=":y==="="?A===v:y==="*="?A.indexOf(v)>=0:y==="~="?(" "+A+" ").indexOf(v)>=0:!v?A&&e!==false:y==="!="?A!==v:y==="^="?A.indexOf(v)===0:y==="$="?A.substr(A.length-v.length)===v:y==="|="?A===v||A.substr(0,v.length+1)===v+"-":false},POS:function(y,v,w,z){var e=v[2],x=i.setFilters[e];if(x){return x(y,w,v,z)}}}};var h=i.match.POS,b=function(v,e){return"\\"+(e-0+1)};for(var d in i.match){i.match[d]=new RegExp(i.match[d].source+(/(?![^\[]*\])(?![^\(]*\))/.source));i.leftMatch[d]=new RegExp(/(^(?:.|\r|\n)*?)/.source+i.match[d].source.replace(/\\(\d+)/g,b))}var j=function(v,e){v=Array.prototype.slice.call(v,0);if(e){e.push.apply(e,v);return e}return v};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(t){j=function(y,x){var w=0,v=x||[];if(p.call(y)==="[object Array]"){Array.prototype.push.apply(v,y)}else{if(typeof y.length==="number"){for(var e=y.length;w<e;w++){v.push(y[w])}}else{for(;y[w];w++){v.push(y[w])}}}return v}}var o,k;if(document.documentElement.compareDocumentPosition){o=function(v,e){if(v===e){g=true;return 0}if(!v.compareDocumentPosition||!e.compareDocumentPosition){return v.compareDocumentPosition?-1:1}return v.compareDocumentPosition(e)&4?-1:1}}else{o=function(C,B){var z,v,w=[],e=[],y=C.parentNode,A=B.parentNode,D=y;if(C===B){g=true;return 0}else{if(y===A){return k(C,B)}else{if(!y){return -1}else{if(!A){return 1}}}}while(D){w.unshift(D);D=D.parentNode}D=A;while(D){e.unshift(D);D=D.parentNode}z=w.length;v=e.length;for(var x=0;x<z&&x<v;x++){if(w[x]!==e[x]){return k(w[x],e[x])}}return x===z?k(C,e[x],-1):k(w[x],B,1)};k=function(v,e,w){if(v===e){return w}var x=v.nextSibling;while(x){if(x===e){return -1}x=x.nextSibling}return 1}}c.getText=function(e){var v="",x;for(var w=0;e[w];w++){x=e[w];if(x.nodeType===3||x.nodeType===4){v+=x.nodeValue}else{if(x.nodeType!==8){v+=c.getText(x.childNodes)}}}return v};(function(){var v=document.createElement("div"),w="script"+(new Date()).getTime(),e=document.documentElement;v.innerHTML="<a name='"+w+"'/>";e.insertBefore(v,e.firstChild);if(document.getElementById(w)){i.find.ID=function(y,z,A){if(typeof z.getElementById!=="undefined"&&!A){var x=z.getElementById(y[1]);return x?x.id===y[1]||typeof x.getAttributeNode!=="undefined"&&x.getAttributeNode("id").nodeValue===y[1]?[x]:undefined:[]}};i.filter.ID=function(z,x){var y=typeof z.getAttributeNode!=="undefined"&&z.getAttributeNode("id");return z.nodeType===1&&y&&y.nodeValue===x}}e.removeChild(v);e=v=null})();(function(){var e=document.createElement("div");e.appendChild(document.createComment(""));if(e.getElementsByTagName("*").length>0){i.find.TAG=function(v,z){var y=z.getElementsByTagName(v[1]);if(v[1]==="*"){var x=[];for(var w=0;y[w];w++){if(y[w].nodeType===1){x.push(y[w])}}y=x}return y}}e.innerHTML="<a href='#'></a>";if(e.firstChild&&typeof e.firstChild.getAttribute!=="undefined"&&e.firstChild.getAttribute("href")!=="#"){i.attrHandle.href=function(v){return v.getAttribute("href",2)}}e=null})();if(document.querySelectorAll){(function(){var e=c,x=document.createElement("div"),w="__sizzle__";x.innerHTML="<p class='TEST'></p>";if(x.querySelectorAll&&x.querySelectorAll(".TEST").length===0){return}c=function(I,z,D,H){z=z||document;if(!H&&!c.isXML(z)){var G=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(I);if(G&&(z.nodeType===1||z.nodeType===9)){if(G[1]){return j(z.getElementsByTagName(I),D)}else{if(G[2]&&i.find.CLASS&&z.getElementsByClassName){return j(z.getElementsByClassName(G[2]),D)}}}if(z.nodeType===9){if(I==="body"&&z.body){return j([z.body],D)}else{if(G&&G[3]){var C=z.getElementById(G[3]);if(C&&C.parentNode){if(C.id===G[3]){return j([C],D)}}else{return j([],D)}}}try{return j(z.querySelectorAll(I),D)}catch(E){}}else{if(z.nodeType===1&&z.nodeName.toLowerCase()!=="object"){var A=z,B=z.getAttribute("id"),y=B||w,K=z.parentNode,J=/^\s*[+~]/.test(I);if(!B){z.setAttribute("id",y)}else{y=y.replace(/'/g,"\\$&")}if(J&&K){z=z.parentNode}try{if(!J||K){return j(z.querySelectorAll("[id='"+y+"'] "+I),D)}}catch(F){}finally{if(!B){A.removeAttribute("id")}}}}}return e(I,z,D,H)};for(var v in e){c[v]=e[v]}x=null})()}(function(){var e=document.documentElement,w=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector,v=false;try{w.call(document.documentElement,"[test!='']:sizzle")}catch(x){v=true}if(w){c.matchesSelector=function(y,A){A=A.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!c.isXML(y)){try{if(v||!i.match.PSEUDO.test(A)&&!/!=/.test(A)){return w.call(y,A)}}catch(z){}}return c(A,null,null,[y]).length>0}}})();(function(){var e=document.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0){return}e.lastChild.className="e";if(e.getElementsByClassName("e").length===1){return}i.order.splice(1,0,"CLASS");i.find.CLASS=function(v,w,x){if(typeof w.getElementsByClassName!=="undefined"&&!x){return w.getElementsByClassName(v[1])}};e=null})();function a(v,A,z,D,B,C){for(var x=0,w=D.length;x<w;x++){var e=D[x];if(e){var y=false;e=e[v];while(e){if(e.sizcache===z){y=D[e.sizset];break}if(e.nodeType===1&&!C){e.sizcache=z;e.sizset=x}if(e.nodeName.toLowerCase()===A){y=e;break}e=e[v]}D[x]=y}}}function s(v,A,z,D,B,C){for(var x=0,w=D.length;x<w;x++){var e=D[x];if(e){var y=false;e=e[v];while(e){if(e.sizcache===z){y=D[e.sizset];break}if(e.nodeType===1){if(!C){e.sizcache=z;e.sizset=x}if(typeof A!=="string"){if(e===A){y=true;break}}else{if(c.filter(A,[e]).length>0){y=e;break}}}e=e[v]}D[x]=y}}}if(document.documentElement.contains){c.contains=function(v,e){return v!==e&&(v.contains?v.contains(e):true)}}else{if(document.documentElement.compareDocumentPosition){c.contains=function(v,e){return !!(v.compareDocumentPosition(e)&16)}}else{c.contains=function(){return false}}}c.isXML=function(e){var v=(e?e.ownerDocument||e:0).documentElement;return v?v.nodeName!=="HTML":false};var r=function(e,B){var z,x=[],y="",w=B.nodeType?[B]:B;while((z=i.match.PSEUDO.exec(e))){y+=z[0];e=e.replace(i.match.PSEUDO,"")}e=i.relative[e]?e+"*":e;for(var A=0,v=w.length;A<v;A++){c(e,w[A],x)}return c.filter(y,x)};var q=qx.bom.Selector;q.query=function(e,v){return c(e,v)};q.matches=function(e,v){return c(e,null,null,v)}})();qx.Class.define("qx.xml.Document",{statics:{DOMDOC:null,XMLHTTP:null,isXmlDocument:function(a){if(a.nodeType===9){return a.documentElement.nodeName!=="HTML"}else{if(a.ownerDocument){return this.isXmlDocument(a.ownerDocument)}else{return false}}},create:qx.core.Environment.select("engine.name",{mshtml:function(a,c){var b=new ActiveXObject(this.DOMDOC);if(this.DOMDOC=="MSXML2.DOMDocument.3.0"){b.setProperty("SelectionLanguage","XPath")}if(c){var d='<?xml version="1.0" encoding="utf-8"?>\n<';d+=c;if(a){d+=" xmlns='"+a+"'"}d+=" />";b.loadXML(d)}return b},"default":function(a,b){return document.implementation.createDocument(a||"",b||"",null)}}),fromString:qx.core.Environment.select("engine.name",{mshtml:function(b){var a=qx.xml.Document.create();a.loadXML(b);return a},"default":function(a){var b=new DOMParser();return b.parseFromString(a,"text/xml")}})},defer:function(f){if((qx.core.Environment.get("engine.name")=="mshtml")){var c=["MSXML2.DOMDocument.6.0","MSXML2.DOMDocument.3.0"];var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0"];for(var e=0,a=c.length;e<a;e++){try{new ActiveXObject(c[e]);new ActiveXObject(b[e])}catch(d){continue}f.DOMDOC=c[e];f.XMLHTTP=b[e];break}}}});qx.Class.define("qx.bom.element.Scroll",{statics:{intoViewX:function(d,p,s){var g=d.parentNode;var x=qx.dom.Node.getDocument(d);var i=x.body;var t,v,q;var m,w,n;var f,b,e;var l,o,c,u;var h,j,a;var r=s==="left";var k=s==="right";p=p?p.parentNode:x;while(g&&g!=p){if(g.scrollWidth>g.clientWidth&&(g===i||qx.bom.element.Overflow.getY(g)!="visible")){if(g===i){v=g.scrollLeft;q=v+qx.bom.Viewport.getWidth();m=qx.bom.Viewport.getWidth();w=g.clientWidth;n=g.scrollWidth;f=0;b=0;e=0}else{t=qx.bom.element.Location.get(g);v=t.left;q=t.right;m=g.offsetWidth;w=g.clientWidth;n=g.scrollWidth;f=parseInt(qx.bom.element.Style.get(g,"borderLeftWidth"),10)||0;b=parseInt(qx.bom.element.Style.get(g,"borderRightWidth"),10)||0;e=m-w-f-b}l=qx.bom.element.Location.get(d);o=l.left;c=l.right;u=d.offsetWidth;h=o-v-f;j=c-q+b;a=0;if(r){a=h}else{if(k){a=j+e}else{if(h<0||u>w){a=h}else{if(j>0){a=j+e}}}}g.scrollLeft+=a;qx.event.Registration.fireNonBubblingEvent(g,"scroll")}if(g===i){break}g=g.parentNode}},intoViewY:function(f,r,t){var m=f.parentNode;var x=qx.dom.Node.getDocument(f);var o=x.body;var u,l,v;var i,n,w;var g,e,j;var p,a,k,q;var s,c,b;var h=t==="top";var d=t==="bottom";r=r?r.parentNode:x;while(m&&m!=r){if(m.scrollHeight>m.clientHeight&&(m===o||qx.bom.element.Overflow.getY(m)!="visible")){if(m===o){l=m.scrollTop;v=l+qx.bom.Viewport.getHeight();i=qx.bom.Viewport.getHeight();n=m.clientHeight;w=m.scrollHeight;g=0;e=0;j=0}else{u=qx.bom.element.Location.get(m);l=u.top;v=u.bottom;i=m.offsetHeight;n=m.clientHeight;w=m.scrollHeight;g=parseInt(qx.bom.element.Style.get(m,"borderTopWidth"),10)||0;e=parseInt(qx.bom.element.Style.get(m,"borderBottomWidth"),10)||0;j=i-n-g-e}p=qx.bom.element.Location.get(f);a=p.top;k=p.bottom;q=f.offsetHeight;s=a-l-g;c=k-v+e;b=0;if(h){b=s}else{if(d){b=c+j}else{if(s<0||q>n){b=s}else{if(c>0){b=c+j}}}}m.scrollTop+=b;qx.event.Registration.fireNonBubblingEvent(m,"scroll")}if(m===o){break}m=m.parentNode}},intoView:function(d,c,b,a){this.intoViewX(d,c,b);this.intoViewY(d,c,a)}}});qx.Class.define("qx.bom.element.Location",{statics:{__style:function(b,a){return qx.bom.element.Style.get(b,a,qx.bom.element.Style.COMPUTED_MODE,false)},__num:function(b,a){return parseInt(qx.bom.element.Style.get(b,a,qx.bom.element.Style.COMPUTED_MODE,false),10)||0},__computeScroll:function(b){var e=0,d=0;if(b.getBoundingClientRect&&qx.core.Environment.get("engine.name")!="opera"){var c=qx.dom.Node.getWindow(b);e-=qx.bom.Viewport.getScrollLeft(c);d-=qx.bom.Viewport.getScrollTop(c)}else{var a=qx.dom.Node.getDocument(b).body;b=b.parentNode;while(b&&b!=a){e+=b.scrollLeft;d+=b.scrollTop;b=b.parentNode}}return{left:e,top:d}},__computeBody:qx.core.Environment.select("engine.name",{mshtml:function(b){var e=qx.dom.Node.getDocument(b);var a=e.body;var d=0;var c=0;d-=a.clientLeft+e.documentElement.clientLeft;c-=a.clientTop+e.documentElement.clientTop;if(!qx.core.Environment.get("browser.quirksmode")){d+=this.__num(a,"borderLeftWidth");c+=this.__num(a,"borderTopWidth")}return{left:d,top:c}},webkit:function(b){var e=qx.dom.Node.getDocument(b);var a=e.body;var d=a.offsetLeft;var c=a.offsetTop;if(parseFloat(qx.core.Environment.get("engine.version"))<530.17){d+=this.__num(a,"borderLeftWidth");c+=this.__num(a,"borderTopWidth")}return{left:d,top:c}},gecko:function(b){var a=qx.dom.Node.getDocument(b).body;var d=a.offsetLeft;var c=a.offsetTop;if(parseFloat(qx.core.Environment.get("engine.version"))<1.9){d+=this.__num(a,"marginLeft");c+=this.__num(a,"marginTop")}if(qx.bom.element.BoxSizing.get(a)!=="border-box"){d+=this.__num(a,"borderLeftWidth");c+=this.__num(a,"borderTopWidth")}return{left:d,top:c}},"default":function(b){var a=qx.dom.Node.getDocument(b).body;var d=a.offsetLeft;var c=a.offsetTop;return{left:d,top:c}}}),__computeOffset:qx.core.Environment.select("engine.name",{"mshtml|webkit":function(c){var f=qx.dom.Node.getDocument(c);if(c.getBoundingClientRect){var b=c.getBoundingClientRect();var e=b.left;var d=b.top}else{var e=c.offsetLeft;var d=c.offsetTop;c=c.offsetParent;var a=f.body;while(c&&c!=a){e+=c.offsetLeft;d+=c.offsetTop;e+=this.__num(c,"borderLeftWidth");d+=this.__num(c,"borderTopWidth");c=c.offsetParent}}return{left:e,top:d}},gecko:function(d){if(d.getBoundingClientRect){var c=d.getBoundingClientRect();var f=Math.round(c.left);var e=Math.round(c.top)}else{var f=0;var e=0;var a=qx.dom.Node.getDocument(d).body;var b=qx.bom.element.BoxSizing;if(b.get(d)!=="border-box"){f-=this.__num(d,"borderLeftWidth");e-=this.__num(d,"borderTopWidth")}while(d&&d!==a){f+=d.offsetLeft;e+=d.offsetTop;if(b.get(d)!=="border-box"){f+=this.__num(d,"borderLeftWidth");e+=this.__num(d,"borderTopWidth")}if(d.parentNode&&this.__style(d.parentNode,"overflow")!="visible"){f+=this.__num(d.parentNode,"borderLeftWidth");e+=this.__num(d.parentNode,"borderTopWidth")}d=d.offsetParent}}return{left:f,top:e}},"default":function(b){var d=0;var c=0;var a=qx.dom.Node.getDocument(b).body;while(b&&b!==a){d+=b.offsetLeft;c+=b.offsetTop;b=b.offsetParent}return{left:d,top:c}}}),get:function(d,f){if(d.tagName=="BODY"){var j=this.__getBodyLocation(d);var c=j.left;var h=j.top}else{var g=this.__computeBody(d);var e=this.__computeOffset(d);var i=this.__computeScroll(d);var c=e.left+g.left-i.left;var h=e.top+g.top-i.top}var k=c+d.offsetWidth;var b=h+d.offsetHeight;if(f){if(f=="padding"||f=="scroll"){var a=qx.bom.element.Overflow.getX(d);if(a=="scroll"||a=="auto"){k+=d.scrollWidth-d.offsetWidth+this.__num(d,"borderLeftWidth")+this.__num(d,"borderRightWidth")}var l=qx.bom.element.Overflow.getY(d);if(l=="scroll"||l=="auto"){b+=d.scrollHeight-d.offsetHeight+this.__num(d,"borderTopWidth")+this.__num(d,"borderBottomWidth")}}switch(f){case"padding":c+=this.__num(d,"paddingLeft");h+=this.__num(d,"paddingTop");k-=this.__num(d,"paddingRight");b-=this.__num(d,"paddingBottom");case"scroll":c-=d.scrollLeft;h-=d.scrollTop;k-=d.scrollLeft;b-=d.scrollTop;case"border":c+=this.__num(d,"borderLeftWidth");h+=this.__num(d,"borderTopWidth");k-=this.__num(d,"borderRightWidth");b-=this.__num(d,"borderBottomWidth");break;case"margin":c-=this.__num(d,"marginLeft");h-=this.__num(d,"marginTop");k+=this.__num(d,"marginRight");b+=this.__num(d,"marginBottom");break}}return{left:c,top:h,right:k,bottom:b}},__getBodyLocation:qx.core.Environment.select("engine.name",{"default":function(a){var c=a.offsetTop+this.__num(a,"marginTop");var b=a.offsetLeft+this.__num(a,"marginLeft");return{left:b,top:c}},mshtml:function(a){var c=a.offsetTop;var b=a.offsetLeft;if(!((parseFloat(qx.core.Environment.get("engine.version"))<8||qx.core.Environment.get("browser.documentmode")<8)&&!qx.core.Environment.get("browser.quirksmode"))){c+=this.__num(a,"marginTop");b+=this.__num(a,"marginLeft")}return{left:b,top:c}},gecko:function(a){var c=a.offsetTop+this.__num(a,"marginTop")+this.__num(a,"borderLeftWidth");var b=a.offsetLeft+this.__num(a,"marginLeft")+this.__num(a,"borderTopWidth");return{left:b,top:c}}}),getLeft:function(a,b){return this.get(a,b).left},getTop:function(a,b){return this.get(a,b).top},getRight:function(a,b){return this.get(a,b).right},getBottom:function(a,b){return this.get(a,b).bottom},getRelative:function(b,a,f,d){var e=this.get(b,f);var c=this.get(a,d);return{left:e.left-c.left,top:e.top-c.top,right:e.right-c.right,bottom:e.bottom-c.bottom}},getPosition:function(a){return this.getRelative(a,this.getOffsetParent(a))},getOffsetParent:function(b){var c=b.offsetParent||document.body;var a=qx.bom.element.Style;while(c&&(!/^body|html$/i.test(c.tagName)&&a.get(c,"position")==="static")){c=c.offsetParent}return c}}});qx.Class.define("qx.ui.core.queue.Layout",{statics:{__queue:{},remove:function(a){delete this.__queue[a.$$hash]},add:function(a){this.__queue[a.$$hash]=a;qx.ui.core.queue.Manager.scheduleFlush("layout")},isScheduled:function(a){return !!this.__queue[a.$$hash]},flush:function(){var a=this.__getSortedQueue();for(var b=a.length-1;b>=0;b--){var d=a[b];if(d.hasValidLayout()){continue}if(d.isRootWidget()&&!d.hasUserBounds()){var e=d.getSizeHint();d.renderLayout(0,0,e.width,e.height)}else{var c=d.getBounds();d.renderLayout(c.left,c.top,c.width,c.height)}}},getNestingLevel:function(d){var b=this.__nesting;var e=0;var c=d;while(true){if(b[c.$$hash]!=null){e+=b[c.$$hash];break}if(!c.$$parent){break}c=c.$$parent;e+=1}var a=e;while(d&&d!==c){b[d.$$hash]=a--;d=d.$$parent}return e},__getLevelGroupedWidgets:function(){var e=qx.ui.core.queue.Visibility;this.__nesting={};var c=[];var a=this.__queue;var b,f;for(var d in a){b=a[d];if(e.isVisible(b)){f=this.getNestingLevel(b);if(!c[f]){c[f]={}}c[f][d]=b;delete a[d]}}return c},__getSortedQueue:function(){var f=[];var i=this.__getLevelGroupedWidgets();for(var b=i.length-1;b>=0;b--){if(!i[b]){continue}for(var c in i[b]){var d=i[b][c];if(b==0||d.isRootWidget()||d.hasUserBounds()){f.push(d);d.invalidateLayoutCache();continue}var a=d.getSizeHint(false);if(a){d.invalidateLayoutCache();var e=d.getSizeHint();var h=(!d.getBounds()||a.minWidth!==e.minWidth||a.width!==e.width||a.maxWidth!==e.maxWidth||a.minHeight!==e.minHeight||a.height!==e.height||a.maxHeight!==e.maxHeight)}else{h=true}if(h){var g=d.getLayoutParent();if(!i[b-1]){i[b-1]={}}i[b-1][g.$$hash]=g}else{f.push(d)}}}return f}}});qx.Class.define("qx.ui.core.queue.Manager",{statics:{__scheduled:false,__jobs:{},__retries:0,MAX_RETRIES:10,scheduleFlush:function(b){var a=qx.ui.core.queue.Manager;a.__jobs[b]=true;if(!a.__scheduled){a.__deferredCall.schedule();a.__scheduled=true}},flush:function(){if(qx.ui.core.queue.Manager.PAUSE){return}var b=qx.ui.core.queue.Manager;if(b.__inFlush){return}b.__inFlush=true;b.__deferredCall.cancel();var a=b.__jobs;b.__executeAndRescheduleOnError(function(){while(a.visibility||a.widget||a.appearance||a.layout||a.element){if(a.widget){delete a.widget;qx.ui.core.queue.Widget.flush()}if(a.visibility){delete a.visibility;qx.ui.core.queue.Visibility.flush()}if(a.appearance){delete a.appearance;qx.ui.core.queue.Appearance.flush()}if(a.widget||a.visibility||a.appearance){continue}if(a.layout){delete a.layout;qx.ui.core.queue.Layout.flush()}if(a.widget||a.visibility||a.appearance||a.layout){continue}if(a.element){delete a.element;qx.html.Element.flush()}}},function(){b.__scheduled=false});b.__executeAndRescheduleOnError(function(){if(a.dispose){delete a.dispose;qx.ui.core.queue.Dispose.flush()}},function(){b.__inFlush=false});b.__retries=0},__executeAndRescheduleOnError:qx.core.Environment.select("qx.debug",{"true":function(b,a){b();a()},"false":function(d,c){var a=qx.ui.core.queue.Manager;try{d()}catch(b){if(qx.core.Environment.get("qx.debug")){qx.log.Logger.error("Error while layout flush: "+b+"\nStack trace: \n"+qx.dev.StackTrace.getStackTraceFromError(b))}a.__scheduled=false;a.__inFlush=false;a.__retries+=1;if(qx.core.Environment.get("browser.name")=="ie"&&qx.core.Environment.get("browser.version")<=7){c()}if(a.__retries<=a.MAX_RETRIES){a.scheduleFlush()}else{throw new Error("Fatal Error: Flush terminated "+(a.__retries-1)+" times in a row due to exceptions in user code. The application has to be reloaded!")}throw b}finally{c()}}}),__onUserAction:function(a){var b=qx.ui.core.queue.Manager;if(a.getData()=="touchend"){b.PAUSE=true;if(b.__pauseTimeout){window.clearTimeout(b.__pauseTimeout)}b.__pauseTimeout=window.setTimeout(function(){b.PAUSE=false;b.__pauseTimeout=null;b.flush()},500)}else{b.flush()}}},defer:function(a){a.__deferredCall=new qx.util.DeferredCall(a.flush);qx.html.Element._scheduleFlush=a.scheduleFlush;qx.event.Registration.addListener(window,"useraction",qx.core.Environment.get("event.touch")?a.__onUserAction:a.flush)}});qx.Class.define("qx.ui.core.queue.Widget",{statics:{__queue:[],remove:function(a){qx.lang.Array.remove(this.__queue,a)},add:function(b){var a=this.__queue;if(qx.lang.Array.contains(a,b)){return}a.unshift(b);qx.ui.core.queue.Manager.scheduleFlush("widget")},flush:function(){var a=this.__queue;var c;for(var b=a.length-1;b>=0;b--){c=a[b];a.splice(b,1);c.syncWidget()}if(a.length!=0){return}this.__queue=[]}}});qx.Class.define("qx.ui.core.queue.Visibility",{statics:{__queue:[],__data:{},remove:function(a){delete this.__data[a.$$hash];qx.lang.Array.remove(this.__queue,a)},isVisible:function(a){return this.__data[a.$$hash]||false},__computeVisible:function(c){var b=this.__data;var d=c.$$hash;var e;if(c.isExcluded()){e=false}else{var a=c.$$parent;if(a){e=this.__computeVisible(a)}else{e=c.isRootWidget()}}return b[d]=e},add:function(b){var a=this.__queue;if(qx.lang.Array.contains(a,b)){return}a.unshift(b);qx.ui.core.queue.Manager.scheduleFlush("visibility")},flush:function(){var a=this.__queue;var d=this.__data;for(var b=a.length-1;b>=0;b--){var e=a[b].$$hash;if(d[e]!=null){a[b].addChildrenToQueue(a)}}var f={};for(var b=a.length-1;b>=0;b--){var e=a[b].$$hash;f[e]=d[e];d[e]=null}for(var b=a.length-1;b>=0;b--){var c=a[b];var e=c.$$hash;a.splice(b,1);if(d[e]==null){this.__computeVisible(c)}if(d[e]&&d[e]!=f[e]){c.checkAppearanceNeeds()}}this.__queue=[]}}});qx.Class.define("qx.ui.core.queue.Appearance",{statics:{__queue:[],remove:function(a){qx.lang.Array.remove(this.__queue,a)},add:function(b){var a=this.__queue;if(qx.lang.Array.contains(a,b)){return}a.unshift(b);qx.ui.core.queue.Manager.scheduleFlush("appearance")},has:function(a){return qx.lang.Array.contains(this.__queue,a)},flush:function(){var d=qx.ui.core.queue.Visibility;var a=this.__queue;var c;for(var b=a.length-1;b>=0;b--){c=a[b];a.splice(b,1);if(d.isVisible(c)){c.syncAppearance()}else{c.$$stateChanges=true}}}}});qx.Class.define("qx.ui.core.queue.Dispose",{statics:{__queue:[],add:function(b){var a=this.__queue;if(qx.lang.Array.contains(a,b)){return}a.unshift(b);qx.ui.core.queue.Manager.scheduleFlush("dispose")},flush:function(){var a=this.__queue;for(var b=a.length-1;b>=0;b--){var c=a[b];a.splice(b,1);c.dispose()}if(a.length!=0){return}this.__queue=[]}}});qx.Class.define("qx.ui.core.EventHandler",{extend:qx.core.Object,implement:qx.event.IEventHandler,construct:function(){this.base(arguments);this.__manager=qx.event.Registration.getManager(window)},statics:{PRIORITY:qx.event.Registration.PRIORITY_FIRST,SUPPORTED_TYPES:{mousemove:1,mouseover:1,mouseout:1,mousedown:1,mouseup:1,click:1,dblclick:1,contextmenu:1,mousewheel:1,keyup:1,keydown:1,keypress:1,keyinput:1,capture:1,losecapture:1,focusin:1,focusout:1,focus:1,blur:1,activate:1,deactivate:1,appear:1,disappear:1,dragstart:1,dragend:1,dragover:1,dragleave:1,drop:1,drag:1,dragchange:1,droprequest:1,touchstart:1,touchend:1,touchmove:1,touchcancel:1,tap:1,swipe:1},IGNORE_CAN_HANDLE:false},members:{__manager:null,__focusEvents:{focusin:1,focusout:1,focus:1,blur:1},__ignoreDisabled:{mouseover:1,mouseout:1,appear:1,disappear:1},canHandleEvent:function(b,a){return b instanceof qx.ui.core.Widget},_dispatchEvent:function(k){var g=k.getTarget();var b=qx.ui.core.Widget.getWidgetByElement(g);var m=false;while(b&&b.isAnonymous()){var m=true;b=b.getLayoutParent()}if(b&&m&&k.getType()=="activate"){b.getContainerElement().activate()}if(this.__focusEvents[k.getType()]){b=b&&b.getFocusTarget();if(!b){return}}if(k.getRelatedTarget){var h=k.getRelatedTarget();var r=qx.ui.core.Widget.getWidgetByElement(h);while(r&&r.isAnonymous()){r=r.getLayoutParent()}if(r){if(this.__focusEvents[k.getType()]){r=r.getFocusTarget()}if(r===b){return}}}var d=k.getCurrentTarget();var a=qx.ui.core.Widget.getWidgetByElement(d);if(!a||a.isAnonymous()){return}if(this.__focusEvents[k.getType()]){a=a.getFocusTarget()}var o=k.getType();if(!a||!(a.isEnabled()||this.__ignoreDisabled[o])){return}var q=k.getEventPhase()==qx.event.type.Event.CAPTURING_PHASE;var n=this.__manager.getListeners(a,o,q);if(!n||n.length===0){return}var s=qx.event.Pool.getInstance().getObject(k.constructor);k.clone(s);s.setTarget(b);s.setRelatedTarget(r||null);s.setCurrentTarget(a);var p=k.getOriginalTarget();if(p){var f=qx.ui.core.Widget.getWidgetByElement(p);while(f&&f.isAnonymous()){f=f.getLayoutParent()}s.setOriginalTarget(f)}else{s.setOriginalTarget(g)}for(var j=0,e=n.length;j<e;j++){var c=n[j].context||a;n[j].handler.call(c,s)}if(s.getPropagationStopped()){k.stopPropagation()}if(s.getDefaultPrevented()){k.preventDefault()}qx.event.Pool.getInstance().poolObject(s)},registerEvent:function(d,b,a){var c;if(b==="focus"||b==="blur"){c=d.getFocusElement()}else{if(b==="load"||b==="input"){c=d.getContentElement()}else{c=d.getContainerElement()}}if(c){c.addListener(b,this._dispatchEvent,this,a)}},unregisterEvent:function(d,b,a){var c;if(b==="focus"||b==="blur"){c=d.getFocusElement()}else{if(b==="load"||b==="input"){c=d.getContentElement()}else{c=d.getContainerElement()}}if(c){c.removeListener(b,this._dispatchEvent,this,a)}}},destruct:function(){this.__manager=null},defer:function(a){qx.event.Registration.addHandler(a)}});qx.Class.define("qx.ui.layout.Abstract",{type:"abstract",extend:qx.core.Object,members:{__sizeHint:null,_invalidChildrenCache:null,__widget:null,invalidateLayoutCache:function(){this.__sizeHint=null},renderLayout:function(b,a){this.warn("Missing renderLayout() implementation!")},getSizeHint:function(){if(this.__sizeHint){return this.__sizeHint}return this.__sizeHint=this._computeSizeHint()},hasHeightForWidth:function(){return false},getHeightForWidth:function(a){this.warn("Missing getHeightForWidth() implementation!");return null},_computeSizeHint:function(){return null},invalidateChildrenCache:function(){this._invalidChildrenCache=true},verifyLayoutProperty:qx.core.Environment.select("qx.debug",{"true":function(b,a,c){},"false":null}),_clearSeparators:function(){var a=this.__widget;if(a instanceof qx.ui.core.LayoutItem){a.clearSeparators()}},_renderSeparator:function(b,a){this.__widget.renderSeparator(b,a)},connectToWidget:function(a){if(a&&this.__widget){throw new Error("It is not possible to manually set the connected widget.")}this.__widget=a;this.invalidateChildrenCache()},_getWidget:function(){return this.__widget},_applyLayoutChange:function(){if(this.__widget){this.__widget.scheduleLayoutUpdate()}},_getLayoutChildren:function(){return this.__widget.getLayoutChildren()}},destruct:function(){this.__widget=this.__sizeHint=null}});qx.Class.define("qx.type.BaseString",{extend:Object,construct:function(a){var a=a||"";this.__txt=a;this.length=a.length},members:{$$isString:true,length:0,__txt:null,toString:function(){return this.__txt},charAt:null,valueOf:null,charCodeAt:null,concat:null,indexOf:null,lastIndexOf:null,match:null,replace:null,search:null,slice:null,split:null,substr:null,substring:null,toLowerCase:null,toUpperCase:null,toHashCode:function(){return qx.core.ObjectRegistry.toHashCode(this)},toLocaleLowerCase:null,toLocaleUpperCase:null,base:function(b,a){return qx.core.Object.prototype.base.apply(this,arguments)}},defer:function(e,b){if(qx.core.Environment.get("qx.debug")){qx.Class.include(e,qx.core.MAssert)}var d=["charAt","charCodeAt","concat","indexOf","lastIndexOf","match","replace","search","slice","split","substr","substring","toLowerCase","toUpperCase","toLocaleLowerCase","toLocaleUpperCase"];b.valueOf=b.toString;if(new e("").valueOf()==null){delete b.valueOf}for(var c=0,a=d.length;c<a;c++){b[d[c]]=String.prototype[d[c]]}}});qx.Class.define("qx.locale.LocalizedString",{extend:qx.type.BaseString,construct:function(c,b,a){this.base(arguments,c);this.__messageId=b;this.__args=a},members:{__messageId:null,__args:null,translate:function(){return qx.locale.Manager.getInstance().translate(this.__messageId,this.__args)}}});qx.Class.define("qx.locale.Manager",{type:"singleton",extend:qx.core.Object,construct:function(){this.base(arguments);this.__translations=qx.$$translations||{};this.__locales=qx.$$locales||{};var a=qx.core.Environment.get("locale");var b=qx.core.Environment.get("locale.variant");if(b!==""){a+="_"+b}this.__clientLocale=a;this.setLocale(a||this.__defaultLocale)},statics:{tr:function(c,a){var b=qx.lang.Array.fromArguments(arguments);b.splice(0,1);return qx.locale.Manager.getInstance().translate(c,b)},trn:function(c,e,d,a){var b=qx.lang.Array.fromArguments(arguments);b.splice(0,3);if(d!=1){return qx.locale.Manager.getInstance().translate(e,b)}else{return qx.locale.Manager.getInstance().translate(c,b)}},trc:function(d,c,a){var b=qx.lang.Array.fromArguments(arguments);b.splice(0,2);return qx.locale.Manager.getInstance().translate(c,b)},marktr:function(a){return a}},properties:{locale:{check:"String",nullable:true,apply:"_applyLocale",event:"changeLocale"}},members:{__defaultLocale:"C",__locale:null,__language:null,__translations:null,__locales:null,__clientLocale:null,getLanguage:function(){return this.__language},getTerritory:function(){return this.getLocale().split("_")[1]||""},getAvailableLocales:function(){var b=[];for(var a in this.__locales){if(a!=this.__defaultLocale){b.push(a)}}return b},__extractLanguage:function(a){var c;if(a==null){return null}var b=a.indexOf("_");if(b==-1){c=a}else{c=a.substring(0,b)}return c},_applyLocale:function(b,a){if(qx.core.Environment.get("qx.debug")){if(!(b in this.__locales||b==this.__clientLocale)){qx.log.Logger.warn("Locale: "+b+" not available.")}}this.__locale=b;this.__language=this.__extractLanguage(b)},addTranslation:function(d,b){var a=this.__translations;if(a[d]){for(var c in b){a[d][c]=b[c]}}else{a[d]=b}},addLocale:function(d,a){var b=this.__locales;if(b[d]){for(var c in a){b[d][c]=a[c]}}else{b[d]=a}},translate:function(d,c,a){var b=this.__translations;return this.__lookupAndExpand(b,d,c,a)},localize:function(d,c,a){var b=this.__locales;return this.__lookupAndExpand(b,d,c,a)},__lookupAndExpand:function(d,e,f,g){var c;if(!d){return e}if(g){var a=this.__extractLanguage(g)}else{g=this.__locale;a=this.__language}if(!c&&d[g]){c=d[g][e]}if(!c&&d[a]){c=d[a][e]}if(!c&&d[this.__defaultLocale]){c=d[this.__defaultLocale][e]}if(!c){c=e}if(f.length>0){var j=[];for(var b=0;b<f.length;b++){var h=f[b];if(h&&h.translate){j[b]=h.translate()}else{j[b]=h}}c=qx.lang.String.format(c,j)}if(qx.core.Environment.get("qx.dynlocale")){c=new qx.locale.LocalizedString(c,e,f)}return c}},destruct:function(){this.__translations=this.__locales=null}});qx.Class.define("qx.html.Image",{extend:qx.html.Element,members:{tagNameHint:null,_applyProperty:function(a,f){this.base(arguments,a,f);if(a==="source"){var c=this.getDomElement();var b=this.getAllStyles();if(this.getNodeName()=="div"&&this.getStyle("backgroundImage")){b.backgroundPosition=null;b.backgroundRepeat=null}var e=this._getProperty("source");var g=this._getProperty("scale");var d=g?"scale":"no-repeat";if(e!=null){e=e||null;qx.bom.element.Decoration.update(c,e,d,b)}}},_removeProperty:function(a,b){if(a=="source"){this._setProperty(a,"",b)}else{this._setProperty(a,null,b)}},_createDomElement:function(){var c=this._getProperty("scale");var b=c?"scale":"no-repeat";if((qx.core.Environment.get("engine.name")=="mshtml")){var a=this._getProperty("source");if(this.tagNameHint!=null){this.setNodeName(this.tagNameHint)}else{this.setNodeName(qx.bom.element.Decoration.getTagName(b,a))}}else{this.setNodeName(qx.bom.element.Decoration.getTagName(b))}return this.base(arguments)},_copyData:function(a){return this.base(arguments,true)},setSource:function(a){this._setProperty("source",a);return this},getSource:function(){return this._getProperty("source")},resetSource:function(){if((qx.core.Environment.get("engine.name")=="webkit")){this._setProperty("source",qx.util.ResourceManager.getInstance().toUri("qx/static/blank.gif"))}else{this._removeProperty("source",true)}return this},setScale:function(a){this._setProperty("scale",a);return this},getScale:function(){return this._getProperty("scale")}}});qx.Class.define("qx.ui.basic.Image",{extend:qx.ui.core.Widget,construct:function(a){this.__contentElements={};this.base(arguments);if(a){this.setSource(a)}},properties:{source:{check:"String",init:null,nullable:true,event:"changeSource",apply:"_applySource",themeable:true},scale:{check:"Boolean",init:false,themeable:true,apply:"_applyScale"},appearance:{refine:true,init:"image"},allowShrinkX:{refine:true,init:false},allowShrinkY:{refine:true,init:false},allowGrowX:{refine:true,init:false},allowGrowY:{refine:true,init:false}},events:{loadingFailed:"qx.event.type.Event",loaded:"qx.event.type.Event"},members:{__width:null,__height:null,__mode:null,__contentElements:null,getContentElement:function(){return this.__getSuitableContentElement()},_createContentElement:function(){return this.__getSuitableContentElement()},_getContentHint:function(){return{width:this.__width||0,height:this.__height||0}},_applyEnabled:function(b,a){this.base(arguments,b,a);if(this.getSource()){this._styleSource()}},_applySource:function(a){this._styleSource()},_applyScale:function(a){this._styleSource()},__setMode:function(a){this.__mode=a},__getMode:function(){if(this.__mode==null){var b=this.getSource();var a=false;if(b!=null){a=qx.lang.String.endsWith(b,".png")}if(this.getScale()&&a&&qx.bom.element.Decoration.isAlphaImageLoaderEnabled()){this.__mode="alphaScaled"}else{if(this.getScale()){this.__mode="scaled"}else{this.__mode="nonScaled"}}}return this.__mode},__createSuitableContentElement:function(d){var c;var b;if(d=="alphaScaled"){c=true;b="div"}else{if(d=="nonScaled"){c=false;b="div"}else{c=true;b="img"}}var a=new qx.html.Image(b);a.setScale(c);a.setStyles({overflowX:"hidden",overflowY:"hidden"});return a},__getSuitableContentElement:function(){var a=this.__getMode();if(this.__contentElements[a]==null){this.__contentElements[a]=this.__createSuitableContentElement(a)}return this.__contentElements[a]},_styleSource:function(){var b=qx.util.AliasManager.getInstance().resolve(this.getSource());if(!b){this.getContentElement().resetSource();return}this.__checkForContentElementSwitch(b);if((qx.core.Environment.get("engine.name")=="mshtml")){var a=this.getScale()?"scale":"no-repeat";this.getContentElement().tagNameHint=qx.bom.element.Decoration.getTagName(a,b)}if(qx.util.ResourceManager.getInstance().has(b)){this.__setManagedImage(this.getContentElement(),b)}else{if(qx.io.ImageLoader.isLoaded(b)){this.__setUnmanagedImage(this.getContentElement(),b)}else{this.__loadUnmanagedImage(this.getContentElement(),b)}}},__checkForContentElementSwitch:qx.core.Environment.select("engine.name",{mshtml:function(c){var a=qx.bom.element.Decoration.isAlphaImageLoaderEnabled();var b=qx.lang.String.endsWith(c,".png");if(a&&b){if(this.getScale()&&this.__getMode()!="alphaScaled"){this.__setMode("alphaScaled")}else{if(!this.getScale()&&this.__getMode()!="nonScaled"){this.__setMode("nonScaled")}}}else{if(this.getScale()&&this.__getMode()!="scaled"){this.__setMode("scaled")}else{if(!this.getScale()&&this.__getMode()!="nonScaled"){this.__setMode("nonScaled")}}}this.__checkForContentElementReplacement(this.__getSuitableContentElement())},"default":function(a){if(this.getScale()&&this.__getMode()!="scaled"){this.__setMode("scaled")}else{if(!this.getScale()&&this.__getMode("nonScaled")){this.__setMode("nonScaled")}}this.__checkForContentElementReplacement(this.__getSuitableContentElement())}}),__checkForContentElementReplacement:function(f){var b=this.getContainerElement();var g=b.getChild(0);if(g!=f){if(g!=null){var d="px";var e={};var c=this.getInnerSize();if(c!=null){e.width=c.width+d;e.height=c.height+d}var a=this.getInsets();e.left=a.left+d;e.top=a.top+d;e.zIndex=10;f.setStyles(e,true);f.setSelectable(this.getSelectable())}b.removeAt(0);b.addAt(f,0)}},__setManagedImage:function(c,d){var a=qx.util.ResourceManager.getInstance();if(!this.getEnabled()){var b=d.replace(/\.([a-z]+)$/,"-disabled.$1");if(a.has(b)){d=b;this.addState("replacement")}else{this.removeState("replacement")}}if(c.getSource()===d){return}c.setSource(d);this.__updateContentHint(a.getImageWidth(d),a.getImageHeight(d))},__setUnmanagedImage:function(d,e){var b=qx.io.ImageLoader;d.setSource(e);var c=b.getWidth(e);var a=b.getHeight(e);this.__updateContentHint(c,a)},__loadUnmanagedImage:function(c,d){var b=qx.io.ImageLoader;if(qx.core.Environment.get("qx.debug")){if(!qx.lang.String.startsWith(d.toLowerCase(),"http")){var a=this.self(arguments);if(!a.__warned){a.__warned={}}if(!a.__warned[d]){this.debug("try to load an unmanaged relative image: "+d);a.__warned[d]=true}}}if(!b.isFailed(d)){b.load(d,this.__loaderCallback,this)}else{if(c!=null){c.resetSource()}}},__loaderCallback:function(b,a){if(this.$$disposed===true){return}if(b!==qx.util.AliasManager.getInstance().resolve(this.getSource())){return}if(a.failed){this.warn("Image could not be loaded: "+b);this.fireEvent("loadingFailed")}else{this.fireEvent("loaded")}this._styleSource()},__updateContentHint:function(b,a){if(b!==this.__width||a!==this.__height){this.__width=b;this.__height=a;qx.ui.core.queue.Layout.add(this)}}},destruct:function(){this._disposeMap("__contentElements")}});qx.Class.define("qx.ui.core.DragDropCursor",{extend:qx.ui.basic.Image,include:qx.ui.core.MPlacement,type:"singleton",construct:function(){this.base(arguments);this.setZIndex(100000000);this.setDomMove(true);var a=this.getApplicationRoot();a.add(this,{left:-1000,top:-1000})},properties:{appearance:{refine:true,init:"dragdrop-cursor"},action:{check:["alias","copy","move"],apply:"_applyAction",nullable:true}},members:{_applyAction:function(b,a){if(a){this.removeState(a)}if(b){this.addState(b)}}}});qx.Class.define("qx.event.Idle",{extend:qx.core.Object,type:"singleton",construct:function(){this.base(arguments);var a=new qx.event.Timer(this.getTimeoutInterval());a.addListener("interval",this._onInterval,this);a.start();this.__timer=a},events:{interval:"qx.event.type.Event"},properties:{timeoutInterval:{check:"Number",init:100,apply:"_applyTimeoutInterval"}},members:{__timer:null,_applyTimeoutInterval:function(a){this.__timer.setInterval(a)},_onInterval:function(){this.fireEvent("interval")}},destruct:function(){if(this.__timer){this.__timer.stop()}this.__timer=null}});qx.Class.define("qx.util.placement.Placement",{extend:qx.core.Object,construct:function(){this.base(arguments);this.__defaultAxis=new qx.util.placement.DirectAxis()},properties:{axisX:{check:"qx.util.placement.AbstractAxis"},axisY:{check:"qx.util.placement.AbstractAxis"},edge:{check:["top","right","bottom","left"],init:"top"},align:{check:["top","right","bottom","left"],init:"right"}},statics:{__instance:null,compute:function(j,a,h,c,f,e,d){this.__instance=this.__instance||new qx.util.placement.Placement();var i=f.split("-");var b=i[0];var g=i[1];this.__instance.set({axisX:this.__getAxis(e),axisY:this.__getAxis(d),edge:b,align:g});return this.__instance.compute(j,a,h,c)},__direct:null,__keepAlign:null,__bestFit:null,__getAxis:function(a){switch(a){case"direct":this.__direct=this.__direct||new qx.util.placement.DirectAxis();return this.__direct;case"keep-align":this.__keepAlign=this.__keepAlign||new qx.util.placement.KeepAlignAxis();return this.__keepAlign;case"best-fit":this.__bestFit=this.__bestFit||new qx.util.placement.BestFitAxis();return this.__bestFit;default:throw new Error("Invalid 'mode' argument!'")}}},members:{__defaultAxis:null,compute:function(a,c,g,b){if(qx.core.Environment.get("qx.debug")){this.assertObject(a,"size");this.assertNumber(a.width,"size.width");this.assertNumber(a.height,"size.height");this.assertObject(c,"area");this.assertNumber(c.width,"area.width");this.assertNumber(c.height,"area.height");this.assertObject(g,"target");this.assertNumber(g.top,"target.top");this.assertNumber(g.right,"target.right");this.assertNumber(g.bottom,"target.bottom");this.assertNumber(g.left,"target.left");this.assertObject(b,"offsets");this.assertNumber(b.top,"offsets.top");this.assertNumber(b.right,"offsets.right");this.assertNumber(b.bottom,"offsets.bottom");this.assertNumber(b.left,"offsets.left")}var h=this.getAxisX()||this.__defaultAxis;var f=h.computeStart(a.width,{start:g.left,end:g.right},{start:b.left,end:b.right},c.width,this.__getPositionX());var e=this.getAxisY()||this.__defaultAxis;var d=e.computeStart(a.height,{start:g.top,end:g.bottom},{start:b.top,end:b.bottom},c.height,this.__getPositionY());return{left:f,top:d}},__getPositionX:function(){var a=this.getEdge();var b=this.getAlign();if(a=="left"){return"edge-start"}else{if(a=="right"){return"edge-end"}else{if(b=="left"){return"align-start"}else{if(b=="right"){return"align-end"}}}}},__getPositionY:function(){var a=this.getEdge();var b=this.getAlign();if(a=="top"){return"edge-start"}else{if(a=="bottom"){return"edge-end"}else{if(b=="top"){return"align-start"}else{if(b=="bottom"){return"align-end"}}}}}},destruct:function(){this._disposeObjects("__defaultAxis")}});qx.Class.define("qx.util.placement.AbstractAxis",{extend:qx.core.Object,members:{computeStart:function(c,e,d,b,a){throw new Error("abstract method call!")},_moveToEdgeAndAlign:function(b,d,c,a){switch(a){case"edge-start":return d.start-c.end-b;case"edge-end":return d.end+c.start;case"align-start":return d.start+c.start;case"align-end":return d.end-c.end-b}},_isInRange:function(c,b,a){return c>=0&&c+b<=a}}});qx.Class.define("qx.util.placement.DirectAxis",{extend:qx.util.placement.AbstractAxis,members:{computeStart:function(c,e,d,b,a){return this._moveToEdgeAndAlign(c,e,d,a)}}});qx.Class.define("qx.util.placement.KeepAlignAxis",{extend:qx.util.placement.AbstractAxis,members:{computeStart:function(e,g,f,b,a){var h=this._moveToEdgeAndAlign(e,g,f,a);var c,d;if(this._isInRange(h,e,b)){return h}if(a=="edge-start"||a=="edge-end"){c=g.start-f.end;d=g.end+f.start}else{c=g.end-f.end;d=g.start+f.start}if(c>b-d){h=c-e}else{h=d}return h}}});qx.Class.define("qx.util.placement.BestFitAxis",{extend:qx.util.placement.AbstractAxis,members:{computeStart:function(c,e,d,b,a){var f=this._moveToEdgeAndAlign(c,e,d,a);if(this._isInRange(f,c,b)){return f}if(f<0){f=Math.min(0,b-c)}if(f+c>b){f=Math.max(0,b-c)}return f}}});qx.Class.define("qx.ui.popup.Manager",{type:"singleton",extend:qx.core.Object,construct:function(){this.base(arguments);this.__objects=[];qx.event.Registration.addListener(document.documentElement,"mousedown",this.__onMouseDown,this,true);qx.bom.Element.addListener(window,"blur",this.hideAll,this)},members:{__objects:null,add:function(a){if(qx.core.Environment.get("qx.debug")){if(!(a instanceof qx.ui.popup.Popup)){throw new Error("Object is no popup: "+a)}}this.__objects.push(a);this.__updateIndexes()},remove:function(a){if(qx.core.Environment.get("qx.debug")){if(!(a instanceof qx.ui.popup.Popup)){throw new Error("Object is no popup: "+a)}}if(this.__objects){qx.lang.Array.remove(this.__objects,a);this.__updateIndexes()}},hideAll:function(){var d;var c=this.__objects;if(c){for(var b=0,a=c.length;b<a;b++){var d=c[b];d.getAutoHide()&&d.exclude()}}},__updateIndexes:function(){var b=10000000;for(var a=0;a<this.__objects.length;a++){this.__objects[a].setZIndex(b++)}},__onMouseDown:function(f){var d=qx.ui.core.Widget.getWidgetByElement(f.getTarget());var b=this.__objects;for(var a=0;a<b.length;a++){var c=b[a];if(!c.getAutoHide()||d==c||qx.ui.core.Widget.contains(c,d)){continue}c.exclude()}}},destruct:function(){qx.event.Registration.removeListener(document.documentElement,"mousedown",this.__onMouseDown,this,true);this._disposeArray("__objects")}});qx.Class.define("qx.ui.layout.Grow",{extend:qx.ui.layout.Abstract,members:{verifyLayoutProperty:qx.core.Environment.select("qx.debug",{"true":function(b,a,c){this.assert(false,"The property '"+a+"' is not supported by the Grow layout!")},"false":null}),renderLayout:function(f,g){var c=this._getLayoutChildren();var b,j,a,h;for(var e=0,d=c.length;e<d;e++){b=c[e];j=b.getSizeHint();a=f;if(a<j.minWidth){a=j.minWidth}else{if(a>j.maxWidth){a=j.maxWidth}}h=g;if(h<j.minHeight){h=j.minHeight}else{if(h>j.maxHeight){h=j.maxHeight}}b.renderLayout(0,0,a,h)}},_computeSizeHint:function(){var c=this._getLayoutChildren();var b,m;var f=0,g=0;var a=0,k=0;var j=Infinity,h=Infinity;for(var e=0,d=c.length;e<d;e++){b=c[e];m=b.getSizeHint();f=Math.max(f,m.width);g=Math.max(g,m.height);a=Math.max(a,m.minWidth);k=Math.max(k,m.minHeight);j=Math.min(j,m.maxWidth);h=Math.min(h,m.maxHeight)}return{width:f,height:g,minWidth:a,minHeight:k,maxWidth:j,maxHeight:h}}}});qx.Class.define("qx.ui.basic.Atom",{extend:qx.ui.core.Widget,construct:function(a,b){if(qx.core.Environment.get("qx.debug")){this.assertArgumentsCount(arguments,0,2)}this.base(arguments);this._setLayout(new qx.ui.layout.Atom());if(a!=null){this.setLabel(a)}if(b!=null){this.setIcon(b)}},properties:{appearance:{refine:true,init:"atom"},label:{apply:"_applyLabel",nullable:true,check:"String",event:"changeLabel"},rich:{check:"Boolean",init:false,apply:"_applyRich"},icon:{check:"String",apply:"_applyIcon",nullable:true,themeable:true,event:"changeIcon"},gap:{check:"Integer",nullable:false,event:"changeGap",apply:"_applyGap",themeable:true,init:4},show:{init:"both",check:["both","label","icon"],themeable:true,inheritable:true,apply:"_applyShow",event:"changeShow"},iconPosition:{init:"left",check:["top","right","bottom","left","top-left","bottom-left"],themeable:true,apply:"_applyIconPosition"},center:{init:false,check:"Boolean",themeable:true,apply:"_applyCenter"}},members:{_createChildControlImpl:function(c,b){var a;switch(c){case"label":a=new qx.ui.basic.Label(this.getLabel());a.setAnonymous(true);a.setRich(this.getRich());this._add(a);if(this.getLabel()==null||this.getShow()==="icon"){a.exclude()}break;case"icon":a=new qx.ui.basic.Image(this.getIcon());a.setAnonymous(true);this._addAt(a,0);if(this.getIcon()==null||this.getShow()==="label"){a.exclude()}break}return a||this.base(arguments,c)},_forwardStates:{focused:true,hovered:true},_handleLabel:function(){if(this.getLabel()==null||this.getShow()==="icon"){this._excludeChildControl("label")}else{this._showChildControl("label")}},_handleIcon:function(){if(this.getIcon()==null||this.getShow()==="label"){this._excludeChildControl("icon")}else{this._showChildControl("icon")}},_applyLabel:function(c,a){var b=this.getChildControl("label",true);if(b){b.setValue(c)}this._handleLabel()},_applyRich:function(c,a){var b=this.getChildControl("label",true);if(b){b.setRich(c)}},_applyIcon:function(c,a){var b=this.getChildControl("icon",true);if(b){b.setSource(c)}this._handleIcon()},_applyGap:function(b,a){this._getLayout().setGap(b)},_applyShow:function(b,a){this._handleLabel();this._handleIcon()},_applyIconPosition:function(b,a){this._getLayout().setIconPosition(b)},_applyCenter:function(b,a){this._getLayout().setCenter(b)},_applySelectable:function(c,a){this.base(arguments,c,a);var b=this.getChildControl("label",true);if(b){this.getChildControl("label").setSelectable(c)}}}});qx.Class.define("qx.ui.layout.Atom",{extend:qx.ui.layout.Abstract,properties:{gap:{check:"Integer",init:4,apply:"_applyLayoutChange"},iconPosition:{check:["left","top","right","bottom","top-left","bottom-left"],init:"left",apply:"_applyLayoutChange"},center:{check:"Boolean",init:false,apply:"_applyLayoutChange"}},members:{verifyLayoutProperty:qx.core.Environment.select("qx.debug",{"true":function(b,a,c){this.assert(false,"The property '"+a+"' is not supported by the Atom layout!")},"false":null}),renderLayout:function(t,a){var h=qx.ui.layout.Util;var y=this.getIconPosition();var f=this._getLayoutChildren();var d=f.length;var e,o,r,p;var k,n;var q=this.getGap();var w=this.getCenter();if(y==="bottom"||y==="right"){var g=d-1;var c=-1;var x=-1}else{var g=0;var c=d;var x=1}if(y=="top"||y=="bottom"){if(w){var b=0;for(var u=g;u!=c;u+=x){p=f[u].getSizeHint().height;if(p>0){b+=p;if(u!=g){b+=q}}}o=Math.round((a-b)/2)}else{o=0}for(var u=g;u!=c;u+=x){k=f[u];n=k.getSizeHint();r=Math.min(n.maxWidth,Math.max(t,n.minWidth));p=n.height;e=h.computeHorizontalAlignOffset("center",r,t);k.renderLayout(e,o,r,p);if(p>0){o+=p+q}}}else{var j=t;var v=null;var l=0;for(var u=g;u!=c;u+=x){k=f[u];r=k.getSizeHint().width;if(r>0){if(!v&&k instanceof qx.ui.basic.Label){v=k}else{j-=r}l++}}if(l>1){var m=(l-1)*q;j-=m}if(v){var n=v.getSizeHint();var z=Math.max(n.minWidth,Math.min(j,n.maxWidth));j-=z}if(w&&j>0){e=Math.round(j/2)}else{e=0}for(var u=g;u!=c;u+=x){k=f[u];n=k.getSizeHint();p=Math.min(n.maxHeight,Math.max(a,n.minHeight));if(k===v){r=z}else{r=n.width}var s="middle";if(y=="top-left"){s="top"}else{if(y=="bottom-left"){s="bottom"}}o=h.computeVerticalAlignOffset(s,n.height,a);k.renderLayout(e,o,r,p);if(r>0){e+=r+q}}}},_computeSizeHint:function(){var d=this._getLayoutChildren();var c=d.length;var e,n;if(c===1){var e=d[0].getSizeHint();n={width:e.width,height:e.height,minWidth:e.minWidth,minHeight:e.minHeight}}else{var a=0,b=0;var l=0,m=0;var g=this.getIconPosition();var k=this.getGap();if(g==="top"||g==="bottom"){var j=0;for(var f=0;f<c;f++){e=d[f].getSizeHint();b=Math.max(b,e.width);a=Math.max(a,e.minWidth);if(e.height>0){m+=e.height;l+=e.minHeight;j++}}if(j>1){var h=(j-1)*k;m+=h;l+=h}}else{var j=0;for(var f=0;f<c;f++){e=d[f].getSizeHint();m=Math.max(m,e.height);l=Math.max(l,e.minHeight);if(e.width>0){b+=e.width;a+=e.minWidth;j++}}if(j>1){var h=(j-1)*k;b+=h;a+=h}}n={minWidth:a,width:b,minHeight:l,height:m}}return n}}});qx.Class.define("qx.ui.layout.Util",{statics:{PERCENT_VALUE:/[0-9]+(?:\.[0-9]+)?%/,computeFlexOffsets:function(a,g,l){var c,i,j,d;var b=g>l;var f=Math.abs(g-l);var e,h;var k={};for(i in a){c=a[i];k[i]={potential:b?c.max-c.value:c.value-c.min,flex:b?c.flex:1/c.flex,offset:0}}while(f!=0){d=Infinity;j=0;for(i in k){c=k[i];if(c.potential>0){j+=c.flex;d=Math.min(d,c.potential/c.flex)}}if(j==0){break}d=Math.min(f,d*j)/j;e=0;for(i in k){c=k[i];if(c.potential>0){h=Math.min(f,c.potential,Math.ceil(d*c.flex));e+=h-d*c.flex;if(e>=1){e-=1;h-=1}c.potential-=h;if(b){c.offset+=h}else{c.offset-=h}f-=h}}}return k},computeHorizontalAlignOffset:function(f,a,e,d,c){if(d==null){d=0}if(c==null){c=0}var b=0;switch(f){case"left":b=d;break;case"right":b=e-a-c;break;case"center":b=Math.round((e-a)/2);if(b<d){b=d}else{if(b<c){b=Math.max(d,e-a-c)}}break}return b},computeVerticalAlignOffset:function(f,a,b,d,e){if(d==null){d=0}if(e==null){e=0}var c=0;switch(f){case"top":c=d;break;case"bottom":c=b-a-e;break;case"middle":c=Math.round((b-a)/2);if(c<d){c=d}else{if(c<e){c=Math.max(d,b-a-e)}}break}return c},collapseMargins:function(c){var a=0,e=0;for(var d=0,b=arguments.length;d<b;d++){var f=arguments[d];if(f<0){e=Math.min(e,f)}else{if(f>0){a=Math.max(a,f)}}}return a+e},computeHorizontalGaps:function(c,f,e){if(f==null){f=0}var d=0;if(e){d+=c[0].getMarginLeft();for(var b=1,a=c.length;b<a;b+=1){d+=this.collapseMargins(f,c[b-1].getMarginRight(),c[b].getMarginLeft())}d+=c[a-1].getMarginRight()}else{for(var b=1,a=c.length;b<a;b+=1){d+=c[b].getMarginLeft()+c[b].getMarginRight()}d+=(f*(a-1))}return d},computeVerticalGaps:function(c,f,e){if(f==null){f=0}var d=0;if(e){d+=c[0].getMarginTop();for(var b=1,a=c.length;b<a;b+=1){d+=this.collapseMargins(f,c[b-1].getMarginBottom(),c[b].getMarginTop())}d+=c[a-1].getMarginBottom()}else{for(var b=1,a=c.length;b<a;b+=1){d+=c[b].getMarginTop()+c[b].getMarginBottom()}d+=(f*(a-1))}return d},computeHorizontalSeparatorGaps:function(c,j,h){var k=qx.theme.manager.Decoration.getInstance().resolve(h);var e=k.getInsets();var a=e.left+e.right;var d=0;for(var g=0,f=c.length;g<f;g++){var b=c[g];d+=b.getMarginLeft()+b.getMarginRight()}d+=(j+a+j)*(f-1);return d},computeVerticalSeparatorGaps:function(b,h,g){var j=qx.theme.manager.Decoration.getInstance().resolve(g);var d=j.getInsets();var k=d.top+d.bottom;var c=0;for(var f=0,e=b.length;f<e;f++){var a=b[f];c+=a.getMarginTop()+a.getMarginBottom()}c+=(h+k+h)*(e-1);return c},arrangeIdeals:function(e,a,b,f,d,c){if(a<e||d<f){if(a<e&&d<f){a=e;d=f}else{if(a<e){d-=(e-a);a=e;if(d<f){d=f}}else{if(d<f){a-=(f-d);d=f;if(a<e){a=e}}}}}if(a>b||d>c){if(a>b&&d>c){a=b;d=c}else{if(a>b){d+=(a-b);a=b;if(d>c){d=c}}else{if(d>c){a+=(d-c);d=c;if(a>b){a=b}}}}}return{begin:a,end:d}}}});qx.Interface.define("qx.ui.form.IStringForm",{events:{changeValue:"qx.event.type.Data"},members:{setValue:function(a){return arguments.length==1},resetValue:function(){},getValue:function(){}}});qx.Class.define("qx.ui.basic.Label",{extend:qx.ui.core.Widget,implement:[qx.ui.form.IStringForm],construct:function(a){this.base(arguments);if(a!=null){this.setValue(a)}if(qx.core.Environment.get("qx.dynlocale")){qx.locale.Manager.getInstance().addListener("changeLocale",this._onChangeLocale,this)}},properties:{rich:{check:"Boolean",init:false,event:"changeRich",apply:"_applyRich"},wrap:{check:"Boolean",init:true,apply:"_applyWrap"},value:{check:"String",apply:"_applyValue",event:"changeValue",nullable:true},buddy:{check:"qx.ui.core.Widget",apply:"_applyBuddy",nullable:true,init:null,dereference:true},textAlign:{check:["left","center","right"],nullable:true,themeable:true,apply:"_applyTextAlign",event:"changeTextAlign"},appearance:{refine:true,init:"label"},selectable:{refine:true,init:false},allowGrowX:{refine:true,init:false},allowGrowY:{refine:true,init:false},allowShrinkY:{refine:true,init:false}},members:{__font:null,__invalidContentSize:null,__buddyEnabledBinding:null,__clickListenerId:null,_getContentHint:function(){if(this.__invalidContentSize){this.__contentSize=this.__computeContentSize();delete this.__invalidContentSize}return{width:this.__contentSize.width,height:this.__contentSize.height}},_hasHeightForWidth:function(){return this.getRich()&&this.getWrap()},_applySelectable:function(a){if(!qx.core.Environment.get("css.textoverflow")&&qx.core.Environment.get("html.xul")){if(a&&!this.isRich()){if(qx.core.Environment.get("qx.debug")){this.warn("Only rich labels are selectable in browsers with Gecko engine!")}return}}this.base(arguments,a)},_getContentHeightForWidth:function(a){if(!this.getRich()&&!this.getWrap()){return null}return this.__computeContentSize(a).height},_createContentElement:function(){return new qx.html.Label},_applyTextAlign:function(b,a){this.getContentElement().setStyle("textAlign",b)},_applyTextColor:function(b,a){if(b){this.getContentElement().setStyle("color",qx.theme.manager.Color.getInstance().resolve(b))}else{this.getContentElement().removeStyle("color")}},__contentSize:{width:0,height:0},_applyFont:function(c,a){var b;if(c){this.__font=qx.theme.manager.Font.getInstance().resolve(c);b=this.__font.getStyles()}else{this.__font=null;b=qx.bom.Font.getDefaultStyles()}this.getContentElement().setStyles(b);this.__invalidContentSize=true;qx.ui.core.queue.Layout.add(this)},__computeContentSize:function(c){var f=qx.bom.Label;var b=this.getFont();var e=b?this.__font.getStyles():qx.bom.Font.getDefaultStyles();var d=this.getValue()||"A";var a=this.getRich();return a?f.getHtmlSize(d,e,c):f.getTextSize(d,e)},_applyBuddy:function(b,a){if(a!=null){a.removeBinding(this.__buddyEnabledBinding);this.__buddyEnabledBinding=null;this.removeListenerById(this.__clickListenerId);this.__clickListenerId=null}if(b!=null){this.__buddyEnabledBinding=b.bind("enabled",this,"enabled");this.__clickListenerId=this.addListener("click",function(){if(b.isFocusable()){b.focus.apply(b)}},this)}},_applyRich:function(a){this.getContentElement().setRich(a);this.__invalidContentSize=true;qx.ui.core.queue.Layout.add(this)},_applyWrap:function(b,a){if(b&&!this.isRich()){if(qx.core.Environment.get("qx.debug")){this.warn("Only rich labels support wrap.")}}if(this.isRich()){var c=b?"normal":"nowrap";this.getContentElement().setStyle("whiteSpace",c)}},_onChangeLocale:qx.core.Environment.select("qx.dynlocale",{"true":function(b){var a=this.getValue();if(a&&a.translate){this.setValue(a.translate())}},"false":null}),_applyValue:function(b,a){this.getContentElement().setValue(b);this.__invalidContentSize=true;qx.ui.core.queue.Layout.add(this);this.fireDataEvent("changeContent",b,a)}},destruct:function(){if(qx.core.Environment.get("qx.dynlocale")){qx.locale.Manager.getInstance().removeListener("changeLocale",this._onChangeLocale,this)}if(this.__buddyEnabledBinding!=null){var a=this.getBuddy();if(a!=null&&!a.isDisposed()){a.removeBinding(this.__buddyEnabledBinding)}}this.__font=this.__buddyEnabledBinding=null}});qx.Class.define("qx.html.Label",{extend:qx.html.Element,members:{__rich:null,_applyProperty:function(a,c){this.base(arguments,a,c);if(a=="value"){var b=this.getDomElement();qx.bom.Label.setValue(b,c)}},_createDomElement:function(){var a=this.__rich;var b=qx.bom.Label.create(this._content,a);return b},_copyData:function(a){return this.base(arguments,true)},setRich:function(b){var a=this.getDomElement();if(a){throw new Error("The label mode cannot be modified after initial creation")}b=!!b;if(this.__rich==b){return}this.__rich=b;return this},setValue:function(a){this._setProperty("value",a);return this},getValue:function(){return this._getProperty("value")}}});qx.Class.define("qx.bom.Label",{statics:{__styles:{fontFamily:1,fontSize:1,fontWeight:1,fontStyle:1,lineHeight:1},__prepareText:function(){var a=this.__createMeasureElement(false);document.body.insertBefore(a,document.body.firstChild);return this._textElement=a},__prepareHtml:function(){var a=this.__createMeasureElement(true);document.body.insertBefore(a,document.body.firstChild);return this._htmlElement=a},__createMeasureElement:function(c){var e=qx.bom.Element.create("div");var d=e.style;d.width=d.height="auto";d.left=d.top="-1000px";d.visibility="hidden";d.position="absolute";d.overflow="visible";if(c){d.whiteSpace="normal"}else{d.whiteSpace="nowrap";if(!qx.core.Environment.get("css.textoverflow")&&qx.core.Environment.get("html.xul")){var a=document.createElementNS("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul","label");var d=a.style;d.padding="0";for(var b in this.__styles){d[b]="inherit"}e.appendChild(a)}}return e},__getStyles:function(a){var b={};if(a){b.whiteSpace="normal"}else{if(!qx.core.Environment.get("css.textoverflow")&&qx.core.Environment.get("html.xul")){b.display="block"}else{b.overflow="hidden";b.whiteSpace="nowrap";b.textOverflow="ellipsis";if((qx.core.Environment.get("engine.name")=="opera")){b.OTextOverflow="ellipsis"}}}return b},create:function(e,b,g){if(!g){g=window}if(b){var d=g.document.createElement("div");d.useHtml=true}else{if(!qx.core.Environment.get("css.textoverflow")&&qx.core.Environment.get("html.xul")){var d=g.document.createElement("div");var f=g.document.createElementNS("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul","label");var c=f.style;c.cursor="inherit";c.color="inherit";c.overflow="hidden";c.maxWidth="100%";c.padding="0";for(var a in this.__styles){f.style[a]="inherit"}f.setAttribute("crop","end");d.appendChild(f)}else{var d=g.document.createElement("div");qx.bom.element.Style.setStyles(d,this.__getStyles(b))}}if(e){this.setValue(d,e)}return d},setValue:function(a,b){b=b||"";if(a.useHtml){a.innerHTML=b}else{if(!qx.core.Environment.get("css.textoverflow")&&qx.core.Environment.get("html.xul")){a.firstChild.setAttribute("value",b)}else{qx.bom.element.Attribute.set(a,"text",b)}}},getValue:function(a){if(a.useHtml){return a.innerHTML}else{if(!qx.core.Environment.get("css.textoverflow")&&qx.core.Environment.get("html.xul")){return a.firstChild.getAttribute("value")||""}else{return qx.bom.element.Attribute.get(a,"text")}}},getHtmlSize:function(d,c,b){var a=this._htmlElement||this.__prepareHtml();a.style.width=b!==undefined?b+"px":"auto";a.innerHTML=d;return this.__measureSize(a,c)},getTextSize:function(c,b){var a=this._textElement||this.__prepareText();if(!qx.core.Environment.get("css.textoverflow")&&qx.core.Environment.get("html.xul")){a.firstChild.setAttribute("value",c)}else{qx.bom.element.Attribute.set(a,"text",c)}return this.__measureSize(a,b)},__measureSize:function(c,e){var d=this.__styles;if(!e){e={}}for(var b in d){c.style[b]=e[b]||""}var a=qx.bom.element.Dimension.getSize(c);if((qx.core.Environment.get("engine.name")=="gecko")){a.width++}if((qx.core.Environment.get("engine.name")=="mshtml")&&parseFloat(qx.core.Environment.get("engine.version"))>=9){a.width++}return a}}});qx.Class.define("qx.bom.element.Dimension",{statics:{getWidth:qx.core.Environment.select("engine.name",{gecko:function(a){if(a.getBoundingClientRect){var b=a.getBoundingClientRect();return Math.round(b.right)-Math.round(b.left)}else{return a.offsetWidth}},"default":function(a){return a.offsetWidth}}),getHeight:qx.core.Environment.select("engine.name",{gecko:function(a){if(a.getBoundingClientRect){var b=a.getBoundingClientRect();return Math.round(b.bottom)-Math.round(b.top)}else{return a.offsetHeight}},"default":function(a){return a.offsetHeight}}),getSize:function(a){return{width:this.getWidth(a),height:this.getHeight(a)}},__hiddenScrollbars:{visible:true,hidden:true},getContentWidth:function(e){var a=qx.bom.element.Style;var c=qx.bom.element.Overflow.getX(e);var d=parseInt(a.get(e,"paddingLeft")||"0px",10);var g=parseInt(a.get(e,"paddingRight")||"0px",10);if(this.__hiddenScrollbars[c]){var b=e.clientWidth;if((qx.core.Environment.get("engine.name")=="opera")){b=b-d-g}else{if(qx.dom.Node.isBlockNode(e)){b=b-d-g}}return b}else{if(e.clientWidth>=e.scrollWidth){return Math.max(e.clientWidth,e.scrollWidth)-d-g}else{var f=e.scrollWidth-d;if(qx.core.Environment.get("engine.name")=="mshtml"&&qx.core.Environment.get("engine.version")>=6){f-=g}return f}}},getContentHeight:function(d){var b=qx.bom.element.Style;var c=qx.bom.element.Overflow.getY(d);var e=parseInt(b.get(d,"paddingTop")||"0px",10);var f=parseInt(b.get(d,"paddingBottom")||"0px",10);if(this.__hiddenScrollbars[c]){return d.clientHeight-e-f}else{if(d.clientHeight>=d.scrollHeight){return Math.max(d.clientHeight,d.scrollHeight)-e-f}else{var a=d.scrollHeight-e;if(qx.core.Environment.get("engine.name")=="mshtml"&&qx.core.Environment.get("engine.version")==6){a-=f}return a}}},getContentSize:function(a){return{width:this.getContentWidth(a),height:this.getContentHeight(a)}}}});qx.Interface.define("qx.ui.form.IForm",{events:{changeEnabled:"qx.event.type.Data",changeValid:"qx.event.type.Data",changeInvalidMessage:"qx.event.type.Data",changeRequired:"qx.event.type.Data"},members:{setEnabled:function(a){return arguments.length==1},getEnabled:function(){},setRequired:function(a){return arguments.length==1},getRequired:function(){},setValid:function(a){return arguments.length==1},getValid:function(){},setInvalidMessage:function(a){return arguments.length==1},getInvalidMessage:function(){},setRequiredInvalidMessage:function(a){return arguments.length==1},getRequiredInvalidMessage:function(){}}});qx.Mixin.define("qx.ui.window.MDesktop",{properties:{activeWindow:{check:"qx.ui.window.Window",apply:"_applyActiveWindow",init:null,nullable:true}},members:{__windows:null,__manager:null,getWindowManager:function(){if(!this.__manager){this.setWindowManager(new qx.ui.window.Window.DEFAULT_MANAGER_CLASS())}return this.__manager},supportsMaximize:function(){return true},setWindowManager:function(a){if(this.__manager){this.__manager.setDesktop(null)}a.setDesktop(this);this.__manager=a},_onChangeActive:function(a){if(a.getData()){this.setActiveWindow(a.getTarget())}else{if(this.getActiveWindow()==a.getTarget()){this.setActiveWindow(null)}}},_applyActiveWindow:function(b,a){this.getWindowManager().changeActiveWindow(b,a);this.getWindowManager().updateStack()},_onChangeModal:function(a){this.getWindowManager().updateStack()},_onChangeVisibility:function(){this.getWindowManager().updateStack()},_afterAddChild:function(a){if(qx.Class.isDefined("qx.ui.window.Window")&&a instanceof qx.ui.window.Window){this._addWindow(a)}},_addWindow:function(a){if(!qx.lang.Array.contains(this.getWindows(),a)){this.getWindows().push(a);a.addListener("changeActive",this._onChangeActive,this);a.addListener("changeModal",this._onChangeModal,this);a.addListener("changeVisibility",this._onChangeVisibility,this)}if(a.getActive()){this.setActiveWindow(a)}this.getWindowManager().updateStack()},_afterRemoveChild:function(a){if(qx.Class.isDefined("qx.ui.window.Window")&&a instanceof qx.ui.window.Window){this._removeWindow(a)}},_removeWindow:function(a){qx.lang.Array.remove(this.getWindows(),a);a.removeListener("changeActive",this._onChangeActive,this);a.removeListener("changeModal",this._onChangeModal,this);a.removeListener("changeVisibility",this._onChangeVisibility,this);this.getWindowManager().updateStack()},getWindows:function(){if(!this.__windows){this.__windows=[]}return this.__windows}},destruct:function(){this._disposeArray("__windows");this._disposeObjects("__manager")}});qx.Mixin.define("qx.ui.core.MBlocker",{construct:function(){this.__blocker=new qx.ui.core.Blocker(this)},properties:{blockerColor:{check:"Color",init:null,nullable:true,apply:"_applyBlockerColor",themeable:true},blockerOpacity:{check:"Number",init:1,apply:"_applyBlockerOpacity",themeable:true}},members:{__blocker:null,_applyBlockerColor:function(b,a){this.__blocker.setColor(b)},_applyBlockerOpacity:function(b,a){this.__blocker.setOpacity(b)},block:function(){this.__blocker.block()},isBlocked:function(){return this.__blocker.isBlocked()},unblock:function(){this.__blocker.unblock()},forceUnblock:function(){this.__blocker.forceUnblock()},blockContent:function(a){this.__blocker.blockContent(a)},isContentBlocked:function(){return this.__blocker.isContentBlocked()},unblockContent:function(){this.__blocker.unblockContent()},forceUnblockContent:function(){this.__blocker.forceUnblockContent()},getBlocker:function(){return this.__blocker}},destruct:function(){this._disposeObjects("__blocker")}});qx.Class.define("qx.ui.root.Abstract",{type:"abstract",extend:qx.ui.core.Widget,include:[qx.ui.core.MChildrenHandling,qx.ui.core.MBlocker,qx.ui.window.MDesktop],construct:function(){this.base(arguments);qx.ui.core.FocusHandler.getInstance().addRoot(this);qx.ui.core.queue.Visibility.add(this);this.initNativeHelp();this.addListener("keypress",this.__preventScrollWhenFocused,this)},properties:{appearance:{refine:true,init:"root"},enabled:{refine:true,init:true},focusable:{refine:true,init:true},globalCursor:{check:"String",nullable:true,themeable:true,apply:"_applyGlobalCursor",event:"changeGlobalCursor"},nativeContextMenu:{refine:true,init:false},nativeHelp:{check:"Boolean",init:false,apply:"_applyNativeHelp"}},members:{__globalCursorStyleSheet:null,isRootWidget:function(){return true},getLayout:function(){return this._getLayout()},_applyGlobalCursor:qx.core.Environment.select("engine.name",{mshtml:function(b,a){},"default":function(d,b){var a=qx.bom.Stylesheet;var c=this.__globalCursorStyleSheet;if(!c){this.__globalCursorStyleSheet=c=a.createElement()}a.removeAllRules(c);if(d){a.addRule(c,"*",qx.bom.element.Cursor.compile(d).replace(";","")+" !important")}}}),_applyNativeContextMenu:function(b,a){if(b){this.removeListener("contextmenu",this._onNativeContextMenu,this,true)}else{this.addListener("contextmenu",this._onNativeContextMenu,this,true)}},_onNativeContextMenu:function(a){if(a.getTarget().getNativeContextMenu()){return}a.preventDefault()},__preventScrollWhenFocused:function(c){if(c.getKeyIdentifier()!=="Space"){return}var b=c.getTarget();var a=qx.ui.core.FocusHandler.getInstance();if(!a.isFocused(b)){return}var d=b.getContentElement().getNodeName();if(d==="input"||d==="textarea"){return}c.preventDefault()},_applyNativeHelp:qx.core.Environment.select("engine.name",{mshtml:function(b,a){if(a===false){qx.bom.Event.removeNativeListener(document,"help",qx.lang.Function.returnFalse)}if(b===false){qx.bom.Event.addNativeListener(document,"help",qx.lang.Function.returnFalse)}},"default":function(){}})},destruct:function(){this.__globalCursorStyleSheet=null},defer:function(b,a){qx.ui.core.MChildrenHandling.remap(a)}});qx.Class.define("qx.ui.root.Application",{extend:qx.ui.root.Abstract,construct:function(a){this.__window=qx.dom.Node.getWindow(a);this.__doc=a;this.base(arguments);qx.event.Registration.addListener(this.__window,"resize",this._onResize,this);this._setLayout(new qx.ui.layout.Canvas());qx.ui.core.queue.Layout.add(this);qx.ui.core.FocusHandler.getInstance().connectTo(this);this.getContentElement().disableScrolling()},members:{__window:null,__doc:null,_createContainerElement:function(){var e=this.__doc;if((qx.core.Environment.get("engine.name")=="webkit")){if(!e.body){alert("The application could not be started due to a missing body tag in the HTML file!")}}var b=e.documentElement.style;var d=e.body.style;b.overflow=d.overflow="hidden";b.padding=b.margin=d.padding=d.margin="0px";b.width=b.height=d.width=d.height="100%";var c=e.createElement("div");e.body.appendChild(c);var a=new qx.html.Root(c);a.setStyle("position","absolute");a.setAttribute("$$widget",this.toHashCode());return a},_onResize:function(a){qx.ui.core.queue.Layout.add(this)},_computeSizeHint:function(){var b=qx.bom.Viewport.getWidth(this.__window);var a=qx.bom.Viewport.getHeight(this.__window);return{minWidth:b,width:b,maxWidth:b,minHeight:a,height:a,maxHeight:a}},_applyPadding:function(c,a,b){if(c&&(b=="paddingTop"||b=="paddingLeft")){throw new Error("The root widget does not support 'left', or 'top' paddings!")}this.base(arguments,c,a,b)},_applyDecorator:function(c,b){this.base(arguments,c,b);if(!c){return}var a=this.getDecoratorElement().getInsets();if(a.left||a.top){throw new Error("The root widget does not support decorators with 'left', or 'top' insets!")}}},destruct:function(){this.__window=this.__doc=null}});qx.Class.define("qx.ui.core.Blocker",{extend:qx.core.Object,construct:function(a){this.base(arguments);this._widget=a;this._isPageRoot=(qx.Class.isDefined("qx.ui.root.Page")&&a instanceof qx.ui.root.Page);if(this._isPageRoot){a.addListener("resize",this.__onResize,this)}if(qx.Class.isDefined("qx.ui.root.Application")&&a instanceof qx.ui.root.Application){this.setKeepBlockerActive(true)}this.__activeElements=[];this.__focusElements=[];this.__contentBlockerCount=[]},properties:{color:{check:"Color",init:null,nullable:true,apply:"_applyColor",themeable:true},opacity:{check:"Number",init:1,apply:"_applyOpacity",themeable:true},keepBlockerActive:{check:"Boolean",init:false}},members:{__blocker:null,__blockerCount:0,__contentBlocker:null,__contentBlockerCount:null,__activeElements:null,__focusElements:null,__oldAnonymous:null,__timer:null,_isPageRoot:false,_widget:null,__onResize:function(b){var a=b.getData();if(this.isContentBlocked()){this.getContentBlockerElement().setStyles({width:a.width,height:a.height})}if(this.isBlocked()){this.getBlockerElement().setStyles({width:a.width,height:a.height})}},_applyColor:function(c,a){var b=qx.theme.manager.Color.getInstance().resolve(c);this.__setBlockersStyle("backgroundColor",b)},_applyOpacity:function(b,a){this.__setBlockersStyle("opacity",b)},__setBlockersStyle:function(b,c){var d=[];this.__blocker&&d.push(this.__blocker);this.__contentBlocker&&d.push(this.__contentBlocker);for(var a=0;a<d.length;a++){d[a].setStyle(b,c)}},_backupActiveWidget:function(){var a=qx.event.Registration.getManager(window).getHandler(qx.event.handler.Focus);this.__activeElements.push(a.getActive());this.__focusElements.push(a.getFocus());if(this._widget.isFocusable()){this._widget.focus()}},_restoreActiveWidget:function(){var c=this.__activeElements.length;if(c>0){var b=this.__activeElements[c-1];if(b){qx.bom.Element.activate(b)}this.__activeElements.pop()}var a=this.__focusElements.length;if(a>0){var b=this.__focusElements[a-1];if(b){qx.bom.Element.focus(this.__focusElements[a-1])}this.__focusElements.pop()}},__createBlockerElement:function(){return new qx.html.Blocker(this.getColor(),this.getOpacity())},getBlockerElement:function(){if(!this.__blocker){this.__blocker=this.__createBlockerElement();this.__blocker.setStyle("zIndex",15);this._widget.getContainerElement().add(this.__blocker);this.__blocker.exclude()}return this.__blocker},block:function(){this.__blockerCount++;if(this.__blockerCount<2){this._backupActiveWidget();var a=this.getBlockerElement();a.include();a.activate();a.addListener("deactivate",this.__activateBlockerElement,this);a.addListener("keypress",this.__stopTabEvent,this);a.addListener("keydown",this.__stopTabEvent,this);a.addListener("keyup",this.__stopTabEvent,this)}},isBlocked:function(){return this.__blockerCount>0},unblock:function(){if(!this.isBlocked()){return}this.__blockerCount--;if(this.__blockerCount<1){this.__unblock();this.__blockerCount=0}},forceUnblock:function(){if(!this.isBlocked()){return}this.__blockerCount=0;this.__unblock()},__unblock:function(){this._restoreActiveWidget();var a=this.getBlockerElement();a.removeListener("deactivate",this.__activateBlockerElement,this);a.removeListener("keypress",this.__stopTabEvent,this);a.removeListener("keydown",this.__stopTabEvent,this);a.removeListener("keyup",this.__stopTabEvent,this);a.exclude()},getContentBlockerElement:function(){if(!this.__contentBlocker){this.__contentBlocker=this.__createBlockerElement();this._widget.getContentElement().add(this.__contentBlocker);this.__contentBlocker.exclude()}return this.__contentBlocker},blockContent:function(b){var a=this.getContentBlockerElement();a.setStyle("zIndex",b);this.__contentBlockerCount.push(b);if(this.__contentBlockerCount.length<2){a.include();if(this._isPageRoot){if(!this.__timer){this.__timer=new qx.event.Timer(300);this.__timer.addListener("interval",this.__syncBlocker,this)}this.__timer.start();this.__syncBlocker()}}},isContentBlocked:function(){return this.__contentBlockerCount.length>0},unblockContent:function(){if(!this.isContentBlocked()){return}this.__contentBlockerCount.pop();var b=this.__contentBlockerCount[this.__contentBlockerCount.length-1];var a=this.getContentBlockerElement();a.setStyle("zIndex",b);if(this.__contentBlockerCount.length<1){this.__unblockContent();this.__contentBlockerCount=[]}},forceUnblockContent:function(){if(!this.isContentBlocked()){return}this.__contentBlockerCount=[];var a=this.getContentBlockerElement();a.setStyle("zIndex",null);this.__unblockContent()},__unblockContent:function(){this.getContentBlockerElement().exclude();if(this._isPageRoot){this.__timer.stop()}},__syncBlocker:function(){var a=this._widget.getContainerElement().getDomElement();var b=qx.dom.Node.getDocument(a);this.getContentBlockerElement().setStyles({height:b.documentElement.scrollHeight+"px",width:b.documentElement.scrollWidth+"px"})},__stopTabEvent:function(a){if(a.getKeyIdentifier()=="Tab"){a.stop()}},__activateBlockerElement:function(){if(this.getKeepBlockerActive()){this.getBlockerElement().activate()}}},destruct:function(){if(this._isPageRoot){this._widget.removeListener("resize",this.__onResize,this)}this._disposeObjects("__contentBlocker","__blocker","__timer");this.__oldAnonymous=this.__activeElements=this.__focusElements=this._widget=this.__contentBlockerCount=null}});qx.Class.define("qx.html.Blocker",{extend:qx.html.Element,construct:function(a,b){var a=a?qx.theme.manager.Color.getInstance().resolve(a):null;var c={position:"absolute",width:"100%",height:"100%",opacity:b||0,backgroundColor:a};if((qx.core.Environment.get("engine.name")=="mshtml")){c.backgroundImage="url("+qx.util.ResourceManager.getInstance().toUri("qx/static/blank.gif")+")";c.backgroundRepeat="repeat"}this.base(arguments,"div",c);this.addListener("mousedown",this._stopPropagation,this);this.addListener("mouseup",this._stopPropagation,this);this.addListener("click",this._stopPropagation,this);this.addListener("dblclick",this._stopPropagation,this);this.addListener("mousemove",this._stopPropagation,this);this.addListener("mouseover",this._stopPropagation,this);this.addListener("mouseout",this._stopPropagation,this);this.addListener("mousewheel",this._stopPropagation,this);this.addListener("contextmenu",this._stopPropagation,this);this.addListener("appear",this.__refreshCursor,this);this.addListener("disappear",this.__refreshCursor,this)},members:{_stopPropagation:function(a){a.stopPropagation()},__refreshCursor:function(){var a=this.getStyle("cursor");this.setStyle("cursor",null,true);this.setStyle("cursor",a,true)}}});qx.Class.define("qx.ui.core.FocusHandler",{extend:qx.core.Object,type:"singleton",construct:function(){this.base(arguments);this.__roots={}},members:{__roots:null,__activeChild:null,__focusedChild:null,__currentRoot:null,connectTo:function(a){a.addListener("keypress",this.__onKeyPress,this);a.addListener("focusin",this._onFocusIn,this,true);a.addListener("focusout",this._onFocusOut,this,true);a.addListener("activate",this._onActivate,this,true);a.addListener("deactivate",this._onDeactivate,this,true)},addRoot:function(a){this.__roots[a.$$hash]=a},removeRoot:function(a){delete this.__roots[a.$$hash]},getActiveWidget:function(){return this.__activeChild},isActive:function(a){return this.__activeChild==a},getFocusedWidget:function(){return this.__focusedChild},isFocused:function(a){return this.__focusedChild==a},isFocusRoot:function(a){return !!this.__roots[a.$$hash]},_onActivate:function(c){var b=c.getTarget();this.__activeChild=b;var a=this.__findFocusRoot(b);if(a!=this.__currentRoot){this.__currentRoot=a}},_onDeactivate:function(b){var a=b.getTarget();if(this.__activeChild==a){this.__activeChild=null}},_onFocusIn:function(b){var a=b.getTarget();if(a!=this.__focusedChild){this.__focusedChild=a;a.visualizeFocus()}},_onFocusOut:function(b){var a=b.getTarget();if(a==this.__focusedChild){this.__focusedChild=null;a.visualizeBlur()}},__onKeyPress:function(c){if(c.getKeyIdentifier()!="Tab"){return}if(!this.__currentRoot){return}c.stopPropagation();c.preventDefault();var b=this.__focusedChild;if(!c.isShiftPressed()){var a=b?this.__getWidgetAfter(b):this.__getFirstWidget()}else{var a=b?this.__getWidgetBefore(b):this.__getLastWidget()}if(a){a.tabFocus()}},__findFocusRoot:function(b){var a=this.__roots;while(b){if(a[b.$$hash]){return b}b=b.getLayoutParent()}return null},__compareTabOrder:function(k,i){if(k===i){return 0}var j=k.getTabIndex()||0;var g=i.getTabIndex()||0;if(j!=g){return j-g}var b=k.getContainerElement().getDomElement();var a=i.getContainerElement().getDomElement();var h=qx.bom.element.Location;var e=h.get(b);var c=h.get(a);if(e.top!=c.top){return e.top-c.top}if(e.left!=c.left){return e.left-c.left}var f=k.getZIndex();var d=i.getZIndex();if(f!=d){return f-d}return 0},__getFirstWidget:function(){return this.__getFirst(this.__currentRoot,null)},__getLastWidget:function(){return this.__getLast(this.__currentRoot,null)},__getWidgetAfter:function(d){var c=this.__currentRoot;if(c==d){return this.__getFirstWidget()}while(d&&d.getAnonymous()){d=d.getLayoutParent()}if(d==null){return[]}var b=[];this.__collectAllAfter(c,d,b);b.sort(this.__compareTabOrder);var a=b.length;return a>0?b[0]:this.__getFirstWidget()},__getWidgetBefore:function(d){var c=this.__currentRoot;if(c==d){return this.__getLastWidget()}while(d&&d.getAnonymous()){d=d.getLayoutParent()}if(d==null){return[]}var b=[];this.__collectAllBefore(c,d,b);b.sort(this.__compareTabOrder);var a=b.length;return a>0?b[a-1]:this.__getLastWidget()},__collectAllAfter:function(e,f,a){var d=e.getLayoutChildren();var g;for(var c=0,b=d.length;c<b;c++){g=d[c];if(!(g instanceof qx.ui.core.Widget)){continue}if(!this.isFocusRoot(g)&&g.isEnabled()&&g.isVisible()){if(g.isTabable()&&this.__compareTabOrder(f,g)<0){a.push(g)}this.__collectAllAfter(g,f,a)}}},__collectAllBefore:function(e,f,a){var d=e.getLayoutChildren();var g;for(var c=0,b=d.length;c<b;c++){g=d[c];if(!(g instanceof qx.ui.core.Widget)){continue}if(!this.isFocusRoot(g)&&g.isEnabled()&&g.isVisible()){if(g.isTabable()&&this.__compareTabOrder(f,g)>0){a.push(g)}this.__collectAllBefore(g,f,a)}}},__getFirst:function(d,f){var c=d.getLayoutChildren();var e;for(var b=0,a=c.length;b<a;b++){e=c[b];if(!(e instanceof qx.ui.core.Widget)){continue}if(!this.isFocusRoot(e)&&e.isEnabled()&&e.isVisible()){if(e.isTabable()){if(f==null||this.__compareTabOrder(e,f)<0){f=e}}f=this.__getFirst(e,f)}}return f},__getLast:function(e,b){var d=e.getLayoutChildren();var f;for(var c=0,a=d.length;c<a;c++){f=d[c];if(!(f instanceof qx.ui.core.Widget)){continue}if(!this.isFocusRoot(f)&&f.isEnabled()&&f.isVisible()){if(f.isTabable()){if(b==null||this.__compareTabOrder(f,b)>0){b=f}}b=this.__getLast(f,b)}}return b}},destruct:function(){this._disposeMap("__roots");this.__focusedChild=this.__activeChild=this.__currentRoot=null}});qx.Class.define("qx.bom.Stylesheet",{statics:{includeFile:function(a,d){if(!d){d=document}var c=d.createElement("link");c.type="text/css";c.rel="stylesheet";c.href=qx.util.ResourceManager.getInstance().toUri(a);var b=d.getElementsByTagName("head")[0];b.appendChild(c)},createElement:qx.core.Environment.select("engine.name",{mshtml:function(b){var a=document.createStyleSheet();if(b){a.cssText=b}return a},"default":function(b){var a=document.createElement("style");a.type="text/css";if(b){a.appendChild(document.createTextNode(b))}document.getElementsByTagName("head")[0].appendChild(a);return a.sheet}}),addRule:qx.core.Environment.select("engine.name",{mshtml:function(b,a,c){b.addRule(a,c)},"default":function(b,a,c){b.insertRule(a+"{"+c+"}",b.cssRules.length)}}),removeRule:qx.core.Environment.select("engine.name",{mshtml:function(d,b){var e=d.rules;var a=e.length;for(var c=a-1;c>=0;--c){if(e[c].selectorText==b){d.removeRule(c)}}},"default":function(d,b){var e=d.cssRules;var a=e.length;for(var c=a-1;c>=0;--c){if(e[c].selectorText==b){d.deleteRule(c)}}}}),removeAllRules:qx.core.Environment.select("engine.name",{mshtml:function(c){var d=c.rules;var a=d.length;for(var b=a-1;b>=0;b--){c.removeRule(b)}},"default":function(c){var d=c.cssRules;var a=d.length;for(var b=a-1;b>=0;b--){c.deleteRule(b)}}}),addImport:qx.core.Environment.select("engine.name",{mshtml:function(b,a){b.addImport(a)},"default":function(b,a){b.insertRule('@import "'+a+'";',b.cssRules.length)}}),removeImport:qx.core.Environment.select("engine.name",{mshtml:function(e,c){var b=e.imports;var a=b.length;for(var d=a-1;d>=0;d--){if(b[d].href==c){e.removeImport(d)}}},"default":function(d,b){var e=d.cssRules;var a=e.length;for(var c=a-1;c>=0;c--){if(e[c].href==b){d.deleteRule(c)}}}}),removeAllImports:qx.core.Environment.select("engine.name",{mshtml:function(d){var b=d.imports;var a=b.length;for(var c=a-1;c>=0;c--){d.removeImport(c)}},"default":function(c){var d=c.cssRules;var a=d.length;for(var b=a-1;b>=0;b--){if(d[b].type==d[b].IMPORT_RULE){c.deleteRule(b)}}}})}});qx.Class.define("qx.ui.layout.Canvas",{extend:qx.ui.layout.Abstract,members:{verifyLayoutProperty:qx.core.Environment.select("qx.debug",{"true":function(c,a,d){var b={top:1,left:1,bottom:1,right:1,width:1,height:1,edge:1,__gwt_ObjectId:1};this.assert(b[a]==1,"The property '"+a+"' is not supported by the Canvas layout!");if(a=="width"||a=="height"){this.assertMatch(d,qx.ui.layout.Util.PERCENT_VALUE)}else{if(typeof d==="number"){this.assertInteger(d)}else{if(qx.lang.Type.isString(d)){this.assertMatch(d,qx.ui.layout.Util.PERCENT_VALUE)}else{this.fail("Bad format of layout property '"+a+"': "+d+". The value must be either an integer or an percent string.")}}}},"false":null}),renderLayout:function(r,a){var f=this._getLayoutChildren();var h,m,c;var d,k,t,j,o,n;var b,e,g,q;for(var s=0,p=f.length;s<p;s++){h=f[s];m=h.getSizeHint();c=h.getLayoutProperties();b=h.getMarginTop();e=h.getMarginRight();g=h.getMarginBottom();q=h.getMarginLeft();d=c.left!=null?c.left:c.edge;if(qx.lang.Type.isString(d)){d=Math.round(parseFloat(d)*r/100)}t=c.right!=null?c.right:c.edge;if(qx.lang.Type.isString(t)){t=Math.round(parseFloat(t)*r/100)}k=c.top!=null?c.top:c.edge;if(qx.lang.Type.isString(k)){k=Math.round(parseFloat(k)*a/100)}j=c.bottom!=null?c.bottom:c.edge;if(qx.lang.Type.isString(j)){j=Math.round(parseFloat(j)*a/100)}if(d!=null&&t!=null){o=r-d-t-q-e;if(o<m.minWidth){o=m.minWidth}else{if(o>m.maxWidth){o=m.maxWidth}}d+=q}else{o=c.width;if(o==null){o=m.width}else{o=Math.round(parseFloat(o)*r/100);if(o<m.minWidth){o=m.minWidth}else{if(o>m.maxWidth){o=m.maxWidth}}}if(t!=null){d=r-o-t-e-q}else{if(d==null){d=q}else{d+=q}}}if(k!=null&&j!=null){n=a-k-j-b-g;if(n<m.minHeight){n=m.minHeight}else{if(n>m.maxHeight){n=m.maxHeight}}k+=b}else{n=c.height;if(n==null){n=m.height}else{n=Math.round(parseFloat(n)*a/100);if(n<m.minHeight){n=m.minHeight}else{if(n>m.maxHeight){n=m.maxHeight}}}if(j!=null){k=a-n-j-g-b}else{if(k==null){k=b}else{k+=b}}}h.renderLayout(d,k,o,n)}},_computeSizeHint:function(){var b=0,u=0;var f=0,a=0;var r,m;var o,h;var e=this._getLayoutChildren();var g,c,k;var d,n,v,j;for(var t=0,s=e.length;t<s;t++){g=e[t];c=g.getLayoutProperties();k=g.getSizeHint();var q=g.getMarginLeft()+g.getMarginRight();var p=g.getMarginTop()+g.getMarginBottom();r=k.width+q;m=k.minWidth+q;d=c.left!=null?c.left:c.edge;if(d&&typeof d==="number"){r+=d;m+=d}v=c.right!=null?c.right:c.edge;if(v&&typeof v==="number"){r+=v;m+=v}b=Math.max(b,r);u=Math.max(u,m);o=k.height+p;h=k.minHeight+p;n=c.top!=null?c.top:c.edge;if(n&&typeof n==="number"){o+=n;h+=n}j=c.bottom!=null?c.bottom:c.edge;if(j&&typeof j==="number"){o+=j;h+=j}f=Math.max(f,o);a=Math.max(a,h)}return{width:b,minWidth:u,height:f,minHeight:a}}}});qx.Class.define("qx.html.Root",{extend:qx.html.Element,construct:function(a){this.base(arguments);if(a!=null){this.useElement(a)}},members:{useElement:function(a){this.base(arguments,a);this.setRoot(true);qx.html.Element._modified[this.$$hash]=this}}});qx.Class.define("qx.log.appender.Util",{statics:{toHtml:function(n){var d=[];var o,c,a,k;d.push("<span class='offset'>",this.formatOffset(n.offset,6),"</span> ");if(n.object){var h=n.win.qx.core.ObjectRegistry.fromHashCode(n.object);if(h){d.push("<span class='object' title='Object instance with hash code: "+h.$$hash+"'>",h.classname,"[",h.$$hash,"]</span>: ")}}else{if(n.clazz){d.push("<span class='object'>"+n.clazz.classname,"</span>: ")}}var l=n.items;for(var g=0,m=l.length;g<m;g++){o=l[g];c=o.text;if(c instanceof Array){var k=[];for(var e=0,f=c.length;e<f;e++){a=c[e];if(typeof a==="string"){k.push("<span>"+this.escapeHTML(a)+"</span>")}else{if(a.key){k.push("<span class='type-key'>"+a.key+"</span>:<span class='type-"+a.type+"'>"+this.escapeHTML(a.text)+"</span>")}else{k.push("<span class='type-"+a.type+"'>"+this.escapeHTML(a.text)+"</span>")}}}d.push("<span class='type-"+o.type+"'>");if(o.type==="map"){d.push("{",k.join(", "),"}")}else{d.push("[",k.join(", "),"]")}d.push("</span>")}else{d.push("<span class='type-"+o.type+"'>"+this.escapeHTML(c)+"</span> ")}}var b=document.createElement("DIV");b.innerHTML=d.join("");b.className="level-"+n.level;return b},formatOffset:function(f,b){var e=f.toString();var d=(b||6)-e.length;var c="";for(var a=0;a<d;a++){c+="0"}return c+e},FORMAT_STACK:null,escapeHTML:function(a){return String(a).replace(/[<>&"']/g,this.__escapeHTMLReplace)},__escapeHTMLReplace:function(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;","'":"&#39;",'"':"&quot;"};return b[a]||"?"},toText:function(a){return this.toTextArray(a).join(" ")},toTextArray:function(l){var b=[];b.push(this.formatOffset(l.offset,6));if(l.object){var e=l.win.qx.core.ObjectRegistry.fromHashCode(l.object);if(e){b.push(e.classname+"["+e.$$hash+"]:")}}else{if(l.clazz){b.push(l.clazz.classname+":")}}var h=l.items;var m,a;for(var f=0,k=h.length;f<k;f++){m=h[f];a=m.text;if(m.trace&&m.trace.length>0){if(typeof(this.FORMAT_STACK)=="function"){a+="\n"+this.FORMAT_STACK(m.trace)}else{a+="\n"+m.trace}}if(a instanceof Array){var g=[];for(var c=0,d=a.length;c<d;c++){g.push(a[c].text)}if(m.type==="map"){b.push("{",g.join(", "),"}")}else{b.push("[",g.join(", "),"]")}}else{b.push(a)}}return b}}});qx.Class.define("qx.log.appender.Native",{statics:{process:qx.core.Environment.select("engine.name",{gecko:function(a){if(window.console&&console.firebug){console[a.level].call(console,qx.log.appender.Util.toText(a))}},mshtml:function(b){if(window.console){var c=b.level;if(c=="debug"){c="log"}var a=qx.log.appender.Util.toText(b);console[c](a)}},webkit:function(b){if(window.console){var c=b.level;if(c=="debug"){c="log"}var a=qx.log.appender.Util.toText(b);console[c](a)}},opera:function(a){}})},defer:function(a){qx.log.Logger.register(a)}});qx.Class.define("qx.log.appender.Console",{statics:{init:function(){var c=[".qxconsole{z-index:10000;width:600px;height:300px;top:0px;right:0px;position:absolute;border-left:1px solid black;color:black;border-bottom:1px solid black;color:black;font-family:Consolas,Monaco,monospace;font-size:11px;line-height:1.2;}",".qxconsole .control{background:#cdcdcd;border-bottom:1px solid black;padding:4px 8px;}",".qxconsole .control a{text-decoration:none;color:black;}",".qxconsole .messages{background:white;height:100%;width:100%;overflow:auto;}",".qxconsole .messages div{padding:0px 4px;}",".qxconsole .messages .user-command{color:blue}",".qxconsole .messages .user-result{background:white}",".qxconsole .messages .user-error{background:#FFE2D5}",".qxconsole .messages .level-debug{background:white}",".qxconsole .messages .level-info{background:#DEEDFA}",".qxconsole .messages .level-warn{background:#FFF7D5}",".qxconsole .messages .level-error{background:#FFE2D5}",".qxconsole .messages .level-user{background:#E3EFE9}",".qxconsole .messages .type-string{color:black;font-weight:normal;}",".qxconsole .messages .type-number{color:#155791;font-weight:normal;}",".qxconsole .messages .type-boolean{color:#15BC91;font-weight:normal;}",".qxconsole .messages .type-array{color:#CC3E8A;font-weight:bold;}",".qxconsole .messages .type-map{color:#CC3E8A;font-weight:bold;}",".qxconsole .messages .type-key{color:#565656;font-style:italic}",".qxconsole .messages .type-class{color:#5F3E8A;font-weight:bold}",".qxconsole .messages .type-instance{color:#565656;font-weight:bold}",".qxconsole .messages .type-stringify{color:#565656;font-weight:bold}",".qxconsole .command{background:white;padding:2px 4px;border-top:1px solid black;}",".qxconsole .command input{width:100%;border:0 none;font-family:Consolas,Monaco,monospace;font-size:11px;line-height:1.2;}",".qxconsole .command input:focus{outline:none;}"];qx.bom.Stylesheet.createElement(c.join(""));var b=['<div class="qxconsole">','<div class="control"><a href="javascript:qx.log.appender.Console.clear()">Clear</a> | <a href="javascript:qx.log.appender.Console.toggle()">Hide</a></div>','<div class="messages">',"</div>",'<div class="command">','<input type="text"/>',"</div>","</div>"];var d=document.createElement("DIV");d.innerHTML=b.join("");var a=d.firstChild;document.body.appendChild(d.firstChild);this.__main=a;this.__log=a.childNodes[1];this.__cmd=a.childNodes[2].firstChild;this.__onResize();qx.log.Logger.register(this);qx.core.ObjectRegistry.register(this)},dispose:function(){qx.event.Registration.removeListener(document.documentElement,"keypress",this.__onKeyPress,this);qx.log.Logger.unregister(this)},clear:function(){this.__log.innerHTML=""},process:function(a){this.__log.appendChild(qx.log.appender.Util.toHtml(a));this.__scrollDown()},__scrollDown:function(){this.__log.scrollTop=this.__log.scrollHeight},__visible:true,toggle:function(){if(!this.__main){this.init()}else{if(this.__main.style.display=="none"){this.show()}else{this.__main.style.display="none"}}},show:function(){if(!this.__main){this.init()}else{this.__main.style.display="block";this.__log.scrollTop=this.__log.scrollHeight}},__history:[],execute:function(){var value=this.__cmd.value;if(value==""){return}if(value=="clear"){return this.clear()}var command=document.createElement("div");command.innerHTML=qx.log.appender.Util.escapeHTML(">>> "+value);command.className="user-command";this.__history.push(value);this.__lastCommand=this.__history.length;this.__log.appendChild(command);this.__scrollDown();try{var ret=window.eval(value)}catch(ex){qx.log.Logger.error(ex)}if(ret!==undefined){qx.log.Logger.debug(ret)}},__onResize:function(a){this.__log.style.height=(this.__main.clientHeight-this.__main.firstChild.offsetHeight-this.__main.lastChild.offsetHeight)+"px"},__onKeyPress:function(c){var a=c.getKeyIdentifier();if((a=="F7")||(a=="D"&&c.isCtrlPressed())){this.toggle();c.preventDefault()}if(!this.__main){return}if(!qx.dom.Hierarchy.contains(this.__main,c.getTarget())){return}if(a=="Enter"&&this.__cmd.value!=""){this.execute();this.__cmd.value=""}if(a=="Up"||a=="Down"){this.__lastCommand+=a=="Up"?-1:1;this.__lastCommand=Math.min(Math.max(0,this.__lastCommand),this.__history.length);var b=this.__history[this.__lastCommand];this.__cmd.value=b||"";this.__cmd.select()}}},defer:function(a){qx.event.Registration.addListener(document.documentElement,"keypress",a.__onKeyPress,a)}});qx.Mixin.define("qx.ui.core.MExecutable",{events:{execute:"qx.event.type.Event"},properties:{command:{check:"qx.ui.core.Command",apply:"_applyCommand",event:"changeCommand",nullable:true}},members:{__executableBindingIds:null,__semaphore:false,__executeListenerId:null,_bindableProperties:["enabled","label","icon","toolTipText","value","menu"],execute:function(){var a=this.getCommand();if(a){if(this.__semaphore){this.__semaphore=false}else{this.__semaphore=true;a.execute(this)}}this.fireEvent("execute")},__onCommandExecute:function(a){if(this.__semaphore){this.__semaphore=false;return}this.__semaphore=true;this.execute()},_applyCommand:function(g,a){if(a!=null){a.removeListenerById(this.__executeListenerId)}if(g!=null){this.__executeListenerId=g.addListener("execute",this.__onCommandExecute,this)}var e=this.__executableBindingIds;if(e==null){this.__executableBindingIds=e={}}var b;for(var d=0;d<this._bindableProperties.length;d++){var f=this._bindableProperties[d];if(a!=null&&!a.isDisposed()&&e[f]!=null){a.removeBinding(e[f]);e[f]=null}if(g!=null&&qx.Class.hasProperty(this.constructor,f)){var c=g.get(f);if(c==null){b=this.get(f)}else{b=null}e[f]=g.bind(f,this,f);if(b){this.set(f,b)}}}}},destruct:function(){this._applyCommand(null,this.getCommand());this.__executableBindingIds=null}});qx.Interface.define("qx.ui.form.IExecutable",{events:{execute:"qx.event.type.Data"},members:{setCommand:function(a){return arguments.length==1},getCommand:function(){},execute:function(){}}});qx.Class.define("qx.ui.form.Button",{extend:qx.ui.basic.Atom,include:[qx.ui.core.MExecutable],implement:[qx.ui.form.IExecutable],construct:function(a,b,c){this.base(arguments,a,b);if(c!=null){this.setCommand(c)}this.addListener("mouseover",this._onMouseOver);this.addListener("mouseout",this._onMouseOut);this.addListener("mousedown",this._onMouseDown);this.addListener("mouseup",this._onMouseUp);this.addListener("keydown",this._onKeyDown);this.addListener("keyup",this._onKeyUp);this.addListener("dblclick",this._onStopEvent)},properties:{appearance:{refine:true,init:"button"},focusable:{refine:true,init:true}},members:{_forwardStates:{focused:true,hovered:true,pressed:true,disabled:true},press:function(){if(this.hasState("abandoned")){return}this.addState("pressed")},release:function(){if(this.hasState("pressed")){this.removeState("pressed")}},reset:function(){this.removeState("pressed");this.removeState("abandoned");this.removeState("hovered")},_onMouseOver:function(a){if(!this.isEnabled()||a.getTarget()!==this){return}if(this.hasState("abandoned")){this.removeState("abandoned");this.addState("pressed")}this.addState("hovered")},_onMouseOut:function(a){if(!this.isEnabled()||a.getTarget()!==this){return}this.removeState("hovered");if(this.hasState("pressed")){this.removeState("pressed");this.addState("abandoned")}},_onMouseDown:function(a){if(!a.isLeftPressed()){return}a.stopPropagation();this.capture();this.removeState("abandoned");this.addState("pressed")},_onMouseUp:function(b){this.releaseCapture();var a=this.hasState("pressed");var c=this.hasState("abandoned");if(a){this.removeState("pressed")}if(c){this.removeState("abandoned")}else{this.addState("hovered");if(a){this.execute()}}b.stopPropagation()},_onKeyDown:function(a){switch(a.getKeyIdentifier()){case"Enter":case"Space":this.removeState("abandoned");this.addState("pressed");a.stopPropagation()}},_onKeyUp:function(a){switch(a.getKeyIdentifier()){case"Enter":case"Space":if(this.hasState("pressed")){this.removeState("abandoned");this.removeState("pressed");this.execute();a.stopPropagation()}}}}});qx.Mixin.define("qx.ui.core.MSingleSelectionHandling",{events:{changeSelection:"qx.event.type.Data"},members:{__manager:null,getSelection:function(){var a=this.__getManager().getSelected();if(a){return[a]}else{return[]}},setSelection:function(a){switch(a.length){case 0:this.resetSelection();break;case 1:this.__getManager().setSelected(a[0]);break;default:throw new Error("Could only select one item, but the selection array contains "+a.length+" items!")}},resetSelection:function(){this.__getManager().resetSelected()},isSelected:function(a){return this.__getManager().isSelected(a)},isSelectionEmpty:function(){return this.__getManager().isSelectionEmpty()},getSelectables:function(a){return this.__getManager().getSelectables(a)},_onChangeSelected:function(c){var b=c.getData();var a=c.getOldData();b==null?b=[]:b=[b];a==null?a=[]:a=[a];this.fireDataEvent("changeSelection",b,a)},__getManager:function(){if(this.__manager==null){var a=this;this.__manager=new qx.ui.core.SingleSelectionManager({getItems:function(){return a._getItems()},isItemSelectable:function(b){if(a._isItemSelectable){return a._isItemSelectable(b)}else{return b.isVisible()}}});this.__manager.addListener("changeSelected",this._onChangeSelected,this)}this.__manager.setAllowEmptySelection(this._isAllowEmptySelection());return this.__manager}},destruct:function(){this._disposeObjects("__manager")}});qx.Mixin.define("qx.ui.form.MModelSelection",{construct:function(){this.__modelSelection=new qx.data.Array();this.__modelSelection.addListener("change",this.__onModelSelectionArrayChange,this);this.addListener("changeSelection",this.__onModelSelectionChange,this)},events:{changeModelSelection:"qx.event.type.Data"},members:{__modelSelection:null,__inSelectionChange:false,__onModelSelectionChange:function(){if(this.__inSelectionChange){return}var f=this.getSelection();var d=[];for(var b=0;b<f.length;b++){var c=f[b];var a=c.getModel?c.getModel():null;if(a!==null){d.push(a)}}if(d.length===f.length){try{this.setModelSelection(d)}catch(g){throw new Error("Could not set the model selection. Maybe your models are not unique?")}}},__onModelSelectionArrayChange:function(){this.__inSelectionChange=true;var g=this.getSelectables(true);var d=[];var k=this.__modelSelection.toArray();for(var c=0;c<k.length;c++){var e=k[c];for(var b=0;b<g.length;b++){var f=g[b];var h=f.getModel?f.getModel():null;if(e===h){d.push(f);break}}}this.setSelection(d);this.__inSelectionChange=false;var a=this.getSelection();if(!qx.lang.Array.equals(a,d)){this.__onModelSelectionChange()}},getModelSelection:function(){return this.__modelSelection},setModelSelection:function(a){if(!a){this.__modelSelection.removeAll();return}if(qx.core.Environment.get("qx.debug")){this.assertArray(a,"Please use an array as parameter.")}a.unshift(this.__modelSelection.getLength());a.unshift(0);var b=this.__modelSelection.splice.apply(this.__modelSelection,a);b.dispose()}},destruct:function(){this._disposeObjects("__modelSelection")}});qx.Interface.define("qx.ui.core.ISingleSelection",{events:{changeSelection:"qx.event.type.Data"},members:{getSelection:function(){return true},setSelection:function(a){return arguments.length==1},resetSelection:function(){return true},isSelected:function(a){return arguments.length==1},isSelectionEmpty:function(){return true},getSelectables:function(a){return arguments.length==1}}});qx.Interface.define("qx.ui.form.IModelSelection",{members:{setModelSelection:function(a){},getModelSelection:function(){}}});qx.Class.define("qx.ui.form.RadioGroup",{extend:qx.core.Object,implement:[qx.ui.core.ISingleSelection,qx.ui.form.IForm,qx.ui.form.IModelSelection],include:[qx.ui.core.MSingleSelectionHandling,qx.ui.form.MModelSelection],construct:function(a){this.base(arguments);this.__items=[];this.addListener("changeSelection",this.__onChangeSelection,this);if(a!=null){this.add.apply(this,arguments)}},properties:{enabled:{check:"Boolean",apply:"_applyEnabled",event:"changeEnabled",init:true},wrap:{check:"Boolean",init:true},allowEmptySelection:{check:"Boolean",init:false,apply:"_applyAllowEmptySelection"},valid:{check:"Boolean",init:true,apply:"_applyValid",event:"changeValid"},required:{check:"Boolean",init:false,event:"changeRequired"},invalidMessage:{check:"String",init:"",event:"changeInvalidMessage",apply:"_applyInvalidMessage"},requiredInvalidMessage:{check:"String",nullable:true,event:"changeInvalidMessage"}},members:{__items:null,getItems:function(){return this.__items},add:function(c){var b=this.__items;var e;for(var d=0,a=arguments.length;d<a;d++){e=arguments[d];if(qx.lang.Array.contains(b,e)){continue}e.addListener("changeValue",this._onItemChangeChecked,this);b.push(e);e.setGroup(this);if(e.getValue()){this.setSelection([e])}}if(!this.isAllowEmptySelection()&&b.length>0&&!this.getSelection()[0]){this.setSelection([b[0]])}},remove:function(b){var a=this.__items;if(qx.lang.Array.contains(a,b)){qx.lang.Array.remove(a,b);if(b.getGroup()===this){b.resetGroup()}b.removeListener("changeValue",this._onItemChangeChecked,this);if(b.getValue()){this.resetSelection()}}},getChildren:function(){return this.__items},_onItemChangeChecked:function(b){var a=b.getTarget();if(a.getValue()){this.setSelection([a])}else{if(this.getSelection()[0]==a){this.resetSelection()}}},_applyInvalidMessage:function(c,a){for(var b=0;b<this.__items.length;b++){this.__items[b].setInvalidMessage(c)}},_applyValid:function(c,a){for(var b=0;b<this.__items.length;b++){this.__items[b].setValid(c)}},_applyEnabled:function(e,b){var c=this.__items;if(e==null){for(var d=0,a=c.length;d<a;d++){c[d].resetEnabled()}}else{for(var d=0,a=c.length;d<a;d++){c[d].setEnabled(e)}}},_applyAllowEmptySelection:function(b,a){if(!b&&this.isSelectionEmpty()){this.resetSelection()}},selectNext:function(){var e=this.getSelection()[0];var a=this.__items;var b=a.indexOf(e);if(b==-1){return}var c=0;var d=a.length;if(this.getWrap()){b=(b+1)%d}else{b=Math.min(b+1,d-1)}while(c<d&&!a[b].getEnabled()){b=(b+1)%d;c++}this.setSelection([a[b]])},selectPrevious:function(){var e=this.getSelection()[0];var a=this.__items;var b=a.indexOf(e);if(b==-1){return}var c=0;var d=a.length;if(this.getWrap()){b=(b-1+d)%d}else{b=Math.max(b-1,0)}while(c<d&&!a[b].getEnabled()){b=(b-1+d)%d;c++}this.setSelection([a[b]])},_getItems:function(){return this.getItems()},_isAllowEmptySelection:function(){return this.isAllowEmptySelection()},_isItemSelectable:function(a){return this.__items.indexOf(a)!=-1},__onChangeSelection:function(c){var b=c.getData()[0];var a=c.getOldData()[0];if(a){a.setValue(false)}if(b){b.setValue(true)}}},destruct:function(){this._disposeArray("__items")}});qx.Class.define("qx.ui.core.SingleSelectionManager",{extend:qx.core.Object,construct:function(a){this.base(arguments);if(qx.core.Environment.get("qx.debug")){qx.core.Assert.assertInterface(a,qx.ui.core.ISingleSelectionProvider,"Invalid selectionProvider!")}this.__selectionProvider=a},events:{changeSelected:"qx.event.type.Data"},properties:{allowEmptySelection:{check:"Boolean",init:true,apply:"__applyAllowEmptySelection"}},members:{__selected:null,__selectionProvider:null,getSelected:function(){return this.__selected},setSelected:function(a){if(!this.__isChildElement(a)){throw new Error("Could not select "+a+", because it is not a child element!")}this.__setSelected(a)},resetSelected:function(){this.__setSelected(null)},isSelected:function(a){if(!this.__isChildElement(a)){throw new Error("Could not check if "+a+" is selected, because it is not a child element!")}return this.__selected===a},isSelectionEmpty:function(){return this.__selected==null},getSelectables:function(d){var b=this.__selectionProvider.getItems();var a=[];for(var c=0;c<b.length;c++){if(this.__selectionProvider.isItemSelectable(b[c])){a.push(b[c])}}if(!d){for(var c=a.length-1;c>=0;c--){if(!a[c].getEnabled()){a.splice(c,1)}}}return a},__applyAllowEmptySelection:function(b,a){if(!b){this.__setSelected(this.__selected)}},__setSelected:function(c){var d=this.__selected;var a=c;if(a!=null&&d===a){return}if(!this.isAllowEmptySelection()&&a==null){var b=this.getSelectables(true)[0];if(b){a=b}}this.__selected=a;this.fireDataEvent("changeSelected",a,d)},__isChildElement:function(c){var a=this.__selectionProvider.getItems();for(var b=0;b<a.length;b++){if(a[b]===c){return true}}return false}},destruct:function(){if(this.__selectionProvider.toHashCode){this._disposeObjects("__selectionProvider")}else{this.__selectionProvider=null}this._disposeObjects("__selected")}});qx.Interface.define("qx.ui.core.ISingleSelectionProvider",{members:{getItems:function(){},isItemSelectable:function(a){}}});qx.Mixin.define("qx.data.marshal.MEventBubbling",{events:{changeBubble:"qx.event.type.Data"},members:{_applyEventPropagation:function(c,a,b){this.fireDataEvent("changeBubble",{value:c,name:b,old:a});this._registerEventChaining(c,a,b)},_registerEventChaining:function(d,a,b){if((d instanceof qx.core.Object)&&qx.Class.hasMixin(d.constructor,qx.data.marshal.MEventBubbling)){var c=qx.lang.Function.bind(this.__changePropertyListener,this,b);var e=d.addListener("changeBubble",c,this);d.setUserData("idBubble",e)}if(a!=null&&a.getUserData&&a.getUserData("idBubble")!=null){a.removeListenerById(a.getUserData("idBubble"))}},__changePropertyListener:function(a,i){var g=i.getData();var k=g.value;var f=g.old;if(qx.Class.hasInterface(i.getTarget().constructor,qx.data.IListData)){if(g.name.indexOf){var d=g.name.indexOf(".")!=-1?g.name.indexOf("."):g.name.length;var b=g.name.indexOf("[")!=-1?g.name.indexOf("["):g.name.length;if(d<b){var h=g.name.substring(0,d);var c=g.name.substring(d+1,g.name.length);if(c[0]!="["){c="."+c}var j=a+"["+h+"]"+c}else{if(b<d){var h=g.name.substring(0,b);var c=g.name.substring(b,g.name.length);var j=a+"["+h+"]"+c}else{var j=a+"["+g.name+"]"}}}else{var j=a+"["+g.name+"]"}}else{var j=a+"."+g.name}this.fireDataEvent("changeBubble",{value:k,name:j,old:f})}}});qx.Class.define("qx.data.Array",{extend:qx.core.Object,include:qx.data.marshal.MEventBubbling,implement:[qx.data.IListData],construct:function(b){this.base(arguments);if(b==undefined){this.__array=[]}else{if(arguments.length>1){this.__array=[];for(var a=0;a<arguments.length;a++){this.__array.push(arguments[a])}}else{if(typeof b=="number"){this.__array=new Array(b)}else{if(b instanceof Array){this.__array=qx.lang.Array.clone(b)}else{this.__array=[];throw new Error("Type of the parameter not supported!")}}}}for(var a=0;a<this.__array.length;a++){this._applyEventPropagation(this.__array[a],null,a)}this.__updateLength()},events:{change:"qx.event.type.Data",changeLength:"qx.event.type.Data"},members:{__array:null,concat:function(b){if(b){var a=this.__array.concat(b)}else{var a=this.__array.concat()}return new qx.data.Array(a)},join:function(a){return this.__array.join(a)},pop:function(){var a=this.__array.pop();this.__updateLength();this._registerEventChaining(null,a,this.length-1);this.fireDataEvent("changeBubble",{value:[],name:this.length,old:[a]});this.fireDataEvent("change",{start:this.length-1,end:this.length-1,type:"remove",items:[a]},null);return a},push:function(a){for(var b=0;b<arguments.length;b++){this.__array.push(arguments[b]);this.__updateLength();this._registerEventChaining(arguments[b],null,this.length-1);this.fireDataEvent("changeBubble",{value:[arguments[b]],name:this.length-1,old:[]});this.fireDataEvent("change",{start:this.length-1,end:this.length-1,type:"add",items:[arguments[b]]},null)}return this.length},reverse:function(){if(this.length==0){return}var a=this.__array.concat();this.__array.reverse();this.fireDataEvent("change",{start:0,end:this.length-1,type:"order",items:null},null);this.fireDataEvent("changeBubble",{value:this.__array,name:"0-"+(this.__array.length-1),old:a})},shift:function(){if(this.length==0){return}var a=this.__array.shift();this.__updateLength();this._registerEventChaining(null,a,this.length-1);this.fireDataEvent("changeBubble",{value:[],name:"0",old:[a]});this.fireDataEvent("change",{start:0,end:this.length-1,type:"remove",items:[a]},null);return a},slice:function(b,a){return new qx.data.Array(this.__array.slice(b,a))},splice:function(m,e,g){var b=this.__array.length;var n=this.__array.splice.apply(this.__array,arguments);if(this.__array.length!=b){this.__updateLength()}var f=e>0;var k=arguments.length>2;var h=null;if(f||k){if(this.__array.length>b){var j="add"}else{if(this.__array.length<b){var j="remove";h=n}else{var j="order"}}this.fireDataEvent("change",{start:m,end:this.length-1,type:j,items:h},null)}for(var c=2;c<arguments.length;c++){this._registerEventChaining(arguments[c],null,m+c)}var l=[];for(var c=2;c<arguments.length;c++){l[c-2]=arguments[c]}var d=(m+Math.max(arguments.length-3,e-1));var a=m==d?d:m+"-"+d;this.fireDataEvent("changeBubble",{value:l,name:a,old:n});for(var c=0;c<n.length;c++){this._registerEventChaining(null,n[c],c)}return(new qx.data.Array(n))},sort:function(b){if(this.length==0){return}var a=this.__array.concat();this.__array.sort.apply(this.__array,arguments);this.fireDataEvent("change",{start:0,end:this.length-1,type:"order",items:null},null);this.fireDataEvent("changeBubble",{value:this.__array,name:"0-"+(this.length-1),old:a})},unshift:function(a){for(var b=arguments.length-1;b>=0;b--){this.__array.unshift(arguments[b]);this.__updateLength();this._registerEventChaining(arguments[b],null,0);this.fireDataEvent("changeBubble",{value:[this.__array[0]],name:"0",old:[this.__array[1]]});this.fireDataEvent("change",{start:0,end:this.length-1,type:"add",items:[arguments[b]]},null)}return this.length},toArray:function(){return this.__array},getItem:function(a){return this.__array[a]},setItem:function(a,b){var c=this.__array[a];if(c===b){return}this.__array[a]=b;this._registerEventChaining(b,c,a);if(this.length!=this.__array.length){this.__updateLength()}this.fireDataEvent("changeBubble",{value:[b],name:a,old:[c]});this.fireDataEvent("change",{start:a,end:a,type:"add",items:[b]},null)},getLength:function(){return this.length},indexOf:function(a){return this.__array.indexOf(a)},toString:function(){if(this.__array!=null){return this.__array.toString()}return""},contains:function(a){return this.__array.indexOf(a)!==-1},copy:function(){return this.concat()},insertAt:function(a,b){this.splice(a,0,b)},insertBefore:function(c,b){var a=this.indexOf(c);if(a==-1){this.push(b)}else{this.splice(a,0,b)}},insertAfter:function(c,b){var a=this.indexOf(c);if(a==-1||a==(this.length-1)){this.push(b)}else{this.splice(a+1,0,b)}},removeAt:function(a){return this.splice(a,1).getItem(0)},removeAll:function(){for(var b=0;b<this.__array.length;b++){this._registerEventChaining(null,this.__array[b],b)}if(this.getLength()==0){return}var c=this.getLength();var a=this.__array.concat();this.__array.length=0;this.__updateLength();this.fireDataEvent("changeBubble",{value:[],name:"0-"+(c-1),old:a});this.fireDataEvent("change",{start:0,end:c-1,type:"remove",items:a},null);return a},append:function(c){if(c instanceof qx.data.Array){c=c.toArray()}if(qx.core.Environment.get("qx.debug")){qx.core.Assert.assertArray(c,"The parameter must be an array.")}Array.prototype.push.apply(this.__array,c);for(var a=0;a<c.length;a++){this._registerEventChaining(c[a],null,this.__array.length+a)}var b=this.length;this.__updateLength();this.fireDataEvent("changeBubble",{value:c,name:b==(this.length-1)?b:b+"-"+(this.length-1),old:[]});this.fireDataEvent("change",{start:b,end:this.length-1,type:"add",items:c},null)},remove:function(b){var a=this.indexOf(b);if(a!=-1){this.splice(a,1);return b}},equals:function(b){if(this.length!==b.length){return false}for(var a=0;a<this.length;a++){if(this.getItem(a)!==b.getItem(a)){return false}}return true},sum:function(){var a=0;for(var b=0;b<this.length;b++){a+=this.getItem(b)}return a},max:function(){var a=this.getItem(0);for(var b=1;b<this.length;b++){if(this.getItem(b)>a){a=this.getItem(b)}}return a===undefined?null:a},min:function(){var a=this.getItem(0);for(var b=1;b<this.length;b++){if(this.getItem(b)<a){a=this.getItem(b)}}return a===undefined?null:a},forEach:function(c,b){for(var a=0;a<this.__array.length;a++){c.call(b,this.__array[a])}},__updateLength:function(){var a=this.length;this.length=this.__array.length;this.fireDataEvent("changeLength",this.length,a)}},destruct:function(){for(var a=0;a<this.__array.length;a++){this._applyEventPropagation(null,this.__array[a],a)}this.__array=null}});qx.Class.define("qx.io.PartLoader",{type:"singleton",extend:qx.core.Object,construct:function(){this.base(arguments);var a=this._loader=qx.Part.getInstance();var b=this;a.onpart=function(c){if(c.readyState=="success"){b.fireDataEvent("partLoaded",c)}else{b.fireDataEvent("partLoadingError",c.name)}}},events:{partLoaded:"qx.event.type.Data",partLoadingError:"qx.event.type.Data"},statics:{require:function(a,c,b){this.getInstance().require(a,c,b)}},members:{require:function(a,c,b){return this._loader.require(a,c,b)},getPart:function(a){return this.getParts()[a]},hasPart:function(a){return this.getPart(a)!==undefined},getParts:function(){return this._loader.getParts()}}});qx.Bootstrap.define("qx.io.ScriptLoader",{construct:function(){this.__oneventWrapped=qx.Bootstrap.bind(this.__onevent,this);this.__elem=document.createElement("script")},members:{__running:null,__disposed:null,__callback:null,__context:null,__oneventWrapped:null,__elem:null,load:function(b,e,d){if(this.__running){throw new Error("Another request is still running!")}this.__running=true;this.__disposed=false;var c=document.getElementsByTagName("head")[0];var a=this.__elem;this.__callback=e||null;this.__context=d||window;a.type="text/javascript";a.onerror=a.onload=a.onreadystatechange=this.__oneventWrapped;a.src=b;setTimeout(function(){c.appendChild(a)},0)},abort:function(){if(this.__running){this.dispose("abort")}},dispose:function(a){if(this.__disposed){return}this.__disposed=true;var c=this.__elem;c.onerror=c.onload=c.onreadystatechange=null;var d=c.parentNode;if(d){d.removeChild(c)}delete this.__running;if(this.__callback){if(qx.core.Environment.get("engine.name")=="mshtml"||qx.core.Environment.get("engine.name")=="webkit"){var b=this;setTimeout(qx.event.GlobalError.observeMethod(function(){b.__callback.call(b.__context,a);delete b.__callback}),0)}else{this.__callback.call(this.__context,a);delete this.__callback}}},__onevent:qx.event.GlobalError.observeMethod(qx.core.Environment.select("engine.name",{mshtml:function(b){var a=this.__elem.readyState;if(a=="loaded"){this.dispose("success")}else{if(a=="complete"){this.dispose("success")}else{return}}},opera:function(a){if(qx.Bootstrap.isString(a)||a.type==="error"){return this.dispose("fail")}else{if(a.type==="load"){return this.dispose("success")}else{return}}},"default":function(a){if(qx.Bootstrap.isString(a)||a.type==="error"){this.dispose("fail")}else{if(a.type==="load"){this.dispose("success")}else{if(a.type==="readystatechange"&&(a.target.readyState==="complete"||a.target.readyState==="loaded")){this.dispose("success")}else{return}}}}}))}});qx.Bootstrap.define("qx.Part",{construct:function(l){var j=l.parts[l.boot][0];this.__loader=l;this.__partListners={};this.__packageListeners={};this.__packageClosureListeners={};this.__packages=[];var h=this.__getUris();for(var e=0;e<h.length;e++){var d=l.packageHashes[e];var g=new qx.io.part.Package(h[e],d,e==j);this.__packages.push(g)}this.__parts={};var c=l.parts;var k=l.closureParts||{};for(var a in c){var m=c[a];var f=[];for(var e=0;e<m.length;e++){f.push(this.__packages[m[e]])}if(k[a]){var b=new qx.io.part.ClosurePart(a,f,this)}else{var b=new qx.io.part.Part(a,f,this)}this.__parts[a]=b}},statics:{TIMEOUT:7500,getInstance:function(){if(!this.$$instance){this.$$instance=new this(qx.$$loader)}return this.$$instance},require:function(a,c,b){this.getInstance().require(a,c,b)},preload:function(a){this.getInstance().preload(a)},$$notifyLoad:function(b,a){this.getInstance().saveClosure(b,a)}},members:{__loader:null,__packages:null,__parts:null,__packageClosureListeners:null,addToPackage:function(a){this.__packages.push(a)},addClosurePackageListener:function(a,c){var b=a.getId();if(!this.__packageClosureListeners[b]){this.__packageClosureListeners[b]=[]}this.__packageClosureListeners[b].push(c)},saveClosure:function(e,d){var a;for(var b=0;b<this.__packages.length;b++){if(this.__packages[b].getId()==e){a=this.__packages[b];break}}if(!a){throw new Error("Package not available: "+e)}a.saveClosure(d);var c=this.__packageClosureListeners[e];if(!c){return}for(var b=0;b<c.length;b++){c[b]("complete",e)}this.__packageClosureListeners[e]=[]},getParts:function(){return this.__parts},require:function(a,g,b){var g=g||function(){};var b=b||window;if(qx.Bootstrap.isString(a)){a=[a]}var f=[];for(var c=0;c<a.length;c++){f.push(this.__parts[a[c]])}var e=0;var d=function(){e+=1;if(e>=f.length){var h=[];for(var j=0;j<f.length;j++){h.push(f[j].getReadyState())}g.call(b,h)}};for(var c=0;c<f.length;c++){f[c].load(d,this)}},preload:function(a,e,b){if(qx.Bootstrap.isString(a)){a=[a]}var c=0;for(var d=0;d<a.length;d++){this.__parts[a[d]].preload(function(){c++;if(c>=a.length){var f=[];for(var g=0;g<a.length;g++){f.push(this.__parts[a[g]].getReadyState())}if(e){e.call(b,f)}}},this)}},__getUris:function(){var c=this.__loader.uris;var a=[];for(var b=0;b<c.length;b++){a.push(this.__decodeUris(c[b]))}return a},__decodeUris:qx.$$loader.decodeUris,__partListners:null,addPartListener:function(a,c){var b=a.getName();if(!this.__partListners[b]){this.__partListners[b]=[]}this.__partListners[b].push(c)},onpart:null,notifyPartResult:function(a){var c=a.getName();var d=this.__partListners[c];if(d){for(var b=0;b<d.length;b++){d[b](a.getReadyState())}this.__partListners[c]=[]}if(typeof this.onpart=="function"){this.onpart(a)}},__packageListeners:null,addPackageListener:function(a,c){var b=a.getId();if(!this.__packageListeners[b]){this.__packageListeners[b]=[]}this.__packageListeners[b].push(c)},notifyPackageResult:function(a){var c=a.getId();var d=this.__packageListeners[c];if(!d){return}for(var b=0;b<d.length;b++){d[b](a.getReadyState())}this.__packageListeners[c]=[]}}});qx.Bootstrap.define("qx.io.part.Package",{construct:function(b,c,a){this.__readyState=a?"complete":"initialized";this.__urls=b;this.__id=c},members:{__readyState:null,__urls:null,__id:null,__closure:null,__loadWithClosure:null,__timeoutId:null,__notifyPackageResult:null,getId:function(){return this.__id},getReadyState:function(){return this.__readyState},getUrls:function(){return this.__urls},saveClosure:function(a){if(this.__readyState=="error"){return}this.__closure=a;if(!this.__loadWithClosure){this.execute()}else{clearTimeout(this.__timeoutId);this.__readyState="cached";this.__notifyPackageResult(this)}},execute:function(){if(this.__closure){this.__closure();delete this.__closure}if(qx.$$packageData[this.__id]){this.__importPackageData(qx.$$packageData[this.__id]);delete qx.$$packageData[this.__id]}this.__readyState="complete"},loadClosure:function(c,a){if(this.__readyState!=="initialized"){return}this.__loadWithClosure=true;this.__readyState="loading";this.__notifyPackageResult=qx.Bootstrap.bind(c,a);this.__loadScriptList(this.__urls,function(){},function(){this.__readyState="error";c.call(a,this)},this);var b=this;this.__timeoutId=setTimeout(function(){b.__readyState="error";c.call(a,b)},qx.Part.TIMEOUT)},load:function(b,a){if(this.__readyState!=="initialized"){return}this.__loadWithClosure=false;this.__readyState="loading";this.__loadScriptList(this.__urls,function(){this.__readyState="complete";this.execute();b.call(a,this)},function(){this.__readyState="error";b.call(a,this)},this)},__loadScriptList:function(a,f,e,b){if(a.length==0){f.call(b);return}var d=0;var b=this;var c=function(h){if(d>=a.length){f.call(b);return}var g=new qx.io.ScriptLoader();g.load(h.shift(),function(i){d+=1;g.dispose();if(i!=="success"){if(b.__readyState=="loading"){clearTimeout(b.__timeoutId);return e.call(b)}}if((qx.core.Environment.get("engine.name")=="webkit")){setTimeout(function(){c.call(b,h,f,b)},0)}else{c.call(b,h,f,b)}},b)};c(a.concat())},__importPackageData:qx.$$loader.importPackageData}});qx.Bootstrap.define("qx.io.part.Part",{construct:function(b,d,a){this.__name=b;this._readyState="complete";this._packages=d;this._loader=a;for(var c=0;c<d.length;c++){if(d[c].getReadyState()!=="complete"){this._readyState="initialized";break}}},members:{_readyState:null,_loader:null,_packages:null,__name:null,getReadyState:function(){return this._readyState},getName:function(){return this.__name},getPackages:function(){return this._packages},preload:function(b,a){if(b){window.setTimeout(function(){b.call(a,this)},0)}},load:function(f,a){if(this._checkCompleteLoading(f,a)){return}this._readyState="loading";if(f){this._appendPartListener(f,a,this)}var c=this;var e=function(){c.load()};for(var d=0;d<this._packages.length;d++){var b=this._packages[d];switch(b.getReadyState()){case"initialized":this._loader.addPackageListener(b,e);b.load(this._loader.notifyPackageResult,this._loader);return;case"loading":this._loader.addPackageListener(b,e);return;case"complete":break;case"error":this._markAsCompleted("error");return;default:throw new Error("Invalid case! "+b.getReadyState())}}this._markAsCompleted("complete")},_appendPartListener:function(d,a,b){var c=this;this._loader.addPartListener(this,function(){c._signalStartup();d.call(a,b._readyState)})},_markAsCompleted:function(a){this._readyState=a;this._loader.notifyPartResult(this)},_signalStartup:function(){if(!qx.$$loader.applicationHandlerReady){qx.$$loader.signalStartup()}},_checkCompleteLoading:function(d,b){var a=this._readyState;if(a=="complete"||a=="error"){if(d){var c=this;setTimeout(function(){c._signalStartup();d.call(b,a)},0)}return true}else{if(a=="loading"&&d){this._appendPartListener(d,b,this);return true}}}}});qx.Bootstrap.define("qx.io.part.ClosurePart",{extend:qx.io.part.Part,construct:function(b,c,a){qx.io.part.Part.call(this,b,c,a)},members:{__packagesToLoad:0,preload:function(f,a){var e=0;var d=this;for(var c=0;c<this._packages.length;c++){var b=this._packages[c];if(b.getReadyState()=="initialized"){b.loadClosure(function(g){e++;d._loader.notifyPackageResult(g);if(e>=d._packages.length&&f){f.call(a)}},this._loader)}}},load:function(e,a){if(this._checkCompleteLoading(e,a)){return}this._readyState="loading";if(e){this._appendPartListener(e,a,this)}this.__packagesToLoad=this._packages.length;for(var d=0;d<this._packages.length;d++){var b=this._packages[d];var c=b.getReadyState();if(c=="initialized"){b.loadClosure(this._loader.notifyPackageResult,this._loader)}if(c=="initialized"||c=="loading"){this._loader.addPackageListener(b,qx.Bootstrap.bind(this._onPackageLoad,this,b))}else{if(c=="error"){this._markAsCompleted("error");return}else{this.__packagesToLoad--}}}if(this.__packagesToLoad<=0){this.__executePackages()}},__executePackages:function(){for(var a=0;a<this._packages.length;a++){this._packages[a].execute()}this._markAsCompleted("complete")},_onPackageLoad:function(a){if(this._readyState=="error"){return}if(a.getReadyState()=="error"){this._markAsCompleted("error");return}this.__packagesToLoad--;if(this.__packagesToLoad<=0){this.__executePackages()}}}});qx.Class.define("qx.ui.splitpane.Pane",{extend:qx.ui.core.Widget,construct:function(a){this.base(arguments);this.__children=[];if(a){this.setOrientation(a)}else{this.initOrientation()}this.__blocker.addListener("mousedown",this._onMouseDown,this);this.__blocker.addListener("mouseup",this._onMouseUp,this);this.__blocker.addListener("mousemove",this._onMouseMove,this);this.__blocker.addListener("mouseout",this._onMouseOut,this);this.__blocker.addListener("losecapture",this._onMouseUp,this)},properties:{appearance:{refine:true,init:"splitpane"},offset:{check:"Integer",init:6,apply:"_applyOffset"},orientation:{init:"horizontal",check:["horizontal","vertical"],apply:"_applyOrientation"}},members:{__splitterOffset:null,__activeDragSession:false,__lastMouseX:null,__lastMouseY:null,__isHorizontal:null,__beginSize:null,__endSize:null,__children:null,__blocker:null,_createChildControlImpl:function(c,b){var a;switch(c){case"slider":a=new qx.ui.splitpane.Slider(this);a.exclude();this._add(a,{type:c});break;case"splitter":a=new qx.ui.splitpane.Splitter(this);this._add(a,{type:c});a.addListener("move",this.__onSplitterMove,this);break}return a||this.base(arguments,c)},__onSplitterMove:function(a){this.__setBlockerPosition(a.getData())},__createBlocker:function(a){this.__blocker=new qx.ui.splitpane.Blocker(a);this.getContentElement().add(this.__blocker);var c=this.getChildControl("splitter");var b=c.getWidth();if(!b){c.addListenerOnce("appear",function(){this.__setBlockerPosition()},this)}c.addListener("resize",function(f){var d=f.getData();if(d.height==0||d.width==0){this.__blocker.hide()}else{this.__blocker.show()}},this)},getBlocker:function(){return this.__blocker},_applyOrientation:function(f,a){var c=this.getChildControl("slider");var e=this.getChildControl("splitter");this.__isHorizontal=f==="horizontal";if(!this.__blocker){this.__createBlocker(f)}this.__blocker.setOrientation(f);var b=this._getLayout();if(b){b.dispose()}var d=f==="vertical"?new qx.ui.splitpane.VLayout:new qx.ui.splitpane.HLayout;this._setLayout(d);e.removeState(a);e.addState(f);e.getChildControl("knob").removeState(a);e.getChildControl("knob").addState(f);c.removeState(a);c.addState(f);qx.ui.core.queue.Manager.flush();this.__setBlockerPosition()},_applyOffset:function(b,a){this.__setBlockerPosition()},__setBlockerPosition:function(a){var c=this.getChildControl("splitter");var f=this.getOffset();var g=c.getBounds();var b=c.getContainerElement().getDomElement();if(!b){return}if(this.__isHorizontal){var d=null;if(a){d=a.width}else{if(g){d=g.width}}var e=a&&a.left;if(d){if(isNaN(e)){e=qx.bom.element.Location.getPosition(b).left}this.__blocker.setWidth(f,d);this.__blocker.setLeft(f,e)}}else{var i=null;if(a){i=a.height}else{if(g){i=g.height}}var h=a&&a.top;if(i){if(isNaN(h)){h=qx.bom.element.Location.getPosition(b).top}this.__blocker.setHeight(f,i);this.__blocker.setTop(f,h)}}},add:function(b,a){if(a==null){this._add(b)}else{this._add(b,{flex:a})}this.__children.push(b)},remove:function(a){this._remove(a);qx.lang.Array.remove(this.__children,a)},getChildren:function(){return this.__children},_onMouseDown:function(f){if(!f.isLeftPressed()){return}var d=this.getChildControl("splitter");var g=d.getContainerLocation();var b=this.getContentLocation();this.__splitterOffset=this.__isHorizontal?f.getDocumentLeft()-g.left+b.left:f.getDocumentTop()-g.top+b.top;var c=this.getChildControl("slider");var a=d.getBounds();c.setUserBounds(a.left,a.top,a.width,a.height);c.setZIndex(d.getZIndex()+1);c.show();this.__activeDragSession=true;this.__blocker.capture();f.stop()},_onMouseMove:function(b){this._setLastMousePosition(b.getDocumentLeft(),b.getDocumentTop());if(this.__activeDragSession){this.__computeSizes();var a=this.getChildControl("slider");var c=this.__beginSize;if(this.__isHorizontal){a.setDomLeft(c);this.__blocker.setStyle("left",(c-this.getOffset())+"px")}else{a.setDomTop(c);this.__blocker.setStyle("top",(c-this.getOffset())+"px")}b.stop()}},_onMouseOut:function(a){this._setLastMousePosition(a.getDocumentLeft(),a.getDocumentTop())},_onMouseUp:function(b){if(!this.__activeDragSession){return}this._finalizeSizes();var a=this.getChildControl("slider");a.exclude();this.__activeDragSession=false;this.releaseCapture();b.stop()},_finalizeSizes:function(){var e=this.__beginSize;var f=this.__endSize;if(e==null){return}var c=this._getChildren();var g=c[2];var d=c[3];var a=g.getLayoutProperties().flex;var b=d.getLayoutProperties().flex;if((a!=0)&&(b!=0)){g.setLayoutProperties({flex:e});d.setLayoutProperties({flex:f})}else{if(this.__isHorizontal){g.setWidth(e);d.setWidth(f)}else{g.setHeight(e);d.setHeight(f)}}},__computeSizes:function(){if(this.__isHorizontal){var d="minWidth",j="width",h="maxWidth",f=this.__lastMouseX}else{var d="minHeight",j="height",h="maxHeight",f=this.__lastMouseY}var b=this._getChildren();var e=b[2].getSizeHint();var g=b[3].getSizeHint();var i=b[2].getBounds()[j]+b[3].getBounds()[j];var a=f-this.__splitterOffset;var c=i-a;if(a<e[d]){c-=e[d]-a;a=e[d]}else{if(c<g[d]){a-=g[d]-c;c=g[d]}}if(a>e[h]){c+=a-e[h];a=e[h]}else{if(c>g[h]){a+=c-g[h];c=g[h]}}this.__beginSize=a;this.__endSize=c},_isActiveDragSession:function(){return this.__activeDragSession},_setLastMousePosition:function(a,b){this.__lastMouseX=a;this.__lastMouseY=b}},destruct:function(){this.__children=null}});qx.Class.define("qx.ui.splitpane.Slider",{extend:qx.ui.core.Widget,properties:{allowShrinkX:{refine:true,init:false},allowShrinkY:{refine:true,init:false}}});qx.Class.define("qx.ui.splitpane.Splitter",{extend:qx.ui.core.Widget,construct:function(a){this.base(arguments);if(a.getOrientation()=="vertical"){this._setLayout(new qx.ui.layout.HBox(0,"center"));this._getLayout().setAlignY("middle")}else{this._setLayout(new qx.ui.layout.VBox(0,"middle"));this._getLayout().setAlignX("center")}this._createChildControl("knob")},properties:{allowShrinkX:{refine:true,init:false},allowShrinkY:{refine:true,init:false}},members:{_createChildControlImpl:function(c,b){var a;switch(c){case"knob":a=new qx.ui.basic.Image;this._add(a);break}return a||this.base(arguments,c)}}});qx.Class.define("qx.ui.layout.HBox",{extend:qx.ui.layout.Abstract,construct:function(c,a,b){this.base(arguments);if(c){this.setSpacing(c)}if(a){this.setAlignX(a)}if(b){this.setSeparator(b)}},properties:{alignX:{check:["left","center","right"],init:"left",apply:"_applyLayoutChange"},alignY:{check:["top","middle","bottom"],init:"top",apply:"_applyLayoutChange"},spacing:{check:"Integer",init:0,apply:"_applyLayoutChange"},separator:{check:"Decorator",nullable:true,apply:"_applyLayoutChange"},reversed:{check:"Boolean",init:false,apply:"_applyReversed"}},members:{__widths:null,__flexs:null,__enableFlex:null,__children:null,_applyReversed:function(){this._invalidChildrenCache=true;this._applyLayoutChange()},__rebuildCache:function(){var b=this._getLayoutChildren();var e=b.length;var h=false;var g=this.__widths&&this.__widths.length!=e&&this.__flexs&&this.__widths;var c;var d=g?this.__widths:new Array(e);var f=g?this.__flexs:new Array(e);if(this.getReversed()){b=b.concat().reverse()}for(var a=0;a<e;a++){c=b[a].getLayoutProperties();if(c.width!=null){d[a]=parseFloat(c.width)/100}if(c.flex!=null){f[a]=c.flex;h=true}else{f[a]=0}}if(!g){this.__widths=d;this.__flexs=f}this.__enableFlex=h;this.__children=b;delete this._invalidChildrenCache},verifyLayoutProperty:qx.core.Environment.select("qx.debug",{"true":function(b,a,c){this.assert(a==="flex"||a==="width","The property '"+a+"' is not supported by the HBox layout!");if(a=="width"){this.assertMatch(c,qx.ui.layout.Util.PERCENT_VALUE)}else{this.assertNumber(c);this.assert(c>=0)}},"false":null}),renderLayout:function(z,d){if(this._invalidChildrenCache){this.__rebuildCache()}var k=this.__children;var f=k.length;var a=qx.ui.layout.Util;var j=this.getSpacing();var e=this.getSeparator();if(e){var y=a.computeHorizontalSeparatorGaps(k,j,e)}else{var y=a.computeHorizontalGaps(k,j,true)}var B,o,x,b;var q=[];var p=y;for(B=0;B<f;B+=1){b=this.__widths[B];x=b!=null?Math.floor((z-y)*b):k[B].getSizeHint().width;q.push(x);p+=x}if(this.__enableFlex&&p!=z){var n={};var A,m;for(B=0;B<f;B+=1){A=this.__flexs[B];if(A>0){t=k[B].getSizeHint();n[B]={min:t.minWidth,value:q[B],max:t.maxWidth,flex:A}}}var r=a.computeFlexOffsets(n,z,p);for(B in r){m=r[B].offset;q[B]+=m;p+=m}}var g=k[0].getMarginLeft();if(p<z&&this.getAlignX()!="left"){g=z-p;if(this.getAlignX()==="center"){g=Math.round(g/2)}}var t,u,w,x,h,c,l;var j=this.getSpacing();this._clearSeparators();if(e){var v=qx.theme.manager.Decoration.getInstance().resolve(e).getInsets();var s=v.left+v.right}for(B=0;B<f;B+=1){o=k[B];x=q[B];t=o.getSizeHint();c=o.getMarginTop();l=o.getMarginBottom();w=Math.max(t.minHeight,Math.min(d-c-l,t.maxHeight));u=a.computeVerticalAlignOffset(o.getAlignY()||this.getAlignY(),w,d,c,l);if(B>0){if(e){g+=h+j;this._renderSeparator(e,{left:g,top:0,width:s,height:d});g+=s+j+o.getMarginLeft()}else{g+=a.collapseMargins(j,h,o.getMarginLeft())}}o.renderLayout(g,u,x,w);g+=x;h=o.getMarginRight()}},_computeSizeHint:function(){if(this._invalidChildrenCache){this.__rebuildCache()}var m=qx.ui.layout.Util;var d=this.__children;var a=0,b=0,q=0;var r=0,s=0;var c,h,g;for(var j=0,f=d.length;j<f;j+=1){c=d[j];h=c.getSizeHint();b+=h.width;var n=this.__flexs[j];var o=this.__widths[j];if(n){a+=h.minWidth}else{if(o){q=Math.max(q,Math.round(h.minWidth/o))}else{a+=h.width}}g=c.getMarginTop()+c.getMarginBottom();if((h.height+g)>s){s=h.height+g}if((h.minHeight+g)>r){r=h.minHeight+g}}a+=q;var p=this.getSpacing();var k=this.getSeparator();if(k){var e=m.computeHorizontalSeparatorGaps(d,p,k)}else{var e=m.computeHorizontalGaps(d,p,true)}return{minWidth:a+e,width:b+e,minHeight:r,height:s}}},destruct:function(){this.__widths=this.__flexs=this.__children=null}});qx.Class.define("qx.ui.layout.VBox",{extend:qx.ui.layout.Abstract,construct:function(c,a,b){this.base(arguments);if(c){this.setSpacing(c)}if(a){this.setAlignY(a)}if(b){this.setSeparator(b)}},properties:{alignY:{check:["top","middle","bottom"],init:"top",apply:"_applyLayoutChange"},alignX:{check:["left","center","right"],init:"left",apply:"_applyLayoutChange"},spacing:{check:"Integer",init:0,apply:"_applyLayoutChange"},separator:{check:"Decorator",nullable:true,apply:"_applyLayoutChange"},reversed:{check:"Boolean",init:false,apply:"_applyReversed"}},members:{__heights:null,__flexs:null,__enableFlex:null,__children:null,_applyReversed:function(){this._invalidChildrenCache=true;this._applyLayoutChange()},__rebuildCache:function(){var b=this._getLayoutChildren();var d=b.length;var h=false;var g=this.__heights&&this.__heights.length!=d&&this.__flexs&&this.__heights;var c;var e=g?this.__heights:new Array(d);var f=g?this.__flexs:new Array(d);if(this.getReversed()){b=b.concat().reverse()}for(var a=0;a<d;a++){c=b[a].getLayoutProperties();if(c.height!=null){e[a]=parseFloat(c.height)/100}if(c.flex!=null){f[a]=c.flex;h=true}else{f[a]=0}}if(!g){this.__heights=e;this.__flexs=f}this.__enableFlex=h;this.__children=b;delete this._invalidChildrenCache},verifyLayoutProperty:qx.core.Environment.select("qx.debug",{"true":function(b,a,c){this.assert(a==="flex"||a==="height","The property '"+a+"' is not supported by the VBox layout!");if(a=="height"){this.assertMatch(c,qx.ui.layout.Util.PERCENT_VALUE)}else{this.assertNumber(c);this.assert(c>=0)}},"false":null}),renderLayout:function(y,c){if(this._invalidChildrenCache){this.__rebuildCache()}var k=this.__children;var f=k.length;var a=qx.ui.layout.Util;var j=this.getSpacing();var e=this.getSeparator();if(e){var w=a.computeVerticalSeparatorGaps(k,j,e)}else{var w=a.computeVerticalGaps(k,j,true)}var A,o,u,b;var B=[];var d=w;for(A=0;A<f;A+=1){b=this.__heights[A];u=b!=null?Math.floor((c-w)*b):k[A].getSizeHint().height;B.push(u);d+=u}if(this.__enableFlex&&d!=c){var n={};var z,m;for(A=0;A<f;A+=1){z=this.__flexs[A];if(z>0){r=k[A].getSizeHint();n[A]={min:r.minHeight,value:B[A],max:r.maxHeight,flex:z}}}var q=a.computeFlexOffsets(n,c,d);for(A in q){m=q[A].offset;B[A]+=m;d+=m}}var s=k[0].getMarginTop();if(d<c&&this.getAlignY()!="top"){s=c-d;if(this.getAlignY()==="middle"){s=Math.round(s/2)}}var r,g,v,u,l,x,h;this._clearSeparators();if(e){var t=qx.theme.manager.Decoration.getInstance().resolve(e).getInsets();var p=t.top+t.bottom}for(A=0;A<f;A+=1){o=k[A];u=B[A];r=o.getSizeHint();x=o.getMarginLeft();h=o.getMarginRight();v=Math.max(r.minWidth,Math.min(y-x-h,r.maxWidth));g=a.computeHorizontalAlignOffset(o.getAlignX()||this.getAlignX(),v,y,x,h);if(A>0){if(e){s+=l+j;this._renderSeparator(e,{top:s,left:0,height:p,width:y});s+=p+j+o.getMarginTop()}else{s+=a.collapseMargins(j,l,o.getMarginTop())}}o.renderLayout(g,s,v,u);s+=u;l=o.getMarginBottom()}},_computeSizeHint:function(){if(this._invalidChildrenCache){this.__rebuildCache()}var n=qx.ui.layout.Util;var d=this.__children;var r=0,s=0,g=0;var a=0,b=0;var c,j,h;for(var k=0,f=d.length;k<f;k+=1){c=d[k];j=c.getSizeHint();s+=j.height;var o=this.__flexs[k];var p=this.__heights[k];if(o){r+=j.minHeight}else{if(p){g=Math.max(g,Math.round(j.minHeight/p))}else{r+=j.height}}h=c.getMarginLeft()+c.getMarginRight();if((j.width+h)>b){b=j.width+h}if((j.minWidth+h)>a){a=j.minWidth+h}}r+=g;var q=this.getSpacing();var m=this.getSeparator();if(m){var e=n.computeVerticalSeparatorGaps(d,q,m)}else{var e=n.computeVerticalGaps(d,q,true)}return{minHeight:r+e,height:s+e,minWidth:a,width:b}}},destruct:function(){this.__heights=this.__flexs=this.__children=null}});qx.Class.define("qx.ui.splitpane.Blocker",{extend:qx.html.Element,construct:function(a){var b={position:"absolute",zIndex:11};if((qx.core.Environment.get("engine.name")=="mshtml")){b.backgroundImage="url("+qx.util.ResourceManager.getInstance().toUri("qx/static/blank.gif")+")";b.backgroundRepeat="repeat"}this.base(arguments,"div",b);if(a){this.setOrientation(a)}else{this.initOrientation()}},properties:{orientation:{init:"horizontal",check:["horizontal","vertical"],apply:"_applyOrientation"}},members:{_applyOrientation:function(b,a){if(b=="horizontal"){this.setStyle("height","100%");this.setStyle("cursor","col-resize");this.setStyle("top",null)}else{this.setStyle("width","100%");this.setStyle("left",null);this.setStyle("cursor","row-resize")}},setWidth:function(b,c){var a=c+2*b;this.setStyle("width",a+"px")},setHeight:function(b,c){var a=c+2*b;this.setStyle("height",a+"px")},setLeft:function(b,c){var a=c-b;this.setStyle("left",a+"px")},setTop:function(c,a){var b=a-c;this.setStyle("top",b+"px")}}});qx.Class.define("qx.ui.splitpane.VLayout",{extend:qx.ui.layout.Abstract,members:{verifyLayoutProperty:qx.core.Environment.select("qx.debug",{"true":function(b,a,c){this.assert(a==="type"||a==="flex","The property '"+a+"' is not supported by the split layout!");if(a=="flex"){this.assertNumber(c)}if(a=="type"){this.assertString(c)}},"false":null}),renderLayout:function(t,c){var j=this._getLayoutChildren();var h=j.length;var m,f;var v,b,s,g;for(var u=0;u<h;u++){m=j[u];f=m.getLayoutProperties().type;if(f==="splitter"){b=m}else{if(f==="slider"){s=m}else{if(!v){v=m}else{g=m}}}}if(v&&g){var d=v.getLayoutProperties().flex;var q=g.getLayoutProperties().flex;if(d==null){d=1}if(q==null){q=1}var w=v.getSizeHint();var l=b.getSizeHint();var o=g.getSizeHint();var r=w.height;var e=l.height;var p=o.height;if(d>0&&q>0){var k=d+q;var n=c-e;var r=Math.round((n/k)*d);var p=n-r;var a=qx.ui.layout.Util.arrangeIdeals(w.minHeight,r,w.maxHeight,o.minHeight,p,o.maxHeight);r=a.begin;p=a.end}else{if(d>0){r=c-e-p;if(r<w.minHeight){r=w.minHeight}if(r>w.maxHeight){r=w.maxHeight}}else{if(q>0){p=c-r-e;if(p<o.minHeight){p=o.minHeight}if(p>o.maxHeight){p=o.maxHeight}}}}v.renderLayout(0,0,t,r);b.renderLayout(0,r,t,e);g.renderLayout(0,r+e,t,p)}else{b.renderLayout(0,0,0,0);if(v){v.renderLayout(0,0,t,c)}else{if(g){g.renderLayout(0,0,t,c)}}}},_computeSizeHint:function(){var e=this._getLayoutChildren();var d=e.length;var c,f,h;var l=0,m=0,k=0;var a=0,b=0,j=0;for(var g=0;g<d;g++){c=e[g];h=c.getLayoutProperties();if(h.type==="slider"){continue}f=c.getSizeHint();l+=f.minHeight;m+=f.height;k+=f.maxHeight;if(f.minWidth>a){a=f.minWidth}if(f.width>b){b=f.width}if(f.maxWidth>j){j=f.maxWidth}}return{minHeight:l,height:m,maxHeight:k,minWidth:a,width:b,maxWidth:j}}}});qx.Class.define("qx.ui.splitpane.HLayout",{extend:qx.ui.layout.Abstract,members:{verifyLayoutProperty:qx.core.Environment.select("qx.debug",{"true":function(b,a,c){this.assert(a==="type"||a==="flex","The property '"+a+"' is not supported by the split layout!");if(a=="flex"){this.assertNumber(c)}if(a=="type"){this.assertString(c)}},"false":null}),renderLayout:function(t,c){var h=this._getLayoutChildren();var g=h.length;var m,e;var v,b,s,f;for(var u=0;u<g;u++){m=h[u];e=m.getLayoutProperties().type;if(e==="splitter"){b=m}else{if(e==="slider"){s=m}else{if(!v){v=m}else{f=m}}}}if(v&&f){var d=v.getLayoutProperties().flex;var r=f.getLayoutProperties().flex;if(d==null){d=1}if(r==null){r=1}var w=v.getSizeHint();var l=b.getSizeHint();var p=f.getSizeHint();var j=w.width;var o=l.width;var q=p.width;if(d>0&&r>0){var k=d+r;var n=t-o;var j=Math.round((n/k)*d);var q=n-j;var a=qx.ui.layout.Util.arrangeIdeals(w.minWidth,j,w.maxWidth,p.minWidth,q,p.maxWidth);j=a.begin;q=a.end}else{if(d>0){j=t-o-q;if(j<w.minWidth){j=w.minWidth}if(j>w.maxWidth){j=w.maxWidth}}else{if(r>0){q=t-j-o;if(q<p.minWidth){q=p.minWidth}if(q>p.maxWidth){q=p.maxWidth}}}}v.renderLayout(0,0,j,c);b.renderLayout(j,0,o,c);f.renderLayout(j+o,0,q,c)}else{b.renderLayout(0,0,0,0);if(v){v.renderLayout(0,0,t,c)}else{if(f){f.renderLayout(0,0,t,c)}}}},_computeSizeHint:function(){var e=this._getLayoutChildren();var d=e.length;var c,f,h;var a=0,b=0,k=0;var m=0,l=0,j=0;for(var g=0;g<d;g++){c=e[g];h=c.getLayoutProperties();if(h.type==="slider"){continue}f=c.getSizeHint();a+=f.minWidth;b+=f.width;k+=f.maxWidth;if(f.minHeight>m){m=f.minHeight}if(f.height>l){l=f.height}if(f.maxHeight>j){j=f.maxHeight}}return{minWidth:a,width:b,maxWidth:k,minHeight:m,height:l,maxHeight:j}}}});qx.Class.define("qx.ui.form.SplitButton",{extend:qx.ui.core.Widget,include:[qx.ui.core.MExecutable],implement:[qx.ui.form.IExecutable],construct:function(a,b,d,c){this.base(arguments);this._setLayout(new qx.ui.layout.HBox);this._createChildControl("arrow");this.addListener("mouseover",this._onMouseOver,this,true);this.addListener("mouseout",this._onMouseOut,this,true);this.addListener("keydown",this._onKeyDown);this.addListener("keyup",this._onKeyUp);if(a!=null){this.setLabel(a)}if(b!=null){this.setIcon(b)}if(d!=null){this.setMenu(d)}if(c!=null){this.setCommand(c)}},properties:{appearance:{refine:true,init:"splitbutton"},focusable:{refine:true,init:true},label:{apply:"_applyLabel",nullable:true,check:"String"},icon:{check:"String",apply:"_applyIcon",nullable:true,themeable:true},show:{init:"both",check:["both","label","icon"],themeable:true,inheritable:true,apply:"_applyShow",event:"changeShow"},menu:{check:"qx.ui.menu.Menu",nullable:true,apply:"_applyMenu",event:"changeMenu"}},members:{__cursorIsOut:null,_createChildControlImpl:function(c,b){var a;switch(c){case"button":a=new qx.ui.form.Button;a.addListener("execute",this._onButtonExecute,this);a.setFocusable(false);this._addAt(a,0,{flex:1});break;case"arrow":a=new qx.ui.form.MenuButton;a.setFocusable(false);this._addAt(a,1);break}return a||this.base(arguments,c)},_forwardStates:{hovered:1,focused:1},_applyLabel:function(c,a){var b=this.getChildControl("button");c==null?b.resetLabel():b.setLabel(c)},_applyIcon:function(c,a){var b=this.getChildControl("button");c==null?b.resetIcon():b.setIcon(c)},_applyMenu:function(c,a){var b=this.getChildControl("arrow");if(c){b.resetEnabled();b.setMenu(c);c.setOpener(this);c.addListener("changeVisibility",this._onChangeMenuVisibility,this)}else{b.setEnabled(false);b.resetMenu()}if(a){a.removeListener("changeVisibility",this._onChangeMenuVisibility,this);a.resetOpener()}},_applyShow:function(b,a){},_onMouseOver:function(a){a.stopPropagation();this.addState("hovered");delete this.__cursorIsOut},_onMouseOut:function(b){b.stopPropagation();if(!this.hasState("hovered")){return}var a=b.getRelatedTarget();if(qx.ui.core.Widget.contains(this,a)){return}var c=this.getMenu();if(c&&c.isVisible()){this.__cursorIsOut=true;return}this.removeState("hovered")},_onKeyDown:function(b){var a=this.getChildControl("button");switch(b.getKeyIdentifier()){case"Enter":case"Space":a.removeState("abandoned");a.addState("pressed")}},_onKeyUp:function(b){var a=this.getChildControl("button");switch(b.getKeyIdentifier()){case"Enter":case"Space":if(a.hasState("pressed")){a.removeState("abandoned");a.removeState("pressed");a.execute()}}},_onButtonExecute:function(a){this.execute()},_onChangeMenuVisibility:function(a){if(!this.getMenu().isVisible()&&this.__cursorIsOut){this.removeState("hovered")}}}});qx.Class.define("qx.ui.toolbar.SplitButton",{extend:qx.ui.form.SplitButton,construct:function(a,b,d,c){this.base(arguments,a,b,d,c);this.removeListener("keydown",this._onKeyDown);this.removeListener("keyup",this._onKeyUp)},properties:{appearance:{refine:true,init:"toolbar-splitbutton"},focusable:{refine:true,init:false}},members:{_forwardStates:{hovered:true,focused:true,left:true,middle:true,right:true},_createChildControlImpl:function(c,b){var a;switch(c){case"button":a=new qx.ui.toolbar.Button;a.addListener("execute",this._onButtonExecute,this);this._addAt(a,0);break;case"arrow":a=new qx.ui.toolbar.MenuButton;this._addAt(a,1);break}return a||this.base(arguments,c)}}});qx.Class.define("qx.ui.form.MenuButton",{extend:qx.ui.form.Button,construct:function(a,b,c){this.base(arguments,a,b);if(c!=null){this.setMenu(c)}},properties:{menu:{check:"qx.ui.menu.Menu",nullable:true,apply:"_applyMenu",event:"changeMenu"}},members:{_applyMenu:function(b,a){if(a){a.removeListener("changeVisibility",this._onMenuChange,this);a.resetOpener()}if(b){b.addListener("changeVisibility",this._onMenuChange,this);b.setOpener(this);b.removeState("submenu");b.removeState("contextmenu")}},open:function(a){var c=this.getMenu();if(c){qx.ui.menu.Manager.getInstance().hideAll();c.setOpener(this);c.open();if(a){var b=c.getSelectables()[0];if(b){c.setSelectedButton(b)}}}},_onMenuChange:function(a){var b=this.getMenu();if(b.isVisible()){this.addState("pressed")}else{this.removeState("pressed")}},_onMouseDown:function(a){this.base(arguments,a);var b=this.getMenu();if(b){if(!b.isVisible()){this.open()}else{b.exclude()}a.stopPropagation()}},_onMouseUp:function(a){this.base(arguments,a);a.stopPropagation()},_onMouseOver:function(a){this.addState("hovered")},_onMouseOut:function(a){this.removeState("hovered")},_onKeyDown:function(a){switch(a.getKeyIdentifier()){case"Enter":this.removeState("abandoned");this.addState("pressed");var b=this.getMenu();if(b){if(!b.isVisible()){this.open()}else{b.exclude()}}a.stopPropagation()}},_onKeyUp:function(a){}},destruct:function(){if(this.getMenu()){if(!qx.core.ObjectRegistry.inShutDown){this.getMenu().destroy()}}}});qx.Class.define("qx.ui.menu.Manager",{type:"singleton",extend:qx.core.Object,construct:function(){this.base(arguments);this.__objects=[];var b=document.body;var a=qx.event.Registration;a.addListener(window.document.documentElement,"mousedown",this._onMouseDown,this,true);a.addListener(b,"keydown",this._onKeyUpDown,this,true);a.addListener(b,"keyup",this._onKeyUpDown,this,true);a.addListener(b,"keypress",this._onKeyPress,this,true);if(!qx.core.Environment.get("event.touch")){qx.bom.Element.addListener(window,"blur",this.hideAll,this)}this.__openTimer=new qx.event.Timer;this.__openTimer.addListener("interval",this._onOpenInterval,this);this.__closeTimer=new qx.event.Timer;this.__closeTimer.addListener("interval",this._onCloseInterval,this)},members:{__scheduleOpen:null,__scheduleClose:null,__openTimer:null,__closeTimer:null,__objects:null,_getChild:function(f,h,b,a){var d=f.getChildren();var e=d.length;var g;for(var c=h;c<e&&c>=0;c+=b){g=d[c];if(g.isEnabled()&&!g.isAnonymous()){return g}}if(a){c=c==e?0:e-1;for(;c!=h;c+=b){g=d[c];if(g.isEnabled()&&!g.isAnonymous()){return g}}}return null},_isInMenu:function(a){while(a){if(a instanceof qx.ui.menu.Menu){return true}a=a.getLayoutParent()}return false},_getMenuButton:function(a){while(a){if(a instanceof qx.ui.menu.AbstractButton){return a}a=a.getLayoutParent()}return null},add:function(b){if(qx.core.Environment.get("qx.debug")){if(!(b instanceof qx.ui.menu.Menu)){throw new Error("Object is no menu: "+b)}}var a=this.__objects;a.push(b);b.setZIndex(1000000+a.length)},remove:function(b){if(qx.core.Environment.get("qx.debug")){if(!(b instanceof qx.ui.menu.Menu)){throw new Error("Object is no menu: "+b)}}var a=this.__objects;if(a){qx.lang.Array.remove(a,b)}},hideAll:function(){var b=this.__objects;if(b){for(var a=b.length-1;a>=0;a--){b[a].exclude()}}},getActiveMenu:function(){var a=this.__objects;return a.length>0?a[a.length-1]:null},scheduleOpen:function(a){this.cancelClose(a);if(a.isVisible()){if(this.__scheduleOpen){this.cancelOpen(this.__scheduleOpen)}}else{if(this.__scheduleOpen!=a){this.__scheduleOpen=a;this.__openTimer.restartWith(a.getOpenInterval())}}},scheduleClose:function(a){this.cancelOpen(a);if(!a.isVisible()){if(this.__scheduleClose){this.cancelClose(this.__scheduleClose)}}else{if(this.__scheduleClose!=a){this.__scheduleClose=a;this.__closeTimer.restartWith(a.getCloseInterval())}}},cancelOpen:function(a){if(this.__scheduleOpen==a){this.__openTimer.stop();this.__scheduleOpen=null}},cancelClose:function(a){if(this.__scheduleClose==a){this.__closeTimer.stop();this.__scheduleClose=null}},_onOpenInterval:function(a){this.__openTimer.stop();this.__scheduleOpen.open();this.__scheduleOpen=null},_onCloseInterval:function(a){this.__closeTimer.stop();this.__scheduleClose.exclude();this.__scheduleClose=null},_onMouseDown:function(b){var a=b.getTarget();a=qx.ui.core.Widget.getWidgetByElement(a,true);if(a==null){this.hideAll();return}if(a.getMenu&&a.getMenu()&&a.getMenu().isVisible()){return}if(this.__objects.length>0&&!this._isInMenu(a)){this.hideAll()}},__selectionKeys:{Enter:1,Space:1},__navigationKeys:{Escape:1,Up:1,Down:1,Left:1,Right:1},_onKeyUpDown:function(b){var c=this.getActiveMenu();if(!c){return}var a=b.getKeyIdentifier();if(this.__navigationKeys[a]||(this.__selectionKeys[a]&&c.getSelectedButton())){b.stopPropagation()}},_onKeyPress:function(f){var g=this.getActiveMenu();if(!g){return}var b=f.getKeyIdentifier();var a=this.__navigationKeys[b];var d=this.__selectionKeys[b];if(a){switch(b){case"Up":this._onKeyPressUp(g);break;case"Down":this._onKeyPressDown(g);break;case"Left":this._onKeyPressLeft(g);break;case"Right":this._onKeyPressRight(g);break;case"Escape":this.hideAll();break}f.stopPropagation();f.preventDefault()}else{if(d){var c=g.getSelectedButton();if(c){switch(b){case"Enter":this._onKeyPressEnter(g,c,f);break;case"Space":this._onKeyPressSpace(g,c,f);break}f.stopPropagation();f.preventDefault()}}}},_onKeyPressUp:function(d){var c=d.getSelectedButton();var b=d.getChildren();var e=c?d.indexOf(c)-1:b.length-1;var a=this._getChild(d,e,-1,true);if(a){d.setSelectedButton(a)}else{d.resetSelectedButton()}},_onKeyPressDown:function(c){var b=c.getSelectedButton();var d=b?c.indexOf(b)+1:0;var a=this._getChild(c,d,1,true);if(a){c.setSelectedButton(a)}else{c.resetSelectedButton()}},_onKeyPressLeft:function(b){var a=b.getOpener();if(!a){return}if(a instanceof qx.ui.menu.AbstractButton){var d=a.getLayoutParent();d.resetOpenedButton();d.setSelectedButton(a)}else{if(a instanceof qx.ui.menubar.Button){var h=a.getMenuBar().getMenuButtons();var g=h.indexOf(a);if(g===-1){return}var j=null;var c=h.length;for(var e=1;e<=c;e++){var f=h[(g-e+c)%c];if(f.isEnabled()){j=f;break}}if(j&&j!=a){j.open(true)}}}},_onKeyPressRight:function(c){var d=c.getSelectedButton();if(d){var e=d.getMenu();if(e){c.setOpenedButton(d);var h=this._getChild(e,0,1);if(h){e.setSelectedButton(h)}return}}else{if(!c.getOpenedButton()){var h=this._getChild(c,0,1);if(h){c.setSelectedButton(h);if(h.getMenu()){c.setOpenedButton(h)}return}}}var a=c.getOpener();if(a instanceof qx.ui.menu.Button&&d){while(a){a=a.getLayoutParent();if(a instanceof qx.ui.menu.Menu){a=a.getOpener();if(a instanceof qx.ui.menubar.Button){break}}else{break}}if(!a){return}}if(a instanceof qx.ui.menubar.Button){var k=a.getMenuBar().getMenuButtons();var j=k.indexOf(a);if(j===-1){return}var l=null;var b=k.length;for(var f=1;f<=b;f++){var g=k[(j+f)%b];if(g.isEnabled()){l=g;break}}if(l&&l!=a){l.open(true)}}},_onKeyPressEnter:function(c,a,b){if(a.hasListener("keypress")){var d=b.clone();d.setBubbles(false);d.setTarget(a);a.dispatchEvent(d)}this.hideAll()},_onKeyPressSpace:function(c,a,b){if(a.hasListener("keypress")){var d=b.clone();d.setBubbles(false);d.setTarget(a);a.dispatchEvent(d)}}},destruct:function(){var a=qx.event.Registration;var b=document.body;a.removeListener(window.document.documentElement,"mousedown",this._onMouseDown,this,true);a.removeListener(b,"keydown",this._onKeyUpDown,this,true);a.removeListener(b,"keyup",this._onKeyUpDown,this,true);a.removeListener(b,"keypress",this._onKeyPress,this,true);this._disposeObjects("__openTimer","__closeTimer");this._disposeArray("__objects")}});qx.Mixin.define("qx.ui.core.MRemoteChildrenHandling",{members:{__forward:function(d,c,a,e){var b=this.getChildrenContainer();if(b===this){d="_"+d}return(b[d])(c,a,e)},getChildren:function(){return this.__forward("getChildren")},hasChildren:function(){return this.__forward("hasChildren")},add:function(b,a){return this.__forward("add",b,a)},remove:function(a){return this.__forward("remove",a)},removeAll:function(){return this.__forward("removeAll")},indexOf:function(a){return this.__forward("indexOf",a)},addAt:function(c,b,a){this.__forward("addAt",c,b,a)},addBefore:function(c,b,a){this.__forward("addBefore",c,b,a)},addAfter:function(c,b,a){this.__forward("addAfter",c,b,a)},removeAt:function(a){this.__forward("removeAt",a)}}});qx.Class.define("qx.ui.menu.Menu",{extend:qx.ui.core.Widget,include:[qx.ui.core.MPlacement,qx.ui.core.MRemoteChildrenHandling],construct:function(){this.base(arguments);this._setLayout(new qx.ui.menu.Layout);var a=this.getApplicationRoot();a.add(this);this.addListener("mouseover",this._onMouseOver);this.addListener("mouseout",this._onMouseOut);this.addListener("resize",this._onResize,this);a.addListener("resize",this._onResize,this);this._blocker=new qx.ui.core.Blocker(a);this.initVisibility();this.initKeepFocus();this.initKeepActive()},properties:{appearance:{refine:true,init:"menu"},allowGrowX:{refine:true,init:false},allowGrowY:{refine:true,init:false},visibility:{refine:true,init:"excluded"},keepFocus:{refine:true,init:true},keepActive:{refine:true,init:true},spacingX:{check:"Integer",apply:"_applySpacingX",init:0,themeable:true},spacingY:{check:"Integer",apply:"_applySpacingY",init:0,themeable:true},iconColumnWidth:{check:"Integer",init:0,themeable:true,apply:"_applyIconColumnWidth"},arrowColumnWidth:{check:"Integer",init:0,themeable:true,apply:"_applyArrowColumnWidth"},blockerColor:{check:"Color",init:null,nullable:true,apply:"_applyBlockerColor",themeable:true},blockerOpacity:{check:"Number",init:1,apply:"_applyBlockerOpacity",themeable:true},selectedButton:{check:"qx.ui.core.Widget",nullable:true,apply:"_applySelectedButton"},openedButton:{check:"qx.ui.core.Widget",nullable:true,apply:"_applyOpenedButton"},opener:{check:"qx.ui.core.Widget",nullable:true},openInterval:{check:"Integer",themeable:true,init:250,apply:"_applyOpenInterval"},closeInterval:{check:"Integer",themeable:true,init:250,apply:"_applyCloseInterval"},blockBackground:{check:"Boolean",themeable:true,init:false}},members:{__scheduledOpen:null,__onAfterSlideBarAdd:null,_blocker:null,open:function(){if(this.getOpener()!=null){this.placeToWidget(this.getOpener());this.__updateSlideBar();this.show();this._placementTarget=this.getOpener()}else{this.warn("The menu instance needs a configured 'opener' widget!")}},openAtMouse:function(a){this.placeToMouse(a);this.__updateSlideBar();this.show();this._placementTarget={left:a.getDocumentLeft(),top:a.getDocumentTop()}},openAtPoint:function(a){this.placeToPoint(a);this.__updateSlideBar();this.show();this._placementTarget=a},addSeparator:function(){this.add(new qx.ui.menu.Separator)},getColumnSizes:function(){return this._getMenuLayout().getColumnSizes()},getSelectables:function(){var a=[];var c=this.getChildren();for(var b=0;b<c.length;b++){if(c[b].isEnabled()){a.push(c[b])}}return a},_applyIconColumnWidth:function(b,a){this._getMenuLayout().setIconColumnWidth(b)},_applyArrowColumnWidth:function(b,a){this._getMenuLayout().setArrowColumnWidth(b)},_applySpacingX:function(b,a){this._getMenuLayout().setColumnSpacing(b)},_applySpacingY:function(b,a){this._getMenuLayout().setSpacing(b)},_applyVisibility:function(d,a){this.base(arguments,d,a);var c=qx.ui.menu.Manager.getInstance();if(d==="visible"){c.add(this);var b=this.getParentMenu();if(b){b.setOpenedButton(this.getOpener())}}else{if(a==="visible"){c.remove(this);var b=this.getParentMenu();if(b&&b.getOpenedButton()==this.getOpener()){b.resetOpenedButton()}this.resetOpenedButton();this.resetSelectedButton()}}this.__updateBlockerVisibility()},__updateBlockerVisibility:function(){if(this.isVisible()){if(this.getBlockBackground()){var a=this.getZIndex();this._blocker.blockContent(a-1)}}else{if(this._blocker.isContentBlocked()){this._blocker.unblockContent()}}},getParentMenu:function(){var a=this.getOpener();if(!a||!(a instanceof qx.ui.menu.AbstractButton)){return null}if(a&&a.getContextMenu()===this){return null}while(a&&!(a instanceof qx.ui.menu.Menu)){a=a.getLayoutParent()}return a},_applySelectedButton:function(b,a){if(a){a.removeState("selected")}if(b){b.addState("selected")}},_applyOpenedButton:function(b,a){if(a){a.getMenu().exclude()}if(b){b.getMenu().open()}},_applyBlockerColor:function(b,a){this._blocker.setColor(b)},_applyBlockerOpacity:function(b,a){this._blocker.setOpacity(b)},getChildrenContainer:function(){return this.getChildControl("slidebar",true)||this},_createChildControlImpl:function(g,f){var e;switch(g){case"slidebar":var e=new qx.ui.menu.MenuSlideBar();var d=this._getLayout();this._setLayout(new qx.ui.layout.Grow());var c=e.getLayout();e.setLayout(d);c.dispose();var b=qx.lang.Array.clone(this.getChildren());for(var a=0;a<b.length;a++){e.add(b[a])}this.removeListener("resize",this._onResize,this);e.getChildrenContainer().addListener("resize",this._onResize,this);this._add(e);break}return e||this.base(arguments,g)},_getMenuLayout:function(){if(this.hasChildControl("slidebar")){return this.getChildControl("slidebar").getChildrenContainer().getLayout()}else{return this._getLayout()}},_getMenuBounds:function(){if(this.hasChildControl("slidebar")){return this.getChildControl("slidebar").getChildrenContainer().getBounds()}else{return this.getBounds()}},_computePlacementSize:function(){return this._getMenuBounds()},__updateSlideBar:function(){var b=this._getMenuBounds();if(!b){this.addListenerOnce("resize",this.__updateSlideBar,this);return}var a=this.getLayoutParent().getBounds().height;var d=this.getLayoutProperties().top;var c=this.getLayoutProperties().left;if(d<0){this._assertSlideBar(function(){this.setHeight(b.height+d);this.moveTo(c,0)})}else{if(d+b.height>a){this._assertSlideBar(function(){this.setHeight(a-d)})}else{this.setHeight(null)}}},_assertSlideBar:function(a){if(this.hasChildControl("slidebar")){return a.call(this)}this.__onAfterSlideBarAdd=a;qx.ui.core.queue.Widget.add(this)},syncWidget:function(){this.getChildControl("slidebar");if(this.__onAfterSlideBarAdd){this.__onAfterSlideBarAdd.call(this);delete this.__onAfterSlideBarAdd}},_onResize:function(){if(this.isVisible()){var a=this._placementTarget;if(!a){return}else{if(a instanceof qx.ui.core.Widget){this.placeToWidget(a)}else{if(a.top!==undefined){this.placeToPoint(a)}else{throw new Error("Unknown target: "+a)}}}this.__updateSlideBar()}},_onMouseOver:function(d){var b=qx.ui.menu.Manager.getInstance();b.cancelClose(this);var c=d.getTarget();if(c.isEnabled()&&c instanceof qx.ui.menu.AbstractButton){this.setSelectedButton(c);var a=c.getMenu&&c.getMenu();if(a){a.setOpener(c);b.scheduleOpen(a);this.__scheduledOpen=a}else{var f=this.getOpenedButton();if(f){b.scheduleClose(f.getMenu())}if(this.__scheduledOpen){b.cancelOpen(this.__scheduledOpen);this.__scheduledOpen=null}}}else{if(!this.getOpenedButton()){this.resetSelectedButton()}}},_onMouseOut:function(b){var a=qx.ui.menu.Manager.getInstance();if(!qx.ui.core.Widget.contains(this,b.getRelatedTarget())){var c=this.getOpenedButton();c?this.setSelectedButton(c):this.resetSelectedButton();if(c){a.cancelClose(c.getMenu())}if(this.__scheduledOpen){a.cancelOpen(this.__scheduledOpen)}}}},destruct:function(){if(!qx.core.ObjectRegistry.inShutDown){qx.ui.menu.Manager.getInstance().remove(this)}this.getApplicationRoot().removeListener("resize",this._onResize,this);this._placementTarget=null;this._disposeObjects("_blocker")}});qx.Class.define("qx.ui.menu.Layout",{extend:qx.ui.layout.VBox,properties:{columnSpacing:{check:"Integer",init:0,apply:"_applyLayoutChange"},spanColumn:{check:"Integer",init:1,nullable:true,apply:"_applyLayoutChange"},iconColumnWidth:{check:"Integer",init:0,themeable:true,apply:"_applyLayoutChange"},arrowColumnWidth:{check:"Integer",init:0,themeable:true,apply:"_applyLayoutChange"}},members:{__columnSizes:null,_computeSizeHint:function(){var c=this._getLayoutChildren();var b,p,k;var h=this.getSpanColumn();var a=this.__columnSizes=[0,0,0,0];var j=this.getColumnSpacing();var n=0;var m=0;for(var g=0,f=c.length;g<f;g++){b=c[g];if(b.isAnonymous()){continue}p=b.getChildrenSizes();for(var e=0;e<p.length;e++){if(h!=null&&e==h&&p[h+1]==0){n=Math.max(n,p[e])}else{a[e]=Math.max(a[e],p[e])}}var d=c[g].getInsets();m=Math.max(m,d.left+d.right)}if(h!=null&&a[h]+j+a[h+1]<n){a[h]=n-a[h+1]-j}if(n==0){k=j*2}else{k=j*3}if(a[0]==0){a[0]=this.getIconColumnWidth()}if(a[3]==0){a[3]=this.getArrowColumnWidth()}var o=this.base(arguments).height;return{minHeight:o,height:o,width:qx.lang.Array.sum(a)+m+k}},getColumnSizes:function(){return this.__columnSizes||null}},destruct:function(){this.__columnSizes=null}});qx.Class.define("qx.ui.menu.Separator",{extend:qx.ui.core.Widget,properties:{appearance:{refine:true,init:"menu-separator"},anonymous:{refine:true,init:true}}});qx.Class.define("qx.ui.menu.AbstractButton",{extend:qx.ui.core.Widget,include:[qx.ui.core.MExecutable],implement:[qx.ui.form.IExecutable],type:"abstract",construct:function(){this.base(arguments);this._setLayout(new qx.ui.menu.ButtonLayout);this.addListener("mouseup",this._onMouseUp);this.addListener("keypress",this._onKeyPress);this.addListener("changeCommand",this._onChangeCommand,this)},properties:{blockToolTip:{refine:true,init:true},label:{check:"String",apply:"_applyLabel",nullable:true},menu:{check:"qx.ui.menu.Menu",apply:"_applyMenu",nullable:true,dereference:true},icon:{check:"String",apply:"_applyIcon",themeable:true,nullable:true}},members:{_createChildControlImpl:function(c,b){var a;switch(c){case"icon":a=new qx.ui.basic.Image;a.setAnonymous(true);this._add(a,{column:0});break;case"label":a=new qx.ui.basic.Label;a.setAnonymous(true);this._add(a,{column:1});break;case"shortcut":a=new qx.ui.basic.Label;a.setAnonymous(true);this._add(a,{column:2});break;case"arrow":a=new qx.ui.basic.Image;a.setAnonymous(true);this._add(a,{column:3});break}return a||this.base(arguments,c)},_forwardStates:{selected:1},getChildrenSizes:function(){var h=0,b=0,e=0,c=0;if(this._isChildControlVisible("icon")){var f=this.getChildControl("icon");h=f.getMarginLeft()+f.getSizeHint().width+f.getMarginRight()}if(this._isChildControlVisible("label")){var d=this.getChildControl("label");b=d.getMarginLeft()+d.getSizeHint().width+d.getMarginRight()}if(this._isChildControlVisible("shortcut")){var a=this.getChildControl("shortcut");e=a.getMarginLeft()+a.getSizeHint().width+a.getMarginRight()}if(this._isChildControlVisible("arrow")){var g=this.getChildControl("arrow");c=g.getMarginLeft()+g.getSizeHint().width+g.getMarginRight()}return[h,b,e,c]},_onMouseUp:function(a){},_onKeyPress:function(a){},_onChangeCommand:function(b){var c=b.getData();if(c==null){return}if(qx.core.Environment.get("qx.dynlocale")){var a=b.getOldData();if(!a){qx.locale.Manager.getInstance().addListener("changeLocale",this._onChangeLocale,this)}if(!c){qx.locale.Manager.getInstance().removeListener("changeLocale",this._onChangeLocale,this)}}var d=c!=null?c.toString():"";this.getChildControl("shortcut").setValue(d)},_onChangeLocale:qx.core.Environment.select("qx.dynlocale",{"true":function(a){var b=this.getCommand();if(b!=null){this.getChildControl("shortcut").setValue(b.toString())}},"false":null}),_applyIcon:function(b,a){if(b){this._showChildControl("icon").setSource(b)}else{this._excludeChildControl("icon")}},_applyLabel:function(b,a){if(b){this._showChildControl("label").setValue(b)}else{this._excludeChildControl("label")}},_applyMenu:function(b,a){if(a){a.resetOpener();a.removeState("submenu")}if(b){this._showChildControl("arrow");b.setOpener(this);b.addState("submenu")}else{this._excludeChildControl("arrow")}}},destruct:function(){this.removeListener("changeCommand",this._onChangeCommand,this);if(this.getMenu()){if(!qx.core.ObjectRegistry.inShutDown){this.getMenu().destroy()}}if(qx.core.Environment.get("qx.dynlocale")){qx.locale.Manager.getInstance().removeListener("changeLocale",this._onChangeLocale,this)}}});qx.Class.define("qx.ui.menu.ButtonLayout",{extend:qx.ui.layout.Abstract,members:{verifyLayoutProperty:qx.core.Environment.select("qx.debug",{"true":function(b,a,c){this.assert(a=="column","The property '"+a+"' is not supported by the MenuButton layout!")},"false":null}),renderLayout:function(m,s){var c=this._getLayoutChildren();var b;var g;var r=[];for(var k=0,h=c.length;k<h;k++){b=c[k];g=b.getLayoutProperties().column;r[g]=b}var a=this.__getMenu(c[0]);var f=a.getColumnSizes();var o=a.getSpacingX();var n=qx.lang.Array.sum(f)+o*(f.length-1);if(n<m){f[1]+=m-n}var e=0,p=0;var q=qx.ui.layout.Util;for(var k=0,h=f.length;k<h;k++){b=r[k];if(b){var j=b.getSizeHint();var p=q.computeVerticalAlignOffset(b.getAlignY()||"middle",j.height,s,0,0);var d=q.computeHorizontalAlignOffset(b.getAlignX()||"left",j.width,f[k],b.getMarginLeft(),b.getMarginRight());b.renderLayout(e+d,p,j.width,j.height)}e+=f[k]+o}},__getMenu:function(a){while(!(a instanceof qx.ui.menu.Menu)){a=a.getLayoutParent()}return a},_computeSizeHint:function(){var e=this._getLayoutChildren();var b=0;var a=0;for(var d=0,c=e.length;d<c;d++){var f=e[d].getSizeHint();a+=f.width;b=Math.max(b,f.height)}return{width:a,height:b}}}});qx.Mixin.define("qx.ui.core.MRemoteLayoutHandling",{members:{setLayout:function(a){return this.getChildrenContainer().setLayout(a)},getLayout:function(){return this.getChildrenContainer().getLayout()}}});qx.Class.define("qx.ui.container.SlideBar",{extend:qx.ui.core.Widget,include:[qx.ui.core.MRemoteChildrenHandling,qx.ui.core.MRemoteLayoutHandling],construct:function(b){this.base(arguments);var a=this.getChildControl("scrollpane");this._add(a,{flex:1});if(b!=null){this.setOrientation(b)}else{this.initOrientation()}this.addListener("mousewheel",this._onMouseWheel,this)},properties:{appearance:{refine:true,init:"slidebar"},orientation:{check:["horizontal","vertical"],init:"horizontal",apply:"_applyOrientation"},scrollStep:{check:"Integer",init:15,themeable:true}},members:{getChildrenContainer:function(){return this.getChildControl("content")},_createChildControlImpl:function(c,b){var a;switch(c){case"button-forward":a=new qx.ui.form.RepeatButton;a.addListener("execute",this._onExecuteForward,this);a.setFocusable(false);this._addAt(a,2);break;case"button-backward":a=new qx.ui.form.RepeatButton;a.addListener("execute",this._onExecuteBackward,this);a.setFocusable(false);this._addAt(a,0);break;case"content":a=new qx.ui.container.Composite();if(qx.core.Environment.get("engine.name")=="gecko"){a.addListener("removeChildWidget",this._onRemoveChild,this)}this.getChildControl("scrollpane").add(a);break;case"scrollpane":a=new qx.ui.core.scroll.ScrollPane();a.addListener("update",this._onResize,this);a.addListener("scrollX",this._onScroll,this);a.addListener("scrollY",this._onScroll,this);break}return a||this.base(arguments,c)},_forwardStates:{barLeft:true,barTop:true,barRight:true,barBottom:true},scrollBy:function(a){var b=this.getChildControl("scrollpane");if(this.getOrientation()==="horizontal"){b.scrollByX(a)}else{b.scrollByY(a)}},scrollTo:function(a){var b=this.getChildControl("scrollpane");if(this.getOrientation()==="horizontal"){b.scrollToX(a)}else{b.scrollToY(a)}},_applyOrientation:function(d,a){var c=[this.getLayout(),this._getLayout()];var e=this.getChildControl("button-forward");var b=this.getChildControl("button-backward");if(a=="vertical"){e.removeState("vertical");b.removeState("vertical");e.addState("horizontal");b.addState("horizontal")}else{if(a=="horizontal"){e.removeState("horizontal");b.removeState("horizontal");e.addState("vertical");b.addState("vertical")}}if(d=="horizontal"){this._setLayout(new qx.ui.layout.HBox());this.setLayout(new qx.ui.layout.HBox())}else{this._setLayout(new qx.ui.layout.VBox());this.setLayout(new qx.ui.layout.VBox())}if(c[0]){c[0].dispose()}if(c[1]){c[1].dispose()}},_onMouseWheel:function(a){this.scrollBy(a.getWheelDelta()*this.getScrollStep());a.stop()},_onScroll:function(){this._updateArrowsEnabled()},_onResize:function(c){var b=this.getChildControl("scrollpane").getChildren()[0];if(!b){return}var a=this.getInnerSize();var d=b.getBounds();var f=(this.getOrientation()==="horizontal")?d.width>a.width:d.height>a.height;if(f){this._showArrows();this._updateArrowsEnabled()}else{this._hideArrows()}},_onExecuteBackward:function(){this.scrollBy(-this.getScrollStep())},_onExecuteForward:function(){this.scrollBy(this.getScrollStep())},_onRemoveChild:function(){qx.event.Timer.once(function(){this.scrollBy(this.getChildControl("scrollpane").getScrollX())},this,50)},_updateArrowsEnabled:function(){var c=this.getChildControl("scrollpane");if(this.getOrientation()==="horizontal"){var b=c.getScrollX();var a=c.getScrollMaxX()}else{var b=c.getScrollY();var a=c.getScrollMaxY()}this.getChildControl("button-backward").setEnabled(b>0);this.getChildControl("button-forward").setEnabled(b<a)},_showArrows:function(){this._showChildControl("button-forward");this._showChildControl("button-backward")},_hideArrows:function(){this._excludeChildControl("button-forward");this._excludeChildControl("button-backward");this.scrollTo(0)}}});qx.Class.define("qx.ui.menu.MenuSlideBar",{extend:qx.ui.container.SlideBar,construct:function(){this.base(arguments,"vertical")},properties:{appearance:{refine:true,init:"menu-slidebar"}},members:{_createChildControlImpl:function(c,b){var a;switch(c){case"button-forward":a=new qx.ui.form.HoverButton();a.addListener("execute",this._onExecuteForward,this);this._addAt(a,2);break;case"button-backward":a=new qx.ui.form.HoverButton();a.addListener("execute",this._onExecuteBackward,this);this._addAt(a,0);break}return a||this.base(arguments,c)}}});qx.Class.define("qx.ui.form.RepeatButton",{extend:qx.ui.form.Button,construct:function(a,b){this.base(arguments,a,b);this.__timer=new qx.event.AcceleratingTimer();this.__timer.addListener("interval",this._onInterval,this)},events:{execute:"qx.event.type.Event",press:"qx.event.type.Event",release:"qx.event.type.Event"},properties:{interval:{check:"Integer",init:100},firstInterval:{check:"Integer",init:500},minTimer:{check:"Integer",init:20},timerDecrease:{check:"Integer",init:2}},members:{__executed:null,__timer:null,press:function(){if(this.isEnabled()){if(!this.hasState("pressed")){this.__startInternalTimer()}this.removeState("abandoned");this.addState("pressed")}},release:function(a){if(!this.isEnabled()){return}if(this.hasState("pressed")){if(!this.__executed){this.execute()}}this.removeState("pressed");this.removeState("abandoned");this.__stopInternalTimer()},_applyEnabled:function(b,a){this.base(arguments,b,a);if(!b){this.removeState("pressed");this.removeState("abandoned");this.__stopInternalTimer()}},_onMouseOver:function(a){if(!this.isEnabled()||a.getTarget()!==this){return}if(this.hasState("abandoned")){this.removeState("abandoned");this.addState("pressed");this.__timer.start()}this.addState("hovered")},_onMouseOut:function(a){if(!this.isEnabled()||a.getTarget()!==this){return}this.removeState("hovered");if(this.hasState("pressed")){this.removeState("pressed");this.addState("abandoned");this.__timer.stop()}},_onMouseDown:function(a){if(!a.isLeftPressed()){return}this.capture();this.__startInternalTimer();a.stopPropagation()},_onMouseUp:function(a){this.releaseCapture();if(!this.hasState("abandoned")){this.addState("hovered");if(this.hasState("pressed")&&!this.__executed){this.execute()}}this.__stopInternalTimer();a.stopPropagation()},_onKeyUp:function(a){switch(a.getKeyIdentifier()){case"Enter":case"Space":if(this.hasState("pressed")){if(!this.__executed){this.execute()}this.removeState("pressed");this.removeState("abandoned");a.stopPropagation();this.__stopInternalTimer()}}},_onKeyDown:function(a){switch(a.getKeyIdentifier()){case"Enter":case"Space":this.removeState("abandoned");this.addState("pressed");a.stopPropagation();this.__startInternalTimer()}},_onInterval:function(a){this.__executed=true;this.fireEvent("execute")},__startInternalTimer:function(){this.fireEvent("press");this.__executed=false;this.__timer.set({interval:this.getInterval(),firstInterval:this.getFirstInterval(),minimum:this.getMinTimer(),decrease:this.getTimerDecrease()}).start();this.removeState("abandoned");this.addState("pressed")},__stopInternalTimer:function(){this.fireEvent("release");this.__timer.stop();this.removeState("abandoned");this.removeState("pressed")}},destruct:function(){this._disposeObjects("__timer")}});qx.Class.define("qx.event.AcceleratingTimer",{extend:qx.core.Object,construct:function(){this.base(arguments);this.__timer=new qx.event.Timer(this.getInterval());this.__timer.addListener("interval",this._onInterval,this)},events:{interval:"qx.event.type.Event"},properties:{interval:{check:"Integer",init:100},firstInterval:{check:"Integer",init:500},minimum:{check:"Integer",init:20},decrease:{check:"Integer",init:2}},members:{__timer:null,__currentInterval:null,start:function(){this.__timer.setInterval(this.getFirstInterval());this.__timer.start()},stop:function(){this.__timer.stop();this.__currentInterval=null},_onInterval:function(){this.__timer.stop();if(this.__currentInterval==null){this.__currentInterval=this.getInterval()}this.__currentInterval=Math.max(this.getMinimum(),this.__currentInterval-this.getDecrease());this.__timer.setInterval(this.__currentInterval);this.__timer.start();this.fireEvent("interval")}},destruct:function(){this._disposeObjects("__timer")}});qx.Class.define("qx.ui.core.scroll.ScrollPane",{extend:qx.ui.core.Widget,construct:function(){this.base(arguments);this.set({minWidth:0,minHeight:0});this._setLayout(new qx.ui.layout.Grow());this.addListener("resize",this._onUpdate);var a=this.getContentElement();a.addListener("scroll",this._onScroll,this);a.addListener("appear",this._onAppear,this)},events:{update:"qx.event.type.Event"},properties:{scrollX:{check:"qx.lang.Type.isNumber(value)&&value>=0&&value<=this.getScrollMaxX()",apply:"_applyScrollX",event:"scrollX",init:0},scrollY:{check:"qx.lang.Type.isNumber(value)&&value>=0&&value<=this.getScrollMaxY()",apply:"_applyScrollY",event:"scrollY",init:0}},members:{add:function(b){var a=this._getChildren()[0];if(a){this._remove(a);a.removeListener("resize",this._onUpdate,this)}if(b){this._add(b);b.addListener("resize",this._onUpdate,this)}},remove:function(a){if(a){this._remove(a);a.removeListener("resize",this._onUpdate,this)}},getChildren:function(){return this._getChildren()},_onUpdate:function(a){this.fireEvent("update")},_onScroll:function(b){var a=this.getContentElement();this.setScrollX(a.getScrollX());this.setScrollY(a.getScrollY())},_onAppear:function(f){var d=this.getContentElement();var b=this.getScrollX();var c=d.getScrollX();if(b!=c){d.scrollToX(b)}var g=this.getScrollY();var a=d.getScrollY();if(g!=a){d.scrollToY(g)}},getItemTop:function(a){var b=0;do{b+=a.getBounds().top;a=a.getLayoutParent()}while(a&&a!==this);return b},getItemBottom:function(a){return this.getItemTop(a)+a.getBounds().height},getItemLeft:function(b){var c=0;var a;do{c+=b.getBounds().left;a=b.getLayoutParent();if(a){c+=a.getInsets().left}b=a}while(b&&b!==this);return c},getItemRight:function(a){return this.getItemLeft(a)+a.getBounds().width},getScrollSize:function(){return this.getChildren()[0].getBounds()},getScrollMaxX:function(){var b=this.getInnerSize();var a=this.getScrollSize();if(b&&a){return Math.max(0,a.width-b.width)}return 0},getScrollMaxY:function(){var b=this.getInnerSize();var a=this.getScrollSize();if(b&&a){return Math.max(0,a.height-b.height)}return 0},scrollToX:function(b){var a=this.getScrollMaxX();if(b<0){b=0}else{if(b>a){b=a}}this.setScrollX(b)},scrollToY:function(b){var a=this.getScrollMaxY();if(b<0){b=0}else{if(b>a){b=a}}this.setScrollY(b)},scrollByX:function(a){this.scrollToX(this.getScrollX()+a)},scrollByY:function(a){this.scrollToY(this.getScrollY()+a)},_applyScrollX:function(a){this.getContentElement().scrollToX(a)},_applyScrollY:function(a){this.getContentElement().scrollToY(a)}}});qx.Class.define("qx.ui.form.HoverButton",{extend:qx.ui.basic.Atom,include:[qx.ui.core.MExecutable],implement:[qx.ui.form.IExecutable],construct:function(a,b){this.base(arguments,a,b);this.addListener("mouseover",this._onMouseOver,this);this.addListener("mouseout",this._onMouseOut,this);this.__timer=new qx.event.AcceleratingTimer();this.__timer.addListener("interval",this._onInterval,this)},properties:{appearance:{refine:true,init:"hover-button"},interval:{check:"Integer",init:80},firstInterval:{check:"Integer",init:200},minTimer:{check:"Integer",init:20},timerDecrease:{check:"Integer",init:2}},members:{__timer:null,_onMouseOver:function(a){if(!this.isEnabled()||a.getTarget()!==this){return}this.__timer.set({interval:this.getInterval(),firstInterval:this.getFirstInterval(),minimum:this.getMinTimer(),decrease:this.getTimerDecrease()}).start();this.addState("hovered")},_onMouseOut:function(a){this.__timer.stop();this.removeState("hovered");if(!this.isEnabled()||a.getTarget()!==this){return}},_onInterval:function(){if(this.isEnabled()){this.execute()}else{this.__timer.stop()}}},destruct:function(){this._disposeObjects("__timer")}});qx.Class.define("qx.ui.menubar.Button",{extend:qx.ui.form.MenuButton,construct:function(a,b,c){this.base(arguments,a,b,c);this.removeListener("keydown",this._onKeyDown);this.removeListener("keyup",this._onKeyUp)},properties:{appearance:{refine:true,init:"menubar-button"},show:{refine:true,init:"inherit"},focusable:{refine:true,init:false}},members:{getMenuBar:function(){var a=this;while(a){if(a instanceof qx.ui.toolbar.ToolBar){return a}a=a.getLayoutParent()}return null},open:function(b){this.base(arguments,b);var a=this.getMenuBar();a._setAllowMenuOpenHover(true)},_onMenuChange:function(b){var c=this.getMenu();var a=this.getMenuBar();if(c.isVisible()){this.addState("pressed");if(a){a.setOpenMenu(c)}}else{this.removeState("pressed");if(a&&a.getOpenMenu()==c){a.resetOpenMenu();a._setAllowMenuOpenHover(false)}}},_onMouseUp:function(a){this.base(arguments,a);var b=this.getMenu();if(b&&b.isVisible()&&!this.hasState("pressed")){this.addState("pressed")}},_onMouseOver:function(b){this.addState("hovered");if(this.getMenu()){var a=this.getMenuBar();if(a._isAllowMenuOpenHover()){qx.ui.menu.Manager.getInstance().hideAll();a._setAllowMenuOpenHover(true);if(this.isEnabled()){this.open()}}}}}});qx.Class.define("qx.ui.toolbar.ToolBar",{extend:qx.ui.core.Widget,include:qx.ui.core.MChildrenHandling,construct:function(){this.base(arguments);this._setLayout(new qx.ui.layout.HBox());this.__removedItems=[];this.__removePriority=[]},properties:{appearance:{refine:true,init:"toolbar"},openMenu:{check:"qx.ui.menu.Menu",event:"changeOpenMenu",nullable:true},show:{init:"both",check:["both","label","icon"],inheritable:true,event:"changeShow"},spacing:{nullable:true,check:"Integer",themeable:true,apply:"_applySpacing"},overflowIndicator:{check:"qx.ui.core.Widget",nullable:true,apply:"_applyOverflowIndicator"},overflowHandling:{init:false,check:"Boolean",apply:"_applyOverflowHandling"}},events:{hideItem:"qx.event.type.Data",showItem:"qx.event.type.Data"},members:{__removedItems:null,__removePriority:null,_computeSizeHint:function(){var c=this.base(arguments);if(true&&this.getOverflowHandling()){var a=0;var b=this.getOverflowIndicator();if(b){a=b.getSizeHint().width+this.getSpacing()}c.minWidth=a}return c},_onResize:function(a){this._recalculateOverflow(a.getData().width)},_recalculateOverflow:function(c,g){if(!this.getOverflowHandling()){return}g=g||this.getSizeHint().width;var h=this.getOverflowIndicator();var k=0;if(h){k=h.getSizeHint().width}if(c==undefined&&this.getBounds()!=null){c=this.getBounds().width}if(c==undefined){return}if(c<g){do{var b=this._getNextToHide();if(!b){return}var f=b.getMarginLeft()+b.getMarginRight();f=Math.max(f,this.getSpacing());var m=b.getSizeHint().width+f;this.__hideChild(b);g-=m;if(h&&h.getVisibility()!="visible"){h.setVisibility("visible");g+=k;var l=h.getMarginLeft()+h.getMarginRight();g+=Math.max(l,this.getSpacing())}}while(g>c)}else{if(this.__removedItems.length>0){do{var d=this.__removedItems[0];if(d){var f=d.getMarginLeft()+d.getMarginRight();f=Math.max(f,this.getSpacing());if(d.getDecoratorElement()==null){d.syncAppearance();d.invalidateLayoutCache()}var a=d.getSizeHint().width;var j=false;if(this.__removedItems.length==1&&k>0){var e=f-this.getSpacing();var i=g-k+a+e;j=c>i}if(c>g+a+f||j){this.__showChild(d);g+=a;if(h&&this.__removedItems.length==0){h.setVisibility("excluded")}}else{return}}}while(c>=g&&this.__removedItems.length>0)}}},__showChild:function(a){a.setVisibility("visible");this.__removedItems.shift();this.fireDataEvent("showItem",a)},__hideChild:function(a){if(!a){return}this.__removedItems.unshift(a);a.setVisibility("excluded");this.fireDataEvent("hideItem",a)},_getNextToHide:function(){for(var b=this.__removePriority.length-1;b>=0;b--){var c=this.__removePriority[b];if(c&&c.getVisibility&&c.getVisibility()=="visible"){return c}}var a=this._getChildren();for(var b=a.length-1;b>=0;b--){var d=a[b];if(d==this.getOverflowIndicator()){continue}if(d.getVisibility&&d.getVisibility()=="visible"){return d}}},setRemovePriority:function(c,b,a){if(!a&&this.__removePriority[b]!=undefined){throw new Error("Priority already in use!")}this.__removePriority[b]=c},_applyOverflowHandling:function(f,b){this.invalidateLayoutCache();var d=this.getLayoutParent();if(d){d.invalidateLayoutCache()}var e=this.getBounds();if(e&&e.width){this._recalculateOverflow(e.width)}if(f){this.addListener("resize",this._onResize,this)}else{this.removeListener("resize",this._onResize,this);var a=this.getOverflowIndicator();if(a){a.setVisibility("excluded")}for(var c=0;c<this.__removedItems.length;c++){this.__removedItems[c].setVisibility("visible")}this.__removedItems=[]}},_applyOverflowIndicator:function(b,a){if(a){this._remove(a)}if(b){if(this._indexOf(b)==-1){throw new Error("Widget must be child of the toolbar.")}b.setVisibility("excluded")}},__allowMenuOpenHover:false,_setAllowMenuOpenHover:function(a){this.__allowMenuOpenHover=a},_isAllowMenuOpenHover:function(){return this.__allowMenuOpenHover},_applySpacing:function(c,a){var b=this._getLayout();c==null?b.resetSpacing():b.setSpacing(c)},_add:function(c,a){this.base(arguments,c,a);var b=this.getSizeHint().width+c.getSizeHint().width+2*this.getSpacing();this._recalculateOverflow(null,b)},_addAt:function(d,b,a){this.base(arguments,d,b,a);var c=this.getSizeHint().width+d.getSizeHint().width+2*this.getSpacing();this._recalculateOverflow(null,c)},_addBefore:function(d,c,a){this.base(arguments,d,c,a);var b=this.getSizeHint().width+d.getSizeHint().width+2*this.getSpacing();this._recalculateOverflow(null,b)},_addAfter:function(d,c,a){this.base(arguments,d,c,a);var b=this.getSizeHint().width+d.getSizeHint().width+2*this.getSpacing();this._recalculateOverflow(null,b)},_remove:function(b){this.base(arguments,b);var a=this.getSizeHint().width-b.getSizeHint().width-2*this.getSpacing();this._recalculateOverflow(null,a)},_removeAt:function(a){var c=this._getChildren()[a];this.base(arguments,a);var b=this.getSizeHint().width-c.getSizeHint().width-2*this.getSpacing();this._recalculateOverflow(null,b)},_removeAll:function(){this.base(arguments);this._recalculateOverflow(null,0)},addSpacer:function(){var a=new qx.ui.core.Spacer;this._add(a,{flex:1});return a},addSeparator:function(){this.add(new qx.ui.toolbar.Separator)},getMenuButtons:function(){var c=this.getChildren();var d=[];var e;for(var b=0,a=c.length;b<a;b++){e=c[b];if(e instanceof qx.ui.menubar.Button){d.push(e)}else{if(e instanceof qx.ui.toolbar.Part){d.push.apply(d,e.getMenuButtons())}}}return d}},destruct:function(){if(this.hasListener("resize")){this.removeListener("resize",this._onResize,this)}}});qx.Class.define("qx.ui.core.Spacer",{extend:qx.ui.core.LayoutItem,construct:function(b,a){this.base(arguments);this.setWidth(b!=null?b:0);this.setHeight(a!=null?a:0)},members:{checkAppearanceNeeds:function(){},addChildrenToQueue:function(a){},destroy:function(){if(this.$$disposed){return}var a=this.$$parent;if(a){a._remove(this)}qx.ui.core.queue.Dispose.add(this)}}});qx.Class.define("qx.ui.toolbar.Separator",{extend:qx.ui.core.Widget,properties:{appearance:{refine:true,init:"toolbar-separator"},anonymous:{refine:true,init:true},width:{refine:true,init:0},height:{refine:true,init:0}}});qx.Class.define("qx.ui.toolbar.Part",{extend:qx.ui.core.Widget,include:[qx.ui.core.MRemoteChildrenHandling],construct:function(){this.base(arguments);this._setLayout(new qx.ui.layout.HBox);this._createChildControl("handle")},properties:{appearance:{refine:true,init:"toolbar/part"},show:{init:"both",check:["both","label","icon"],inheritable:true,event:"changeShow"},spacing:{nullable:true,check:"Integer",themeable:true,apply:"_applySpacing"}},members:{_createChildControlImpl:function(c,b){var a;switch(c){case"handle":a=new qx.ui.basic.Image();a.setAlignY("middle");this._add(a);break;case"container":a=new qx.ui.toolbar.PartContainer();a.addListener("syncAppearance",this.__onSyncAppearance,this);this._add(a);break}return a||this.base(arguments,c)},getChildrenContainer:function(){return this.getChildControl("container")},_applySpacing:function(c,a){var b=this.getChildControl("container").getLayout();c==null?b.resetSpacing():b.setSpacing(c)},__onSyncAppearance:function(){var b=this.getChildrenContainer().getChildren();for(var a=0;a<b.length;a++){if(a==0&&a!=b.length-1){b[a].addState("left");b[a].removeState("right");b[a].removeState("middle")}else{if(a==b.length-1&&a!=0){b[a].addState("right");b[a].removeState("left");b[a].removeState("middle")}else{if(a==0&&a==b.length-1){b[a].removeState("left");b[a].removeState("middle");b[a].removeState("right")}else{b[a].addState("middle");b[a].removeState("right");b[a].removeState("left")}}}}},addSeparator:function(){this.add(new qx.ui.toolbar.Separator)},getMenuButtons:function(){var c=this.getChildren();var d=[];var e;for(var b=0,a=c.length;b<a;b++){e=c[b];if(e instanceof qx.ui.menubar.Button){d.push(e)}}return d}}});qx.Class.define("qx.ui.toolbar.PartContainer",{extend:qx.ui.container.Composite,construct:function(){this.base(arguments);this._setLayout(new qx.ui.layout.HBox)},properties:{appearance:{refine:true,init:"toolbar/part/container"},show:{init:"both",check:["both","label","icon"],inheritable:true,event:"changeShow"}}});qx.Class.define("qx.ui.menu.Button",{extend:qx.ui.menu.AbstractButton,construct:function(a,b,d,c){this.base(arguments);if(a!=null){this.setLabel(a)}if(b!=null){this.setIcon(b)}if(d!=null){this.setCommand(d)}if(c!=null){this.setMenu(c)}},properties:{appearance:{refine:true,init:"menu-button"}},members:{_onMouseUp:function(a){if(a.isLeftPressed()){this.execute();if(this.getMenu()){return}}else{if(this.getContextMenu()){return}}qx.ui.menu.Manager.getInstance().hideAll()},_onKeyPress:function(a){this.execute()}}});qx.Class.define("qx.ui.toolbar.Button",{extend:qx.ui.form.Button,construct:function(a,b,c){this.base(arguments,a,b,c);this.removeListener("keydown",this._onKeyDown);this.removeListener("keyup",this._onKeyUp)},properties:{appearance:{refine:true,init:"toolbar-button"},show:{refine:true,init:"inherit"},focusable:{refine:true,init:false}}});qx.Class.define("qx.ui.toolbar.MenuButton",{extend:qx.ui.menubar.Button,properties:{appearance:{refine:true,init:"toolbar-menubutton"},showArrow:{check:"Boolean",init:false,themeable:true,apply:"_applyShowArrow"}},members:{_createChildControlImpl:function(c,b){var a;switch(c){case"arrow":a=new qx.ui.basic.Image();a.setAnonymous(true);this._addAt(a,10);break}return a||this.base(arguments,c)},_applyShowArrow:function(b,a){if(b){this._showChildControl("arrow")}else{this._excludeChildControl("arrow")}}}});qx.Class.define("qx.ui.form.RadioButtonGroup",{extend:qx.ui.core.Widget,include:[qx.ui.core.MLayoutHandling,qx.ui.form.MModelSelection],implement:[qx.ui.form.IForm,qx.ui.core.ISingleSelection,qx.ui.form.IModelSelection],construct:function(a){this.base(arguments);if(a==null){this.setLayout(new qx.ui.layout.VBox(4))}else{this.setLayout(a)}this.__radioGroup=new qx.ui.form.RadioGroup();this.__radioGroup.addListener("changeSelection",function(b){this.fireDataEvent("changeSelection",b.getData(),b.getOldData())},this)},properties:{valid:{check:"Boolean",init:true,apply:"_applyValid",event:"changeValid"},required:{check:"Boolean",init:false,event:"changeRequired"},invalidMessage:{check:"String",init:"",event:"changeInvalidMessage",apply:"_applyInvalidMessage"},requiredInvalidMessage:{check:"String",nullable:true,event:"changeInvalidMessage"}},events:{changeSelection:"qx.event.type.Data"},members:{__radioGroup:null,_applyInvalidMessage:function(d,a){var c=this._getChildren();for(var b=0;b<c.length;b++){c[b].setInvalidMessage(d)}},_applyValid:function(d,a){var c=this._getChildren();for(var b=0;b<c.length;b++){c[b].setValid(d)}},getRadioGroup:function(){return this.__radioGroup},getChildren:function(){return this._getChildren()},add:function(b,a){this.__radioGroup.add(b);this._add(b,a)},remove:function(a){this.__radioGroup.remove(a);this._remove(a)},removeAll:function(){var b=this.__radioGroup.getItems();for(var a=0;a<b.length;a++){this.__radioGroup.remove(b[a])}return this._removeAll()},getSelection:function(){return this.__radioGroup.getSelection()},setSelection:function(a){return this.__radioGroup.setSelection(a)},resetSelection:function(){return this.__radioGroup.resetSelection()},isSelected:function(a){return this.__radioGroup.isSelected(a)},isSelectionEmpty:function(){return this.__radioGroup.isSelectionEmpty()},getSelectables:function(a){return this.__radioGroup.getSelectables(a)}},destruct:function(){this._disposeObjects("__radioGroup")}});qx.Class.define("qx.fx.Base",{extend:qx.core.Object,construct:function(a){this.base(arguments);this.setQueue(qx.fx.queue.Manager.getInstance().getDefaultQueue());this.__state=qx.fx.Base.EffectState.IDLE;this.__element=a},events:{setup:"qx.event.type.Event",update:"qx.event.type.Event",finish:"qx.event.type.Event"},properties:{duration:{init:0.5,check:"Number",apply:"_applyDuration"},fps:{init:100,check:"Number"},sync:{init:false,check:"Boolean"},from:{init:0,check:"Number"},to:{init:1,check:"Number"},delay:{init:0,check:"Number"},queue:{check:"Object",dereference:true},transition:{init:"linear",check:["linear","easeInQuad","easeOutQuad","sinodial","reverse","flicker","wobble","pulse","spring","none","full"]}},statics:{EffectState:{IDLE:"idle",PREPARING:"preparing",FINISHED:"finished",RUNNING:"running"}},members:{__state:null,__currentFrame:null,__startOn:null,__finishOn:null,__fromToDelta:null,__totalTime:null,__totalFrames:null,__position:null,__element:null,_getElement:function(){return this.__element},_setElement:function(a){this.__element=a},_applyDuration:function(b,a){},init:function(){this.__state=qx.fx.Base.EffectState.PREPARING;this.__currentFrame=0;this.__startOn=this.getDelay()*1000+(new Date().getTime());this.__finishOn=this.__startOn+(this.getDuration()*1000);this.__fromToDelta=this.getTo()-this.getFrom();this.__totalTime=this.__finishOn-this.__startOn;this.__totalFrames=this.getFps()*this.getDuration()},beforeFinishInternal:function(){},beforeFinish:function(){},afterFinishInternal:function(){},afterFinish:function(){},beforeSetupInternal:function(){},beforeSetup:function(){},afterSetupInternal:function(){},afterSetup:function(){},beforeUpdateInternal:function(){},beforeUpdate:function(){},afterUpdateInternal:function(){},afterUpdate:function(){},beforeStartInternal:function(){},beforeStart:function(){},setup:function(){this.fireEvent("setup")},update:function(a){},finish:function(){this.fireEvent("finish")},start:function(){if(this.__state!=qx.fx.Base.EffectState.IDLE){return false}this.init();this.beforeStartInternal();this.beforeStart();if(!this.getSync()){this.getQueue().add(this)}return true},end:function(){this.render(1);this.cancel();this.beforeFinishInternal();this.beforeFinish();this.finish();this.afterFinishInternal();this.afterFinish()},render:function(a){if(this.__state==qx.fx.Base.EffectState.PREPARING){this.__state=qx.fx.Base.EffectState.RUNNING;this.beforeSetupInternal();this.beforeSetup();this.setup();this.afterSetupInternal();this.afterSetup()}if(this.__state==qx.fx.Base.EffectState.RUNNING){this.__position=qx.fx.Transition.get(this.getTransition())(a)*this.__fromToDelta+this.getFrom();this.beforeUpdateInternal();this.beforeUpdate();this.update(this.__position);this.afterUpdateInternal();this.afterUpdate();if(this.hasListener("update")){this.fireEvent("update")}}},loop:function(c){if(c>=this.__startOn){if(c>=this.__finishOn){this.end()}var b=(c-this.__startOn)/this.__totalTime;var a=Math.round(b*this.__totalFrames);if(a>this.__currentFrame){this.render(b);this.__currentFrame=a}}},cancel:function(){if(!this.getSync()){this.getQueue().remove(this)}this.__state=qx.fx.Base.EffectState.IDLE},resetState:function(){this.__state=qx.fx.Base.EffectState.IDLE}},destruct:function(){this.__element=this.__state=null}});qx.Class.define("qx.fx.effect.combination.Grow",{extend:qx.fx.Base,construct:function(a){this.base(arguments,a);this.__moveEffect=new qx.fx.effect.core.Move(a);this.__scaleEffect=new qx.fx.effect.core.Scale(a);this.__mainEffect=new qx.fx.effect.core.Parallel(this.__moveEffect,this.__scaleEffect)},properties:{direction:{init:"center",check:["top-left","top-right","bottom-left","bottom-right","center"]},scaleTransition:{init:"sinodial",check:["linear","easeInQuad","easeOutQuad","sinodial","reverse","flicker","wobble","pulse","spring","none","full"]},moveTransition:{init:"sinodial",check:["linear","easeInQuad","easeOutQuad","sinodial","reverse","flicker","wobble","pulse","spring","none","full"]}},members:{__scaleEffect:null,__moveEffect:null,__mainEffect:null,setup:function(){this.base(arguments)},start:function(){if(!this.base(arguments)){return}var b=this._getElement();qx.bom.element.Style.set(b,"display","block");qx.bom.element.Style.set(b,"overflow","hidden");var f,e;var d,c;var a={top:qx.bom.element.Location.getTop(b),left:qx.bom.element.Location.getLeft(b),width:qx.bom.element.Dimension.getContentWidth(b),height:qx.bom.element.Dimension.getContentHeight(b),overflow:"visible"};this.__scaleEffect.afterFinishInternal=function(){var i;var g=this._getElement();for(var h in a){i=a[h];if(h!="overflow"){i+="px"}qx.bom.element.Style.set(g,h,i)}};switch(this.getDirection()){case"top-left":f=e=d=c=0;break;case"top-right":f=a.width;e=c=0;d=-a.width;break;case"bottom-left":f=d=0;e=a.height;c=-a.height;break;case"bottom-right":f=a.width;e=a.height;d=-a.width;c=-a.height;break;case"center":f=Math.round(a.width/2);e=Math.round(a.height/2);d=-Math.round(a.width/2);c=-Math.round(a.height/2);break}this.__moveEffect.set({x:d,y:c,sync:true,transition:this.getMoveTransition()});this.__scaleEffect.set({scaleTo:100,sync:true,scaleFrom:0,scaleFromCenter:false,transition:this.getScaleTransition(),alternateDimensions:[a.width,a.height]});qx.bom.element.Style.set(b,"top",(a.top+e)+"px");qx.bom.element.Style.set(b,"left",(a.left+f)+"px");qx.bom.element.Style.set(b,"height","0px");qx.bom.element.Style.set(b,"width","0px");this.__mainEffect.start()}},destruct:function(){this._disposeObjects("__moveEffect","__scaleEffect","__mainEffect")}});qx.Class.define("qx.fx.queue.Manager",{extend:qx.core.Object,type:"singleton",construct:function(){this.base(arguments);this.__instances={}},members:{__instances:null,getQueue:function(a){if(typeof(this.__instances[a])=="object"){return this.__instances[a]}else{return this.__instances[a]=new qx.fx.queue.Queue}},getDefaultQueue:function(){return this.getQueue("__default")}},destruct:function(){this._disposeMap("__instances")}});qx.Class.define("qx.fx.queue.Queue",{extend:qx.core.Object,construct:function(){this.base(arguments);this.__effects=[]},properties:{limit:{init:Infinity,check:"Number"}},members:{__interval:null,__effects:null,add:function(a){var b=new Date().getTime();a._startOn+=b;a._finishOn+=b;if(this.__effects.length<this.getLimit()){this.__effects.push(a)}else{a.resetState()}if(!this.__interval){this.__interval=qx.lang.Function.periodical(this.loop,15,this)}},remove:function(a){qx.lang.Array.remove(this.__effects,a);if(this.__effects.length==0){window.clearInterval(this.__interval);delete this.__interval}},loop:function(){var c=new Date().getTime();for(var b=0,a=this.__effects.length;b<a;b++){this.__effects[b]&&this.__effects[b].loop(c)}}},destruct:function(){this.__effects=null}});qx.Class.define("qx.fx.Transition",{type:"static",statics:{get:function(a){return qx.fx.Transition[a]||false},linear:function(a){return a},easeInQuad:function(a){return Math.pow(2,10*(a-1))},easeOutQuad:function(a){return(-Math.pow(2,-10*a)+1)},sinodial:function(a){return(-Math.cos(a*Math.PI)/2)+0.5},reverse:function(a){return 1-a},flicker:function(a){var a=((-Math.cos(a*Math.PI)/4)+0.75)+Math.random()/4;return a>1?1:a},wobble:function(a){return(-Math.cos(a*Math.PI*(9*a))/2)+0.5},pulse:function(b,a){a=(typeof(a)=="Number")?a:5;return(Math.round((b%(1/a))*a)==0?Math.floor((b*a*2)-(b*a*2)):1-Math.floor((b*a*2)-(b*a*2)))},spring:function(a){return 1-(Math.cos(a*4.5*Math.PI)*Math.exp(-a*6))},none:function(a){return 0},full:function(a){return 1}}});qx.Class.define("qx.fx.effect.core.Move",{extend:qx.fx.Base,properties:{mode:{init:"relative",check:["relative","absolute"]},x:{init:0,check:"Number"},y:{init:0,check:"Number"}},members:{__x:null,__y:null,__originalLeft:null,__originalTop:null,__originalPosition:null,setup:function(){var a=this._getElement();this.base(arguments);if(a.parentNode){this.__originalLeft=qx.bom.element.Location.getLeft(a)-qx.bom.element.Location.getLeft(a.parentNode);this.__originalTop=qx.bom.element.Location.getTop(a)-qx.bom.element.Location.getTop(a.parentNode)}else{this.__originalLeft=qx.bom.element.Location.getLeft(a);this.__originalTop=qx.bom.element.Location.getTop(a)}this.__originalPosition=qx.bom.element.Style.get(a,"position");qx.bom.element.Style.set(a,"position","absolute");if(this.getMode()=="absolute"){this.__x=this.getX()-this.__originalLeft;this.__y=this.getY()-this.__originalTop}else{this.__x=this.getX();this.__y=this.getY()}},update:function(a){var b=this._getElement();this.base(arguments);var d=Math.round(this.__x*a+this.__originalLeft);var c=Math.round(this.__y*a+this.__originalTop);qx.bom.element.Style.set(b,"left",d+"px");qx.bom.element.Style.set(b,"top",c+"px")},afterFinishInternal:function(){qx.bom.element.Style.set(this._getElement(),"position",this.__originalPosition)}}});qx.Class.define("qx.fx.effect.core.Scale",{extend:qx.fx.Base,construct:function(a){this.base(arguments,a);this.__originalStyle=qx.fx.effect.core.Scale.originalStyle;this.__fontTypes=qx.fx.effect.core.Scale.fontTypes},properties:{scaleX:{init:true,check:"Boolean"},scaleY:{init:true,check:"Boolean"},scaleContent:{init:true,check:"Boolean"},scaleFromCenter:{init:true,check:"Boolean"},scaleFrom:{init:100,check:"Number"},scaleTo:{init:100,check:"Number"},restoreAfterFinish:{init:false,check:"Boolean"},alternateDimensions:{init:[],check:"Array"}},statics:{originalStyle:{top:null,left:null,width:null,height:null,fontSize:null},fontTypes:{em:"em",px:"px","%":"%",pt:"pt"}},members:{__elementPositioning:null,__originalTop:null,__originalLeft:null,__fontSize:null,__fontSizeType:null,__factor:null,__dims:null,__originalStyle:null,__fontTypes:null,setup:function(){this.base(arguments);var b=this._getElement();this.__elementPositioning=qx.bom.element.Style.get(b,"position");for(var e in this.__originalStyle){this.__originalStyle[e]=b.style[e]}this.__originalTop=qx.bom.element.Location.getTop(b);this.__originalLeft=qx.bom.element.Location.getLeft(b);try{var d=qx.bom.element.Style.get(b,"fontSize")}catch(a){if(typeof(d)!="string"){d=(qx.core.Environment.get("engine.name")=="mshtml")?"12px":"100%"}}for(var c in this.__fontTypes){if(d.indexOf(c)>0){this.__fontSize=parseFloat(d);this.__fontSizeType=c;break}}this.__factor=(this.getScaleTo()-this.getScaleFrom())/100;var f=this.getAlternateDimensions();if(f.length==0){this.__dims=[b.offsetWidth,b.offsetHeight]}else{this.__dims=f}},update:function(a){var b=this._getElement();this.base(arguments);var c=(this.getScaleFrom()/100)+(this.__factor*a);if(this.getScaleContent()&&this.__fontSize){qx.bom.element.Style.set(b,"fontSize",this.__fontSize*c+this.__fontSizeType)}this._setDimensions(this.__dims[0]*c,this.__dims[1]*c)},finish:function(){this.base(arguments);var a=this._getElement();if(this.getRestoreAfterFinish()){for(var c in this.__originalStyle){var b=this.__originalStyle[c];qx.bom.element.Style.set(a,c,b)}}},_setDimensions:function(a,j){var e={};var b=this._getElement();var i=this.getScaleX();var g=this.getScaleY();if(i){e.width=Math.round(a)+"px"}if(g){e.height=Math.round(j)+"px"}if(this.getScaleFromCenter()){var f=(a-this.__dims[0])/2;var c=(j-this.__dims[1])/2;if(this.__elementPositioning=="absolute"){if(g){e.top=this.__originalTop-c+"px"}if(i){e.left=this.__originalLeft-f+"px"}}else{if(g){e.top=-c+"px"}if(i){e.left=-f+"px"}}}for(var h in e){qx.bom.element.Style.set(b,h,e[h])}}},destruct:function(){this.__dims=this.__originalStyle=this.__fontTypes=null}});qx.Class.define("qx.fx.effect.core.Parallel",{extend:qx.fx.Base,construct:function(a){this.base(arguments);this.__effects=arguments},members:{__effects:null,finish:function(){this.base(arguments);var b=this.__effects;for(var a=0;a<b.length;a++){b[a].render(1);b[a].cancel();b[a].beforeFinishInternal();b[a].beforeFinish();b[a].finish(1);b[a].afterFinishInternal();b[a].afterFinish()}},update:function(a){this.base(arguments);var c=this.__effects;for(var b=0;b<c.length;b++){c[b].render(a)}},start:function(){if(!this.base(arguments)){return}var b=this.__effects;for(var a=0;a<b.length;a++){b[a].start()}}},destruct:function(){this._disposeArray("__effects")}});qx.Class.define("qx.ui.mobile.page.manager.Simple",{extend:qx.core.Object,construct:function(a){this.base(arguments);this.__pages={};this._setRoot(a||qx.core.Init.getApplication().getRoot());this.__registerEventListeners()},events:{add:"qx.event.type.Data",remove:"qx.event.type.Data"},members:{__pages:null,__currentPage:null,__root:null,__backButtonHandler:null,__menuButtonHandler:null,__registerEventListeners:function(){if(qx.core.Environment.get("phonegap")&&qx.core.Environment.get("os.name")=="android"){this.__backButtonHandler=qx.lang.Function.bind(this._onBackButton,this);this.__menuButtonHandler=qx.lang.Function.bind(this._onMenuButton,this);BackButton.override();qx.bom.Event.addNativeListener(document,"backKeyDown",this.__backButtonHandler);qx.bom.Event.addNativeListener(document,"menuKeyDown",this.__menuButtonHandler)}},__unregisteEventListeners:function(){if(qx.core.Environment.get("phonegap")&&qx.core.Environment.get("os.name")=="android"){qx.bom.Event.removeNativeListener(document,"backKeyDown",this.__backButtonHandler);qx.bom.Event.removeNativeListener(document,"menuKeyDown",this.__menuButtonHandler)}},_onBackButton:function(){if(qx.core.Environment.get("phonegap")&&qx.core.Environment.get("os.name")=="android"){var a=true;if(this.__currentPage){a=this.__currentPage.back()}if(a){BackButton.exitApp()}}},_onMenuButton:function(){if(qx.core.Environment.get("phonegap")&&qx.core.Environment.get("os.name")=="android"){if(this.__currentPage){this.__currentPage.menu()}}},add:function(a){this.__pages[a.getId()]=a;this.fireDataEvent("add",a)},remove:function(b){var a=this.getPage(b);if(this.__currentPage==a){throw new Error("Current page with the Id "+a.getId()+" can not be removed")}delete this.__pages[a.getId()];this.fireDataEvent("remove",a)},show:function(b){var a=this.__currentPage;if(a==b){return}if(qx.core.Environment.get("qx.mobile.nativescroll")){scrollTo(0,0)}b.initialize();b.start();this.__root.add(b);if(a){a.stop();this.__removeFocusFromInputFields();this._removeCurrentPage()}this._setCurrentPage(b)},_removeCurrentPage:function(){this.__root.remove(this.__currentPage)},_getRoot:function(){return this.__root},_setRoot:function(a){this.__root=a},getCurrentPage:function(){return this.__currentPage},_setCurrentPage:function(a){this.__currentPage=a},getPage:function(a){return this.__pages[a]},__removeFocusFromInputFields:function(){var c=document.getElementsByTagName("input");for(var a=0,b=c.length;a<b;a++){c[a].blur()}}},destruct:function(){this.__unregisteEventListeners();this.__history=this.__pages=this.__currentPage=this.__root=null}});qx.Mixin.define("qx.ui.mobile.core.MLayoutHandling",{members:{setLayout:function(a){return this._setLayout(a)},getLayout:function(){return this._getLayout()}},statics:{remap:function(a){a.getLayout=a._getLayout;a.setLayout=a._setLayout}}});qx.Mixin.define("qx.ui.mobile.core.MChildrenHandling",{members:{getChildren:function(){return this._getChildren()},hasChildren:function(){return this._hasChildren()},indexOf:function(a){return this._indexOf(a)},add:function(b,a){this._add(b,a)},addBefore:function(c,b,a){this._addBefore(c,b,a)},addAfter:function(c,b,a){this._addAfter(c,b,a)},remove:function(a){this._remove(a)},removeAt:function(a){return this._removeAt(a)},removeAll:function(){this._removeAll()}},statics:{remap:function(a){a.getChildren=a._getChildren;a.hasChildren=a._hasChildren;a.indexOf=a._indexOf;a.add=a._add;a.addBefore=a._addBefore;a.addAfter=a._addAfter;a.remove=a._remove;a.removeAt=a._removeAt;a.removeAll=a._removeAll}}});qx.Class.define("qx.bom.Lifecycle",{statics:{onReady:function(d,b){var a=qx.event.Registration;var c=a.getManager(window).getHandler(qx.event.handler.Application);if(c&&c.isApplicationReady()){d.call(b)}else{a.addListener(window,"ready",d,b)}},onShutdown:function(b,a){qx.event.Registration.addListener(window,"shutdown",b,a)}}});qx.Class.define("qx.ui.mobile.core.Widget",{extend:qx.core.Object,include:[qx.locale.MTranslation],construct:function(){this.base(arguments);this._setContainerElement(this._createContainerElement());this.__children=[];this.setId(this.getId());this.initDefaultCssClass();this.initName();this.initAnonymous()},events:{mousemove:"qx.event.type.Mouse",mouseover:"qx.event.type.Mouse",mouseout:"qx.event.type.Mouse",mousedown:"qx.event.type.Mouse",mouseup:"qx.event.type.Mouse",click:"qx.event.type.Mouse",dblclick:"qx.event.type.Mouse",contextmenu:"qx.event.type.Mouse",beforeContextmenuOpen:"qx.event.type.Mouse",mousewheel:"qx.event.type.MouseWheel",touchstart:"qx.event.type.Touch",touchend:"qx.event.type.Touch",touchmove:"qx.event.type.Touch",touchcancel:"qx.event.type.Touch",tap:"qx.event.type.Touch",swipe:"qx.event.type.Touch",keyup:"qx.event.type.KeySequence",keydown:"qx.event.type.KeySequence",keypress:"qx.event.type.KeySequence",keyinput:"qx.event.type.KeyInput",domupdated:"qx.event.type.Event",appear:"qx.event.type.Event",disappear:"qx.event.type.Event",focus:"qx.event.type.Focus",blur:"qx.event.type.Focus",focusin:"qx.event.type.Focus",focusout:"qx.event.type.Focus",activate:"qx.event.type.Focus",deactivate:"qx.event.type.Focus"},properties:{defaultCssClass:{check:"String",init:null,nullable:true,apply:"_applyDefaultCssClass"},name:{check:"String",init:null,nullable:true,apply:"_applyAttribute"},anonymous:{check:"Boolean",init:null,nullable:true,apply:"_applyStyle"},id:{check:"String",init:null,nullable:true,apply:"_applyId",transform:"_transformId",event:"changeId"},visibility:{check:["visible","hidden","excluded"],init:"visible",apply:"_applyVisibility",event:"changeVisibility"}},statics:{ID_PREFIX:"qx_id_",__registry:{},__idCounter:0,__domUpdatedScheduleId:null,onShutdown:function(){window.clearTimeout(qx.ui.mobile.core.Widget.__domUpdatedScheduleId);delete qx.ui.mobile.core.Widget.__registry},getCurrentId:function(){return qx.ui.mobile.core.Widget.__idCounter},registerWidget:function(b){var c=b.getId();var a=qx.ui.mobile.core.Widget.__registry;if(qx.core.Environment.get("qx.debug")){qx.core.Assert.assertUndefined(a[c],"Widget with the id '"+c+"' is already registered")}a[c]=b},unregisterWidget:function(a){delete qx.ui.mobile.core.Widget.__registry[a]},getWidgetById:function(a){return qx.ui.mobile.core.Widget.__registry[a]},scheduleDomUpdated:function(){if(qx.ui.mobile.core.Widget.__domUpdatedScheduleId==null){qx.ui.mobile.core.Widget.__domUpdatedScheduleId=window.setTimeout(qx.ui.mobile.core.Widget.domUpdated,0)}},domUpdated:qx.event.GlobalError.observeMethod(function(){var a=qx.ui.mobile.core.Widget;window.clearTimeout(a.__domUpdatedScheduleId);a.__domUpdatedScheduleId=null;qx.event.handler.Appear.refresh();qx.ui.mobile.core.DomUpdatedHandler.refresh()}),addAttributeMapping:function(c,b,a){if(qx.core.Environment.get("qx.debug")){var d=qx.ui.mobile.core.Widget.ATTRIBUTE_MAPPING;qx.core.Assert.assertUndefined(d[c],"Attribute mapping for "+c+" already exists")}qx.ui.mobile.core.Widget.ATTRIBUTE_MAPPING[c]={attribute:b,values:a}},addStyleMapping:function(d,c,b){if(qx.core.Environment.get("qx.debug")){var a=qx.ui.mobile.core.Widget.STYLE_MAPPING;qx.core.Assert.assertUndefined(a[d],"Style mapping for "+d+" already exists")}qx.ui.mobile.core.Widget.STYLE_MAPPING[d]={style:c,values:b}},ATTRIBUTE_MAPPING:{selectable:{attribute:"data-selectable",values:{"true":null,"false":"false"}},readOnly:{attribute:"readonly"}},STYLE_MAPPING:{anonymous:{style:"pointer-events",values:{"true":"none","false":null}}}},members:{__containerElement:null,__contentElement:null,__layoutParent:null,__children:null,__layoutManager:null,_getTagName:function(){return"div"},_createContainerElement:function(){return qx.bom.Element.create(this._getTagName())},_domUpdated:function(){qx.ui.mobile.core.Widget.scheduleDomUpdated()},_transformId:function(b){if(b==null){var a=qx.ui.mobile.core.Widget;b=a.ID_PREFIX+a.__idCounter++}return b},_applyId:function(c,a){if(a!=null){qx.ui.mobile.core.Widget.unregisterWidget(a)}var b=this.getContainerElement();b.id=c;qx.ui.mobile.core.Widget.registerWidget(this)},_add:function(b,a){if(qx.core.Environment.get("qx.debug")){if(b.getLayoutParent()===this){throw new Error("The widget is already added this widget. Please remove it first.")}}b.setLayoutParent(this);b.setLayoutProperties(a);this.getContentElement().appendChild(b.getContainerElement());this.__children.push(b);this._domUpdated()},_addBefore:function(c,b,a){if(qx.core.Environment.get("qx.debug")){if(c.getLayoutParent()===this){throw new Error("The widget is already added this widget. Please remove it first.")}this.assertInArray(b,this._getChildren(),"The 'before' widget is not a child of this widget!")}if(c==b){return}c.setLayoutParent(this);c.setLayoutProperties(a);this.getContentElement().insertBefore(c.getContainerElement(),b.getContainerElement());qx.lang.Array.insertBefore(this.__children,c,b);this._domUpdated()},_addAfter:function(f,a,c){if(qx.core.Environment.get("qx.debug")){if(f.getLayoutParent()===this){throw new Error("The child is already added to this widget. Please remove it first.")}this.assertInArray(a,this._getChildren(),"The 'after' widget is not a child of this widget!")}if(f==a){return}f.setLayoutParent(this);f.setLayoutProperties(c);var e=this._getChildren().length;var b=this._indexOf(a);if(b==e-1){this.getContentElement().appendChild(f.getContainerElement())}else{var d=this._getChildren()[b+1];this.getContentElement().insertBefore(f.getContainerElement(),d.getContainerElement())}qx.lang.Array.insertAfter(this.__children,f,a);this._domUpdated()},_remove:function(a){a.setLayoutParent(null);this._domUpdated()},_removeAt:function(a){if(!this.__children){throw new Error("This widget has no children!")}var b=this.__children[a];this._remove(b)},_removeAll:function(){var c=this.__children.concat();for(var b=0,a=c.length;b<a;b++){this._remove(c[b])}},_indexOf:function(b){var a=this.__children;if(!a){return -1}return a.indexOf(b)},setLayoutParent:function(b){if(this.__layoutParent===b){return}var a=this.__layoutParent;if(a&&!a.$$disposed){this.__layoutParent.removeChild(this)}this.__layoutParent=b||null},removeChild:function(a){qx.lang.Array.remove(this.__children,a);this.getContentElement().removeChild(a.getContainerElement())},getLayoutParent:function(){return this.__layoutParent},_getChildren:function(){return this.__children},_hasChildren:function(){return this.__children&&this.__children.length>0},_setLayout:function(a){if(qx.core.Environment.get("qx.debug")){if(a){this.assertInstance(a,qx.ui.mobile.layout.Abstract)}}if(this.__layoutManager){this.__layoutManager.connectToWidget(null)}if(a){a.connectToWidget(this)}this.__layoutManager=a},_getLayout:function(){return this.__layoutManager},setLayoutProperties:function(a){if(a==null){return}var b=this.getLayoutParent();if(b){b.updateLayoutProperties(this,a)}},updateLayoutProperties:function(c,a){var b=this._getLayout();if(b){b.setLayoutProperties(c,a)}},_setHtml:function(a){this.getContentElement().innerHTML=a||"";this._domUpdated()},_applyAttribute:function(c,a,b){this._setAttribute(b,c)},_setAttribute:function(d,e){var b=qx.ui.mobile.core.Widget.ATTRIBUTE_MAPPING[d];if(b){d=b.attribute||d;var a=b.values;e=a&&typeof a[e]!=="undefined"?a[e]:e}var c=this.getContainerElement();if(e!=null){qx.bom.element.Attribute.set(c,d,e)}else{qx.bom.element.Attribute.reset(c,d)}},_getAttribute:function(b){var a=this.getContainerElement();return qx.bom.element.Attribute.get(a,b)},_applyStyle:function(c,a,b){this._setStyle(b,c)},_setStyle:function(c,d){var a=qx.ui.mobile.core.Widget.STYLE_MAPPING[c];if(a){c=a.style||c;d=a.values[d]}var b=this.getContainerElement();if(d!=null){qx.bom.element.Style.set(b,c,d)}else{qx.bom.element.Style.reset(b,c)}this._domUpdated()},_getStyle:function(b){var a=this.getContainerElement();return qx.bom.element.Style.get(a,b)},_applyDefaultCssClass:function(b,a){if(a){this.removeCssClass(a)}if(b){this.addCssClass(b)}},addCssClass:function(a){var b=this.getContainerElement();qx.bom.element.Class.add(b,a)},removeCssClass:function(a){var b=this.getContainerElement();qx.bom.element.Class.remove(b,a)},_applyVisibility:function(b,a){if(b=="excluded"){this._setStyle("display","none")}else{if(b=="visible"){this._setStyle("display",null);this._setStyle("visibility",null)}else{if(b=="hidden"){this._setStyle("visibility","hidden")}}}},show:function(){this.setVisibility("visible")},hide:function(){this.setVisibility("hidden")},exclude:function(){this.setVisibility("excluded")},isVisible:function(){return this.getVisibility()==="visible"},isHidden:function(){return this.getVisibility()!=="visible"},isExcluded:function(){return this.getVisibility()==="excluded"},isSeeable:function(){return this.getContainerElement().offsetWidth>0},_setContainerElement:function(a){this.__containerElement=a},getContainerElement:function(){return this.__containerElement},getContentElement:function(){if(!this.__contentElement){this.__contentElement=this._getContentElement()}return this.__contentElement},_getContentElement:function(){return this.getContainerElement()},destroy:function(){if(this.$$disposed){return}var a=this.__layoutParent;if(a){a._remove(this)}this.dispose()}},destruct:function(){if(!qx.core.ObjectRegistry.inShutDown){qx.event.Registration.removeAllListeners(this);if(this.getId()){qx.ui.mobile.core.Widget.unregisterWidget(this.getId())}}this.__layoutParent=this.__containerElement=this.__contentElement=null;this.__layoutManager=null},defer:function(a){qx.bom.Lifecycle.onShutdown(a.onShutdown,a)}});qx.Class.define("qx.ui.mobile.container.Composite",{extend:qx.ui.mobile.core.Widget,include:[qx.ui.mobile.core.MChildrenHandling,qx.ui.mobile.core.MLayoutHandling],construct:function(a){this.base(arguments);if(a){this.setLayout(a)}},defer:function(b,a){qx.ui.mobile.core.MChildrenHandling.remap(a);qx.ui.mobile.core.MLayoutHandling.remap(a)}});qx.Class.define("qx.ui.mobile.page.manager.Animation",{extend:qx.ui.mobile.page.manager.Simple,events:{animationStart:"qx.event.type.Data",animationEnd:"qx.event.type.Data"},properties:{defaultAnimation:{check:"String",init:"slide"}},statics:{ANIMATIONS:{slide:true,pop:true,fade:true,dissolve:true,slideup:true,flip:true,swap:true,cube:true}},members:{__inAnimation:null,__animation:null,__reverse:null,__fromPage:null,__toPage:null,isInAnimation:function(){return this.__inAnimation},show:function(b,a){if(this.__inAnimation){return}a=a||{};this.__animation=a.animation||this.getDefaultAnimation();if(qx.core.Environment.get("qx.debug")){this.assertNotUndefined(qx.ui.mobile.page.manager.Animation.ANIMATIONS[this.__animation],"Animation "+this.__animation+" is not defined.")}a.reverse=a.reverse==null?false:a.reverse;this.__reverse=a.fromHistory||a.reverse;this.__fromPage=this.getCurrentPage();this.__toPage=b;this.base(arguments,b)},_removeCurrentPage:function(){this.__startAnimation()},__startAnimation:function(){this.__inAnimation=true;this.fireDataEvent("animationStart",[this.__fromPage,this.__toPage]);var c=this.__fromPage.getContainerElement();var b=this.__toPage.getContainerElement();var d=this.__getAnimationClasses("out");var a=this.__getAnimationClasses("in");qx.event.Registration.addListener(c,"animationEnd",this._onAnimationEnd,this);qx.event.Registration.addListener(b,"animationEnd",this._onAnimationEnd,this);qx.bom.element.Class.addClasses(b,a);qx.bom.element.Class.addClasses(c,d)},_onAnimationEnd:function(a){this._getRoot().remove(this.__fromPage);this.__stopAnimation();this.fireDataEvent("animationEnd",[this.__fromPage,this.__toPage])},__stopAnimation:function(){if(this.__inAnimation){var b=this.__fromPage.getContainerElement();var a=this.__toPage.getContainerElement();qx.event.Registration.removeListener(b,"animationEnd",this._onAnimationEnd,this);qx.event.Registration.removeListener(a,"animationEnd",this._onAnimationEnd,this);qx.bom.element.Class.removeClasses(b,this.__getAnimationClasses("out"));qx.bom.element.Class.removeClasses(a,this.__getAnimationClasses("in"));this.__inAnimation=false}},__getAnimationClasses:function(b){var a=[this.__animation,b];if(this.__reverse){a.push("reverse")}return a}},destruct:function(){this.__stopAnimation();this.__inAnimation=this.__animation,this.__reverse=null;this.__fromPage=this.__toPage=null}});qx.Class.define("qx.ui.mobile.page.Page",{extend:qx.ui.mobile.container.Composite,construct:function(a){this.base(arguments,a);if(!a){this.setLayout(new qx.ui.mobile.layout.VBox())}qx.ui.mobile.page.Page.getManager().add(this);this._resize();qx.event.Registration.addListener(window,"orientationchange",this._resize,this);qx.event.Registration.addListener(window,"resize",this._resize,this)},events:{initialize:"qx.event.type.Event",start:"qx.event.type.Event",stop:"qx.event.type.Event",pause:"qx.event.type.Event",resume:"qx.event.type.Event",back:"qx.event.type.Event",menu:"qx.event.type.Event"},properties:{defaultCssClass:{refine:true,init:"page"}},statics:{__manager:null,__managerClass:null,getManager:function(){if(!this.__manager){this.__manager=new qx.ui.mobile.page.Page.__managerClass()}return qx.ui.mobile.page.Page.__manager},setManagerClass:function(a){qx.ui.mobile.page.Page.__managerClass=a}},members:{__initialized:false,_resize:function(){if(qx.core.Environment.get("qx.mobile.nativescroll")){this._setStyle("minHeight",window.innerHeight+"px")}else{this._setStyle("height",window.innerHeight+"px")}},_applyId:function(b,a){this.base(arguments,b,a);if(a!=null){qx.ui.mobile.page.Page.getManager().remove(a)}qx.ui.mobile.page.Page.getManager().add(this)},back:function(){this.fireEvent("back");var a=this._back();return a||false},_back:function(){},menu:function(){this.fireEvent("menu")},show:function(a){qx.ui.mobile.page.Page.getManager().show(this,a)},initialize:function(){if(!this.isInitialized()){this._initialize();this.__initialized=true;this.fireEvent("initialize")}},_initialize:function(){},isInitialized:function(){return this.__initialized},start:function(){this._start();this.fireEvent("start")},_start:function(){},stop:function(){this._stop();this.fireEvent("stop")},_stop:function(){},pause:function(){this._pause();this.fireEvent("pause")},_pause:function(){},resume:function(){this._resume();this.fireEvent("resume")},_resume:function(){}},destruct:function(){qx.event.Registration.removeListener(window,"orientationchange",this._resize,this);qx.event.Registration.removeListener(window,"resize",this._resize,this);this.__initialized=null;if(!qx.core.ObjectRegistry.inShutDown){if(this.getId()){qx.ui.mobile.page.Page.getManager().remove(this.getId())}}},defer:function(a){if(qx.core.Environment.get("css.translate3d")){a.setManagerClass(qx.ui.mobile.page.manager.Animation)}else{a.setManagerClass(qx.ui.mobile.page.manager.Simple)}}});qx.Class.define("qx.ui.mobile.core.EventHandler",{extend:qx.core.Object,implement:qx.event.IEventHandler,construct:function(){this.base(arguments);this.__manager=qx.event.Registration.getManager(window)},statics:{PRIORITY:qx.event.Registration.PRIORITY_FIRST,SUPPORTED_TYPES:{mousemove:1,mouseover:1,mouseout:1,mousedown:1,mouseup:1,click:1,dblclick:1,contextmenu:1,mousewheel:1,keyup:1,keydown:1,keypress:1,keyinput:1,capture:1,losecapture:1,focusin:1,focusout:1,focus:1,blur:1,activate:1,deactivate:1,appear:1,disappear:1,resize:1,dragstart:1,dragend:1,dragover:1,dragleave:1,drop:1,drag:1,dragchange:1,droprequest:1,touchstart:1,touchend:1,touchmove:1,touchcancel:1,tap:1,swipe:1},IGNORE_CAN_HANDLE:false,__activeTarget:null,__scrollLeft:null,__scrollTop:null,__timer:null,__onTouchStart:function(b){var a=qx.ui.mobile.core.EventHandler;a.__scrollLeft=qx.bom.Viewport.getScrollLeft();a.__scrollTop=qx.bom.Viewport.getScrollTop();a.__cancelActiveStateTimer();a.__activeTarget=b.getTarget();a.___timer=window.setTimeout(function(){a.___timer=null;var c=a.__activeTarget;if(c&&(qx.bom.element.Attribute.get(c,"data-selectable")!="false")){qx.bom.element.Class.add(c,"active")}},100)},__onTouchEnd:function(a){qx.ui.mobile.core.EventHandler.__removeActiveState()},__onTouchMove:function(b){var a=qx.ui.mobile.core.EventHandler;if(a.__activeTarget&&(a.__scrollLeft!=qx.bom.Viewport.getScrollLeft()||a.__scrollTop!=qx.bom.Viewport.getScrollTop())){a.__removeActiveState()}},__cancelActiveStateTimer:function(){var a=qx.ui.mobile.core.EventHandler;if(a.___timer){window.clearTimeout(a.___timer);a.___timer=null}},__removeActiveState:function(){var a=qx.ui.mobile.core.EventHandler;a.__cancelActiveStateTimer();var b=a.__activeTarget;if(b){qx.bom.element.Class.remove(b,"active")}a.__activeTarget=null}},members:{__manager:null,canHandleEvent:function(b,a){return b instanceof qx.ui.mobile.core.Widget},registerEvent:function(d,c,a){var b=d.getContainerElement();qx.event.Registration.addListener(b,c,this._dispatchEvent,this,a)},unregisterEvent:function(d,c,a){var b=d.getContainerElement();qx.event.Registration.removeListener(b,c,this._dispatchEvent,this,a)},_dispatchEvent:function(k){var g=k.getTarget();if(!g||g.id==null){return}var b=qx.ui.mobile.core.Widget.getWidgetById(g.id);if(k.getRelatedTarget){var h=k.getRelatedTarget();if(h&&h.id){var q=qx.ui.mobile.core.Widget.getWidgetById(h.id)}}var d=k.getCurrentTarget();var a=qx.ui.mobile.core.Widget.getWidgetById(d.id);if(!a){return}var p=k.getEventPhase()==qx.event.type.Event.CAPTURING_PHASE;var n=k.getType();var m=this.__manager.getListeners(a,n,p);if(!m||m.length===0){return}var r=qx.event.Pool.getInstance().getObject(k.constructor);k.clone(r);r.setTarget(b);r.setRelatedTarget(q||null);r.setCurrentTarget(a);var o=k.getOriginalTarget();if(o&&o.id){var f=qx.ui.mobile.core.Widget.getWidgetById(o.id);r.setOriginalTarget(f)}else{r.setOriginalTarget(g)}for(var j=0,e=m.length;j<e;j++){var c=m[j].context||a;m[j].handler.call(c,r)}if(r.getPropagationStopped()){k.stopPropagation()}if(r.getDefaultPrevented()){k.preventDefault()}qx.event.Pool.getInstance().poolObject(r)}},destruct:function(){this.__manager=null},defer:function(a){qx.event.Registration.addHandler(a);qx.event.Registration.addListener(document,"touchstart",a.__onTouchStart);qx.event.Registration.addListener(document,"touchend",a.__onTouchEnd);qx.event.Registration.addListener(document,"touchcancel",a.__onTouchEnd);qx.event.Registration.addListener(document,"touchmove",a.__onTouchMove)}});qx.Class.define("qx.bom.element.Class",{statics:{__splitter:/\s+/g,__trim:/^\s+|\s+$/g,add:qx.lang.Object.select(qx.core.Environment.get("html.classlist")?"native":"default",{"native":function(b,a){b.classList.add(a);return a},"default":function(b,a){if(!this.has(b,a)){b.className+=(b.className?" ":"")+a}return a}}),addClasses:qx.lang.Object.select(qx.core.Environment.get("html.classlist")?"native":"default",{"native":function(c,b){for(var a=0;a<b.length;a++){c.classList.add(b[a])}return c.className},"default":function(f,e){var g={};var a;var c=f.className;if(c){a=c.split(this.__splitter);for(var d=0,b=a.length;d<b;d++){g[a[d]]=true}for(var d=0,b=e.length;d<b;d++){if(!g[e[d]]){a.push(e[d])}}}else{a=e}return f.className=a.join(" ")}}),get:function(a){var b=a.className;if(typeof b.split!=="function"){if(typeof b==="object"){if(qx.Bootstrap.getClass(b)=="SVGAnimatedString"){b=b.baseVal}else{if(qx.core.Environment.get("qx.debug")){qx.log.Logger.warn(this,"className for element "+a+" cannot be determined")}b=""}}if(typeof b==="undefined"){if(qx.core.Environment.get("qx.debug")){qx.log.Logger.warn(this,"className for element "+a+" is undefined")}b=""}}return b},has:qx.lang.Object.select(qx.core.Environment.get("html.classlist")?"native":"default",{"native":function(b,a){return b.classList.contains(a)},"default":function(b,a){var c=new RegExp("(^|\\s)"+a+"(\\s|$)");return c.test(b.className)}}),remove:qx.lang.Object.select(qx.core.Environment.get("html.classlist")?"native":"default",{"native":function(b,a){b.classList.remove(a);return a},"default":function(b,a){var c=new RegExp("(^|\\s)"+a+"(\\s|$)");b.className=b.className.replace(c,"$2");return a}}),removeClasses:qx.lang.Object.select(qx.core.Environment.get("html.classlist")?"native":"default",{"native":function(c,b){for(var a=0;a<b.length;a++){c.classList.remove(b[a])}return c.className},"default":function(b,a){var c=new RegExp("\\b"+a.join("\\b|\\b")+"\\b","g");return b.className=b.className.replace(c,"").replace(this.__trim,"").replace(this.__splitter," ")}}),replace:function(b,c,a){this.remove(b,c);return this.add(b,a)},toggle:qx.lang.Object.select(qx.core.Environment.get("html.classlist")?"native":"default",{"native":function(c,b,a){if(a===undefined){c.classList.toggle(b)}else{a?this.add(c,b):this.remove(c,b)}return b},"default":function(c,b,a){if(a==null){a=!this.has(c,b)}a?this.add(c,b):this.remove(c,b);return b}})}});qx.Class.define("qx.ui.mobile.core.DomUpdatedHandler",{extend:qx.core.Object,implement:qx.event.IEventHandler,construct:function(a){this.base(arguments);this.__manager=a;this.__targets={};qx.ui.mobile.core.DomUpdatedHandler.__instances[this.$$hash]=this},statics:{PRIORITY:qx.event.Registration.PRIORITY_NORMAL,SUPPORTED_TYPES:{domupdated:1},IGNORE_CAN_HANDLE:false,__instances:{},refresh:function(){var a=this.__instances;for(var b in a){a[b].refresh()}}},members:{__manager:null,__targets:null,canHandleEvent:function(b,a){return b instanceof qx.ui.mobile.core.Widget},registerEvent:function(e,c,b){var d=e.$$hash;var a=this.__targets;if(a&&!a[d]){a[d]=e}},unregisterEvent:function(e,c,b){var d=e.$$hash;var a=this.__targets;if(!a){return}if(a[d]){delete a[d]}},refresh:function(){var b=this.__targets;var d;for(var c in b){d=b[c];if(d&&!d.$$disposed&&d.isSeeable()){var a=qx.event.Registration.createEvent("domupdated");this.__manager.dispatchEvent(d,a)}}}},destruct:function(){this.__manager=this.__targets=null;delete qx.ui.mobile.core.DomUpdatedHandler.__instances[this.$$hash]},defer:function(a){qx.event.Registration.addHandler(a)}});qx.Class.define("qx.ui.mobile.layout.Abstract",{extend:qx.core.Object,type:"abstract",members:{_widget:null,__cachedProperties:null,__cachedChildLayoutProperties:null,getCssClass:function(){if(qx.core.Environment.get("qx.debug")){throw new Error("Abstract method call")}},_getSupportedChildLayoutProperties:function(){if(qx.core.Environment.get("qx.debug")){throw new Error("Abstract method call")}},_setLayoutProperty:function(c,b,a){if(qx.core.Environment.get("qx.debug")){throw new Error("Abstract method call")}},setLayoutProperties:function(e,a){var d=this._getSupportedChildLayoutProperties();for(var c in a){if(!d[c]){throw new Error("The layout does not support the "+c+" property")}var b=a[c];this._setLayoutProperty(e,c,b);this._addChildLayoutProperty(e,c,b)}},connectToWidget:function(b){if(this._widget){this._widget.removeCssClass(this.getCssClass())}this._widget=b;if(b){b.addCssClass(this.getCssClass());if(this.__cachedProperties){for(var a in this.__cachedProperties){this.reset(a);this.set(a,this.__cachedProperties[a])}}}else{this.__cachedProperties=null}},_addCachedProperty:function(b,a){if(!this.__cachedProperties){this.__cachedProperties={}}this.__cachedProperties[b]=a},_getChildLayoutPropertyValue:function(c,b){var a=this.__getChildLayoutPropertyCache(c);return a[b]},_addChildLayoutProperty:function(d,c,b){var a=this.__getChildLayoutPropertyCache(d);if(b==null){delete a[c]}else{a[c]=b}},__getChildLayoutPropertyCache:function(b){if(!this.__cachedChildLayoutProperties){this.__cachedChildLayoutProperties={}}var a=this.__cachedChildLayoutProperties;var c=b.toHashCode();if(!a[c]){a[c]={}}return a[c]}},destruct:function(){this._widget=null}});qx.Class.define("qx.event.handler.Transition",{extend:qx.core.Object,implement:qx.event.IEventHandler,construct:function(a){this.base(arguments);this.__registeredEvents={};this.__onEventWrapper=qx.lang.Function.listener(this._onNative,this)},statics:{PRIORITY:qx.event.Registration.PRIORITY_NORMAL,SUPPORTED_TYPES:{transitionEnd:1,animationEnd:1,animationStart:1,animationIteration:1},TARGET_CHECK:qx.event.IEventHandler.TARGET_DOMNODE,IGNORE_CAN_HANDLE:true,TYPE_TO_NATIVE:qx.core.Environment.select("engine.name",{webkit:{transitionEnd:"webkitTransitionEnd",animationEnd:"webkitAnimationEnd",animationStart:"webkitAnimationStart",animationIteration:"webkitAnimationIteration"},gecko:{transitionEnd:"mozTransitionEnd",animationEnd:"mozAnimationEnd",animationStart:"mozAnimationStart",animationIteration:"mozAnimationIteration"},"default":null}),NATIVE_TO_TYPE:qx.core.Environment.select("engine.name",{webkit:{webkitTransitionEnd:"transitionEnd",webkitAnimationEnd:"animationEnd",webkitAnimationStart:"animationStart",webkitAnimationIteration:"animationIteration"},gecko:{mozTransitionEnd:"transitionEnd",mozAnimationEnd:"animationEnd",mozAnimationStart:"animationStart",mozAnimationIteration:"animationIteration"},"default":null})},members:{__onEventWrapper:null,__registeredEvents:null,canHandleEvent:function(b,a){},registerEvent:qx.core.Environment.select("engine.name",{"webkit|gecko":function(d,b,a){var c=qx.core.ObjectRegistry.toHashCode(d)+b;var e=qx.event.handler.Transition.TYPE_TO_NATIVE[b];this.__registeredEvents[c]={target:d,type:e};qx.bom.Event.addNativeListener(d,e,this.__onEventWrapper)},"default":function(){}}),unregisterEvent:qx.core.Environment.select("engine.name",{"webkit|gecko":function(e,c,a){var b=this.__registeredEvents;if(!b){return}var d=qx.core.ObjectRegistry.toHashCode(e)+c;if(b[d]){delete b[d]}qx.bom.Event.removeNativeListener(e,qx.event.handler.Transition.TYPE_TO_NATIVE[c],this.__onEventWrapper)},"default":function(){}}),_onNative:qx.event.GlobalError.observeMethod(function(a){qx.event.Registration.fireEvent(a.target,qx.event.handler.Transition.NATIVE_TO_TYPE[a.type],qx.event.type.Event)})},destruct:function(){var b;var a=this.__registeredEvents;for(var c in a){b=a[c];if(b.target){qx.bom.Event.removeNativeListener(b.target,b.type,this.__onEventWrapper)}}this.__registeredEvents=this.__onEventWrapper=null},defer:function(a){qx.event.Registration.addHandler(a)}});qx.Class.define("qx.ui.mobile.layout.AbstractBox",{extend:qx.ui.mobile.layout.Abstract,type:"abstract",construct:function(b,a,c){this.base(arguments);if(b){this.setAlignX(b)}if(a){this.setAlignY(a)}if(c){this.setReversed(c)}},properties:{alignX:{check:["left","center","right"],nullable:true,init:null,apply:"_applyLayoutChange"},alignY:{check:["top","middle","bottom"],nullable:true,init:null,apply:"_applyLayoutChange"},reversed:{check:"Boolean",nullable:true,init:null,apply:"_applyLayoutChange"}},statics:{PROPERTY_CSS_MAPPING:{alignX:{hbox:{left:"boxPackStart",center:"boxPackCenter",right:"boxPackEnd"},vbox:{left:"boxAlignStart",center:"boxAlignCenter",right:"boxAlignEnd"}},alignY:{hbox:{top:"boxAlignStart",middle:"boxAlignCenter",bottom:"boxAlignEnd"},vbox:{top:"boxPackStart",middle:"boxPackCenter",bottom:"boxPackEnd"}},reversed:{hbox:{"true":"boxReverse","false":null},vbox:{"true":"boxReverse","false":null}}},SUPPORTED_CHILD_LAYOUT_PROPERTIES:{flex:1}},members:{_getSupportedChildLayoutProperties:function(){return qx.ui.mobile.layout.AbstractBox.SUPPORTED_CHILD_LAYOUT_PROPERTIES},_setLayoutProperty:function(d,c,b){if(c=="flex"){var a=this._getChildLayoutPropertyValue(d,c);if(a!=null){d.removeCssClass("boxFlex"+b)}d.addCssClass("boxFlex"+b)}},connectToWidget:function(a){if(this._widget){this.resetAlignX();this.resetAlignY();this.resetReversed()}this.base(arguments,a)},_applyLayoutChange:function(f,b,e){if(this._widget){var c=this.getCssClass();var g=qx.ui.mobile.layout.AbstractBox.PROPERTY_CSS_MAPPING[e][c];if(b){var d=g[b];if(d){this._widget.removeCssClass(d)}}if(f){var a=g[f];if(a){this._widget.addCssClass(a)}}}else{if(f){this._addCachedProperty(e,f)}}}}});qx.Class.define("qx.ui.mobile.layout.VBox",{extend:qx.ui.mobile.layout.AbstractBox,members:{getCssClass:function(){return"vbox"}}});qx.Interface.define("qx.ui.table.ICellRenderer",{members:{createDataCellHtml:function(b,a){return true}}});qx.Class.define("qx.ui.table.cellrenderer.Abstract",{type:"abstract",implement:qx.ui.table.ICellRenderer,extend:qx.core.Object,construct:function(){this.base(arguments);var c=qx.ui.table.cellrenderer.Abstract;if(!c.__clazz){var a=qx.theme.manager.Color.getInstance();c.__clazz=this.self(arguments);var b=".qooxdoo-table-cell {"+qx.bom.element.Style.compile({position:"absolute",top:"0px",overflow:"hidden",whiteSpace:"nowrap",borderRight:"1px solid "+a.resolve("table-column-line"),padding:"0px 6px",cursor:"default",textOverflow:"ellipsis",userSelect:"none"})+"} .qooxdoo-table-cell-right { text-align:right } .qooxdoo-table-cell-italic { font-style:italic} .qooxdoo-table-cell-bold { font-weight:bold } ";if(!(qx.core.Environment.get("engine.name")=="mshtml")){b+=".qooxdoo-table-cell {"+qx.bom.element.BoxSizing.compile("content-box")+"}"}c.__clazz.stylesheet=qx.bom.Stylesheet.createElement(b)}},properties:{defaultCellStyle:{init:null,check:"String",nullable:true}},members:{_insetX:6+6+1,_insetY:0,_getCellClass:function(a){return"qooxdoo-table-cell"},_getCellStyle:function(a){return a.style||""},_getCellAttributes:function(a){return""},_getContentHtml:function(a){return a.value||""},_getCellSizeStyle:function(d,a,e,c){var b="";if(qx.core.Environment.get("css.boxmodel")=="content"){d-=e;a-=c}b+="width:"+Math.max(d,0)+"px;";b+="height:"+Math.max(a,0)+"px;";return b},createDataCellHtml:function(b,a){a.push('<div class="',this._getCellClass(b),'" style="',"left:",b.styleLeft,"px;",this._getCellSizeStyle(b.styleWidth,b.styleHeight,this._insetX,this._insetY),this._getCellStyle(b),'" ',this._getCellAttributes(b),">"+this._getContentHtml(b),"</div>")}}});qx.Class.define("qx.io.remote.Exchange",{extend:qx.core.Object,construct:function(a){this.base(arguments);this.setRequest(a);a.setTransport(this)},events:{sending:"qx.event.type.Event",receiving:"qx.event.type.Event",completed:"qx.io.remote.Response",aborted:"qx.event.type.Event",failed:"qx.io.remote.Response",timeout:"qx.io.remote.Response"},statics:{typesOrder:["qx.io.remote.transport.XmlHttp","qx.io.remote.transport.Iframe","qx.io.remote.transport.Script"],typesReady:false,typesAvailable:{},typesSupported:{},registerType:function(b,a){qx.io.remote.Exchange.typesAvailable[a]=b},initTypes:function(){if(qx.io.remote.Exchange.typesReady){return}for(var a in qx.io.remote.Exchange.typesAvailable){var b=qx.io.remote.Exchange.typesAvailable[a];if(b.isSupported()){qx.io.remote.Exchange.typesSupported[a]=b}}qx.io.remote.Exchange.typesReady=true;if(qx.lang.Object.isEmpty(qx.io.remote.Exchange.typesSupported)){throw new Error("No supported transport types were found!")}},canHandle:function(a,b,c){if(!qx.lang.Array.contains(a.handles.responseTypes,c)){return false}for(var d in b){if(!a.handles[d]){return false}}return true},_nativeMap:{0:"created",1:"configured",2:"sending",3:"receiving",4:"completed"},wasSuccessful:function(c,a,b){if(b){switch(c){case null:case 0:return true;case -1:return a<4;default:return typeof c==="undefined"}}else{switch(c){case -1:if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebug")&&a>3){qx.log.Logger.debug(this,"Failed with statuscode: -1 at readyState "+a)}}return a<4;case 200:case 304:return true;case 201:case 202:case 203:case 204:case 205:return true;case 206:if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebug")&&a===4){qx.log.Logger.debug(this,"Failed with statuscode: 206 (Partial content while being complete!)")}}return a!==4;case 300:case 301:case 302:case 303:case 305:case 400:case 401:case 402:case 403:case 404:case 405:case 406:case 407:case 408:case 409:case 410:case 411:case 412:case 413:case 414:case 415:case 500:case 501:case 502:case 503:case 504:case 505:if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebug")){qx.log.Logger.debug(this,"Failed with typical HTTP statuscode: "+c)}}return false;case 12002:case 12007:case 12029:case 12030:case 12031:case 12152:case 13030:if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebug")){qx.log.Logger.debug(this,"Failed with MSHTML specific HTTP statuscode: "+c)}}return false;default:if(c>206&&c<300){return true}qx.log.Logger.debug(this,"Unknown status code: "+c+" ("+a+")");return false}}},statusCodeToString:function(b){switch(b){case -1:return"Not available";case 0:var a=window.location.href;if(qx.lang.String.startsWith(a.toLowerCase(),"file:")){return("Unknown status code. Possibly due to application URL using 'file:' protocol?")}else{return("Unknown status code. Possibly due to a cross-domain request?")}break;case 200:return"Ok";case 304:return"Not modified";case 206:return"Partial content";case 204:return"No content";case 300:return"Multiple choices";case 301:return"Moved permanently";case 302:return"Moved temporarily";case 303:return"See other";case 305:return"Use proxy";case 400:return"Bad request";case 401:return"Unauthorized";case 402:return"Payment required";case 403:return"Forbidden";case 404:return"Not found";case 405:return"Method not allowed";case 406:return"Not acceptable";case 407:return"Proxy authentication required";case 408:return"Request time-out";case 409:return"Conflict";case 410:return"Gone";case 411:return"Length required";case 412:return"Precondition failed";case 413:return"Request entity too large";case 414:return"Request-URL too large";case 415:return"Unsupported media type";case 500:return"Server error";case 501:return"Not implemented";case 502:return"Bad gateway";case 503:return"Out of resources";case 504:return"Gateway time-out";case 505:return"HTTP version not supported";case 12002:return"Server timeout";case 12029:return"Connection dropped";case 12030:return"Connection dropped";case 12031:return"Connection dropped";case 12152:return"Connection closed by server";case 13030:return"MSHTML-specific HTTP status code";default:return"Unknown status code"}}},properties:{request:{check:"qx.io.remote.Request",nullable:true},implementation:{check:"qx.io.remote.transport.Abstract",nullable:true,apply:"_applyImplementation"},state:{check:["configured","sending","receiving","completed","aborted","timeout","failed"],init:"configured",event:"changeState",apply:"_applyState"}},members:{send:function(){var m=this.getRequest();if(!m){return this.error("Please attach a request object first")}qx.io.remote.Exchange.initTypes();var f=qx.io.remote.Exchange.typesOrder;var k=qx.io.remote.Exchange.typesSupported;var c=m.getResponseType();var a={};if(m.getAsynchronous()){a.asynchronous=true}else{a.synchronous=true}if(m.getCrossDomain()){a.crossDomain=true}if(m.getFileUpload()){a.fileUpload=true}for(var h in m.getFormFields()){a.programaticFormFields=true;break}var g,j;for(var d=0,b=f.length;d<b;d++){g=k[f[d]];if(g){if(!qx.io.remote.Exchange.canHandle(g,a,c)){continue}try{if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebug")){this.debug("Using implementation: "+g.classname)}}j=new g;this.setImplementation(j);j.setUseBasicHttpAuth(m.getUseBasicHttpAuth());j.send();return true}catch(e){this.error("Request handler throws error");this.error(e);return}}}this.error("There is no transport implementation available to handle this request: "+m)},abort:function(){var a=this.getImplementation();if(a){if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebug")){this.debug("Abort: implementation "+a.toHashCode())}}a.abort()}else{if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebug")){this.debug("Abort: forcing state to be aborted")}}this.setState("aborted")}},timeout:function(){var a=this.getImplementation();if(a){var c="";for(var b in a.getParameters()){c+="&"+b+"="+a.getParameters()[b]}this.warn("Timeout: implementation "+a.toHashCode()+", "+a.getUrl()+" ["+a.getMethod()+"], "+c);a.timeout()}else{this.warn("Timeout: forcing state to timeout");this.setState("timeout")}this.__disableRequestTimeout()},__disableRequestTimeout:function(){var a=this.getRequest();if(a){a.setTimeout(0)}},_onsending:function(a){this.setState("sending")},_onreceiving:function(a){this.setState("receiving")},_oncompleted:function(a){this.setState("completed")},_onabort:function(a){this.setState("aborted")},_onfailed:function(a){this.setState("failed")},_ontimeout:function(a){this.setState("timeout")},_applyImplementation:function(g,a){if(a){a.removeListener("sending",this._onsending,this);a.removeListener("receiving",this._onreceiving,this);a.removeListener("completed",this._oncompleted,this);a.removeListener("aborted",this._onabort,this);a.removeListener("timeout",this._ontimeout,this);a.removeListener("failed",this._onfailed,this)}if(g){var j=this.getRequest();g.setUrl(j.getUrl());g.setMethod(j.getMethod());g.setAsynchronous(j.getAsynchronous());g.setUsername(j.getUsername());g.setPassword(j.getPassword());g.setParameters(j.getParameters(false));g.setFormFields(j.getFormFields());g.setRequestHeaders(j.getRequestHeaders());if(g instanceof qx.io.remote.transport.XmlHttp){g.setParseJson(j.getParseJson())}var d=j.getData();if(d===null){var f=j.getParameters(true);var e=[];for(var h in f){var b=f[h];if(b instanceof Array){for(var c=0;c<b.length;c++){e.push(encodeURIComponent(h)+"="+encodeURIComponent(b[c]))}}else{e.push(encodeURIComponent(h)+"="+encodeURIComponent(b))}}if(e.length>0){g.setData(e.join("&"))}}else{g.setData(d)}g.setResponseType(j.getResponseType());g.addListener("sending",this._onsending,this);g.addListener("receiving",this._onreceiving,this);g.addListener("completed",this._oncompleted,this);g.addListener("aborted",this._onabort,this);g.addListener("timeout",this._ontimeout,this);g.addListener("failed",this._onfailed,this)}},_applyState:function(e,b){if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebug")){this.debug("State: "+b+" => "+e)}}switch(e){case"sending":this.fireEvent("sending");break;case"receiving":this.fireEvent("receiving");break;case"completed":case"aborted":case"timeout":case"failed":var d=this.getImplementation();if(!d){break}this.__disableRequestTimeout();if(this.hasListener(e)){var a=qx.event.Registration.createEvent(e,qx.io.remote.Response);if(e=="completed"){var c=d.getResponseContent();a.setContent(c);if(c===null){if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebug")){this.debug("Altered State: "+e+" => failed")}}e="failed"}}else{if(e=="failed"){a.setContent(d.getResponseContent())}}a.setStatusCode(d.getStatusCode());a.setResponseHeaders(d.getResponseHeaders());this.dispatchEvent(a)}this.setImplementation(null);d.dispose();break}}},environment:{"qx.ioRemoteDebug":false,"qx.ioRemoteDebugData":false},destruct:function(){var a=this.getImplementation();if(a){this.setImplementation(null);a.dispose()}this.setRequest(null)}});qx.Class.define("qx.io.remote.transport.Abstract",{type:"abstract",extend:qx.core.Object,construct:function(){this.base(arguments);this.setRequestHeaders({});this.setParameters({});this.setFormFields({})},events:{created:"qx.event.type.Event",configured:"qx.event.type.Event",sending:"qx.event.type.Event",receiving:"qx.event.type.Event",completed:"qx.event.type.Event",aborted:"qx.event.type.Event",failed:"qx.event.type.Event",timeout:"qx.event.type.Event"},properties:{url:{check:"String",nullable:true},method:{check:"String",nullable:true,init:"GET"},asynchronous:{check:"Boolean",nullable:true,init:true},data:{check:"String",nullable:true},username:{check:"String",nullable:true},password:{check:"String",nullable:true},state:{check:["created","configured","sending","receiving","completed","aborted","timeout","failed"],init:"created",event:"changeState",apply:"_applyState"},requestHeaders:{check:"Object",nullable:true},parameters:{check:"Object",nullable:true},formFields:{check:"Object",nullable:true},responseType:{check:"String",nullable:true},useBasicHttpAuth:{check:"Boolean",nullable:true}},members:{send:function(){throw new Error("send is abstract")},abort:function(){if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebug")){this.warn("Aborting...")}}this.setState("aborted")},timeout:function(){if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebug")){this.warn("Timeout...")}}this.setState("timeout")},failed:function(){if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebug")){this.warn("Failed...")}}this.setState("failed")},setRequestHeader:function(a,b){throw new Error("setRequestHeader is abstract")},getResponseHeader:function(a){throw new Error("getResponseHeader is abstract")},getResponseHeaders:function(){throw new Error("getResponseHeaders is abstract")},getStatusCode:function(){throw new Error("getStatusCode is abstract")},getStatusText:function(){throw new Error("getStatusText is abstract")},getResponseText:function(){throw new Error("getResponseText is abstract")},getResponseXml:function(){throw new Error("getResponseXml is abstract")},getFetchedLength:function(){throw new Error("getFetchedLength is abstract")},_applyState:function(b,a){if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebug")){this.debug("State: "+b)}}switch(b){case"created":this.fireEvent("created");break;case"configured":this.fireEvent("configured");break;case"sending":this.fireEvent("sending");break;case"receiving":this.fireEvent("receiving");break;case"completed":this.fireEvent("completed");break;case"aborted":this.fireEvent("aborted");break;case"failed":this.fireEvent("failed");break;case"timeout":this.fireEvent("timeout");break}return true}},destruct:function(){this.setRequestHeaders(null);this.setParameters(null);this.setFormFields(null)}});qx.Class.define("qx.io.remote.transport.Iframe",{extend:qx.io.remote.transport.Abstract,construct:function(){this.base(arguments);var c=(new Date).valueOf();var d="frame_"+c;var a="form_"+c;var b;if((qx.core.Environment.get("engine.name")=="mshtml")){b="javascript:void(0)"}this.__frame=qx.bom.Iframe.create({id:d,name:d,src:b});qx.bom.element.Style.set(this.__frame,"display","none");this.__form=qx.bom.Element.create("form",{id:a,name:a,target:d});qx.bom.element.Style.set(this.__form,"display","none");qx.dom.Element.insertEnd(this.__form,qx.dom.Node.getBodyElement(document));this.__data=qx.bom.Element.create("textarea",{id:"_data_",name:"_data_"});qx.dom.Element.insertEnd(this.__data,this.__form);qx.dom.Element.insertEnd(this.__frame,qx.dom.Node.getBodyElement(document));qx.event.Registration.addListener(this.__frame,"load",this._onload,this);this.__onreadystatechangeWrapper=qx.lang.Function.listener(this._onreadystatechange,this);qx.bom.Event.addNativeListener(this.__frame,"readystatechange",this.__onreadystatechangeWrapper)},statics:{handles:{synchronous:false,asynchronous:true,crossDomain:false,fileUpload:true,programaticFormFields:true,responseTypes:["text/plain","text/javascript","application/json","application/xml","text/html"]},isSupported:function(){return true},_numericMap:{uninitialized:1,loading:2,loaded:2,interactive:3,complete:4}},members:{__data:null,__lastReadyState:0,__form:null,__frame:null,__onreadystatechangeWrapper:null,send:function(){var b=this.getMethod();var c=this.getUrl();var g=this.getParameters(false);var e=[];for(var j in g){var h=g[j];if(h instanceof Array){for(var d=0;d<h.length;d++){e.push(encodeURIComponent(j)+"="+encodeURIComponent(h[d]))}}else{e.push(encodeURIComponent(j)+"="+encodeURIComponent(h))}}if(e.length>0){c+=(c.indexOf("?")>=0?"&":"?")+e.join("&")}if(this.getData()===null){var g=this.getParameters(true);var e=[];for(var j in g){var h=g[j];if(h instanceof Array){for(var d=0;d<h.length;d++){e.push(encodeURIComponent(j)+"="+encodeURIComponent(h[d]))}}else{e.push(encodeURIComponent(j)+"="+encodeURIComponent(h))}}if(e.length>0){this.setData(e.join("&"))}}var a=this.getFormFields();for(var j in a){var f=document.createElement("textarea");f.name=j;f.appendChild(document.createTextNode(a[j]));this.__form.appendChild(f)}this.__form.action=c;this.__form.method=b;this.__data.appendChild(document.createTextNode(this.getData()));this.__form.submit();this.setState("sending")},_onload:qx.event.GlobalError.observeMethod(function(a){if(qx.core.Environment.get("engine.name")=="opera"&&this.getIframeHtmlContent()==""){return}if(this.__form.src){return}this._switchReadyState(qx.io.remote.transport.Iframe._numericMap.complete)}),_onreadystatechange:qx.event.GlobalError.observeMethod(function(a){this._switchReadyState(qx.io.remote.transport.Iframe._numericMap[this.__frame.readyState])}),_switchReadyState:function(a){switch(this.getState()){case"completed":case"aborted":case"failed":case"timeout":this.warn("Ignore Ready State Change");return}while(this.__lastReadyState<a){this.setState(qx.io.remote.Exchange._nativeMap[++this.__lastReadyState])}},setRequestHeader:function(a,b){},getResponseHeader:function(a){return null},getResponseHeaders:function(){return{}},getStatusCode:function(){return 200},getStatusText:function(){return""},getIframeWindow:function(){return qx.bom.Iframe.getWindow(this.__frame)},getIframeDocument:function(){return qx.bom.Iframe.getDocument(this.__frame)},getIframeBody:function(){return qx.bom.Iframe.getBody(this.__frame)},getIframeTextContent:function(){var a=this.getIframeBody();if(!a){return null}if(!a.firstChild){return""}if(a.firstChild.tagName&&a.firstChild.tagName.toLowerCase()=="pre"){return a.firstChild.innerHTML}else{return a.innerHTML}},getIframeHtmlContent:function(){var a=this.getIframeBody();return a?a.innerHTML:null},getFetchedLength:function(){return 0},getResponseContent:function(){if(this.getState()!=="completed"){if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebug")){this.warn("Transfer not complete, ignoring content!")}}return null}if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebug")){this.debug("Returning content for responseType: "+this.getResponseType())}}var vText=this.getIframeTextContent();switch(this.getResponseType()){case"text/plain":if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebugData")){this.debug("Response: "+this._responseContent)}}return vText;break;case"text/html":vText=this.getIframeHtmlContent();if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebugData")){this.debug("Response: "+this._responseContent)}}return vText;break;case"application/json":vText=this.getIframeHtmlContent();if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebugData")){this.debug("Response: "+this._responseContent)}}try{return vText&&vText.length>0?qx.util.Json.parse(vText,false):null}catch(ex){return this.error("Could not execute json: ("+vText+")",ex)}case"text/javascript":vText=this.getIframeHtmlContent();if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebugData")){this.debug("Response: "+this._responseContent)}}try{return vText&&vText.length>0?window.eval(vText):null}catch(ex){return this.error("Could not execute javascript: ("+vText+")",ex)}case"application/xml":vText=this.getIframeDocument();if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebugData")){this.debug("Response: "+this._responseContent)}}return vText;default:this.warn("No valid responseType specified ("+this.getResponseType()+")!");return null}}},defer:function(){qx.io.remote.Exchange.registerType(qx.io.remote.transport.Iframe,"qx.io.remote.transport.Iframe")},destruct:function(){if(this.__frame){qx.event.Registration.removeListener(this.__frame,"load",this._onload,this);qx.bom.Event.removeNativeListener(this.__frame,"readystatechange",this.__onreadystatechangeWrapper);if((qx.core.Environment.get("engine.name")=="gecko")){this.__frame.src=qx.util.ResourceManager.getInstance().toUri("qx/static/blank.gif")}qx.dom.Element.remove(this.__frame)}if(this.__form){qx.dom.Element.remove(this.__form)}this.__frame=this.__form=this.__data=null}});qx.Class.define("qx.event.handler.Iframe",{extend:qx.core.Object,implement:qx.event.IEventHandler,statics:{PRIORITY:qx.event.Registration.PRIORITY_NORMAL,SUPPORTED_TYPES:{load:1,navigate:1},TARGET_CHECK:qx.event.IEventHandler.TARGET_DOMNODE,IGNORE_CAN_HANDLE:false,onevent:qx.event.GlobalError.observeMethod(function(b){var a=qx.bom.Iframe.queryCurrentUrl(b);if(a!==b.$$url){qx.event.Registration.fireEvent(b,"navigate",qx.event.type.Data,[a]);b.$$url=a}qx.event.Registration.fireEvent(b,"load")})},members:{canHandleEvent:function(b,a){return b.tagName.toLowerCase()==="iframe"},registerEvent:function(c,b,a){},unregisterEvent:function(c,b,a){}},defer:function(a){qx.event.Registration.addHandler(a)}});qx.Class.define("qx.bom.Iframe",{statics:{DEFAULT_ATTRIBUTES:{onload:"qx.event.handler.Iframe.onevent(this)",frameBorder:0,frameSpacing:0,marginWidth:0,marginHeight:0,hspace:0,vspace:0,border:0,allowTransparency:true},create:function(a,d){var a=a?qx.lang.Object.clone(a):{};var b=qx.bom.Iframe.DEFAULT_ATTRIBUTES;for(var c in b){if(a[c]==null){a[c]=b[c]}}return qx.bom.Element.create("iframe",a,d)},getWindow:function(b){try{return b.contentWindow}catch(a){return null}},getDocument:qx.core.Environment.select("engine.name",{mshtml:function(b){try{var c=this.getWindow(b);return c?c.document:null}catch(a){return null}},"default":function(b){try{return b.contentDocument}catch(a){return null}}}),getBody:function(b){try{var c=this.getDocument(b);return c?c.getElementsByTagName("body")[0]:null}catch(a){return null}},setSource:function(c,d){try{if(this.getWindow(c)&&qx.dom.Hierarchy.isRendered(c)){try{if((qx.core.Environment.get("engine.name")=="webkit")&&qx.core.Environment.get("os.name")=="osx"){var a=this.getWindow(c);if(a){a.stop()}}this.getWindow(c).location.replace(d)}catch(b){c.src=d}}else{c.src=d}this.__rememberUrl(c)}catch(b){qx.log.Logger.warn("Iframe source could not be set!")}},queryCurrentUrl:function(b){var c=this.getDocument(b);try{if(c&&c.location){return c.location.href}}catch(a){}return null},__rememberUrl:function(a){var b=function(){qx.bom.Event.removeNativeListener(a,"load",b);a.$$url=qx.bom.Iframe.queryCurrentUrl(a)};qx.bom.Event.addNativeListener(a,"load",b)}}});qx.Class.define("qx.dom.Element",{statics:{hasChild:function(a,b){return b.parentNode===a},hasChildren:function(a){return !!a.firstChild},hasChildElements:function(a){a=a.firstChild;while(a){if(a.nodeType===1){return true}a=a.nextSibling}return false},getParentElement:function(a){return a.parentNode},isInDom:function(c,e){if(!e){e=window}var d=e.document.getElementsByTagName(c.nodeName);for(var b=0,a=d.length;b<a;b++){if(d[b]===c){return true}}return false},insertAt:function(d,b,a){var c=b.childNodes[a];if(c){b.insertBefore(d,c)}else{b.appendChild(d)}return true},insertBegin:function(b,a){if(a.firstChild){this.insertBefore(b,a.firstChild)}else{a.appendChild(b)}},insertEnd:function(b,a){a.appendChild(b)},insertBefore:function(b,a){a.parentNode.insertBefore(b,a);return true},insertAfter:function(c,b){var a=b.parentNode;if(b==a.lastChild){a.appendChild(c)}else{return this.insertBefore(c,b.nextSibling)}return true},remove:function(a){if(!a.parentNode){return false}a.parentNode.removeChild(a);return true},removeChild:function(b,a){if(b.parentNode!==a){return false}a.removeChild(b);return true},removeChildAt:function(a,b){var c=b.childNodes[a];if(!c){return false}b.removeChild(c);return true},replaceChild:function(a,b){if(!b.parentNode){return false}b.parentNode.replaceChild(a,b);return true},replaceAt:function(b,a,c){var d=c.childNodes[a];if(!d){return false}c.replaceChild(b,d);return true}}});qx.Interface.define("qx.util.format.IFormat",{members:{format:function(a){},parse:function(a){}}});qx.Class.define("qx.util.format.NumberFormat",{extend:qx.core.Object,implement:qx.util.format.IFormat,construct:function(a){this.base(arguments);this.__locale=a},statics:{getIntegerInstance:function(){if(qx.core.Environment.get("qx.debug")){qx.log.Logger.deprecatedMethodWarning(arguments.callee,"Please create an instance of the number format instead.")}var a=qx.util.format.NumberFormat;if(a._integerInstance==null){a._integerInstance=new a();a._integerInstance.setMaximumFractionDigits(0)}return a._integerInstance},getInstance:function(){if(qx.core.Environment.get("qx.debug")){qx.log.Logger.deprecatedMethodWarning(arguments.callee,"Please create an instance of the number format instead.")}if(!this._instance){this._instance=new this}return this._instance}},properties:{minimumIntegerDigits:{check:"Number",init:0},maximumIntegerDigits:{check:"Number",nullable:true},minimumFractionDigits:{check:"Number",init:0},maximumFractionDigits:{check:"Number",nullable:true},groupingUsed:{check:"Boolean",init:true},prefix:{check:"String",init:"",event:"changeNumberFormat"},postfix:{check:"String",init:"",event:"changeNumberFormat"}},members:{__locale:null,format:function(c){switch(c){case Infinity:return"Infinity";case -Infinity:return"-Infinity";case NaN:return"NaN"}var b=(c<0);if(b){c=-c}if(this.getMaximumFractionDigits()!=null){var a=Math.pow(10,this.getMaximumFractionDigits());c=Math.round(c*a)/a}var e=String(Math.floor(c)).length;var i=""+c;var f=i.substring(0,e);while(f.length<this.getMinimumIntegerDigits()){f="0"+f}if(this.getMaximumIntegerDigits()!=null&&f.length>this.getMaximumIntegerDigits()){f=f.substring(f.length-this.getMaximumIntegerDigits())}var l=i.substring(e+1);while(l.length<this.getMinimumFractionDigits()){l+="0"}if(this.getMaximumFractionDigits()!=null&&l.length>this.getMaximumFractionDigits()){l=l.substring(0,this.getMaximumFractionDigits())}if(this.getGroupingUsed()){var j=f;f="";var h;for(h=j.length;h>3;h-=3){f=""+qx.locale.Number.getGroupSeparator(this.__locale)+j.substring(h-3,h)+f}f=j.substring(0,h)+f}var d=this.getPrefix()?this.getPrefix():"";var k=this.getPostfix()?this.getPostfix():"";var g=d+(b?"-":"")+f;if(l.length>0){g+=""+qx.locale.Number.getDecimalSeparator(this.__locale)+l}g+=k;return g},parse:function(f){var h=qx.lang.String.escapeRegexpChars(qx.locale.Number.getGroupSeparator(this.__locale)+"");var c=qx.lang.String.escapeRegexpChars(qx.locale.Number.getDecimalSeparator(this.__locale)+"");var g=new RegExp("^"+qx.lang.String.escapeRegexpChars(this.getPrefix())+"([-+]){0,1}([0-9]{1,3}(?:"+h+"{0,1}[0-9]{3}){0,})("+c+"\\d+){0,1}"+qx.lang.String.escapeRegexpChars(this.getPostfix())+"$");var a=g.exec(f);if(a==null){throw new Error("Number string '"+f+"' does not match the number format")}var d=(a[1]=="-");var e=a[2];var i=a[3];e=e.replace(new RegExp(h,"g"),"");var b=(d?"-":"")+e;if(i!=null&&i.length!=0){i=i.replace(new RegExp(c),"");b+="."+i}return parseFloat(b)}}});qx.Class.define("qx.util.Json",{statics:{__nativeDateToJSON:null,BEAUTIFYING_INDENT:"  ",BEAUTIFYING_LINE_END:"\n",CONVERT_DATES:null,__map:{"function":"__convertFunction","boolean":"__convertBoolean",number:"__convertNumber",string:"__convertString",object:"__convertObject","undefined":"__convertUndefined"},NUMBER_FORMAT:new qx.util.format.NumberFormat(),__convertFunction:function(a,b){return String(a)},__convertBoolean:function(a,b){return String(a)},__convertNumber:function(a,b){return isFinite(a)?String(a):"null"},__convertString:function(b,c){var a;if(/["\\\x00-\x1f]/.test(b)){a=b.replace(/([\x00-\x1f\\"])/g,qx.util.Json.__convertStringHelper)}else{a=b}return'"'+a+'"'},__convertStringEscape:{"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},__convertStringHelper:function(e,d){var c=qx.util.Json.__convertStringEscape[d];if(c){return c}c=d.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)},__convertArray:function(d,j){var a=[],g=true,b,e;var h=qx.util.Json.__beautify;a.push("[");if(h){qx.util.Json.__indent+=qx.util.Json.BEAUTIFYING_INDENT;a.push(qx.util.Json.__indent)}for(var f=0,c=d.length;f<c;f++){e=d[f];b=this.__map[typeof e];if(b){e=this[b](e,f+"");if(typeof e=="string"){if(!g){a.push(",");if(h){a.push(qx.util.Json.__indent)}}a.push(e);g=false}}}if(h){qx.util.Json.__indent=qx.util.Json.__indent.substring(0,qx.util.Json.__indent.length-qx.util.Json.BEAUTIFYING_INDENT.length);a.push(qx.util.Json.__indent)}a.push("]");return a.join("")},__convertDate:function(b,d){if(!qx.util.Json.CONVERT_DATES){if(b.toJSON&&qx.core.Environment.get("engine.name")!="opera"&&qx.core.Environment.get("engine.name")!="mshtml"){return'"'+b.toJSON()+'"'}var c=this.NUMBER_FORMAT;c.setMinimumIntegerDigits(2);var e=b.getUTCFullYear()+"-"+c.format(b.getUTCMonth()+1)+"-"+c.format(b.getUTCDate())+"T"+c.format(b.getUTCHours())+":"+c.format(b.getUTCMinutes())+":"+c.format(b.getUTCSeconds())+".";c.setMinimumIntegerDigits(3);return'"'+e+c.format(b.getUTCMilliseconds())+'Z"'}else{var a=b.getUTCFullYear()+","+b.getUTCMonth()+","+b.getUTCDate()+","+b.getUTCHours()+","+b.getUTCMinutes()+","+b.getUTCSeconds()+","+b.getUTCMilliseconds();return"new Date(Date.UTC("+a+"))"}},__convertMap:function(a,c){var e=[],g=true,d,f;var b=qx.util.Json.__beautify;e.push("{");if(b){qx.util.Json.__indent+=qx.util.Json.BEAUTIFYING_INDENT;e.push(qx.util.Json.__indent)}for(var c in a){f=a[c];d=this.__map[typeof f];if(d){f=this[d](f,c);if(typeof f=="string"){if(!g){e.push(",");if(b){e.push(qx.util.Json.__indent)}}e.push(this.__convertString(c),":",f);g=false}}}if(b){qx.util.Json.__indent=qx.util.Json.__indent.substring(0,qx.util.Json.__indent.length-qx.util.Json.BEAUTIFYING_INDENT.length);e.push(qx.util.Json.__indent)}e.push("}");return e.join("")},__convertObject:function(a,b){if(a){if(qx.lang.Type.isFunction(a.toJSON)&&a.toJSON!==this.__nativeDateToJSON){return this.__convert(a.toJSON(b),b)}else{if(qx.lang.Type.isDate(a)){return this.__convertDate(a,b)}else{if(qx.lang.Type.isArray(a)){return this.__convertArray(a,b)}else{if(qx.lang.Type.isObject(a)){return this.__convertMap(a,b)}}}}return""}return"null"},__convertUndefined:function(a,b){if(qx.core.Environment.get("qx.jsonEncodeUndefined")){return"null"}},__convert:function(a,b){return this[this.__map[typeof a]](a,b)},stringify:function(c,b){this.__beautify=b;this.__indent=this.BEAUTIFYING_LINE_END;var a=this.__convert(c,"");if(typeof a!="string"){a=null}if(qx.core.Environment.get("qx.jsonDebugging")){qx.log.Logger.debug(this,"JSON request: "+a)}return a},parse:function(text,validate){if(validate===undefined){validate=true}if(qx.core.Environment.get("qx.jsonDebugging")){qx.log.Logger.debug(this,"JSON response: "+text)}if(validate){if(/[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/.test(text.replace(/"(\\.|[^"\\])*"/g,""))){throw new Error("Could not parse JSON string!")}}try{var result=(text&&text.length>0)?eval("("+text+")"):null;return result}catch(ex){throw new Error("Could not evaluate JSON string: "+ex.message)}}},environment:{"qx.jsonEncodeUndefined":true,"qx.jsonDebugging":false},defer:function(a){a.__nativeDateToJSON=Date.prototype.toJSON}});qx.Class.define("qx.locale.Number",{statics:{getDecimalSeparator:function(a){return qx.locale.Manager.getInstance().localize("cldr_number_decimal_separator",[],a)},getGroupSeparator:function(a){return qx.locale.Manager.getInstance().localize("cldr_number_group_separator",[],a)},getPercentFormat:function(a){return qx.locale.Manager.getInstance().localize("cldr_number_percent_format",[],a)}}});qx.Class.define("qx.io.remote.transport.Script",{extend:qx.io.remote.transport.Abstract,construct:function(){this.base(arguments);var a=++qx.io.remote.transport.Script.__uniqueId;if(a>=2000000000){qx.io.remote.transport.Script.__uniqueId=a=1}this.__element=null;this.__uniqueId=a},statics:{__uniqueId:0,_instanceRegistry:{},ScriptTransport_PREFIX:"_ScriptTransport_",ScriptTransport_ID_PARAM:"_ScriptTransport_id",ScriptTransport_DATA_PARAM:"_ScriptTransport_data",handles:{synchronous:false,asynchronous:true,crossDomain:true,fileUpload:false,programaticFormFields:false,responseTypes:["text/plain","text/javascript","application/json"]},isSupported:function(){return true},_numericMap:{uninitialized:1,loading:2,loaded:2,interactive:3,complete:4},_requestFinished:qx.event.GlobalError.observeMethod(function(c,a){var b=qx.io.remote.transport.Script._instanceRegistry[c];if(b==null){if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebug")){this.warn("Request finished for an unknown instance (probably aborted or timed out before)")}}}else{b._responseContent=a;b._switchReadyState(qx.io.remote.transport.Script._numericMap.complete)}})},members:{__lastReadyState:0,__element:null,__uniqueId:null,send:function(){var f=this.getUrl();f+=(f.indexOf("?")>=0?"&":"?")+qx.io.remote.transport.Script.ScriptTransport_ID_PARAM+"="+this.__uniqueId;var g=this.getParameters();var a=[];for(var b in g){if(b.indexOf(qx.io.remote.transport.Script.ScriptTransport_PREFIX)==0){this.error("Illegal parameter name. The following prefix is used internally by qooxdoo): "+qx.io.remote.transport.Script.ScriptTransport_PREFIX)}var d=g[b];if(d instanceof Array){for(var c=0;c<d.length;c++){a.push(encodeURIComponent(b)+"="+encodeURIComponent(d[c]))}}else{a.push(encodeURIComponent(b)+"="+encodeURIComponent(d))}}if(a.length>0){f+="&"+a.join("&")}var e=this.getData();if(e!=null){f+="&"+qx.io.remote.transport.Script.ScriptTransport_DATA_PARAM+"="+encodeURIComponent(e)}qx.io.remote.transport.Script._instanceRegistry[this.__uniqueId]=this;this.__element=document.createElement("script");this.__element.charset="utf-8";this.__element.src=f;if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebugData")){this.debug("Request: "+f)}}document.body.appendChild(this.__element)},_switchReadyState:function(a){switch(this.getState()){case"completed":case"aborted":case"failed":case"timeout":this.warn("Ignore Ready State Change");return}while(this.__lastReadyState<a){this.setState(qx.io.remote.Exchange._nativeMap[++this.__lastReadyState])}},setRequestHeader:function(a,b){},getResponseHeader:function(a){return null},getResponseHeaders:function(){return{}},getStatusCode:function(){return 200},getStatusText:function(){return""},getFetchedLength:function(){return 0},getResponseContent:function(){if(this.getState()!=="completed"){if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebug")){this.warn("Transfer not complete, ignoring content!")}}return null}if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebug")){this.debug("Returning content for responseType: "+this.getResponseType())}}switch(this.getResponseType()){case"text/plain":case"application/json":case"text/javascript":if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebugData")){this.debug("Response: "+this._responseContent)}}var a=this._responseContent;return(a===0?0:(a||null));default:this.warn("No valid responseType specified ("+this.getResponseType()+")!");return null}}},defer:function(){qx.io.remote.Exchange.registerType(qx.io.remote.transport.Script,"qx.io.remote.transport.Script")},destruct:function(){if(this.__element){delete qx.io.remote.transport.Script._instanceRegistry[this.__uniqueId];document.body.removeChild(this.__element)}this.__element=this._responseContent=null}});qx.Class.define("qx.io.remote.transport.XmlHttp",{extend:qx.io.remote.transport.Abstract,statics:{handles:{synchronous:true,asynchronous:true,crossDomain:false,fileUpload:false,programaticFormFields:false,responseTypes:["text/plain","text/javascript","application/json","application/xml","text/html"]},createRequestObject:qx.core.Environment.select("engine.name",{"default":function(){return new XMLHttpRequest},mshtml:function(){if(window.ActiveXObject&&qx.xml.Document.XMLHTTP){return new ActiveXObject(qx.xml.Document.XMLHTTP)}if(window.XMLHttpRequest){return new XMLHttpRequest}}}),isSupported:function(){return !!this.createRequestObject()}},properties:{parseJson:{check:"Boolean",init:true}},members:{__localRequest:false,__lastReadyState:0,__request:null,getRequest:function(){if(this.__request===null){this.__request=qx.io.remote.transport.XmlHttp.createRequestObject();this.__request.onreadystatechange=qx.lang.Function.bind(this._onreadystatechange,this)}return this.__request},send:function(){this.__lastReadyState=0;var m=this.getRequest();var a=this.getMethod();var f=this.getAsynchronous();var b=this.getUrl();var h=(window.location.protocol==="file:"&&!(/^http(s){0,1}\:/.test(b)));this.__localRequest=h;var k=this.getParameters(false);var e=[];for(var l in k){var j=k[l];if(j instanceof Array){for(var c=0;c<j.length;c++){e.push(encodeURIComponent(l)+"="+encodeURIComponent(j[c]))}}else{e.push(encodeURIComponent(l)+"="+encodeURIComponent(j))}}if(e.length>0){b+=(b.indexOf("?")>=0?"&":"?")+e.join("&")}if(this.getData()===null){var k=this.getParameters(true);var e=[];for(var l in k){var j=k[l];if(j instanceof Array){for(var c=0;c<j.length;c++){e.push(encodeURIComponent(l)+"="+encodeURIComponent(j[c]))}}else{e.push(encodeURIComponent(l)+"="+encodeURIComponent(j))}}if(e.length>0){this.setData(e.join("&"))}}var n=function(r){var p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var o="";var y,w,u;var x,v,t,s;var q=0;do{y=r.charCodeAt(q++);w=r.charCodeAt(q++);u=r.charCodeAt(q++);x=y>>2;v=((y&3)<<4)|(w>>4);t=((w&15)<<2)|(u>>6);s=u&63;if(isNaN(w)){t=s=64}else{if(isNaN(u)){s=64}}o+=p.charAt(x)+p.charAt(v)+p.charAt(t)+p.charAt(s)}while(q<r.length);return o};try{if(this.getUsername()){if(this.getUseBasicHttpAuth()){m.open(a,b,f);m.setRequestHeader("Authorization","Basic "+n(this.getUsername()+":"+this.getPassword()))}else{m.open(a,b,f,this.getUsername(),this.getPassword())}}else{m.open(a,b,f)}}catch(g){this.error("Failed with exception: "+g);this.failed();return}if(!(qx.core.Environment.get("engine.name")=="webkit")){m.setRequestHeader("Referer",window.location.href)}var d=this.getRequestHeaders();for(var l in d){m.setRequestHeader(l,d[l])}try{if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebugData")){this.debug("Request: "+this.getData())}}if(h&&f&&qx.core.Environment.get("engine.name")=="mshtml"&&qx.core.Environment.get("engine.version")==9){qx.event.Timer.once(function(){m.send(this.getData())},this,0)}else{m.send(this.getData())}}catch(g){if(h){this.failedLocally()}else{this.error("Failed to send data: "+g,"send");this.failed()}return}if(!f){this._onreadystatechange()}},failedLocally:function(){if(this.getState()==="failed"){return}this.warn("Could not load from file: "+this.getUrl());this.failed()},_onreadystatechange:qx.event.GlobalError.observeMethod(function(b){switch(this.getState()){case"completed":case"aborted":case"failed":case"timeout":if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebug")){this.warn("Ignore Ready State Change")}}return}var a=this.getReadyState();if(a==4){if(!qx.io.remote.Exchange.wasSuccessful(this.getStatusCode(),a,this.__localRequest)){if(this.getState()==="configured"){this.setState("sending")}this.failed();return}}if(a==3&&this.__lastReadyState==1){this.setState(qx.io.remote.Exchange._nativeMap[++this.__lastReadyState])}while(this.__lastReadyState<a){this.setState(qx.io.remote.Exchange._nativeMap[++this.__lastReadyState])}}),getReadyState:function(){var a=null;try{a=this.getRequest().readyState}catch(b){}return a},setRequestHeader:function(a,b){this.getRequestHeaders()[a]=b},getResponseHeader:function(a){var c=null;try{c=this.getRequest().getResponseHeader(a)||null}catch(b){}return c},getStringResponseHeaders:function(){var c=null;try{var b=this.getRequest().getAllResponseHeaders();if(b){c=b}}catch(a){}return c},getResponseHeaders:function(){var e=this.getStringResponseHeaders();var a={};if(e){var c=e.split(/[\r\n]+/g);for(var d=0,b=c.length;d<b;d++){var f=c[d].match(/^([^:]+)\s*:\s*(.+)$/i);if(f){a[f[1]]=f[2]}}}return a},getStatusCode:function(){var b=-1;try{b=this.getRequest().status;if(b===1223){b=204}}catch(a){}return b},getStatusText:function(){var a="";try{a=this.getRequest().statusText}catch(b){}return a},getResponseText:function(){var b=null;try{b=this.getRequest().responseText}catch(a){b=null}return b},getResponseXml:function(){var d=null;var a=this.getStatusCode();var b=this.getReadyState();if(qx.io.remote.Exchange.wasSuccessful(a,b,this.__localRequest)){try{d=this.getRequest().responseXML}catch(c){}}if(typeof d=="object"&&d!=null){if(!d.documentElement){var e=String(this.getRequest().responseText).replace(/<\?xml[^\?]*\?>/,"");d.loadXML(e)}if(!d.documentElement){throw new Error("Missing Document Element!")}if(d.documentElement.tagName=="parseerror"){throw new Error("XML-File is not well-formed!")}}else{throw new Error("Response was not a valid xml document ["+this.getRequest().responseText+"]")}return d},getFetchedLength:function(){var a=this.getResponseText();return typeof a=="string"?a.length:0},getResponseContent:function(){var state=this.getState();if(state!=="completed"&&state!="failed"){if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebug")){this.warn("Transfer not complete or failed, ignoring content!")}}return null}if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebug")){this.debug("Returning content for responseType: "+this.getResponseType())}}var vText=this.getResponseText();if(state=="failed"){if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebugData")){this.debug("Failed: "+vText)}}return vText}switch(this.getResponseType()){case"text/plain":case"text/html":if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebugData")){this.debug("Response: "+vText)}}return vText;case"application/json":if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebugData")){this.debug("Response: "+vText)}}try{if(vText&&vText.length>0){var ret;if(this.getParseJson()){ret=qx.util.Json.parse(vText,false);ret=(ret===0?0:(ret||null))}else{ret=vText}return ret}else{return null}}catch(ex){this.error("Could not execute json: ["+vText+"]",ex);return"<pre>Could not execute json: \n"+vText+"\n</pre>"}case"text/javascript":if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebugData")){this.debug("Response: "+vText)}}try{if(vText&&vText.length>0){var ret=window.eval(vText);return(ret===0?0:(ret||null))}else{return null}}catch(ex){this.error("Could not execute javascript: ["+vText+"]",ex);return null}case"application/xml":vText=this.getResponseXml();if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebugData")){this.debug("Response: "+vText)}}return(vText===0?0:(vText||null));default:this.warn("No valid responseType specified ("+this.getResponseType()+")!");return null}},_applyState:function(b,a){if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebug")){this.debug("State: "+b)}}switch(b){case"created":this.fireEvent("created");break;case"configured":this.fireEvent("configured");break;case"sending":this.fireEvent("sending");break;case"receiving":this.fireEvent("receiving");break;case"completed":this.fireEvent("completed");break;case"failed":this.fireEvent("failed");break;case"aborted":this.getRequest().abort();this.fireEvent("aborted");break;case"timeout":this.getRequest().abort();this.fireEvent("timeout");break}}},defer:function(){qx.io.remote.Exchange.registerType(qx.io.remote.transport.XmlHttp,"qx.io.remote.transport.XmlHttp")},destruct:function(){var a=this.getRequest();if(a){a.onreadystatechange=qx.lang.Function.empty;switch(a.readyState){case 1:case 2:case 3:a.abort()}}this.__request=null}});qx.Class.define("qx.io.remote.Response",{extend:qx.event.type.Event,properties:{state:{check:"Integer",nullable:true},statusCode:{check:"Integer",nullable:true},content:{nullable:true},responseHeaders:{check:"Object",nullable:true}},members:{clone:function(a){var b=this.base(arguments,a);b.setType(this.getType());b.setState(this.getState());b.setStatusCode(this.getStatusCode());b.setContent(this.getContent());b.setResponseHeaders(this.getResponseHeaders());return b},getResponseHeader:function(a){var b=this.getResponseHeaders();if(b){return b[a]||null}return null}}});qx.Class.define("qx.ui.table.cellrenderer.Default",{extend:qx.ui.table.cellrenderer.Abstract,statics:{STYLEFLAG_ALIGN_RIGHT:1,STYLEFLAG_BOLD:2,STYLEFLAG_ITALIC:4,_numberFormat:null},properties:{useAutoAlign:{check:"Boolean",init:true}},members:{_getStyleFlags:function(a){if(this.getUseAutoAlign()){if(typeof a.value=="number"){return qx.ui.table.cellrenderer.Default.STYLEFLAG_ALIGN_RIGHT}}return 0},_getCellClass:function(a){var c=this.base(arguments,a);if(!c){return""}var b=this._getStyleFlags(a);if(b&qx.ui.table.cellrenderer.Default.STYLEFLAG_ALIGN_RIGHT){c+=" qooxdoo-table-cell-right"}if(b&qx.ui.table.cellrenderer.Default.STYLEFLAG_BOLD){c+=" qooxdoo-table-cell-bold"}if(b&qx.ui.table.cellrenderer.Default.STYLEFLAG_ITALIC){c+=" qooxdoo-table-cell-italic"}return c},_getContentHtml:function(a){return qx.bom.String.escape(this._formatValue(a))},_formatValue:function(a){var c=a.value;var b;if(c==null){return""}if(typeof c=="string"){return c}else{if(typeof c=="number"){if(!qx.ui.table.cellrenderer.Default._numberFormat){qx.ui.table.cellrenderer.Default._numberFormat=new qx.util.format.NumberFormat();qx.ui.table.cellrenderer.Default._numberFormat.setMaximumFractionDigits(2)}var b=qx.ui.table.cellrenderer.Default._numberFormat.format(c)}else{if(c instanceof Date){b=qx.util.format.DateFormat.getDateInstance().format(c)}else{b=c}}}return b}}});qx.Interface.define("qx.ui.table.ICellEditorFactory",{members:{createCellEditor:function(a){return true},getCellEditorValue:function(a){return true}}});qx.Class.define("qx.ui.table.celleditor.AbstractField",{extend:qx.core.Object,implement:qx.ui.table.ICellEditorFactory,type:"abstract",properties:{validationFunction:{check:"Function",nullable:true,init:null}},members:{_createEditor:function(){throw new Error("Abstract method call!")},createCellEditor:function(a){var b=this._createEditor();b.originalValue=a.value;if(a.value===null||a.value===undefined){a.value=""}b.setValue(""+a.value);b.addListener("appear",function(){b.selectAllText()});return b},getCellEditorValue:function(b){var c=b.getValue();var a=this.getValidationFunction();if(a){c=a(c,b.originalValue)}if(typeof b.originalValue=="number"){c=parseFloat(c)}return c}}});qx.Class.define("qx.ui.table.celleditor.TextField",{extend:qx.ui.table.celleditor.AbstractField,members:{getCellEditorValue:function(b){var c=b.getValue();var a=this.getValidationFunction();if(a){c=a(c,b.originalValue)}if(typeof b.originalValue=="number"){if(c!=null){c=parseFloat(c)}}return c},_createEditor:function(){var a=new qx.ui.form.TextField();a.setAppearance("table-editor-textfield");return a}}});qx.Interface.define("qx.ui.table.IHeaderRenderer",{members:{createHeaderCell:function(a){return true},updateHeaderCell:function(a,b){return true}}});qx.Class.define("qx.ui.table.headerrenderer.Default",{extend:qx.core.Object,implement:qx.ui.table.IHeaderRenderer,statics:{STATE_SORTED:"sorted",STATE_SORTED_ASCENDING:"sortedAscending"},properties:{toolTip:{check:"String",init:null,nullable:true}},members:{createHeaderCell:function(a){var b=new qx.ui.table.headerrenderer.HeaderCell();this.updateHeaderCell(a,b);return b},updateHeaderCell:function(a,b){var d=qx.ui.table.headerrenderer.Default;if(a.name&&a.name.translate){b.setLabel(a.name.translate())}else{b.setLabel(a.name)}var c=b.getToolTip();if(this.getToolTip()!=null){if(c==null){c=new qx.ui.tooltip.ToolTip(this.getToolTip());b.setToolTip(c);qx.util.DisposeUtil.disposeTriggeredBy(c,b)}else{c.setLabel(this.getToolTip())}}a.sorted?b.addState(d.STATE_SORTED):b.removeState(d.STATE_SORTED);a.sortedAscending?b.addState(d.STATE_SORTED_ASCENDING):b.removeState(d.STATE_SORTED_ASCENDING)}}});qx.Class.define("qx.ui.table.columnmodel.Basic",{extend:qx.core.Object,construct:function(){this.base(arguments);this.__overallColumnArr=[];this.__visibleColumnArr=[]},events:{widthChanged:"qx.event.type.Data",visibilityChangedPre:"qx.event.type.Data",visibilityChanged:"qx.event.type.Data",orderChanged:"qx.event.type.Data",headerCellRendererChanged:"qx.event.type.Data"},statics:{DEFAULT_WIDTH:100,DEFAULT_HEADER_RENDERER:qx.ui.table.headerrenderer.Default,DEFAULT_DATA_RENDERER:qx.ui.table.cellrenderer.Default,DEFAULT_EDITOR_FACTORY:qx.ui.table.celleditor.TextField},members:{__internalChange:null,__colToXPosMap:null,__visibleColumnArr:null,__overallColumnArr:null,__columnDataArr:null,__headerRenderer:null,__dataRenderer:null,__editorFactory:null,init:function(i,j){if(qx.core.Environment.get("qx.debug")){this.assertInteger(i,"Invalid argument 'colCount'.")}this.__columnDataArr=[];var b=qx.ui.table.columnmodel.Basic.DEFAULT_WIDTH;var g=this.__headerRenderer||(this.__headerRenderer=new qx.ui.table.columnmodel.Basic.DEFAULT_HEADER_RENDERER());var d=this.__dataRenderer||(this.__dataRenderer=new qx.ui.table.columnmodel.Basic.DEFAULT_DATA_RENDERER());var a=this.__editorFactory||(this.__editorFactory=new qx.ui.table.columnmodel.Basic.DEFAULT_EDITOR_FACTORY());this.__overallColumnArr=[];this.__visibleColumnArr=[];var h;if(j){h=j.getInitiallyHiddenColumns()}h=h||[];for(var c=0;c<i;c++){this.__columnDataArr[c]={width:b,headerRenderer:g,dataRenderer:d,editorFactory:a};this.__overallColumnArr[c]=c;this.__visibleColumnArr[c]=c}this.__colToXPosMap=null;this.__internalChange=true;for(var f=0;f<h.length;f++){this.setColumnVisible(h[f],false)}this.__internalChange=false;for(c=0;c<i;c++){var e={col:c,visible:this.isColumnVisible(c)};this.fireDataEvent("visibilityChangedPre",e);this.fireDataEvent("visibilityChanged",e)}},getVisibleColumns:function(){return this.__visibleColumnArr!=null?this.__visibleColumnArr:[]},setColumnWidth:function(c,d,a){if(qx.core.Environment.get("qx.debug")){this.assertInteger(c,"Invalid argument 'col'.");this.assertInteger(d,"Invalid argument 'width'.");this.assertNotUndefined(this.__columnDataArr[c],"Column not found in table model")}var b=this.__columnDataArr[c].width;if(b!=d){this.__columnDataArr[c].width=d;var e={col:c,newWidth:d,oldWidth:b,isMouseAction:a||false};this.fireDataEvent("widthChanged",e)}},getColumnWidth:function(a){if(qx.core.Environment.get("qx.debug")){this.assertInteger(a,"Invalid argument 'col'.");this.assertNotUndefined(this.__columnDataArr[a],"Column not found in table model")}return this.__columnDataArr[a].width},setHeaderCellRenderer:function(b,c){if(qx.core.Environment.get("qx.debug")){this.assertInteger(b,"Invalid argument 'col'.");this.assertInterface(c,qx.ui.table.IHeaderRenderer,"Invalid argument 'renderer'.");this.assertNotUndefined(this.__columnDataArr[b],"Column not found in table model")}var a=this.__columnDataArr[b].headerRenderer;if(a!==this.__headerRenderer){a.dispose()}this.__columnDataArr[b].headerRenderer=c;this.fireDataEvent("headerCellRendererChanged",{col:b})},getHeaderCellRenderer:function(a){if(qx.core.Environment.get("qx.debug")){this.assertInteger(a,"Invalid argument 'col'.");this.assertNotUndefined(this.__columnDataArr[a],"Column not found in table model")}return this.__columnDataArr[a].headerRenderer},setDataCellRenderer:function(b,c){if(qx.core.Environment.get("qx.debug")){this.assertInteger(b,"Invalid argument 'col'.");this.assertInterface(c,qx.ui.table.ICellRenderer,"Invalid argument 'renderer'.");this.assertNotUndefined(this.__columnDataArr[b],"Column not found in table model")}this.__columnDataArr[b].dataRenderer=c;var a=this.__columnDataArr[b].dataRenderer;if(a!==this.__dataRenderer){return a}return null},getDataCellRenderer:function(a){if(qx.core.Environment.get("qx.debug")){this.assertInteger(a,"Invalid argument 'col'.");this.assertNotUndefined(this.__columnDataArr[a],"Column not found in table model")}return this.__columnDataArr[a].dataRenderer},setCellEditorFactory:function(c,b){if(qx.core.Environment.get("qx.debug")){this.assertInteger(c,"Invalid argument 'col'.");this.assertInterface(b,qx.ui.table.ICellEditorFactory,"Invalid argument 'factory'.");this.assertNotUndefined(this.__columnDataArr[c],"Column not found in table model")}var a=this.__columnDataArr[c].headerRenderer;if(a!==this.__editorFactory){a.dispose()}this.__columnDataArr[c].editorFactory=b},getCellEditorFactory:function(a){if(qx.core.Environment.get("qx.debug")){this.assertInteger(a,"Invalid argument 'col'.");this.assertNotUndefined(this.__columnDataArr[a],"Column not found in table model")}return this.__columnDataArr[a].editorFactory},_getColToXPosMap:function(){if(this.__colToXPosMap==null){this.__colToXPosMap={};for(var b=0;b<this.__overallColumnArr.length;b++){var a=this.__overallColumnArr[b];this.__colToXPosMap[a]={overX:b}}for(var c=0;c<this.__visibleColumnArr.length;c++){var a=this.__visibleColumnArr[c];this.__colToXPosMap[a].visX=c}}return this.__colToXPosMap},getVisibleColumnCount:function(){return this.__visibleColumnArr!=null?this.__visibleColumnArr.length:0},getVisibleColumnAtX:function(a){if(qx.core.Environment.get("qx.debug")){this.assertInteger(a,"Invalid argument 'visXPos'.")}return this.__visibleColumnArr[a]},getVisibleX:function(a){if(qx.core.Environment.get("qx.debug")){this.assertInteger(a,"Invalid argument 'col'.")}return this._getColToXPosMap()[a].visX},getOverallColumnCount:function(){return this.__overallColumnArr.length},getOverallColumnAtX:function(a){if(qx.core.Environment.get("qx.debug")){this.assertInteger(a,"Invalid argument 'overXPos'.")}return this.__overallColumnArr[a]},getOverallX:function(a){if(qx.core.Environment.get("qx.debug")){this.assertInteger(a,"Invalid argument 'col'.")}return this._getColToXPosMap()[a].overX},isColumnVisible:function(a){if(qx.core.Environment.get("qx.debug")){this.assertInteger(a,"Invalid argument 'col'.")}return(this._getColToXPosMap()[a].visX!=null)},setColumnVisible:function(d,f){if(qx.core.Environment.get("qx.debug")){this.assertInteger(d,"Invalid argument 'col'.");this.assertBoolean(f,"Invalid argument 'visible'.")}if(f!=this.isColumnVisible(d)){if(f){var c=this._getColToXPosMap();var a=c[d].overX;if(a==null){throw new Error("Showing column failed: "+d+". The column is not added to this TablePaneModel.")}var g;for(var j=a+1;j<this.__overallColumnArr.length;j++){var e=this.__overallColumnArr[j];var h=c[e].visX;if(h!=null){g=h;break}}if(g==null){g=this.__visibleColumnArr.length}this.__visibleColumnArr.splice(g,0,d)}else{var b=this.getVisibleX(d);this.__visibleColumnArr.splice(b,1)}this.__colToXPosMap=null;if(!this.__internalChange){var i={col:d,visible:f};this.fireDataEvent("visibilityChangedPre",i);this.fireDataEvent("visibilityChanged",i)}}},moveColumn:function(c,a){if(qx.core.Environment.get("qx.debug")){this.assertInteger(c,"Invalid argument 'fromOverXPos'.");this.assertInteger(a,"Invalid argument 'toOverXPos'.")}this.__internalChange=true;var b=this.__overallColumnArr[c];var e=this.isColumnVisible(b);if(e){this.setColumnVisible(b,false)}this.__overallColumnArr.splice(c,1);this.__overallColumnArr.splice(a,0,b);this.__colToXPosMap=null;if(e){this.setColumnVisible(b,true)}this.__internalChange=false;var d={col:b,fromOverXPos:c,toOverXPos:a};this.fireDataEvent("orderChanged",d)},setColumnsOrder:function(b){if(qx.core.Environment.get("qx.debug")){this.assertArray(b,"Invalid argument 'newPositions'.")}if(b.length==this.__overallColumnArr.length){this.__internalChange=true;var a=new Array(b.length);for(var d=0;d<this.__overallColumnArr.length;d++){var c=this.isColumnVisible(d);a[d]=c;if(c){this.setColumnVisible(d,false)}}this.__overallColumnArr=qx.lang.Array.clone(b);this.__colToXPosMap=null;for(var d=0;d<this.__overallColumnArr.length;d++){if(a[d]){this.setColumnVisible(d,true)}}this.__internalChange=false;this.fireDataEvent("orderChanged")}else{throw new Error("setColumnsOrder: Invalid number of column positions given, expected "+this.__overallColumnArr.length+", got "+b.length)}}},destruct:function(){for(var a=0;a<this.__columnDataArr.length;a++){this.__columnDataArr[a].headerRenderer.dispose();this.__columnDataArr[a].dataRenderer.dispose();this.__columnDataArr[a].editorFactory.dispose()}this.__overallColumnArr=this.__visibleColumnArr=this.__columnDataArr=this.__colToXPosMap=null;this._disposeObjects("__headerRenderer","__dataRenderer","__editorFactory")}});qx.Class.define("qx.ui.table.columnmodel.Resize",{extend:qx.ui.table.columnmodel.Basic,include:qx.locale.MTranslation,construct:function(){this.base(arguments);this.__bInProgress=false;this.__bAppeared=false},properties:{behavior:{check:"qx.ui.table.columnmodel.resizebehavior.Abstract",init:null,nullable:true,apply:"_applyBehavior",event:"changeBehavior"}},members:{__bAppeared:null,__bInProgress:null,__table:null,_applyBehavior:function(b,a){if(a!=null){a.dispose();a=null}b._setNumColumns(this.getOverallColumnCount());b.setTableColumnModel(this)},init:function(a,b){this.base(arguments,a,b);if(this.__table==null){this.__table=b;b.addListener("appear",this._onappear,this);b.addListener("tableWidthChanged",this._onTableWidthChanged,this);b.addListener("verticalScrollBarChanged",this._onverticalscrollbarchanged,this);b.addListener("columnVisibilityMenuCreateEnd",this._addResetColumnWidthButton,this);this.addListener("widthChanged",this._oncolumnwidthchanged,this);this.addListener("visibilityChanged",this._onvisibilitychanged,this)}if(this.getBehavior()==null){this.setBehavior(new qx.ui.table.columnmodel.resizebehavior.Default())}this.getBehavior()._setNumColumns(a)},getTable:function(){return this.__table},_addResetColumnWidthButton:function(b){var c=b.getData();var a=c.columnButton;var e=c.menu;var d;d=a.factory("separator");e.add(d);d=a.factory("user-button",{text:this.tr("Reset column widths")});e.add(d);d.addListener("execute",this._onappear,this)},_onappear:function(a){if(this.__bInProgress){return}this.__bInProgress=true;if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.tableResizeDebug")){this.debug("onappear")}}this.getBehavior().onAppear(a,a.getType()!=="appear");this.__table._updateScrollerWidths();this.__table._updateScrollBarVisibility();this.__bInProgress=false;this.__bAppeared=true},_onTableWidthChanged:function(a){if(this.__bInProgress||!this.__bAppeared){return}this.__bInProgress=true;if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.tableResizeDebug")){this.debug("ontablewidthchanged")}}this.getBehavior().onTableWidthChanged(a);this.__bInProgress=false},_onverticalscrollbarchanged:function(a){if(this.__bInProgress||!this.__bAppeared){return}this.__bInProgress=true;if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.tableResizeDebug")){this.debug("onverticalscrollbarchanged")}}this.getBehavior().onVerticalScrollBarChanged(a);qx.event.Timer.once(function(){if(this.__table&&!this.__table.isDisposed()){this.__table._updateScrollerWidths();this.__table._updateScrollBarVisibility()}},this,0);this.__bInProgress=false},_oncolumnwidthchanged:function(a){if(this.__bInProgress||!this.__bAppeared){return}this.__bInProgress=true;if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.tableResizeDebug")){this.debug("oncolumnwidthchanged")}}this.getBehavior().onColumnWidthChanged(a);this.__bInProgress=false},_onvisibilitychanged:function(a){if(this.__bInProgress||!this.__bAppeared){return}this.__bInProgress=true;if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.tableResizeDebug")){this.debug("onvisibilitychanged")}}this.getBehavior().onVisibilityChanged(a);this.__bInProgress=false}},destruct:function(){this.__table=null}});qx.Class.define("qx.bom.String",{statics:{TO_CHARCODE:{quot:34,amp:38,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,fnof:402,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,bull:8226,hellip:8230,prime:8242,Prime:8243,oline:8254,frasl:8260,weierp:8472,image:8465,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,circ:710,tilde:732,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,permil:8240,lsaquo:8249,rsaquo:8250,euro:8364},escape:function(a){return qx.util.StringEscape.escape(a,qx.bom.String.FROM_CHARCODE)},unescape:function(a){return qx.util.StringEscape.unescape(a,qx.bom.String.TO_CHARCODE)},fromText:function(a){return qx.bom.String.escape(a).replace(/(  |\n)/g,function(b){var c={"  ":" &nbsp;","\n":"<br>"};return c[b]||b})},toText:function(a){return qx.bom.String.unescape(a.replace(/\s+|<([^>])+>/gi,function(b){if(b.indexOf("<br")===0){return"\n"}else{if(b.length>0&&b.replace(/^\s*/,"").replace(/\s*$/,"")==""){return" "}else{return""}}}))}},defer:function(a){a.FROM_CHARCODE=qx.lang.Object.invert(a.TO_CHARCODE)}});qx.Class.define("qx.util.StringEscape",{statics:{escape:function(h,d){var c,a="";for(var e=0,b=h.length;e<b;e++){var f=h.charAt(e);var g=f.charCodeAt(0);if(d[g]){c="&"+d[g]+";"}else{if(g>127){c="&#"+g+";"}else{c=f}}a+=c}return a},unescape:function(b,a){return b.replace(/&[#\w]+;/gi,function(c){var d=c;var c=c.substring(1,c.length-1);var e=a[c];if(e){d=String.fromCharCode(e)}else{if(c.charAt(0)=="#"){if(c.charAt(1).toUpperCase()=="X"){e=c.substring(2);if(e.match(/^[0-9A-Fa-f]+$/gi)){d=String.fromCharCode(parseInt(e,16))}}else{e=c.substring(1);if(e.match(/^\d+$/gi)){d=String.fromCharCode(parseInt(e,10))}}}}return d})}}});qx.Class.define("qx.util.format.DateFormat",{extend:qx.core.Object,implement:qx.util.format.IFormat,construct:function(b,a){this.base(arguments);if(!a){this.__locale=qx.locale.Manager.getInstance().getLocale()}else{this.__locale=a}if(b!=null){this.__format=b.toString()}else{this.__format=qx.locale.Date.getDateFormat("long",this.__locale)+" "+qx.locale.Date.getDateTimeFormat("HHmmss","HH:mm:ss",this.__locale)}},statics:{getDateTimeInstance:function(){var a=qx.util.format.DateFormat;var b=qx.locale.Date.getDateFormat("long")+" "+qx.locale.Date.getDateTimeFormat("HHmmss","HH:mm:ss");if(a._dateInstance==null||a._dateInstance.__format!=b){a._dateTimeInstance=new a()}return a._dateTimeInstance},getDateInstance:function(){var a=qx.util.format.DateFormat;var b=qx.locale.Date.getDateFormat("short")+"";if(a._dateInstance==null||a._dateInstance.__format!=b){a._dateInstance=new a(b)}return a._dateInstance},ASSUME_YEAR_2000_THRESHOLD:30,LOGGING_DATE_TIME__format:"yyyy-MM-dd HH:mm:ss",AM_MARKER:"am",PM_MARKER:"pm"},members:{__locale:null,__format:null,__parseFeed:null,__parseRules:null,__formatTree:null,__fillNumber:function(a,b){var c=""+(a<0?((-1)*a):a);while(c.length<b){c="0"+c}return a<0?"-"+c:c},__getDayInYear:function(b){var c=new Date(b.getTime());var a=c.getDate();while(c.getMonth()!=0){c.setDate(-1);a+=c.getDate()+1}return a},__thursdayOfSameWeek:function(a){return new Date(a.getTime()+(3-((a.getDay()+6)%7))*86400000)},__getWeekInYear:function(a){var d=this.__thursdayOfSameWeek(a);var b=d.getFullYear();var c=this.__thursdayOfSameWeek(new Date(b,0,4));return Math.floor(1.5+(d.getTime()-c.getTime())/86400000/7)},__getWeekInMonth:function(a){var c=this.__thursdayOfSameWeek(a);var b=this.__thursdayOfSameWeek(new Date(a.getFullYear(),a.getMonth(),4));return Math.floor(1.5+(c.getTime()-b.getTime())/86400000/7)},__getWeekYear:function(a){var b=this.__thursdayOfSameWeek(a);return b.getFullYear()},__isLeapYear:function(a){var b=new Date(a,2,1);b.setDate(-1);return b.getDate()+1===29},__getMonthAndDayFromDayOfYear:function(c,f){var g=0;var b=0;if(!f){f=1971}var a=0;for(var e=1;e<=12;e++){var d=new Date(f,e,1);d.setDate(-1);var h=d.getDate()+1;a+=h;if(a<c){g++;b+=h}else{b=c-(a-h);break}}return{month:g,day:b}},__getYearFromWeekYearAndMonth:function(a,d,c){var b;switch(d){case 11:b=a-1;if(a!=this.__getWeekYear(new Date(b,d,c))){b=a}break;case 0:b=a+1;if(a!=this.__getWeekYear(new Date(b,d,c))){b=a}break;default:b=a}return b},format:function(w){if(w==null){return null}var t=this.__locale;var h=w.getFullYear();var x=w.getMonth();var l=w.getDate();var o=w.getDay();var v=w.getHours();var r=w.getMinutes();var k=w.getSeconds();var p=w.getMilliseconds();var f=w.getTimezoneOffset();var z=f>0?1:-1;var c=Math.floor(Math.abs(f)/60);var a=Math.abs(f)%60;this.__initFormatTree();var e="";for(var u=0;u<this.__formatTree.length;u++){var m=this.__formatTree[u];if(m.type=="literal"){e+=m.text}else{var d=m.character;var b=m.size;var q="?";switch(d){case"y":if(b==2){q=this.__fillNumber(h%100,2)}else{var g=Math.abs(h);q=g+"";if(b>q.length){for(var s=q.length;s<b;s++){q="0"+q}}if(h<0){q="-"+q}}break;case"Y":q=this.__getWeekYear(w)+"";var g=q.replace("-","");if(b>q.length){for(var s=g.length;s<b;s++){g="0"+g}}q=q.indexOf("-")!=-1?"-"+g:g;break;case"G":if(b>=1&&b<=3){q=h>0?"AD":"BC"}else{if(b==4){q=h>0?"Anno Domini":"Before Christ"}else{if(b==5){q=h>0?"A":"B"}}}break;case"Q":if(b==1||b==2){q=this.__fillNumber(parseInt(x/4)+1,b)}if(b==3){q="Q"+(parseInt(x/4)+1)}break;case"q":if(b==1||b==2){q=this.__fillNumber(parseInt(x/4)+1,b)}if(b==3){q="Q"+(parseInt(x/4)+1)}break;case"D":q=this.__fillNumber(this.__getDayInYear(w),b);break;case"d":q=this.__fillNumber(l,b);break;case"w":q=this.__fillNumber(this.__getWeekInYear(w),b);break;case"W":q=this.__getWeekInMonth(w);break;case"E":if(b>=1&&b<=3){q=qx.locale.Date.getDayName("abbreviated",o,t,"format")}else{if(b==4){q=qx.locale.Date.getDayName("wide",o,t,"format")}else{if(b==5){q=qx.locale.Date.getDayName("narrow",o,t,"stand-alone")}}}break;case"e":var y=qx.locale.Date.getWeekStart(t);var n=o+(1-y>=0?1-y:7+(1-y));if(b>=1&&b<=2){q=this.__fillNumber(n,b)}else{if(b==3){q=qx.locale.Date.getDayName("abbreviated",n,t,"format")}else{if(b==4){q=qx.locale.Date.getDayName("wide",n,t,"format")}else{if(b==5){q=qx.locale.Date.getDayName("narrow",n,t,"stand-alone")}}}}break;case"c":var y=qx.locale.Date.getWeekStart(t);var n=o+(1-y>=0?1-y:7+(1-y));if(b==1){q=""+n}else{if(b==3){q=qx.locale.Date.getDayName("abbreviated",n,t,"format")}else{if(b==4){q=qx.locale.Date.getDayName("wide",n,t,"format")}else{if(b==5){q=qx.locale.Date.getDayName("narrow",n,t,"stand-alone")}}}}break;case"M":if(b==1||b==2){q=this.__fillNumber(x+1,b)}else{if(b==3){q=qx.locale.Date.getMonthName("abbreviated",x,t,"format")}else{if(b==4){q=qx.locale.Date.getMonthName("wide",x,t,"format")}else{if(b==5){q=qx.locale.Date.getMonthName("narrow",x,t,"stand-alone")}}}}break;case"L":if(b==1||b==2){q=this.__fillNumber(x+1,b)}else{if(b==3){q=qx.locale.Date.getMonthName("abbreviated",x,t,"format")}else{if(b==4){q=qx.locale.Date.getMonthName("wide",x,t,"format")}else{if(b==5){q=qx.locale.Date.getMonthName("narrow",x,t,"stand-alone")}}}}break;case"a":q=(v<12)?qx.locale.Date.getAmMarker(t):qx.locale.Date.getPmMarker(t);break;case"H":q=this.__fillNumber(v,b);break;case"k":q=this.__fillNumber((v==0)?24:v,b);break;case"K":q=this.__fillNumber(v%12,b);break;case"h":q=this.__fillNumber(((v%12)==0)?12:(v%12),b);break;case"m":q=this.__fillNumber(r,b);break;case"s":q=this.__fillNumber(k,b);break;case"S":q=p+"";if(b<=q.length){q=q.substr(0,b)}else{for(var s=q.length;s<b;s++){q=q+"0"}}break;case"z":if(b>=1&&b<=4){q="GMT"+((z>0)?"-":"+")+this.__fillNumber(Math.abs(c),2)+":"+this.__fillNumber(a,2)}break;case"Z":if(b>=1&&b<=3){q=((z>0)?"-":"+")+this.__fillNumber(Math.abs(c),2)+this.__fillNumber(a,2)}else{q="GMT"+((z>0)?"-":"+")+this.__fillNumber(Math.abs(c),2)+":"+this.__fillNumber(a,2)}break}e+=q}}return e},parse:function(f){this.__initParseFeed();var b=this.__parseFeed.regex.exec(f);if(b==null){throw new Error("Date string '"+f+"' does not match the date format: "+this.__format)}var c={era:1,year:1970,quarter:1,month:0,day:1,dayOfYear:1,hour:0,ispm:false,weekDay:4,weekYear:1970,weekOfMonth:1,weekOfYear:1,min:0,sec:0,ms:0};var h=1;var p=false;var m=false;for(var l=0;l<this.__parseFeed.usedRules.length;l++){var n=this.__parseFeed.usedRules[l];var o=b[h];if(n.field!=null){c[n.field]=parseInt(o,10)}else{n.manipulator(c,o)}if(n.pattern=="Y+"){var a=false;for(var g=0;g<this.__parseFeed.usedRules.length;g++){if(this.__parseFeed.usedRules[g].pattern=="y+"){a=true;break}}if(!a){p=true}}if(n.pattern.indexOf("D")!=-1){var j=false;for(var g=0;g<this.__parseFeed.usedRules.length;g++){if(this.__parseFeed.usedRules[g].pattern.indexOf("d")!=-1){j=true;break}}if(!j){m=true}}h+=(n.groups==null)?1:n.groups}if(p){c.year=this.__getYearFromWeekYearAndMonth(c.weekYear,c.month,c.day)}if(m){var d=this.__getMonthAndDayFromDayOfYear(c.dayOfYear,c.year);c.month=d.month;c.day=d.day}if(c.era<0&&(c.year*c.era<0)){c.year=c.year*c.era}var e=new Date(c.year,c.month,c.day,(c.ispm)?(c.hour+12):c.hour,c.min,c.sec,c.ms);if(c.month!=e.getMonth()||c.year!=e.getFullYear()){throw new Error("Error parsing date '"+f+"': the value for day or month is too large")}return e},__initFormatTree:function(){if(this.__formatTree!=null){return}this.__formatTree=[];var d;var c=0;var g="";var f=this.__format;var e="default";var b=0;while(b<f.length){var h=f.charAt(b);switch(e){case"quoted_literal":if(h=="'"){if(b+1>=f.length){b++;break}var a=f.charAt(b+1);if(a=="'"){g+=h;b++}else{b++;e="unkown"}}else{g+=h;b++}break;case"wildcard":if(h==d){c++;b++}else{this.__formatTree.push({type:"wildcard",character:d,size:c});d=null;c=0;e="default"}break;default:if((h>="a"&&h<="z")||(h>="A"&&h<="Z")){d=h;e="wildcard"}else{if(h=="'"){if(b+1>=f.length){g+=h;b++;break}var a=f.charAt(b+1);if(a=="'"){g+=h;b++}b++;e="quoted_literal"}else{e="default"}}if(e!="default"){if(g.length>0){this.__formatTree.push({type:"literal",text:g});g=""}}else{g+=h;b++}break}}if(d!=null){this.__formatTree.push({type:"wildcard",character:d,size:c})}else{if(g.length>0){this.__formatTree.push({type:"literal",text:g})}}},__initParseFeed:function(){if(this.__parseFeed!=null){return}var k=this.__format;this.__initParseRules();this.__initFormatTree();var o=[];var d="^";for(var m=0;m<this.__formatTree.length;m++){var f=this.__formatTree[m];if(f.type=="literal"){d+=qx.lang.String.escapeRegexpChars(f.text)}else{var b=f.character;var a=f.size;var h;for(var j=0;j<this.__parseRules.length;j++){var e=this.__parseRules[j];if(this.__isRuleForWildcard(e,b,a)){h=e;break}}if(h==null){var n="";for(var c=0;c<a;c++){n+=b}throw new Error("Malformed date format: "+k+". Wildcard "+n+" is not supported")}else{o.push(h);d+=h.regex}}}d+="$";var g;try{g=new RegExp(d)}catch(l){throw new Error("Malformed date format: "+k)}this.__parseFeed={regex:g,usedRules:o,pattern:d}},__isRuleForWildcard:function(c,b,a){if(b==="y"&&c.pattern==="y+"){c.regex=c.regexFunc(a);return true}else{if(b==="Y"&&c.pattern==="Y+"){c.regex=c.regexFunc(a);return true}else{return b==c.pattern.charAt(0)&&a==c.pattern.length}}},__initParseRules:function(){var D=qx.util.format.DateFormat;var I=qx.lang.String;if(this.__parseRules!=null){return}var c=this.__parseRules=[];var j=qx.locale.Date.getAmMarker(this.__locale).toString()||D.AM_MARKER;var r=qx.locale.Date.getPmMarker(this.__locale).toString()||D.PM_MARKER;var q=this.__locale;var L=function(i,M){M=parseInt(M,10);if(M>0){if(M<D.ASSUME_YEAR_2000_THRESHOLD){M+=2000}else{if(M<100){M+=1900}}}i.year=M};var A=function(i,M){M=parseInt(M,10);if(M>0){if(M<D.ASSUME_YEAR_2000_THRESHOLD){M+=2000}else{if(M<100){M+=1900}}}i.weekYear=M};var b=function(i,M){i.month=parseInt(M,10)-1};var K=function(N,O){var i=qx.locale.Date.getWeekStart(q);var M=(1-i>=0?1-i:7+(1-i))-O;N.weekDay=M};var J=function(M,N){var i=qx.locale.Date.getPmMarker(q).toString()||D.PM_MARKER;M.ispm=(N==i)};var h=function(i,M){i.hour=parseInt(M,10)%24};var a=function(i,M){i.hour=parseInt(M,10)%12};var g=function(i,M){return};var u=["A","B"];var f=function(i,M){i.era=M=="A"?1:-1};var z=["AD","BC"];var t=function(i,M){i.era=M=="AD"?1:-1};var G=["Anno Domini","Before Christ"];var B=function(i,M){i.era=M=="Anno Domini"?1:-1};var m=["Q1","Q2","Q3","Q4"];var s=function(i,M){i.quarter=m.indexOf(M)};var n=["1st quarter","2nd quarter","3rd quarter","4th quarter"];var y=function(i,M){i.quarter=n.indexOf(M)};var v=qx.locale.Date.getMonthNames("abbreviated",q,"format");for(var F=0;F<v.length;F++){v[F]=I.escapeRegexpChars(v[F].toString())}var x=function(i,M){M=I.escapeRegexpChars(M);i.month=v.indexOf(M)};var k=qx.locale.Date.getMonthNames("wide",q,"format");for(var F=0;F<k.length;F++){k[F]=I.escapeRegexpChars(k[F].toString())}var e=function(i,M){M=I.escapeRegexpChars(M);i.month=k.indexOf(M)};var p=qx.locale.Date.getMonthNames("narrow",q,"stand-alone");for(var F=0;F<p.length;F++){p[F]=I.escapeRegexpChars(p[F].toString())}var C=function(i,M){M=I.escapeRegexpChars(M);i.month=p.indexOf(M)};var E=qx.locale.Date.getDayNames("narrow",q,"stand-alone");for(var F=0;F<E.length;F++){E[F]=I.escapeRegexpChars(E[F].toString())}var l=function(i,M){M=I.escapeRegexpChars(M);i.weekDay=E.indexOf(M)};var w=qx.locale.Date.getDayNames("abbreviated",q,"format");for(var F=0;F<w.length;F++){w[F]=I.escapeRegexpChars(w[F].toString())}var H=function(i,M){M=I.escapeRegexpChars(M);i.weekDay=w.indexOf(M)};var d=qx.locale.Date.getDayNames("wide",q,"format");for(var F=0;F<d.length;F++){d[F]=I.escapeRegexpChars(d[F].toString())}var o=function(i,M){M=I.escapeRegexpChars(M);i.weekDay=d.indexOf(M)};c.push({pattern:"y+",regexFunc:function(O){var N="(-*";for(var M=0;M<O;M++){N+="\\d";if(M===O-1&&M!==1){N+="+?"}}N+=")";return N},manipulator:L});c.push({pattern:"Y+",regexFunc:function(O){var N="(-*";for(var M=0;M<O;M++){N+="\\d";if(M===O-1){N+="+?"}}N+=")";return N},manipulator:A});c.push({pattern:"G",regex:"("+z.join("|")+")",manipulator:t});c.push({pattern:"GG",regex:"("+z.join("|")+")",manipulator:t});c.push({pattern:"GGG",regex:"("+z.join("|")+")",manipulator:t});c.push({pattern:"GGGG",regex:"("+G.join("|")+")",manipulator:B});c.push({pattern:"GGGGG",regex:"("+u.join("|")+")",manipulator:f});c.push({pattern:"Q",regex:"(\\d\\d*?)",field:"quarter"});c.push({pattern:"QQ",regex:"(\\d\\d?)",field:"quarter"});c.push({pattern:"QQQ",regex:"("+m.join("|")+")",manipulator:s});c.push({pattern:"QQQQ",regex:"("+n.join("|")+")",manipulator:y});c.push({pattern:"q",regex:"(\\d\\d*?)",field:"quarter"});c.push({pattern:"qq",regex:"(\\d\\d?)",field:"quarter"});c.push({pattern:"qqq",regex:"("+m.join("|")+")",manipulator:s});c.push({pattern:"qqqq",regex:"("+n.join("|")+")",manipulator:y});c.push({pattern:"M",regex:"(\\d\\d*?)",manipulator:b});c.push({pattern:"MM",regex:"(\\d\\d?)",manipulator:b});c.push({pattern:"MMM",regex:"("+v.join("|")+")",manipulator:x});c.push({pattern:"MMMM",regex:"("+k.join("|")+")",manipulator:e});c.push({pattern:"MMMMM",regex:"("+p.join("|")+")",manipulator:C});c.push({pattern:"L",regex:"(\\d\\d*?)",manipulator:b});c.push({pattern:"LL",regex:"(\\d\\d?)",manipulator:b});c.push({pattern:"LLL",regex:"("+v.join("|")+")",manipulator:x});c.push({pattern:"LLLL",regex:"("+k.join("|")+")",manipulator:e});c.push({pattern:"LLLLL",regex:"("+p.join("|")+")",manipulator:C});c.push({pattern:"dd",regex:"(\\d\\d?)",field:"day"});c.push({pattern:"d",regex:"(\\d\\d*?)",field:"day"});c.push({pattern:"D",regex:"(\\d?)",field:"dayOfYear"});c.push({pattern:"DD",regex:"(\\d\\d?)",field:"dayOfYear"});c.push({pattern:"DDD",regex:"(\\d\\d\\d?)",field:"dayOfYear"});c.push({pattern:"E",regex:"("+w.join("|")+")",manipulator:H});c.push({pattern:"EE",regex:"("+w.join("|")+")",manipulator:H});c.push({pattern:"EEE",regex:"("+w.join("|")+")",manipulator:H});c.push({pattern:"EEEE",regex:"("+d.join("|")+")",manipulator:o});c.push({pattern:"EEEEE",regex:"("+E.join("|")+")",manipulator:l});c.push({pattern:"e",regex:"(\\d?)",manipulator:K});c.push({pattern:"ee",regex:"(\\d\\d?)",manipulator:K});c.push({pattern:"eee",regex:"("+w.join("|")+")",manipulator:H});c.push({pattern:"eeee",regex:"("+d.join("|")+")",manipulator:o});c.push({pattern:"eeeee",regex:"("+E.join("|")+")",manipulator:l});c.push({pattern:"c",regex:"\\d?",manipulator:K});c.push({pattern:"ccc",regex:"("+w.join("|")+")",manipulator:H});c.push({pattern:"cccc",regex:"("+d.join("|")+")",manipulator:o});c.push({pattern:"ccccc",regex:"("+E.join("|")+")",manipulator:l});c.push({pattern:"a",regex:"("+j+"|"+r+")",manipulator:J});c.push({pattern:"W",regex:"(\\d?)",field:"weekOfMonth"});c.push({pattern:"w",regex:"(\\d?)",field:"weekOfYear"});c.push({pattern:"ww",regex:"(\\d\\d?)",field:"weekOfYear"});c.push({pattern:"HH",regex:"(\\d\\d?)",field:"hour"});c.push({pattern:"H",regex:"(\\d\\d?)",field:"hour"});c.push({pattern:"kk",regex:"(\\d\\d?)",manipulator:h});c.push({pattern:"k",regex:"(\\d\\d?)",manipulator:h});c.push({pattern:"KK",regex:"(\\d\\d?)",field:"hour"});c.push({pattern:"K",regex:"(\\d\\d?)",field:"hour"});c.push({pattern:"hh",regex:"(\\d\\d?)",manipulator:a});c.push({pattern:"h",regex:"(\\d\\d?)",manipulator:a});c.push({pattern:"mm",regex:"(\\d\\d?)",field:"min"});c.push({pattern:"m",regex:"(\\d\\d?)",field:"min"});c.push({pattern:"ss",regex:"(\\d\\d?)",field:"sec"});c.push({pattern:"s",regex:"(\\d\\d?)",field:"sec"});c.push({pattern:"SSS",regex:"(\\d\\d?\\d?)",field:"ms"});c.push({pattern:"SS",regex:"(\\d\\d?\\d?)",field:"ms"});c.push({pattern:"S",regex:"(\\d\\d?\\d?)",field:"ms"});c.push({pattern:"Z",regex:"([\\+\\-]\\d\\d\\d\\d)",manipulator:g});c.push({pattern:"z",regex:"(GMT[\\+\\-]\\d\\d:\\d\\d)",manipulator:g})}},destruct:function(){this.__formatTree=this.__parseFeed=this.__parseRules=null}});qx.Class.define("qx.locale.Date",{statics:{__mgr:qx.locale.Manager.getInstance(),getAmMarker:function(a){return this.__mgr.localize("cldr_am",[],a)},getPmMarker:function(a){return this.__mgr.localize("cldr_pm",[],a)},getDayNames:function(e,a,d){var d=d?d:"format";if(qx.core.Environment.get("qx.debug")){qx.core.Assert.assertInArray(e,["abbreviated","narrow","wide"]);qx.core.Assert.assertInArray(d,["format","stand-alone"])}var g=["sun","mon","tue","wed","thu","fri","sat"];var f=[];for(var c=0;c<g.length;c++){var b="cldr_day_"+d+"_"+e+"_"+g[c];f.push(this.__mgr.localize(b,[],a))}return f},getDayName:function(e,b,a,d){var d=d?d:"format";if(qx.core.Environment.get("qx.debug")){qx.core.Assert.assertInArray(e,["abbreviated","narrow","wide"]);qx.core.Assert.assertInteger(b);qx.core.Assert.assertInRange(b,0,6);qx.core.Assert.assertInArray(d,["format","stand-alone"])}var f=["sun","mon","tue","wed","thu","fri","sat"];var c="cldr_day_"+d+"_"+e+"_"+f[b];return this.__mgr.localize(c,[],a)},getMonthNames:function(e,a,d){var d=d?d:"format";if(qx.core.Environment.get("qx.debug")){qx.core.Assert.assertInArray(e,["abbreviated","narrow","wide"]);qx.core.Assert.assertInArray(d,["format","stand-alone"])}var f=[];for(var c=0;c<12;c++){var b="cldr_month_"+d+"_"+e+"_"+(c+1);f.push(this.__mgr.localize(b,[],a))}return f},getMonthName:function(d,e,a,c){var c=c?c:"format";if(qx.core.Environment.get("qx.debug")){qx.core.Assert.assertInArray(d,["abbreviated","narrow","wide"]);qx.core.Assert.assertInArray(c,["format","stand-alone"])}var b="cldr_month_"+c+"_"+d+"_"+(e+1);return this.__mgr.localize(b,[],a)},getDateFormat:function(c,a){if(qx.core.Environment.get("qx.debug")){qx.core.Assert.assertInArray(c,["short","medium","long","full"])}var b="cldr_date_format_"+c;return this.__mgr.localize(b,[],a)},getDateTimeFormat:function(b,e,a){var c="cldr_date_time_format_"+b;var d=this.__mgr.localize(c,[],a);if(d==c){d=e}return d},getTimeFormat:function(c,a){if(qx.core.Environment.get("qx.debug")){qx.core.Assert.assertInArray(c,["short","medium","long","full"])}var b="cldr_time_format_"+c;var d=this.__mgr.localize(b,[],a);if(d!=b){return d}switch(c){case"short":case"medium":return qx.locale.Date.getDateTimeFormat("HHmm","HH:mm");case"long":return qx.locale.Date.getDateTimeFormat("HHmmss","HH:mm:ss");case"full":return qx.locale.Date.getDateTimeFormat("HHmmsszz","HH:mm:ss zz");default:throw new Error("This case should never happen.")}},getWeekStart:function(a){var b={MV:5,AE:6,AF:6,BH:6,DJ:6,DZ:6,EG:6,ER:6,ET:6,IQ:6,IR:6,JO:6,KE:6,KW:6,LB:6,LY:6,MA:6,OM:6,QA:6,SA:6,SD:6,SO:6,TN:6,YE:6,AS:0,AU:0,AZ:0,BW:0,CA:0,CN:0,FO:0,GE:0,GL:0,GU:0,HK:0,IE:0,IL:0,IS:0,JM:0,JP:0,KG:0,KR:0,LA:0,MH:0,MN:0,MO:0,MP:0,MT:0,NZ:0,PH:0,PK:0,SG:0,TH:0,TT:0,TW:0,UM:0,US:0,UZ:0,VI:0,ZA:0,ZW:0,MW:0,NG:0,TJ:0};var c=qx.locale.Date._getTerritory(a);return b[c]!=null?b[c]:1},getWeekendStart:function(a){var b={EG:5,IL:5,SY:5,IN:0,AE:4,BH:4,DZ:4,IQ:4,JO:4,KW:4,LB:4,LY:4,MA:4,OM:4,QA:4,SA:4,SD:4,TN:4,YE:4};var c=qx.locale.Date._getTerritory(a);return b[c]!=null?b[c]:6},getWeekendEnd:function(b){var a={AE:5,BH:5,DZ:5,IQ:5,JO:5,KW:5,LB:5,LY:5,MA:5,OM:5,QA:5,SA:5,SD:5,TN:5,YE:5,AF:5,IR:5,EG:6,IL:6,SY:6};var c=qx.locale.Date._getTerritory(b);return a[c]!=null?a[c]:0},isWeekend:function(c,b){var d=qx.locale.Date.getWeekendStart(b);var a=qx.locale.Date.getWeekendEnd(b);if(a>d){return((c>=d)&&(c<=a))}else{return((c>=d)||(c<=a))}},_getTerritory:function(a){if(a){var b=a.split("_")[1]||a}else{b=this.__mgr.getTerritory()||this.__mgr.getLanguage()}return b.toUpperCase()}}});qx.Mixin.define("qx.ui.form.MForm",{construct:function(){if(qx.core.Environment.get("qx.dynlocale")){qx.locale.Manager.getInstance().addListener("changeLocale",this.__onChangeLocale,this)}},properties:{valid:{check:"Boolean",init:true,apply:"_applyValid",event:"changeValid"},required:{check:"Boolean",init:false,event:"changeRequired"},invalidMessage:{check:"String",init:"",event:"changeInvalidMessage"},requiredInvalidMessage:{check:"String",nullable:true,event:"changeInvalidMessage"}},members:{_applyValid:function(b,a){b?this.removeState("invalid"):this.addState("invalid")},__onChangeLocale:qx.core.Environment.select("qx.dynlocale",{"true":function(c){var b=this.getInvalidMessage();if(b&&b.translate){this.setInvalidMessage(b.translate())}var a=this.getRequiredInvalidMessage();if(a&&a.translate){this.setRequiredInvalidMessage(a.translate())}},"false":null})},destruct:function(){if(qx.core.Environment.get("qx.dynlocale")){qx.locale.Manager.getInstance().removeListener("changeLocale",this.__onChangeLocale,this)}}});qx.Class.define("qx.ui.form.AbstractField",{extend:qx.ui.core.Widget,implement:[qx.ui.form.IStringForm,qx.ui.form.IForm],include:[qx.ui.form.MForm],type:"abstract",construct:function(a){this.base(arguments);this.__useQxPlaceholder=!qx.core.Environment.get("css.placeholder")||(qx.core.Environment.get("engine.name")=="gecko"&&parseFloat(qx.core.Environment.get("engine.version"))>=2);if(a!=null){this.setValue(a)}this.getContentElement().addListener("change",this._onChangeContent,this);if(this.__useQxPlaceholder){this.addListener("syncAppearance",this._syncPlaceholder,this)}if(qx.core.Environment.get("qx.dynlocale")){qx.locale.Manager.getInstance().addListener("changeLocale",this._onChangeLocale,this)}},events:{input:"qx.event.type.Data",changeValue:"qx.event.type.Data"},properties:{textAlign:{check:["left","center","right"],nullable:true,themeable:true,apply:"_applyTextAlign"},readOnly:{check:"Boolean",apply:"_applyReadOnly",event:"changeReadOnly",init:false},selectable:{refine:true,init:true},focusable:{refine:true,init:true},maxLength:{check:"PositiveInteger",init:Infinity},liveUpdate:{check:"Boolean",init:false},placeholder:{check:"String",nullable:true,apply:"_applyPlaceholder"},filter:{check:"RegExp",nullable:true,init:null}},members:{__nullValue:true,__placeholder:null,__oldValue:null,__oldInputValue:null,__useQxPlaceholder:true,getFocusElement:function(){var a=this.getContentElement();if(a){return a}},_createInputElement:function(){return new qx.html.Input("text")},renderLayout:function(e,h,b,k){var g=this._updateInsets;var j=this.base(arguments,e,h,b,k);if(!j){return}var l=j.size||g;var c="px";if(l||j.local||j.margin){var d=this.getInsets();var f=b-d.left-d.right;var a=k-d.top-d.bottom;f=f<0?0:f;a=a<0?0:a}var i=this.getContentElement();if(g&&this.__useQxPlaceholder){this.__getPlaceholderElement().setStyles({left:d.left+c,top:d.top+c})}if(l){if(this.__useQxPlaceholder){this.__getPlaceholderElement().setStyles({width:f+c,height:a+c})}i.setStyles({width:f+c,height:a+c});this._renderContentElement(a,i)}},_renderContentElement:function(b,a){},_createContentElement:function(){var a=this._createInputElement();a.setStyles({border:"none",padding:0,margin:0,display:"block",background:"transparent",outline:"none",appearance:"none",position:"absolute",autoComplete:"off"});a.setSelectable(this.getSelectable());a.setEnabled(this.getEnabled());a.addListener("input",this._onHtmlInput,this);a.setAttribute("spellcheck","false");if(qx.core.Environment.get("engine.name")=="webkit"||qx.core.Environment.get("engine.name")=="gecko"){a.setStyle("resize","none")}if((qx.core.Environment.get("engine.name")=="mshtml")){a.setStyles({backgroundImage:"url("+qx.util.ResourceManager.getInstance().toUri("qx/static/blank.gif")+")"})}return a},_applyEnabled:function(c,a){this.base(arguments,c,a);this.getContentElement().setEnabled(c);if(this.__useQxPlaceholder){if(c){this._showPlaceholder()}else{this._removePlaceholder()}}else{var b=this.getContentElement();b.setAttribute("placeholder",c?this.getPlaceholder():"")}},__textSize:{width:16,height:16},_getContentHint:function(){return{width:this.__textSize.width*10,height:this.__textSize.height||16}},_applyFont:function(d,a){var c;if(d){var b=qx.theme.manager.Font.getInstance().resolve(d);c=b.getStyles()}else{c=qx.bom.Font.getDefaultStyles()}this.getContentElement().setStyles(c);if(this.__useQxPlaceholder){this.__getPlaceholderElement().setStyles(c)}if(d){this.__textSize=qx.bom.Label.getTextSize("A",c)}else{delete this.__textSize}qx.ui.core.queue.Layout.add(this)},_applyTextColor:function(b,a){if(b){this.getContentElement().setStyle("color",qx.theme.manager.Color.getInstance().resolve(b))}else{this.getContentElement().removeStyle("color")}},tabFocus:function(){this.base(arguments);this.selectAllText()},_getTextSize:function(){return this.__textSize},_onHtmlInput:function(g){var f=g.getData();var d=true;this.__nullValue=false;if(this.getFilter()!=null){var b="";var c=f.search(this.getFilter());var a=f;while(c>=0){b=b+(a.charAt(c));a=a.substring(c+1,a.length);c=a.search(this.getFilter())}if(b!=f){d=false;f=b;this.getContentElement().setValue(f)}}if(f.length>this.getMaxLength()){d=false;this.getContentElement().setValue(f.substr(0,this.getMaxLength()))}if(d){this.fireDataEvent("input",f,this.__oldInputValue);this.__oldInputValue=f;if(this.getLiveUpdate()){this.__fireChangeValueEvent(f)}}},__fireChangeValueEvent:function(b){var a=this.__oldValue;this.__oldValue=b;if(a!=b){this.fireNonBubblingEvent("changeValue",qx.event.type.Data,[b,a])}},setValue:function(d){if(d===null){if(this.__nullValue){return d}d="";this.__nullValue=true}else{this.__nullValue=false;if(this.__useQxPlaceholder){this._removePlaceholder()}}if(qx.lang.Type.isString(d)){var b=this.getContentElement();if(d.length>this.getMaxLength()){d=d.substr(0,this.getMaxLength())}if(b.getValue()!=d){var a=b.getValue();b.setValue(d);var c=this.__nullValue?null:d;this.__oldValue=a;this.__fireChangeValueEvent(c)}if(this.__useQxPlaceholder){this._showPlaceholder()}return d}throw new Error("Invalid value type: "+d)},getValue:function(){var a=this.getContentElement().getValue();return this.__nullValue?null:a},resetValue:function(){this.setValue(null)},_onChangeContent:function(a){this.__nullValue=a.getData()===null;this.__fireChangeValueEvent(a.getData())},getTextSelection:function(){return this.getContentElement().getTextSelection()},getTextSelectionLength:function(){return this.getContentElement().getTextSelectionLength()},getTextSelectionStart:function(){return this.getContentElement().getTextSelectionStart()},getTextSelectionEnd:function(){return this.getContentElement().getTextSelectionEnd()},setTextSelection:function(b,a){this.getContentElement().setTextSelection(b,a)},clearTextSelection:function(){this.getContentElement().clearTextSelection()},selectAllText:function(){this.setTextSelection(0)},_showPlaceholder:function(){var a=this.getValue()||"";var b=this.getPlaceholder();if(b!=null&&a==""&&!this.hasState("focused")&&!this.hasState("disabled")){if(this.hasState("showingPlaceholder")){this._syncPlaceholder()}else{this.addState("showingPlaceholder")}}},_removePlaceholder:function(){if(this.hasState("showingPlaceholder")){this.__getPlaceholderElement().setStyle("visibility","hidden");this.removeState("showingPlaceholder")}},_syncPlaceholder:function(){if(this.hasState("showingPlaceholder")){this.__getPlaceholderElement().setStyle("visibility","visible")}},__getPlaceholderElement:function(){if(this.__placeholder==null){this.__placeholder=new qx.html.Label();var a=qx.theme.manager.Color.getInstance();this.__placeholder.setStyles({visibility:"hidden",zIndex:6,position:"absolute",color:a.resolve("text-placeholder")});this.getContainerElement().add(this.__placeholder)}return this.__placeholder},_onChangeLocale:qx.core.Environment.select("qx.dynlocale",{"true":function(b){var a=this.getPlaceholder();if(a&&a.translate){this.setPlaceholder(a.translate())}},"false":null}),_applyPlaceholder:function(b,a){if(this.__useQxPlaceholder){this.__getPlaceholderElement().setValue(b);if(b!=null){this.addListener("focusin",this._removePlaceholder,this);this.addListener("focusout",this._showPlaceholder,this);this._showPlaceholder()}else{this.removeListener("focusin",this._removePlaceholder,this);this.removeListener("focusout",this._showPlaceholder,this);this._removePlaceholder()}}else{if(this.getEnabled()){this.getContentElement().setAttribute("placeholder",b)}}},_applyTextAlign:function(b,a){this.getContentElement().setStyle("textAlign",b)},_applyReadOnly:function(c,a){var b=this.getContentElement();b.setAttribute("readOnly",c);if(c){this.addState("readonly");this.setFocusable(false)}else{this.removeState("readonly");this.setFocusable(true)}}},destruct:function(){this.__placeholder=null;if(qx.core.Environment.get("qx.dynlocale")){qx.locale.Manager.getInstance().removeListener("changeLocale",this._onChangeLocale,this)}}});qx.Class.define("qx.ui.form.TextField",{extend:qx.ui.form.AbstractField,properties:{appearance:{refine:true,init:"textfield"},allowGrowY:{refine:true,init:false},allowShrinkY:{refine:true,init:false}},members:{_renderContentElement:function(b,a){if((qx.core.Environment.get("engine.name")=="mshtml")&&qx.core.Environment.get("engine.version")<9){a.setStyles({"line-height":b+"px"})}}}});qx.Class.define("qx.html.Input",{extend:qx.html.Element,construct:function(b,c,a){if(b==="select"||b==="textarea"){var d=b}else{d="input"}this.base(arguments,d,c,a);this.__type=b},members:{__type:null,__selectable:null,__enabled:null,_createDomElement:function(){return qx.bom.Input.create(this.__type)},_applyProperty:function(a,c){this.base(arguments,a,c);var b=this.getDomElement();if(a==="value"){qx.bom.Input.setValue(b,c)}else{if(a==="wrap"){qx.bom.Input.setWrap(b,c);this.setStyle("overflow",b.style.overflow,true);this.setStyle("overflowX",b.style.overflowX,true);this.setStyle("overflowY",b.style.overflowY,true)}}},setEnabled:qx.core.Environment.select("engine.name",{webkit:function(a){this.__enabled=a;if(!a){this.setStyles({userModify:"read-only",userSelect:"none"})}else{this.setStyles({userModify:null,userSelect:this.__selectable?null:"none"})}},"default":function(a){this.setAttribute("disabled",a===false)}}),setSelectable:qx.core.Environment.select("engine.name",{webkit:function(a){this.__selectable=a;this.base(arguments,this.__enabled&&a)},"default":function(a){this.base(arguments,a)}}),setValue:function(b){var a=this.getDomElement();if(a){if(a.value!=b){qx.bom.Input.setValue(a,b)}}else{this._setProperty("value",b)}return this},getValue:function(){var a=this.getDomElement();if(a){return qx.bom.Input.getValue(a)}return this._getProperty("value")||""},setWrap:function(a,b){if(this.__type==="textarea"){this._setProperty("wrap",a,b)}else{throw new Error("Text wrapping is only support by textareas!")}return this},getWrap:function(){if(this.__type==="textarea"){return this._getProperty("wrap")}else{throw new Error("Text wrapping is only support by textareas!")}}}});qx.Class.define("qx.event.handler.Input",{extend:qx.core.Object,implement:qx.event.IEventHandler,construct:function(){this.base(arguments);this._onChangeCheckedWrapper=qx.lang.Function.listener(this._onChangeChecked,this);this._onChangeValueWrapper=qx.lang.Function.listener(this._onChangeValue,this);this._onInputWrapper=qx.lang.Function.listener(this._onInput,this);this._onPropertyWrapper=qx.lang.Function.listener(this._onProperty,this);if((qx.core.Environment.get("engine.name")=="opera")){this._onKeyDownWrapper=qx.lang.Function.listener(this._onKeyDown,this);this._onKeyUpWrapper=qx.lang.Function.listener(this._onKeyUp,this);this._onBlurWrapper=qx.lang.Function.listener(this._onBlur,this)}},statics:{PRIORITY:qx.event.Registration.PRIORITY_NORMAL,SUPPORTED_TYPES:{input:1,change:1},TARGET_CHECK:qx.event.IEventHandler.TARGET_DOMNODE,IGNORE_CAN_HANDLE:false},members:{__enter:false,__onInputTimeoutId:null,__oldValue:null,__oldInputValue:null,canHandleEvent:function(c,b){var a=c.tagName.toLowerCase();if(b==="input"&&(a==="input"||a==="textarea")){return true}if(b==="change"&&(a==="input"||a==="textarea"||a==="select")){return true}return false},registerEvent:function(e,d,c){if(qx.core.Environment.get("engine.name")=="mshtml"&&(qx.core.Environment.get("engine.version")<9||(qx.core.Environment.get("engine.version")>=9&&qx.core.Environment.get("browser.documentmode")<9))){if(!e.__inputHandlerAttached){var a=e.tagName.toLowerCase();var b=e.type;if(b==="text"||b==="password"||a==="textarea"||b==="checkbox"||b==="radio"){qx.bom.Event.addNativeListener(e,"propertychange",this._onPropertyWrapper)}if(b!=="checkbox"&&b!=="radio"){qx.bom.Event.addNativeListener(e,"change",this._onChangeValueWrapper)}if(b==="text"||b==="password"){this._onKeyPressWrapped=qx.lang.Function.listener(this._onKeyPress,this,e);qx.bom.Event.addNativeListener(e,"keypress",this._onKeyPressWrapped)}e.__inputHandlerAttached=true}}else{if(d==="input"){this.__registerInputListener(e)}else{if(d==="change"){if(e.type==="radio"||e.type==="checkbox"){qx.bom.Event.addNativeListener(e,"change",this._onChangeCheckedWrapper)}else{qx.bom.Event.addNativeListener(e,"change",this._onChangeValueWrapper)}if((qx.core.Environment.get("engine.name")=="opera")||(qx.core.Environment.get("engine.name")=="mshtml")){if(e.type==="text"||e.type==="password"){this._onKeyPressWrapped=qx.lang.Function.listener(this._onKeyPress,this,e);qx.bom.Event.addNativeListener(e,"keypress",this._onKeyPressWrapped)}}}}}},__registerInputListener:qx.core.Environment.select("engine.name",{mshtml:function(a){if(qx.core.Environment.get("engine.version")>=9&&qx.core.Environment.get("browser.documentmode")>=9){qx.bom.Event.addNativeListener(a,"input",this._onInputWrapper);if(a.type==="text"||a.type==="password"){this._inputFixWrapper=qx.lang.Function.listener(this._inputFix,this,a);qx.bom.Event.addNativeListener(a,"keyup",this._inputFixWrapper)}}},webkit:function(b){var a=b.tagName.toLowerCase();if(parseFloat(qx.core.Environment.get("engine.version"))<532&&a=="textarea"){qx.bom.Event.addNativeListener(b,"keypress",this._onInputWrapper)}qx.bom.Event.addNativeListener(b,"input",this._onInputWrapper)},opera:function(a){qx.bom.Event.addNativeListener(a,"keyup",this._onKeyUpWrapper);qx.bom.Event.addNativeListener(a,"keydown",this._onKeyDownWrapper);qx.bom.Event.addNativeListener(a,"blur",this._onBlurWrapper);qx.bom.Event.addNativeListener(a,"input",this._onInputWrapper)},"default":function(a){qx.bom.Event.addNativeListener(a,"input",this._onInputWrapper)}}),unregisterEvent:function(e,d){if(qx.core.Environment.get("engine.name")=="mshtml"&&qx.core.Environment.get("engine.version")<9&&qx.core.Environment.get("browser.documentmode")<9){if(e.__inputHandlerAttached){var a=e.tagName.toLowerCase();var b=e.type;if(b==="text"||b==="password"||a==="textarea"||b==="checkbox"||b==="radio"){qx.bom.Event.removeNativeListener(e,"propertychange",this._onPropertyWrapper)}if(b!=="checkbox"&&b!=="radio"){qx.bom.Event.removeNativeListener(e,"change",this._onChangeValueWrapper)}if(b==="text"||b==="password"){qx.bom.Event.removeNativeListener(e,"keypress",this._onKeyPressWrapped)}try{delete e.__inputHandlerAttached}catch(c){e.__inputHandlerAttached=null}}}else{if(d==="input"){this.__unregisterInputListener(e)}else{if(d==="change"){if(e.type==="radio"||e.type==="checkbox"){qx.bom.Event.removeNativeListener(e,"change",this._onChangeCheckedWrapper)}else{qx.bom.Event.removeNativeListener(e,"change",this._onChangeValueWrapper)}}}if((qx.core.Environment.get("engine.name")=="opera")||(qx.core.Environment.get("engine.name")=="mshtml")){if(e.type==="text"||e.type==="password"){qx.bom.Event.removeNativeListener(e,"keypress",this._onKeyPressWrapped)}}}},__unregisterInputListener:qx.core.Environment.select("engine.name",{mshtml:function(a){if(qx.core.Environment.get("engine.version")>=9&&qx.core.Environment.get("browser.documentmode")>=9){qx.bom.Event.removeNativeListener(a,"input",this._onInputWrapper);if(a.type==="text"||a.type==="password"){qx.bom.Event.removeNativeListener(a,"keyup",this._inputFixWrapper)}}},webkit:function(b){var a=b.tagName.toLowerCase();if(parseFloat(qx.core.Environment.get("engine.version"))<532&&a=="textarea"){qx.bom.Event.removeNativeListener(b,"keypress",this._onInputWrapper)}qx.bom.Event.removeNativeListener(b,"input",this._onInputWrapper)},opera:function(a){qx.bom.Event.removeNativeListener(a,"keyup",this._onKeyUpWrapper);qx.bom.Event.removeNativeListener(a,"keydown",this._onKeyDownWrapper);qx.bom.Event.removeNativeListener(a,"blur",this._onBlurWrapper);qx.bom.Event.removeNativeListener(a,"input",this._onInputWrapper)},"default":function(a){qx.bom.Event.removeNativeListener(a,"input",this._onInputWrapper)}}),_onKeyPress:qx.core.Environment.select("engine.name",{"mshtml|opera":function(b,a){if(b.keyCode===13){if(a.value!==this.__oldValue){this.__oldValue=a.value;qx.event.Registration.fireEvent(a,"change",qx.event.type.Data,[a.value])}}},"default":null}),_inputFix:qx.core.Environment.select("engine.name",{mshtml:function(b,a){if(b.keyCode===46||b.keyCode===8){if(a.value!==this.__oldInputValue){this.__oldInputValue=a.value;qx.event.Registration.fireEvent(a,"input",qx.event.type.Data,[a.value])}}},"default":null}),_onKeyDown:qx.core.Environment.select("engine.name",{opera:function(a){if(a.keyCode===13){this.__enter=true}},"default":null}),_onKeyUp:qx.core.Environment.select("engine.name",{opera:function(a){if(a.keyCode===13){this.__enter=false}},"default":null}),_onBlur:qx.core.Environment.select("engine.name",{opera:function(a){if(this.__onInputTimeoutId&&qx.core.Environment.get("browser.version")<10.6){window.clearTimeout(this.__onInputTimeoutId)}},"default":null}),_onInput:qx.event.GlobalError.observeMethod(function(c){var b=qx.bom.Event.getTarget(c);var a=b.tagName.toLowerCase();if(!this.__enter||a!=="input"){if((qx.core.Environment.get("engine.name")=="opera")&&qx.core.Environment.get("browser.version")<10.6){this.__onInputTimeoutId=window.setTimeout(function(){qx.event.Registration.fireEvent(b,"input",qx.event.type.Data,[b.value])},0)}else{qx.event.Registration.fireEvent(b,"input",qx.event.type.Data,[b.value])}}}),_onChangeValue:qx.event.GlobalError.observeMethod(function(f){var d=qx.bom.Event.getTarget(f);var c=d.value;if(d.type==="select-multiple"){var c=[];for(var b=0,g=d.options,a=g.length;b<a;b++){if(g[b].selected){c.push(g[b].value)}}}qx.event.Registration.fireEvent(d,"change",qx.event.type.Data,[c])}),_onChangeChecked:qx.event.GlobalError.observeMethod(function(b){var a=qx.bom.Event.getTarget(b);if(a.type==="radio"){if(a.checked){qx.event.Registration.fireEvent(a,"change",qx.event.type.Data,[a.value])}}else{qx.event.Registration.fireEvent(a,"change",qx.event.type.Data,[a.checked])}}),_onProperty:qx.core.Environment.select("engine.name",{mshtml:qx.event.GlobalError.observeMethod(function(b){var a=qx.bom.Event.getTarget(b);var c=b.propertyName;if(c==="value"&&(a.type==="text"||a.type==="password"||a.tagName.toLowerCase()==="textarea")){if(!a.$$inValueSet){qx.event.Registration.fireEvent(a,"input",qx.event.type.Data,[a.value])}}else{if(c==="checked"){if(a.type==="checkbox"){qx.event.Registration.fireEvent(a,"change",qx.event.type.Data,[a.checked])}else{if(a.checked){qx.event.Registration.fireEvent(a,"change",qx.event.type.Data,[a.value])}}}}}),"default":function(){}})},defer:function(a){qx.event.Registration.addHandler(a)}});qx.Class.define("qx.bom.Input",{statics:{__types:{text:1,textarea:1,select:1,checkbox:1,radio:1,password:1,hidden:1,submit:1,image:1,file:1,search:1,reset:1,button:1},create:function(c,b,d){if(qx.core.Environment.get("qx.debug")){qx.core.Assert.assertKeyInMap(c,this.__types,"Unsupported input type.")}var b=b?qx.lang.Object.clone(b):{};var a;if(c==="textarea"||c==="select"){a=c}else{a="input";b.type=c}return qx.bom.Element.create(a,b,d)},setValue:function(e,j){var n=e.nodeName.toLowerCase();var g=e.type;var c=qx.lang.Array;var a=qx.lang.Type;if(typeof j==="number"){j+=""}if((g==="checkbox"||g==="radio")){if(a.isArray(j)){e.checked=c.contains(j,e.value)}else{e.checked=e.value==j}}else{if(n==="select"){var f=a.isArray(j);var m=e.options;var k,h;for(var d=0,b=m.length;d<b;d++){k=m[d];h=k.getAttribute("value");if(h==null){h=k.text}k.selected=f?c.contains(j,h):j==h}if(f&&j.length==0){e.selectedIndex=-1}}else{if((g==="text"||g==="textarea")&&(qx.core.Environment.get("engine.name")=="mshtml")){e.$$inValueSet=true;e.value=j;e.$$inValueSet=null}else{e.value=j}}}},getValue:function(b){var l=b.nodeName.toLowerCase();if(l==="option"){return(b.attributes.value||{}).specified?b.value:b.text}if(l==="select"){var e=b.selectedIndex;if(e<0){return null}var j=[];var k=b.options;var d=b.type=="select-one";var f=qx.bom.Input;var h;for(var a=d?e:0,g=d?e+1:k.length;a<g;a++){var c=k[a];if(c.selected){h=f.getValue(c);if(d){return h}j.push(h)}}return j}else{return(b.value||"").replace(/\r/g,"")}},setWrap:qx.core.Environment.select("engine.name",{mshtml:function(b,c){var d=c?"soft":"off";var a=c?"auto":"";b.wrap=d;b.style.overflowY=a},"gecko|webkit":function(b,c){var d=c?"soft":"off";var a=c?"":"auto";b.setAttribute("wrap",d);b.style.overflow=a},"default":function(a,b){a.style.whiteSpace=b?"normal":"nowrap"}})}});qx.Class.define("qx.ui.table.headerrenderer.HeaderCell",{extend:qx.ui.container.Composite,construct:function(){this.base(arguments);var a=new qx.ui.layout.Grid();a.setRowFlex(0,1);a.setColumnFlex(1,1);a.setColumnFlex(2,1);this.setLayout(a)},properties:{appearance:{refine:true,init:"table-header-cell"},label:{check:"String",init:null,nullable:true,apply:"_applyLabel"},sortIcon:{check:"String",init:null,nullable:true,apply:"_applySortIcon",themeable:true},icon:{check:"String",init:null,nullable:true,apply:"_applyIcon"}},members:{_applyLabel:function(b,a){if(b){this._showChildControl("label").setValue(b)}else{this._excludeChildControl("label")}},_applySortIcon:function(b,a){if(b){this._showChildControl("sort-icon").setSource(b)}else{this._excludeChildControl("sort-icon")}},_applyIcon:function(b,a){if(b){this._showChildControl("icon").setSource(b)}else{this._excludeChildControl("icon")}},_createChildControlImpl:function(c,b){var a;switch(c){case"label":a=new qx.ui.basic.Label(this.getLabel()).set({anonymous:true,allowShrinkX:true});this._add(a,{row:0,column:1});break;case"sort-icon":a=new qx.ui.basic.Image(this.getSortIcon());a.setAnonymous(true);this._add(a,{row:0,column:2});break;case"icon":a=new qx.ui.basic.Image(this.getIcon()).set({anonymous:true,allowShrinkX:true});this._add(a,{row:0,column:0});break}return a||this.base(arguments,c)}}});qx.Class.define("qx.ui.layout.Grid",{extend:qx.ui.layout.Abstract,construct:function(b,a){this.base(arguments);this.__rowData=[];this.__colData=[];if(b){this.setSpacingX(b)}if(a){this.setSpacingY(a)}},properties:{spacingX:{check:"Integer",init:0,apply:"_applyLayoutChange"},spacingY:{check:"Integer",init:0,apply:"_applyLayoutChange"}},members:{__grid:null,__rowData:null,__colData:null,__colSpans:null,__rowSpans:null,__maxRowIndex:null,__maxColIndex:null,__rowHeights:null,__colWidths:null,verifyLayoutProperty:qx.core.Environment.select("qx.debug",{"true":function(c,a,d){var b={row:1,column:1,rowSpan:1,colSpan:1};this.assert(b[a]==1,"The property '"+a+"' is not supported by the Grid layout!");this.assertInteger(d);this.assert(d>=0,"Value must be positive")},"false":null}),__buildGrid:function(){var a=[];var o=[];var m=[];var g=-1;var n=-1;var c=this._getLayoutChildren();for(var f=0,e=c.length;f<e;f++){var b=c[f];var h=b.getLayoutProperties();var p=h.row;var d=h.column;h.colSpan=h.colSpan||1;h.rowSpan=h.rowSpan||1;if(p==null||d==null){throw new Error("The layout properties 'row' and 'column' of the child widget '"+b+"' must be defined!")}if(a[p]&&a[p][d]){throw new Error("Cannot add widget '"+b+"'!. There is already a widget '"+a[p][d]+"' in this cell ("+p+", "+d+")")}for(var k=d;k<d+h.colSpan;k++){for(var j=p;j<p+h.rowSpan;j++){if(a[j]==undefined){a[j]=[]}a[j][k]=b;n=Math.max(n,k);g=Math.max(g,j)}}if(h.rowSpan>1){m.push(b)}if(h.colSpan>1){o.push(b)}}for(var j=0;j<=g;j++){if(a[j]==undefined){a[j]=[]}}this.__grid=a;this.__colSpans=o;this.__rowSpans=m;this.__maxRowIndex=g;this.__maxColIndex=n;this.__rowHeights=null;this.__colWidths=null;delete this._invalidChildrenCache},_setRowData:function(d,a,c){var b=this.__rowData[d];if(!b){this.__rowData[d]={};this.__rowData[d][a]=c}else{b[a]=c}},_setColumnData:function(b,a,c){var d=this.__colData[b];if(!d){this.__colData[b]={};this.__colData[b][a]=c}else{d[a]=c}},setSpacing:function(a){this.setSpacingY(a);this.setSpacingX(a);return this},setColumnAlign:function(b,a,c){if(qx.core.Environment.get("qx.debug")){this.assertInteger(b,"Invalid parameter 'column'");this.assertInArray(a,["left","center","right"]);this.assertInArray(c,["top","middle","bottom"])}this._setColumnData(b,"hAlign",a);this._setColumnData(b,"vAlign",c);this._applyLayoutChange();return this},getColumnAlign:function(a){var b=this.__colData[a]||{};return{vAlign:b.vAlign||"top",hAlign:b.hAlign||"left"}},setRowAlign:function(b,a,c){if(qx.core.Environment.get("qx.debug")){this.assertInteger(b,"Invalid parameter 'row'");this.assertInArray(a,["left","center","right"]);this.assertInArray(c,["top","middle","bottom"])}this._setRowData(b,"hAlign",a);this._setRowData(b,"vAlign",c);this._applyLayoutChange();return this},getRowAlign:function(b){var a=this.__rowData[b]||{};return{vAlign:a.vAlign||"top",hAlign:a.hAlign||"left"}},getCellWidget:function(b,a){if(this._invalidChildrenCache){this.__buildGrid()}var b=this.__grid[b]||{};return b[a]||null},getRowCount:function(){if(this._invalidChildrenCache){this.__buildGrid()}return this.__maxRowIndex+1},getColumnCount:function(){if(this._invalidChildrenCache){this.__buildGrid()}return this.__maxColIndex+1},getCellAlign:function(g,b){var h="top";var a="left";var e=this.__rowData[g];var f=this.__colData[b];var d=this.__grid[g][b];if(d){var c={vAlign:d.getAlignY(),hAlign:d.getAlignX()}}else{c={}}if(c.vAlign){h=c.vAlign}else{if(e&&e.vAlign){h=e.vAlign}else{if(f&&f.vAlign){h=f.vAlign}}}if(c.hAlign){a=c.hAlign}else{if(f&&f.hAlign){a=f.hAlign}else{if(e&&e.hAlign){a=e.hAlign}}}return{vAlign:h,hAlign:a}},setColumnFlex:function(b,a){this._setColumnData(b,"flex",a);this._applyLayoutChange();return this},getColumnFlex:function(a){var b=this.__colData[a]||{};return b.flex!==undefined?b.flex:0},setRowFlex:function(b,a){this._setRowData(b,"flex",a);this._applyLayoutChange();return this},getRowFlex:function(c){var b=this.__rowData[c]||{};var a=b.flex!==undefined?b.flex:0;return a},setColumnMaxWidth:function(a,b){this._setColumnData(a,"maxWidth",b);this._applyLayoutChange();return this},getColumnMaxWidth:function(a){var b=this.__colData[a]||{};return b.maxWidth!==undefined?b.maxWidth:Infinity},setColumnWidth:function(b,a){this._setColumnData(b,"width",a);this._applyLayoutChange();return this},getColumnWidth:function(a){var b=this.__colData[a]||{};return b.width!==undefined?b.width:null},setColumnMinWidth:function(b,a){this._setColumnData(b,"minWidth",a);this._applyLayoutChange();return this},getColumnMinWidth:function(a){var b=this.__colData[a]||{};return b.minWidth||0},setRowMaxHeight:function(b,a){this._setRowData(b,"maxHeight",a);this._applyLayoutChange();return this},getRowMaxHeight:function(b){var a=this.__rowData[b]||{};return a.maxHeight||Infinity},setRowHeight:function(b,a){this._setRowData(b,"height",a);this._applyLayoutChange();return this},getRowHeight:function(b){var a=this.__rowData[b]||{};return a.height!==undefined?a.height:null},setRowMinHeight:function(b,a){this._setRowData(b,"minHeight",a);this._applyLayoutChange();return this},getRowMinHeight:function(b){var a=this.__rowData[b]||{};return a.minHeight||0},__getOuterSize:function(c){var d=c.getSizeHint();var e=c.getMarginLeft()+c.getMarginRight();var b=c.getMarginTop()+c.getMarginBottom();var a={height:d.height+b,width:d.width+e,minHeight:d.minHeight+b,minWidth:d.minWidth+e,maxHeight:d.maxHeight+b,maxWidth:d.maxWidth+e};return a},_fixHeightsRowSpan:function(A){var o=this.getSpacingY();for(var z=0,v=this.__rowSpans.length;z<v;z++){var m=this.__rowSpans[z];var s=this.__getOuterSize(m);var r=m.getLayoutProperties();var b=r.row;var t=o*(r.rowSpan-1);var w=t;var C={};for(var y=0;y<r.rowSpan;y++){var q=r.row+y;var d=A[q];var g=this.getRowFlex(q);if(g>0){C[q]={min:d.minHeight,value:d.height,max:d.maxHeight,flex:g}}t+=d.height;w+=d.minHeight}if(t<s.height){if(!qx.lang.Object.isEmpty(C)){var B=qx.ui.layout.Util.computeFlexOffsets(C,s.height,t);for(var x=0;x<r.rowSpan;x++){var p=B[b+x]?B[b+x].offset:0;A[b+x].height+=p}}else{var a=o*(r.rowSpan-1);var e=s.height-a;var u=Math.floor(e/r.rowSpan);var h=0;var n=0;for(var x=0;x<r.rowSpan;x++){var f=A[b+x].height;h+=f;if(f<u){n++}}var c=Math.floor((e-h)/n);for(var x=0;x<r.rowSpan;x++){if(A[b+x].height<u){A[b+x].height+=c}}}}if(w<s.minHeight){var B=qx.ui.layout.Util.computeFlexOffsets(C,s.minHeight,w);for(var y=0;y<r.rowSpan;y++){var p=B[b+y]?B[b+y].offset:0;A[b+y].minHeight+=p}}}},_fixWidthsColSpan:function(t){var r=this.getSpacingX();for(var o=0,f=this.__colSpans.length;o<f;o++){var p=this.__colSpans[o];var m=this.__getOuterSize(p);var q=p.getLayoutProperties();var s=q.column;var a=r*(q.colSpan-1);var g=a;var b={};var k;for(var h=0;h<q.colSpan;h++){var d=q.column+h;var n=t[d];var e=this.getColumnFlex(d);if(e>0){b[d]={min:n.minWidth,value:n.width,max:n.maxWidth,flex:e}}a+=n.width;g+=n.minWidth}if(a<m.width){var c=qx.ui.layout.Util.computeFlexOffsets(b,m.width,a);for(var h=0;h<q.colSpan;h++){k=c[s+h]?c[s+h].offset:0;t[s+h].width+=k}}if(g<m.minWidth){var c=qx.ui.layout.Util.computeFlexOffsets(b,m.minWidth,g);for(var h=0;h<q.colSpan;h++){k=c[s+h]?c[s+h].offset:0;t[s+h].minWidth+=k}}}},_getRowHeights:function(){if(this.__rowHeights!=null){return this.__rowHeights}var e=[];var d=this.__maxRowIndex;var g=this.__maxColIndex;for(var k=0;k<=d;k++){var h=0;var i=0;var f=0;for(var b=0;b<=g;b++){var c=this.__grid[k][b];if(!c){continue}var j=c.getLayoutProperties().rowSpan||0;if(j>1){continue}var a=this.__getOuterSize(c);if(this.getRowFlex(k)>0){h=Math.max(h,a.minHeight)}else{h=Math.max(h,a.height)}i=Math.max(i,a.height)}var h=Math.max(h,this.getRowMinHeight(k));var f=this.getRowMaxHeight(k);if(this.getRowHeight(k)!==null){var i=this.getRowHeight(k)}else{var i=Math.max(h,Math.min(i,f))}e[k]={minHeight:h,height:i,maxHeight:f}}if(this.__rowSpans.length>0){this._fixHeightsRowSpan(e)}this.__rowHeights=e;return e},_getColWidths:function(){if(this.__colWidths!=null){return this.__colWidths}var j=[];var i=this.__maxColIndex;var f=this.__maxRowIndex;for(var d=0;d<=i;d++){var c=0;var b=0;var h=Infinity;for(var k=0;k<=f;k++){var e=this.__grid[k][d];if(!e){continue}var g=e.getLayoutProperties().colSpan||0;if(g>1){continue}var a=this.__getOuterSize(e);if(this.getColumnFlex(d)>0){b=Math.max(b,a.minWidth)}else{b=Math.max(b,a.width)}c=Math.max(c,a.width)}var b=Math.max(b,this.getColumnMinWidth(d));var h=this.getColumnMaxWidth(d);if(this.getColumnWidth(d)!==null){var c=this.getColumnWidth(d)}else{var c=Math.max(b,Math.min(c,h))}j[d]={minWidth:b,width:c,maxWidth:h}}if(this.__colSpans.length>0){this._fixWidthsColSpan(j)}this.__colWidths=j;return j},_getColumnFlexOffsets:function(b){var f=this.getSizeHint();var h=b-f.width;if(h==0){return{}}var j=this._getColWidths();var a={};for(var g=0,e=j.length;g<e;g++){var c=j[g];var d=this.getColumnFlex(g);if((d<=0)||(c.width==c.maxWidth&&h>0)||(c.width==c.minWidth&&h<0)){continue}a[g]={min:c.minWidth,value:c.width,max:c.maxWidth,flex:d}}return qx.ui.layout.Util.computeFlexOffsets(a,b,f.width)},_getRowFlexOffsets:function(h){var d=this.getSizeHint();var g=h-d.height;if(g==0){return{}}var f=this._getRowHeights();var a={};for(var e=0,b=f.length;e<b;e++){var j=f[e];var c=this.getRowFlex(e);if((c<=0)||(j.height==j.maxHeight&&g>0)||(j.height==j.minHeight&&g<0)){continue}a[e]={min:j.minHeight,value:j.height,max:j.maxHeight,flex:c}}return qx.ui.layout.Util.computeFlexOffsets(a,h,d.height)},renderLayout:function(y,f){if(this._invalidChildrenCache){this.__buildGrid()}var n=qx.ui.layout.Util;var x=this.getSpacingX();var k=this.getSpacingY();var r=this._getColWidths();var C=this._getColumnFlexOffsets(y);var H=[];var G=this.__maxColIndex;var q=this.__maxRowIndex;var o;for(var l=0;l<=G;l++){o=C[l]?C[l].offset:0;H[l]=r[l].width+o}var b=this._getRowHeights();var F=this._getRowFlexOffsets(f);var D=[];for(var p=0;p<=q;p++){o=F[p]?F[p].offset:0;D[p]=b[p].height+o}var h=0;for(var l=0;l<=G;l++){var t=0;for(var p=0;p<=q;p++){var g=this.__grid[p][l];if(!g){t+=D[p]+k;continue}var s=g.getLayoutProperties();if(s.row!==p||s.column!==l){t+=D[p]+k;continue}var E=x*(s.colSpan-1);for(var z=0;z<s.colSpan;z++){E+=H[l+z]}var A=k*(s.rowSpan-1);for(var z=0;z<s.rowSpan;z++){A+=D[p+z]}var d=g.getSizeHint();var e=g.getMarginTop();var u=g.getMarginLeft();var m=g.getMarginBottom();var j=g.getMarginRight();var w=Math.max(d.minWidth,Math.min(E-u-j,d.maxWidth));var c=Math.max(d.minHeight,Math.min(A-e-m,d.maxHeight));var B=this.getCellAlign(p,l);var v=h+n.computeHorizontalAlignOffset(B.hAlign,w,E,u,j);var a=t+n.computeVerticalAlignOffset(B.vAlign,c,A,e,m);g.renderLayout(v,a,w,c);t+=D[p]+k}h+=H[l]+x}},invalidateLayoutCache:function(){this.base(arguments);this.__colWidths=null;this.__rowHeights=null},_computeSizeHint:function(){if(this._invalidChildrenCache){this.__buildGrid()}var m=this._getColWidths();var a=0,b=0;for(var f=0,d=m.length;f<d;f++){var c=m[f];if(this.getColumnFlex(f)>0){a+=c.minWidth}else{a+=c.width}b+=c.width}var g=this._getRowHeights();var j=0,h=0;for(var f=0,d=g.length;f<d;f++){var o=g[f];if(this.getRowFlex(f)>0){j+=o.minHeight}else{j+=o.height}h+=o.height}var n=this.getSpacingX()*(m.length-1);var k=this.getSpacingY()*(g.length-1);var e={minWidth:a+n,width:b+n,minHeight:j+k,height:h+k};return e}},destruct:function(){this.__grid=this.__rowData=this.__colData=this.__colSpans=this.__rowSpans=this.__colWidths=this.__rowHeights=null}});qx.Class.define("qx.ui.core.ColumnData",{extend:qx.ui.core.LayoutItem,construct:function(){this.base(arguments);this.setColumnWidth("auto")},members:{__computedWidth:null,renderLayout:function(d,c,b,a){this.__computedWidth=b},getComputedWidth:function(){return this.__computedWidth},getFlex:function(){return this.getLayoutProperties().flex||0},setColumnWidth:function(c,b){var b=b||0;var d=null;if(typeof c=="number"){this.setWidth(c)}else{if(typeof c=="string"){if(c=="auto"){b=1}else{var a=c.match(/^[0-9]+(?:\.[0-9]+)?([%\*])$/);if(a){if(a[1]=="*"){b=parseFloat(c)}else{d=c}}}}}this.setLayoutProperties({flex:b,width:d})}},environment:{"qx.tableResizeDebug":false}});qx.Class.define("qx.ui.table.columnmodel.resizebehavior.Abstract",{type:"abstract",extend:qx.core.Object,members:{_setNumColumns:function(a){throw new Error("_setNumColumns is abstract")},onAppear:function(a,b){throw new Error("onAppear is abstract")},onTableWidthChanged:function(a){throw new Error("onTableWidthChanged is abstract")},onVerticalScrollBarChanged:function(a){throw new Error("onVerticalScrollBarChanged is abstract")},onColumnWidthChanged:function(a){throw new Error("onColumnWidthChanged is abstract")},onVisibilityChanged:function(a){throw new Error("onVisibilityChanged is abstract")},_getAvailableWidth:function(){var b=this.getTableColumnModel();var d=b.getTable();var e=d._getPaneScrollerArr();if(!e[0]||!e[0].getLayoutParent().getBounds()){return null}var a=e[0].getLayoutParent().getBounds().width;var c=e[e.length-1];a-=c.getPaneInsetRight();return a}}});qx.Class.define("qx.ui.table.columnmodel.resizebehavior.Default",{extend:qx.ui.table.columnmodel.resizebehavior.Abstract,construct:function(){this.base(arguments);this.__resizeColumnData=[];this.__layout=new qx.ui.layout.HBox();this.__layout.connectToWidget(this);this.__deferredComputeColumnsFlexWidth=new qx.util.DeferredCall(this._computeColumnsFlexWidth,this)},properties:{newResizeBehaviorColumnData:{check:"Function",init:function(a){return new qx.ui.core.ColumnData()}},initializeWidthsOnEveryAppear:{check:"Boolean",init:false},tableColumnModel:{check:"qx.ui.table.columnmodel.Resize"}},members:{__layout:null,__layoutChildren:null,__resizeColumnData:null,__deferredComputeColumnsFlexWidth:null,__widthsInitialized:false,setWidth:function(b,c,a){if(b>=this.__resizeColumnData.length){throw new Error("Column number out of range")}this.__resizeColumnData[b].setColumnWidth(c,a);this.__deferredComputeColumnsFlexWidth.schedule()},setMinWidth:function(a,b){if(a>=this.__resizeColumnData.length){throw new Error("Column number out of range")}this.__resizeColumnData[a].setMinWidth(b);this.__deferredComputeColumnsFlexWidth.schedule()},setMaxWidth:function(a,b){if(a>=this.__resizeColumnData.length){throw new Error("Column number out of range")}this.__resizeColumnData[a].setMaxWidth(b);this.__deferredComputeColumnsFlexWidth.schedule()},set:function(a,b){for(var c in b){switch(c){case"width":this.setWidth(a,b[c]);break;case"minWidth":this.setMinWidth(a,b[c]);break;case"maxWidth":this.setMaxWidth(a,b[c]);break;default:throw new Error("Unknown property: "+c)}}},onAppear:function(a,b){if(b===true||!this.__widthsInitialized||this.getInitializeWidthsOnEveryAppear()){this._computeColumnsFlexWidth();this.__widthsInitialized=true}},onTableWidthChanged:function(a){this._computeColumnsFlexWidth()},onVerticalScrollBarChanged:function(a){this._computeColumnsFlexWidth()},onColumnWidthChanged:function(a){this._extendNextColumn(a)},onVisibilityChanged:function(a){var b=a.getData();if(b.visible){this._computeColumnsFlexWidth();return}this._extendLastColumn(a)},_setNumColumns:function(b){var c=this.__resizeColumnData;if(b<=c.length){c.splice(b,c.length);return}for(var a=c.length;a<b;a++){c[a]=this.getNewResizeBehaviorColumnData()();c[a].columnNumber=a}},getLayoutChildren:function(){return this.__layoutChildren},_computeColumnsFlexWidth:function(){this.__deferredComputeColumnsFlexWidth.cancel();var a=this._getAvailableWidth();if(a===null){return}var g=this.getTableColumnModel();var h=g.getVisibleColumns();var j=h.length;var b=this.__resizeColumnData;var f,d;if(j===0){return}var c=[];for(f=0;f<j;f++){c.push(b[h[f]])}this.__layoutChildren=c;this.__clearLayoutCaches();this.__layout.renderLayout(a,100);for(f=0,d=c.length;f<d;f++){var e=c[f].getComputedWidth();g.setColumnWidth(h[f],e)}},__clearLayoutCaches:function(){this.__layout.invalidateChildrenCache();var c=this.__layoutChildren;for(var b=0,a=c.length;b<a;b++){c[b].invalidateLayoutCache()}},_extendNextColumn:function(a){var h=this.getTableColumnModel();var f=a.getData();var k=h.getVisibleColumns();var c=this._getAvailableWidth();var d=k.length;if(f.newWidth>f.oldWidth){return}var g;var b;var j=0;for(g=0;g<d;g++){j+=h.getColumnWidth(k[g])}if(j<c){for(g=0;g<k.length;g++){if(k[g]==f.col){b=k[g+1];break}}if(b){var e=(c-(j-h.getColumnWidth(b)));h.setColumnWidth(b,e)}}},_extendLastColumn:function(a){var h=this.getTableColumnModel();var f=a.getData();if(f.visible){return}var k=h.getVisibleColumns();if(k.length==0){return}var b=this._getAvailableWidth(h);var d=k.length;var g;var c;var j=0;for(g=0;g<d;g++){j+=h.getColumnWidth(k[g])}if(j<b){c=k[k.length-1];var e=(b-(j-h.getColumnWidth(c)));h.setColumnWidth(c,e)}},_getResizeColumnData:function(){return this.__resizeColumnData}},destruct:function(){this.__resizeColumnData=this.__layoutChildren=null;this._disposeObjects("__layout","__deferredComputeColumnsFlexWidth")}});qx.Class.define("qx.fx.effect.combination.ColorFlow",{extend:qx.fx.Base,construct:function(a){this.base(arguments,a);this.__highlightEffects=[new qx.fx.effect.core.Highlight(a),new qx.fx.effect.core.Highlight(a)]},properties:{startColor:{init:"#ffffff",check:"Color"},endColor:{init:"#ffffaa",check:"Color"},forwardTransition:{init:"linear",check:["linear","easeInQuad","easeOutQuad","sinodial","reverse","flicker","wobble","pulse","spring","none","full"]},backwardTransition:{init:"linear",check:["linear","easeInQuad","easeOutQuad","sinodial","reverse","flicker","wobble","pulse","spring","none","full"]},forwardDuration:{init:1,check:"Number"},backwardDuration:{init:1,check:"Number"},delayBetween:{init:0.3,check:"Number"},restoreBackground:{init:true,check:"Boolean"},keepBackgroundImage:{init:false,check:"Boolean"}},members:{__oldStyle:null,__highlightEffects:null,start:function(){if(!this.base(arguments)){return}var b=this._getElement();this.setDuration(this.getForwardDuration()+this.getDelayBetween()+this.getBackwardDuration());this.__oldStyle={backgroundImage:qx.bom.element.Style.get(b,"backgroundImage"),backgroundColor:qx.bom.element.Style.get(b,"backgroundColor")};this.__highlightEffects[0].set({startColor:this.getStartColor(),endColor:this.getEndColor(),duration:this.getForwardDuration(),transition:this.getForwardTransition(),restoreBackground:false,keepBackgroundImage:this.getKeepBackgroundImage()});this.__highlightEffects[1].set({startColor:this.getEndColor(),endColor:this.getStartColor(),duration:this.getBackwardDuration(),transition:this.getBackwardTransition(),restoreBackground:this.getRestoreBackground(),keepBackgroundImage:this.getKeepBackgroundImage(),delay:this.getDelayBetween()});var a=this;this.__highlightEffects[0].afterFinishInternal=function(){a.__highlightEffects[1].start()};this.__highlightEffects[0].start()}},destruct:function(){this._disposeArray("__highlightEffects")}});qx.Class.define("qx.fx.effect.core.Highlight",{extend:qx.fx.Base,properties:{startColor:{init:"#ffffff",check:"Color"},endColor:{init:"#ffffaa",check:"Color"},restoreBackground:{init:true,check:"Boolean"},keepBackgroundImage:{init:false,check:"Boolean"}},members:{__oldStyle:null,__startColor:null,__endColor:null,__deltaColor:null,setup:function(){this.base(arguments);var a=this._getElement();this.__oldStyle={backgroundImage:qx.bom.element.Style.get(a,"backgroundImage"),backgroundColor:qx.bom.element.Style.get(a,"backgroundColor")};if(!this.getKeepBackgroundImage()){qx.bom.element.Style.set(a,"backgroundImage","none")}this.__startColor=qx.util.ColorUtil.cssStringToRgb(this.getStartColor());this.__endColor=qx.util.ColorUtil.cssStringToRgb(this.getEndColor());this.__deltaColor=[this.__endColor[0]-this.__startColor[0],this.__endColor[1]-this.__startColor[1],this.__endColor[2]-this.__startColor[2]]},update:function(a){this.base(arguments);var b=[this.__startColor[0]+Math.round(this.__deltaColor[0]*a),this.__startColor[1]+Math.round(this.__deltaColor[1]*a),this.__startColor[2]+Math.round(this.__deltaColor[2]*a)];var c="#"+qx.util.ColorUtil.rgbToHexString([b[0].toString(16),b[1].toString(16),b[2].toString(16)]);qx.bom.element.Style.set(this._getElement(),"backgroundColor",c)},finish:function(){this.base(arguments);if(this.getRestoreBackground()){qx.lang.Function.delay(this._restore,1000,this)}},_restore:function(){var a=this._getElement();for(var b in this.__oldStyle){qx.bom.element.Style.set(a,b,this.__oldStyle[b])}}},destruct:function(){this.__startColor=this.__endColor=this.__deltaColor=null}});qx.Class.define("qx.ui.table.selection.Manager",{extend:qx.core.Object,construct:function(){this.base(arguments)},properties:{selectionModel:{check:"qx.ui.table.selection.Model"}},members:{__lastMouseDownHandled:null,handleMouseDown:function(c,b){if(b.isLeftPressed()){var a=this.getSelectionModel();if(!a.isSelectedIndex(c)){this._handleSelectEvent(c,b);this.__lastMouseDownHandled=true}else{this.__lastMouseDownHandled=false}}else{if(b.isRightPressed()&&b.getModifiers()==0){var a=this.getSelectionModel();if(!a.isSelectedIndex(c)){a.setSelectionInterval(c,c)}}}},handleMouseUp:function(b,a){if(a.isLeftPressed()&&!this.__lastMouseDownHandled){this._handleSelectEvent(b,a)}},handleClick:function(b,a){},handleSelectKeyDown:function(b,a){this._handleSelectEvent(b,a)},handleMoveKeyDown:function(d,b){var a=this.getSelectionModel();switch(b.getModifiers()){case 0:a.setSelectionInterval(d,d);break;case qx.event.type.Dom.SHIFT_MASK:var c=a.getAnchorSelectionIndex();if(c==-1){a.setSelectionInterval(d,d)}else{a.setSelectionInterval(c,d)}break}},_handleSelectEvent:function(d,c){var b=this.getSelectionModel();var e=b.getLeadSelectionIndex();var a=b.getAnchorSelectionIndex();if(c.isShiftPressed()){if(d!=e||b.isSelectionEmpty()){if(a==-1){a=d}if(c.isCtrlOrCommandPressed()){b.addSelectionInterval(a,d)}else{b.setSelectionInterval(a,d)}}}else{if(c.isCtrlOrCommandPressed()){if(b.isSelectedIndex(d)){b.removeSelectionInterval(d,d)}else{b.addSelectionInterval(d,d)}}else{b.setSelectionInterval(d,d)}}}}});qx.Class.define("qx.ui.treevirtual.SelectionManager",{extend:qx.ui.table.selection.Manager,construct:function(a){this.base(arguments);this.__table=a},members:{__table:null,getTable:function(){return this.__table},_handleSelectEvent:function(b,a){var e=this;function c(w,p,v){var s=w.getDataModel();var h=s.getTreeColumn();var m=w.getFocusedColumn();if(m!=h){return false}if(v instanceof qx.event.type.Mouse){if(!w.getFocusCellOnMouseMove()){var r=w._getPaneScrollerArr();for(var n=0;n<r.length;n++){r[n]._focusCellAtPagePos(v.getViewportLeft(),v.getViewportTop())}}}var l=s.getNode(w.getFocusedRow());if(!l){return false}if(v instanceof qx.event.type.Mouse){var g=w.getTableColumnModel();var j=g._getColToXPosMap();var k=qx.bom.element.Location.getLeft(w.getContentElement().getDomElement());for(var n=0;n<j[h].visX;n++){k+=g.getColumnWidth(j[n].visX)}var u=v.getViewportLeft();var t=2;var f=e.__table.getRowHeight();var o=k+(l.level-1)*(f+3)+2;if(u>=o-t&&u<=o+f+3+t){s.setState(l,{bOpened:!l.bOpened});return w.getOpenCloseClickSelectsRow()?false:true}else{return e._handleExtendedClick(w,v,l,k)}}else{var q=v.getKeyIdentifier();switch(q){case"Space":return false;case"Enter":if(!l.bHideOpenClose&&l.type!=qx.ui.treevirtual.SimpleTreeDataModel.Type.LEAF){s.setState(l,{bOpened:!l.bOpened})}return w.getOpenCloseClickSelectsRow()?false:true;default:return true}}}var d=c(this.__table,b,a);if(!d){this.base(arguments,b,a)}},_handleExtendedClick:function(a,b,c,d){return false}},destruct:function(){this.__table=null}});qx.Mixin.define("qx.ui.treevirtual.MTreePrimitive",{statics:{Type:{LEAF:1,BRANCH:2},_addNode:function(a,k,j,g,f,h,i,d,b){var e;if(k){e=a[k];if(!e){throw new Error("Request to add a child to a non-existent parent")}if(e.type==qx.ui.treevirtual.SimpleTreeDataModel.Type.LEAF){throw new Error("Sorry, a LEAF may not have children.")}}else{e=a[0];k=0}if(h==qx.ui.treevirtual.SimpleTreeDataModel.Type.LEAF){g=false;f=false}if(b===undefined){b=a.length}var c={type:h,nodeId:b,parentNodeId:k,label:j,bSelected:false,bOpened:g,bHideOpenClose:f,icon:i,iconSelected:d,children:[],columnData:[]};a[b]=c;e.children.push(b);return b},_getEmptyTree:function(){return{label:"<virtual root>",nodeId:0,bOpened:true,children:[]}}}});qx.Interface.define("qx.ui.table.ITableModel",{events:{dataChanged:"qx.event.type.Data",metaDataChanged:"qx.event.type.Event",sorted:"qx.event.type.Data"},members:{getRowCount:function(){},getRowData:function(a){},getColumnCount:function(){},getColumnId:function(a){},getColumnIndexById:function(a){},getColumnName:function(a){},isColumnEditable:function(a){},isColumnSortable:function(a){},sortByColumn:function(b,a){},getSortColumnIndex:function(){},isSortAscending:function(){},prefetchRows:function(b,a){},getValue:function(a,b){},getValueById:function(a,b){},setValue:function(a,c,b){},setValueById:function(b,c,a){}}});qx.Class.define("qx.ui.table.model.Abstract",{type:"abstract",extend:qx.core.Object,implement:qx.ui.table.ITableModel,events:{dataChanged:"qx.event.type.Data",metaDataChanged:"qx.event.type.Event",sorted:"qx.event.type.Data"},construct:function(){this.base(arguments);this.__columnIdArr=[];this.__columnNameArr=[];this.__columnIndexMap={}},members:{__columnIdArr:null,__columnNameArr:null,__columnIndexMap:null,__internalChange:null,init:function(a){},getRowCount:function(){throw new Error("getRowCount is abstract")},getRowData:function(a){return null},isColumnEditable:function(a){return false},isColumnSortable:function(a){return false},sortByColumn:function(b,a){},getSortColumnIndex:function(){return -1},isSortAscending:function(){return true},prefetchRows:function(b,a){},getValue:function(a,b){throw new Error("getValue is abstract")},getValueById:function(a,b){return this.getValue(this.getColumnIndexById(a),b)},setValue:function(a,c,b){throw new Error("setValue is abstract")},setValueById:function(b,c,a){this.setValue(this.getColumnIndexById(b),c,a)},getColumnCount:function(){return this.__columnIdArr.length},getColumnIndexById:function(a){return this.__columnIndexMap[a]},getColumnId:function(a){return this.__columnIdArr[a]},getColumnName:function(a){return this.__columnNameArr[a]},setColumnIds:function(b){this.__columnIdArr=b;this.__columnIndexMap={};for(var a=0;a<b.length;a++){this.__columnIndexMap[b[a]]=a}this.__columnNameArr=new Array(b.length);if(!this.__internalChange){this.fireEvent("metaDataChanged")}},setColumnNamesByIndex:function(a){if(this.__columnIdArr.length!=a.length){throw new Error("this.__columnIdArr and columnNameArr have different length: "+this.__columnIdArr.length+" != "+a.length)}this.__columnNameArr=a;this.fireEvent("metaDataChanged")},setColumnNamesById:function(b){this.__columnNameArr=new Array(this.__columnIdArr.length);for(var a=0;a<this.__columnIdArr.length;++a){this.__columnNameArr[a]=b[this.__columnIdArr[a]]}},setColumns:function(c,b){var a=this.__columnIdArr.length==0||b;if(b==null){if(this.__columnIdArr.length==0){b=c}else{b=this.__columnIdArr}}if(b.length!=c.length){throw new Error("columnIdArr and columnNameArr have different length: "+b.length+" != "+c.length)}if(a){this.__internalChange=true;this.setColumnIds(b);this.__internalChange=false}this.setColumnNamesByIndex(c)}},destruct:function(){this.__columnIdArr=this.__columnNameArr=this.__columnIndexMap=null}});qx.Class.define("qx.ui.treevirtual.SimpleTreeDataModel",{extend:qx.ui.table.model.Abstract,include:qx.ui.treevirtual.MTreePrimitive,construct:function(){this.base(arguments);this._rowArr=[];this._nodeArr=[];this._nodeRowMap=[];this._treeColumn=0;this._selections={};this._nodeArr.push(qx.ui.treevirtual.MTreePrimitive._getEmptyTree());this.__editableColArr=null},properties:{filter:{check:"Function",nullable:true,apply:"_applyFilter"}},members:{__tree:null,__editableColArr:null,__tempTreeData:null,__recalculateLastChildFlags:null,_rowArr:null,_nodeArr:null,_nodeRowMap:null,_treeColumn:null,_selections:null,setTree:function(a){this.__tree=a},getTree:function(){return this.__tree},setEditable:function(b){this.__editableColArr=[];for(var a=0;a<this.getColumnCount();a++){this.__editableColArr[a]=b}this.fireEvent("metaDataChanged")},setColumnEditable:function(b,a){if(a!=this.isColumnEditable(b)){if(this.__editableColArr==null){this.__editableColArr=[]}this.__editableColArr[b]=a;this.fireEvent("metaDataChanged")}},isColumnEditable:function(a){if(a==this._treeColumn){return false}return(this.__editableColArr?this.__editableColArr[a]==true:false)},isColumnSortable:function(a){return false},sortByColumn:function(b,a){throw new Error("Trees can not be sorted by column")},getSortColumnIndex:function(){return -1},setTreeColumn:function(a){this._treeColumn=a},getTreeColumn:function(){return this._treeColumn},getRowCount:function(){return this._rowArr.length},getRowData:function(a){return this._rowArr[a]},getValue:function(a,b){if(b<0||b>=this._rowArr.length){throw new Error("this._rowArr row ("+b+") out of bounds: "+this._rowArr+" (0.."+(this._rowArr.length-1)+")")}if(a<0||a>=this._rowArr[b].length){throw new Error("this._rowArr column ("+a+") out of bounds: "+this._rowArr[b]+" (0.."+(this._rowArr[b].length-1)+")")}return this._rowArr[b][a]},setValue:function(a,e,d){if(a==this._treeColumn){return}var b=this.getNodeFromRow(e);if(b.columnData[a]!=d){b.columnData[a]=d;this.setData();if(this.hasListener("dataChanged")){var c={firstRow:e,lastRow:e,firstColumn:a,lastColumn:a};this.fireDataEvent("dataChanged",c)}}},getNode:function(a){if(a<0||a>=this._rowArr.length){throw new Error("this._rowArr row ("+a+") out of bounds: "+this._rowArr+" (0.."+(this._rowArr.length-1)+")")}return this._rowArr[a][this._treeColumn]},addBranch:function(b,d,f,a,e,c){return qx.ui.treevirtual.MTreePrimitive._addNode(this._nodeArr,b,d,f,a,qx.ui.treevirtual.MTreePrimitive.Type.BRANCH,e,c)},addLeaf:function(a,c,d,b){return qx.ui.treevirtual.MTreePrimitive._addNode(this._nodeArr,a,c,false,false,qx.ui.treevirtual.MTreePrimitive.Type.LEAF,d,b)},prune:function(c,e){var b;var d;if(typeof(c)=="object"){b=c;d=b.nodeId}else{if(typeof(c)=="number"){d=c}else{throw new Error("Expected node object or node id")}}for(var a=this._nodeArr[d].children.length-1;a>=0;a--){this.prune(this._nodeArr[d].children[a],true)}if(e&&d!=0){b=this._nodeArr[d];qx.lang.Array.remove(this._nodeArr[b.parentNodeId].children,d);if(this._selections[d]){delete this._selections[d]}this._nodeArr[d]=null}},move:function(g,c){var e;var f;var a;var b;c=c||0;if(typeof(g)=="object"){e=g;f=e.nodeId}else{if(typeof(g)=="number"){f=g;e=this._nodeArr[f]}else{throw new Error("Expected move node object or node id")}}if(typeof(c)=="object"){a=c;b=a.nodeId}else{if(typeof(c)=="number"){b=c;a=this._nodeArr[b]}else{throw new Error("Expected parent node object or node id")}}if(a.type==qx.ui.treevirtual.MTreePrimitive.Type.LEAF){throw new Error("Sorry, a LEAF may not have children.")}var d=this._nodeArr[e.parentNodeId];qx.lang.Array.remove(d.children,f);a.children.push(f);this._nodeArr[f].parentNodeId=b},__inorder:function(e,a){var b=this.getFilter();var c=null;var l;var k=this._nodeArr[e].children.length;var m=0;var d=this.__tempTreeData[e]=[];for(var h=0;h<k;h++){l=this._nodeArr[e].children[h];c=this._nodeArr[l];if(c==null||(b&&!b.call(this,c))){this.__recalculateLastChildFlags=true;continue}d.push(c);c.level=a;c.bFirstChild=(m==0);if(!this.__recalculateLastChildFlags){this.__setLastChildFlag(c,h==k-1)}if(!c.columnData){c.columnData=[]}if(c.columnData.length<this.getColumnCount()){c.columnData[this.getColumnCount()-1]=null}var f=[];if(c.columnData){for(var g=0;g<c.columnData.length;g++){if(g==this._treeColumn){f.push(c)}else{f.push(c.columnData[g])}}}else{f.push(c)}this._nodeRowMap[c.nodeId]=this._rowArr.length;this._rowArr.push(f);if(c.bSelected){f.selected=true;this._selections[c.nodeId]=true}if(c.bOpened){this.__inorder(l,a+1)}m++}},__calculateLastChildFlags:function(e){var g=this.__tempTreeData;var c=g[e];var d=c.length;for(var b=0;b<d;b++){var f=c[b];this.__setLastChildFlag(f,b==d-1);var a=g[f.nodeId]&&g[f.nodeId].length>0;if(a){this.__calculateLastChildFlags(f.nodeId)}}},__setLastChildFlag:function(b,d){b.lastChild=[d];var a=this._nodeArr[b.parentNodeId];while(a.nodeId){var c=a.lastChild[a.lastChild.length-1];b.lastChild.unshift(c);a=this._nodeArr[a.parentNodeId]}},__render:function(){this.__tempTreeData=[];this.__recalculateLastChildFlags=false;this._rowArr=[];this._nodeRowMap=[];this._selections={};this.__inorder(0,1);if(this.__recalculateLastChildFlags){this.__calculateLastChildFlags(0)}this.__tempTreeData=null;if(this.hasListener("dataChanged")){var a={firstRow:0,lastRow:this._rowArr.length-1,firstColumn:0,lastColumn:this.getColumnCount()-1};this.fireDataEvent("dataChanged",a)}},setData:function(e){if(e instanceof Array){this._nodeArr=e}else{if(e!==null&&e!==undefined){throw new Error("Expected array of node objects or null/undefined; got "+typeof(e))}}this.__render();var a=this.getTree().getSelectionModel();var c=this._selections;for(var d in c){var b=this.getRowFromNodeId(d);a.setSelectionInterval(b,b)}},getData:function(){return this._nodeArr},clearData:function(){this._clearSelections();this.setData([qx.ui.treevirtual.MTreePrimitive._getEmptyTree()])},setColumnData:function(c,a,b){this._nodeArr[c].columnData[a]=b},getColumnData:function(b,a){return this._nodeArr[b].columnData[a]},setState:function(h,f){var e;var d;if(typeof(h)=="object"){e=h;d=e.nodeId}else{if(typeof(h)=="number"){d=h;e=this._nodeArr[d]}else{throw new Error("Expected node object or node id")}}for(var b in f){switch(b){case"bSelected":var i=this.getRowFromNodeId(d);var c=this.getTree().getSelectionModel();var a=qx.ui.treevirtual.TreeVirtual;var g=(typeof(i)==="number"&&this.getTree().getSelectionMode()!=a.SelectionMode.NONE);if(f[b]){this._selections[d]=true;if(g&&!c.isSelectedIndex(i)){c.setSelectionInterval(i,i)}}else{delete this._selections[d];if(g&&c.isSelectedIndex(i)){c.removeSelectionInterval(i,i)}}break;case"bOpened":if(f[b]==e.bOpened){break}var j=this.__tree;if(e.bOpened){j.fireDataEvent("treeClose",e)}else{if(e.children.length>0){j.fireDataEvent("treeOpenWithContent",e)}else{j.fireDataEvent("treeOpenWhileEmpty",e)}}if(!e.bHideOpenClose){e.bOpened=!e.bOpened;j.getSelectionModel()._resetSelection()}this.setData();break;default:break}e[b]=f[b]}},getNodeRowMap:function(){return this._nodeRowMap},getRowFromNodeId:function(a){return this._nodeRowMap[a]},getNodeFromRow:function(a){return this._nodeArr[this._rowArr[a][this._treeColumn].nodeId]},_clearSelections:function(){for(var a in this._selections){this._nodeArr[a].bSelected=false}this._selections={}},getSelectedNodes:function(){var a=[];for(var b in this._selections){a.push(this._nodeArr[b])}return a},_applyFilter:function(b,a){this.setData()}},destruct:function(){this._rowArr=this._nodeArr=this._nodeRowMap=this._selections=this.__tree=this.__tempTreeData=null},defer:function(a){a.Type=qx.ui.treevirtual.MTreePrimitive.Type}});qx.Class.define("qx.ui.table.selection.Model",{extend:qx.core.Object,construct:function(){this.base(arguments);this.__selectedRangeArr=[];this.__anchorSelectionIndex=-1;this.__leadSelectionIndex=-1;this.hasBatchModeRefCount=0;this.__hadChangeEventInBatchMode=false},events:{changeSelection:"qx.event.type.Event"},statics:{NO_SELECTION:1,SINGLE_SELECTION:2,SINGLE_INTERVAL_SELECTION:3,MULTIPLE_INTERVAL_SELECTION:4,MULTIPLE_INTERVAL_SELECTION_TOGGLE:5},properties:{selectionMode:{init:2,check:[1,2,3,4,5],apply:"_applySelectionMode"}},members:{__hadChangeEventInBatchMode:null,__anchorSelectionIndex:null,__leadSelectionIndex:null,__selectedRangeArr:null,_applySelectionMode:function(a){this.resetSelection()},setBatchMode:function(a){if(a){this.hasBatchModeRefCount+=1}else{if(this.hasBatchModeRefCount==0){throw new Error("Try to turn off batch mode althoug it was not turned on.")}this.hasBatchModeRefCount-=1;if(this.__hadChangeEventInBatchMode){this.__hadChangeEventInBatchMode=false;this._fireChangeSelection()}}return this.hasBatchMode()},hasBatchMode:function(){return this.hasBatchModeRefCount>0},getAnchorSelectionIndex:function(){return this.__anchorSelectionIndex},_setAnchorSelectionIndex:function(a){this.__anchorSelectionIndex=a},getLeadSelectionIndex:function(){return this.__leadSelectionIndex},_setLeadSelectionIndex:function(a){this.__leadSelectionIndex=a},_getSelectedRangeArr:function(){return this.__selectedRangeArr},resetSelection:function(){if(!this.isSelectionEmpty()){this._resetSelection();this._fireChangeSelection()}},isSelectionEmpty:function(){return this.__selectedRangeArr.length==0},getSelectedCount:function(){var b=0;for(var c=0;c<this.__selectedRangeArr.length;c++){var a=this.__selectedRangeArr[c];b+=a.maxIndex-a.minIndex+1}return b},isSelectedIndex:function(b){for(var c=0;c<this.__selectedRangeArr.length;c++){var a=this.__selectedRangeArr[c];if(b>=a.minIndex&&b<=a.maxIndex){return true}}return false},getSelectedRanges:function(){var b=[];for(var a=0;a<this.__selectedRangeArr.length;a++){b.push({minIndex:this.__selectedRangeArr[a].minIndex,maxIndex:this.__selectedRangeArr[a].maxIndex})}return b},iterateSelection:function(d,b){for(var c=0;c<this.__selectedRangeArr.length;c++){for(var a=this.__selectedRangeArr[c].minIndex;a<=this.__selectedRangeArr[c].maxIndex;a++){d.call(b,a)}}},setSelectionInterval:function(b,f){var c=this.self(arguments);switch(this.getSelectionMode()){case c.NO_SELECTION:return;case c.SINGLE_SELECTION:if(this.isSelectedIndex(f)){return}b=f;break;case c.MULTIPLE_INTERVAL_SELECTION_TOGGLE:this.setBatchMode(true);try{for(var a=b;a<=f;a++){if(!this.isSelectedIndex(a)){this._addSelectionInterval(a,a)}else{this.removeSelectionInterval(a,a)}}}catch(d){if(qx.core.Environment.get("browser.name")=="ie"&&qx.core.Environment.get("browser.version")<=7){this.setBatchMode(false)}throw d}finally{this.setBatchMode(false)}this._fireChangeSelection();return}this._resetSelection();this._addSelectionInterval(b,f);this._fireChangeSelection()},addSelectionInterval:function(b,c){var a=qx.ui.table.selection.Model;switch(this.getSelectionMode()){case a.NO_SELECTION:return;case a.MULTIPLE_INTERVAL_SELECTION:case a.MULTIPLE_INTERVAL_SELECTION_TOGGLE:this._addSelectionInterval(b,c);this._fireChangeSelection();break;default:this.setSelectionInterval(b,c);break}},removeSelectionInterval:function(j,c){this.__anchorSelectionIndex=j;this.__leadSelectionIndex=c;var f=Math.min(j,c);var b=Math.max(j,c);for(var d=0;d<this.__selectedRangeArr.length;d++){var e=this.__selectedRangeArr[d];if(e.minIndex>b){break}else{if(e.maxIndex>=f){var g=(e.minIndex>=f)&&(e.minIndex<=b);var a=(e.maxIndex>=f)&&(e.maxIndex<=b);if(g&&a){this.__selectedRangeArr.splice(d,1);d--}else{if(g){e.minIndex=b+1}else{if(a){e.maxIndex=f-1}else{var h={minIndex:b+1,maxIndex:e.maxIndex};this.__selectedRangeArr.splice(d+1,0,h);e.maxIndex=f-1;break}}}}}}this._fireChangeSelection()},_resetSelection:function(){this.__selectedRangeArr=[];this.__anchorSelectionIndex=-1;this.__leadSelectionIndex=-1},_addSelectionInterval:function(e,g){this.__anchorSelectionIndex=e;this.__leadSelectionIndex=g;var b=Math.min(e,g);var d=Math.max(e,g);var f=0;for(;f<this.__selectedRangeArr.length;f++){var a=this.__selectedRangeArr[f];if(a.minIndex>b){break}}this.__selectedRangeArr.splice(f,0,{minIndex:b,maxIndex:d});var h=this.__selectedRangeArr[0];for(var c=1;c<this.__selectedRangeArr.length;c++){var a=this.__selectedRangeArr[c];if(h.maxIndex+1>=a.minIndex){h.maxIndex=Math.max(h.maxIndex,a.maxIndex);this.__selectedRangeArr.splice(c,1);c--}else{h=a}}},_dumpRanges:function(){var c="Ranges:";for(var b=0;b<this.__selectedRangeArr.length;b++){var a=this.__selectedRangeArr[b];c+=" ["+a.minIndex+".."+a.maxIndex+"]"}this.debug(c)},_fireChangeSelection:function(){if(this.hasBatchMode()){this.__hadChangeEventInBatchMode=true}else{this.fireEvent("changeSelection")}}},destruct:function(){this.__selectedRangeArr=null}});qx.Class.define("qx.ui.table.Table",{extend:qx.ui.core.Widget,construct:function(c,b){this.base(arguments);if(!b){b={}}if(b.initiallyHiddenColumns){this.setInitiallyHiddenColumns(b.initiallyHiddenColumns)}if(b.selectionManager){this.setNewSelectionManager(b.selectionManager)}if(b.selectionModel){this.setNewSelectionModel(b.selectionModel)}if(b.tableColumnModel){this.setNewTableColumnModel(b.tableColumnModel)}if(b.tablePane){this.setNewTablePane(b.tablePane)}if(b.tablePaneHeader){this.setNewTablePaneHeader(b.tablePaneHeader)}if(b.tablePaneScroller){this.setNewTablePaneScroller(b.tablePaneScroller)}if(b.tablePaneModel){this.setNewTablePaneModel(b.tablePaneModel)}if(b.columnMenu){this.setNewColumnMenu(b.columnMenu)}this._setLayout(new qx.ui.layout.VBox());this.__scrollerParent=new qx.ui.container.Composite(new qx.ui.layout.HBox());this._add(this.__scrollerParent,{flex:1});this.setDataRowRenderer(new qx.ui.table.rowrenderer.Default(this));this.__selectionManager=this.getNewSelectionManager()(this);this.setSelectionModel(this.getNewSelectionModel()(this));this.setTableModel(c||this.getEmptyTableModel());this.setMetaColumnCounts([-1]);this.setTabIndex(1);this.addListener("keypress",this._onKeyPress);this.addListener("focus",this._onFocusChanged);this.addListener("blur",this._onFocusChanged);var a=new qx.ui.core.Widget().set({height:0});this._add(a);a.addListener("resize",this._onResize,this);this.__focusedCol=null;this.__focusedRow=null;if(qx.core.Environment.get("qx.dynlocale")){qx.locale.Manager.getInstance().addListener("changeLocale",this._onChangeLocale,this)}this.initStatusBarVisible();c=this.getTableModel();if(c.init&&typeof(c.init)=="function"){c.init(this)}},events:{columnVisibilityMenuCreateStart:"qx.event.type.Data",columnVisibilityMenuCreateEnd:"qx.event.type.Data",tableWidthChanged:"qx.event.type.Event",verticalScrollBarChanged:"qx.event.type.Data",cellClick:"qx.ui.table.pane.CellEvent",cellDblclick:"qx.ui.table.pane.CellEvent",cellContextmenu:"qx.ui.table.pane.CellEvent",dataEdited:"qx.event.type.Data"},statics:{__redirectEvents:{cellClick:1,cellDblclick:1,cellContextmenu:1}},properties:{appearance:{refine:true,init:"table"},focusable:{refine:true,init:true},minWidth:{refine:true,init:50},initiallyHiddenColumns:{init:null},selectable:{refine:true,init:false},selectionModel:{check:"qx.ui.table.selection.Model",apply:"_applySelectionModel",event:"changeSelectionModel"},tableModel:{check:"qx.ui.table.ITableModel",apply:"_applyTableModel",event:"changeTableModel"},rowHeight:{check:"Number",init:20,apply:"_applyRowHeight",event:"changeRowHeight",themeable:true},forceLineHeight:{check:"Boolean",init:true},headerCellsVisible:{check:"Boolean",init:true,apply:"_applyHeaderCellsVisible",themeable:true},headerCellHeight:{check:"Integer",init:16,apply:"_applyHeaderCellHeight",event:"changeHeaderCellHeight",nullable:true,themeable:true},statusBarVisible:{check:"Boolean",init:true,apply:"_applyStatusBarVisible"},additionalStatusBarText:{nullable:true,init:null,apply:"_applyAdditionalStatusBarText"},columnVisibilityButtonVisible:{check:"Boolean",init:true,apply:"_applyColumnVisibilityButtonVisible",themeable:true},metaColumnCounts:{check:"Object",apply:"_applyMetaColumnCounts"},focusCellOnMouseMove:{check:"Boolean",init:false,apply:"_applyFocusCellOnMouseMove"},rowFocusChangeModifiesSelection:{check:"Boolean",init:true},showCellFocusIndicator:{check:"Boolean",init:true,apply:"_applyShowCellFocusIndicator"},contextMenuFromDataCellsOnly:{check:"Boolean",init:true,apply:"_applyContextMenuFromDataCellsOnly"},keepFirstVisibleRowComplete:{check:"Boolean",init:true,apply:"_applyKeepFirstVisibleRowComplete"},alwaysUpdateCells:{check:"Boolean",init:false},resetSelectionOnHeaderClick:{check:"Boolean",init:true,apply:"_applyResetSelectionOnHeaderClick"},dataRowRenderer:{check:"qx.ui.table.IRowRenderer",init:null,nullable:true,event:"changeDataRowRenderer"},modalCellEditorPreOpenFunction:{check:"Function",init:null,nullable:true},newColumnMenu:{check:"Function",init:function(){return new qx.ui.table.columnmenu.Button()}},newSelectionManager:{check:"Function",init:function(a){return new qx.ui.table.selection.Manager(a)}},newSelectionModel:{check:"Function",init:function(a){return new qx.ui.table.selection.Model(a)}},newTableColumnModel:{check:"Function",init:function(a){return new qx.ui.table.columnmodel.Basic(a)}},newTablePane:{check:"Function",init:function(a){return new qx.ui.table.pane.Pane(a)}},newTablePaneHeader:{check:"Function",init:function(a){return new qx.ui.table.pane.Header(a)}},newTablePaneScroller:{check:"Function",init:function(a){return new qx.ui.table.pane.Scroller(a)}},newTablePaneModel:{check:"Function",init:function(a){return new qx.ui.table.pane.Model(a)}}},members:{__focusedCol:null,__focusedRow:null,__scrollerParent:null,__selectionManager:null,__additionalStatusBarText:null,__lastRowCount:null,__internalChange:null,__columnMenuButtons:null,__columnModel:null,__emptyTableModel:null,__hadVerticalScrollBar:null,__timer:null,_createChildControlImpl:function(d,b){var a;switch(d){case"statusbar":a=new qx.ui.basic.Label();a.set({allowGrowX:true});this._add(a);break;case"column-button":a=this.getNewColumnMenu()();a.set({focusable:false});var c=a.factory("menu",{table:this});c.addListener("appear",this._initColumnMenu,this);break}return a||this.base(arguments,d)},_applySelectionModel:function(b,a){this.__selectionManager.setSelectionModel(b);if(a!=null){a.removeListener("changeSelection",this._onSelectionChanged,this)}b.addListener("changeSelection",this._onSelectionChanged,this)},_applyRowHeight:function(c,a){var d=this._getPaneScrollerArr();for(var b=0;b<d.length;b++){d[b].updateVerScrollBarMaximum()}},_applyHeaderCellsVisible:function(c,a){var d=this._getPaneScrollerArr();for(var b=0;b<d.length;b++){d[b]._excludeChildControl("header")}},_applyHeaderCellHeight:function(c,a){var d=this._getPaneScrollerArr();for(var b=0;b<d.length;b++){d[b].getHeader().setHeight(c)}},getEmptyTableModel:function(){if(!this.__emptyTableModel){this.__emptyTableModel=new qx.ui.table.model.Simple();this.__emptyTableModel.setColumns([]);this.__emptyTableModel.setData([])}return this.__emptyTableModel},_applyTableModel:function(b,a){this.getTableColumnModel().init(b.getColumnCount(),this);if(a!=null){a.removeListener("metaDataChanged",this._onTableModelMetaDataChanged,this);a.removeListener("dataChanged",this._onTableModelDataChanged,this)}b.addListener("metaDataChanged",this._onTableModelMetaDataChanged,this);b.addListener("dataChanged",this._onTableModelDataChanged,this);this._updateStatusBar();this._updateTableData(0,b.getRowCount(),0,b.getColumnCount());this._onTableModelMetaDataChanged();if(a&&b.init&&typeof(b.init)=="function"){b.init(this)}},getTableColumnModel:function(){if(!this.__columnModel){var c=this.__columnModel=this.getNewTableColumnModel()(this);c.addListener("visibilityChanged",this._onColVisibilityChanged,this);c.addListener("widthChanged",this._onColWidthChanged,this);c.addListener("orderChanged",this._onColOrderChanged,this);var e=this.getTableModel();c.init(e.getColumnCount(),this);var f=this._getPaneScrollerArr();for(var b=0;b<f.length;b++){var a=f[b];var d=a.getTablePaneModel();d.setTableColumnModel(c)}}return this.__columnModel},_applyStatusBarVisible:function(b,a){if(b){this._showChildControl("statusbar")}else{this._excludeChildControl("statusbar")}if(b){this._updateStatusBar()}},_applyAdditionalStatusBarText:function(b,a){this.__additionalStatusBarText=b;this._updateStatusBar()},_applyColumnVisibilityButtonVisible:function(b,a){if(b){this._showChildControl("column-button")}else{this._excludeChildControl("column-button")}},_applyMetaColumnCounts:function(m,a){var r=m;var c=this._getPaneScrollerArr();var l={};if(m>a){var h=qx.event.Registration.getManager(c[0]);for(var e in qx.ui.table.Table.__redirectEvents){l[e]={};l[e].capture=h.getListeners(c[0],e,true);l[e].bubble=h.getListeners(c[0],e,false)}}this._cleanUpMetaColumns(r.length);var o=0;for(var s=0;s<c.length;s++){var d=c[s];var g=d.getTablePaneModel();g.setFirstColumnX(o);g.setMaxColumnCount(r[s]);o+=r[s]}if(r.length>c.length){var t=this.getTableColumnModel();for(var s=c.length;s<r.length;s++){var g=this.getNewTablePaneModel()(t);g.setFirstColumnX(o);g.setMaxColumnCount(r[s]);o+=r[s];var d=this.getNewTablePaneScroller()(this);d.setTablePaneModel(g);d.addListener("changeScrollY",this._onScrollY,this);for(e in qx.ui.table.Table.__redirectEvents){if(!l[e]){break}if(l[e].capture&&l[e].capture.length>0){var n=l[e].capture;for(var p=0;p<n.length;p++){var b=n[p].context;if(!b){b=this}else{if(b==c[0]){b=d}}d.addListener(e,n[p].handler,b,true)}}if(l[e].bubble&&l[e].bubble.length>0){var k=l[e].bubble;for(var p=0;p<k.length;p++){var b=k[p].context;if(!b){b=this}else{if(b==c[0]){b=d}}d.addListener(e,k[p].handler,b,false)}}}var q=(s==r.length-1)?1:0;this.__scrollerParent.add(d,{flex:q});c=this._getPaneScrollerArr()}}for(var s=0;s<c.length;s++){var d=c[s];var f=(s==(c.length-1));d.getHeader().setHeight(this.getHeaderCellHeight());d.setTopRightWidget(f?this.getChildControl("column-button"):null)}if(!this.isColumnVisibilityButtonVisible()){this._excludeChildControl("column-button")}this._updateScrollerWidths();this._updateScrollBarVisibility()},_applyFocusCellOnMouseMove:function(c,a){var d=this._getPaneScrollerArr();for(var b=0;b<d.length;b++){d[b].setFocusCellOnMouseMove(c)}},_applyShowCellFocusIndicator:function(c,a){var d=this._getPaneScrollerArr();for(var b=0;b<d.length;b++){d[b].setShowCellFocusIndicator(c)}},_applyContextMenuFromDataCellsOnly:function(c,a){var d=this._getPaneScrollerArr();for(var b=0;b<d.length;b++){d[b].setContextMenuFromDataCellsOnly(c)}},_applyKeepFirstVisibleRowComplete:function(c,a){var d=this._getPaneScrollerArr();for(var b=0;b<d.length;b++){d[b].onKeepFirstVisibleRowCompleteChanged()}},_applyResetSelectionOnHeaderClick:function(c,a){var d=this._getPaneScrollerArr();for(var b=0;b<d.length;b++){d[b].setResetSelectionOnHeaderClick(c)}},getSelectionManager:function(){return this.__selectionManager},_getPaneScrollerArr:function(){return this.__scrollerParent.getChildren()},getPaneScroller:function(a){return this._getPaneScrollerArr()[a]},_cleanUpMetaColumns:function(b){var c=this._getPaneScrollerArr();if(c!=null){for(var a=c.length-1;a>=b;a--){c[a].destroy()}}},_onChangeLocale:function(a){this.updateContent();this._updateStatusBar()},_onSelectionChanged:function(a){var c=this._getPaneScrollerArr();for(var b=0;b<c.length;b++){c[b].onSelectionChanged()}this._updateStatusBar()},_onTableModelMetaDataChanged:function(a){var c=this._getPaneScrollerArr();for(var b=0;b<c.length;b++){c[b].onTableModelMetaDataChanged()}this._updateStatusBar()},_onTableModelDataChanged:function(a){var b=a.getData();this._updateTableData(b.firstRow,b.lastRow,b.firstColumn,b.lastColumn,b.removeStart,b.removeCount)},_updateTableData:function(b,h,d,j,f,a){var e=this._getPaneScrollerArr();if(a){this.getSelectionModel().removeSelectionInterval(f,f+a);if(this.__focusedRow>=f&&this.__focusedRow<(f+a)){this.setFocusedCell()}}for(var c=0;c<e.length;c++){e[c].onTableModelDataChanged(b,h,d,j)}var g=this.getTableModel().getRowCount();if(g!=this.__lastRowCount){this.__lastRowCount=g;this._updateScrollBarVisibility();this._updateStatusBar()}},_onScrollY:function(a){if(!this.__internalChange){this.__internalChange=true;var c=this._getPaneScrollerArr();for(var b=0;b<c.length;b++){c[b].setScrollY(a.getData())}this.__internalChange=false}},_onKeyPress:function(i){if(!this.getEnabled()){return}var d=this.__focusedRow;var h=true;var e=i.getKeyIdentifier();if(this.isEditing()){if(i.getModifiers()==0){switch(e){case"Enter":this.stopEditing();var d=this.__focusedRow;this.moveFocusedCell(0,1);if(this.__focusedRow!=d){h=this.startEditing()}break;case"Escape":this.cancelEditing();this.focus();break;default:h=false;break}}}else{if(i.isCtrlPressed()){h=true;switch(e){case"A":var f=this.getTableModel().getRowCount();if(f>0){this.getSelectionModel().setSelectionInterval(0,f-1)}break;default:h=false;break}}else{switch(e){case"Space":this.__selectionManager.handleSelectKeyDown(this.__focusedRow,i);break;case"F2":case"Enter":this.startEditing();h=true;break;case"Home":this.setFocusedCell(this.__focusedCol,0,true);break;case"End":var f=this.getTableModel().getRowCount();this.setFocusedCell(this.__focusedCol,f-1,true);break;case"Left":this.moveFocusedCell(-1,0);break;case"Right":this.moveFocusedCell(1,0);break;case"Up":this.moveFocusedCell(0,-1);break;case"Down":this.moveFocusedCell(0,1);break;case"PageUp":case"PageDown":var c=this.getPaneScroller(0);var b=c.getTablePane();var a=this.getRowHeight();var g=(e=="PageUp")?-1:1;f=b.getVisibleRowCount()-1;c.setScrollY(c.getScrollY()+g*f*a);this.moveFocusedCell(0,g*f);break;default:h=false}}}if(d!=this.__focusedRow&&this.getRowFocusChangeModifiesSelection()){this.__selectionManager.handleMoveKeyDown(this.__focusedRow,i)}if(h){i.preventDefault();i.stopPropagation()}},_onFocusChanged:function(a){var c=this._getPaneScrollerArr();for(var b=0;b<c.length;b++){c[b].onFocusChanged()}},_onColVisibilityChanged:function(a){var d=this._getPaneScrollerArr();for(var b=0;b<d.length;b++){d[b].onColVisibilityChanged()}var c=a.getData();if(this.__columnMenuButtons!=null&&c.col!=null&&c.visible!=null){this.__columnMenuButtons[c.col].setVisible(c.visible)}this._updateScrollerWidths();this._updateScrollBarVisibility()},_onColWidthChanged:function(a){var d=this._getPaneScrollerArr();for(var b=0;b<d.length;b++){var c=a.getData();d[b].setColumnWidth(c.col,c.newWidth)}this._updateScrollerWidths();this._updateScrollBarVisibility()},_onColOrderChanged:function(a){var c=this._getPaneScrollerArr();for(var b=0;b<c.length;b++){c[b].onColOrderChanged()}this._updateScrollerWidths();this._updateScrollBarVisibility()},getTablePaneScrollerAtPageX:function(a){var b=this._getMetaColumnAtPageX(a);return(b!=-1)?this.getPaneScroller(b):null},setFocusedCell:function(b,d,a){if(!this.isEditing()&&(b!=this.__focusedCol||d!=this.__focusedRow)){if(b===null){b=0}this.__focusedCol=b;this.__focusedRow=d;var e=this._getPaneScrollerArr();for(var c=0;c<e.length;c++){e[c].setFocusedCell(b,d)}if(b!==null&&a){this.scrollCellVisible(b,d)}}},resetSelection:function(){this.getSelectionModel().resetSelection()},resetCellFocus:function(){this.setFocusedCell(null,null,false)},getFocusedColumn:function(){return this.__focusedCol},getFocusedRow:function(){return this.__focusedRow},highlightFocusedRow:function(a){this.getDataRowRenderer().setHighlightFocusRow(a)},clearFocusedRowHighlight:function(b){if(b){var a=b.getRelatedTarget();if(a instanceof qx.ui.table.pane.Pane||a instanceof qx.ui.table.pane.FocusIndicator){return}}this.resetCellFocus();var d=this._getPaneScrollerArr();for(var c=0;c<d.length;c++){d[c].onFocusChanged()}},moveFocusedCell:function(c,b){var d=this.__focusedCol;var h=this.__focusedRow;if(d==null||h==null){return}if(c!=0){var e=this.getTableColumnModel();var a=e.getVisibleX(d);var f=e.getVisibleColumnCount();a=qx.lang.Number.limit(a+c,0,f-1);d=e.getVisibleColumnAtX(a)}if(b!=0){var g=this.getTableModel();h=qx.lang.Number.limit(h+b,0,g.getRowCount()-1)}this.setFocusedCell(d,h,true)},scrollCellVisible:function(c,f){var e=this.getContentElement().getDomElement();if(!e){this.addListenerOnce("appear",function(){this.scrollCellVisible(c,f)},this)}var d=this.getTableColumnModel();var a=d.getVisibleX(c);var b=this._getMetaColumnAtColumnX(a);if(b!=-1){this.getPaneScroller(b).scrollCellVisible(c,f)}},isEditing:function(){if(this.__focusedCol!=null){var a=this.getTableColumnModel().getVisibleX(this.__focusedCol);var b=this._getMetaColumnAtColumnX(a);return this.getPaneScroller(b).isEditing()}return false},startEditing:function(){if(this.__focusedCol!=null){var a=this.getTableColumnModel().getVisibleX(this.__focusedCol);var c=this._getMetaColumnAtColumnX(a);var b=this.getPaneScroller(c).startEditing();return b}return false},stopEditing:function(){if(this.__focusedCol!=null){var a=this.getTableColumnModel().getVisibleX(this.__focusedCol);var b=this._getMetaColumnAtColumnX(a);this.getPaneScroller(b).stopEditing()}},cancelEditing:function(){if(this.__focusedCol!=null){var a=this.getTableColumnModel().getVisibleX(this.__focusedCol);var b=this._getMetaColumnAtColumnX(a);this.getPaneScroller(b).cancelEditing()}},updateContent:function(){var b=this._getPaneScrollerArr();for(var a=0;a<b.length;a++){b[a].getTablePane().updateContent(true)}},blockHeaderElements:function(){var b=this._getPaneScrollerArr();for(var a=0;a<b.length;a++){b[a].getHeader().getBlocker().blockContent(20)}this.getChildControl("column-button").getBlocker().blockContent(20)},unblockHeaderElements:function(){var b=this._getPaneScrollerArr();for(var a=0;a<b.length;a++){b[a].getHeader().getBlocker().unblockContent()}this.getChildControl("column-button").getBlocker().unblockContent()},_getMetaColumnAtPageX:function(b){var d=this._getPaneScrollerArr();for(var a=0;a<d.length;a++){var c=d[a].getContainerLocation();if(b>=c.left&&b<=c.right){return a}}return -1},_getMetaColumnAtColumnX:function(a){var e=this.getMetaColumnCounts();var d=0;for(var c=0;c<e.length;c++){var b=e[c];d+=b;if(b==-1||a<d){return c}}return -1},_updateStatusBar:function(){var d=this.getTableModel();if(this.getStatusBarVisible()){var b=this.getSelectionModel().getSelectedCount();var a=d.getRowCount();var c;if(a>=0){if(b==0){c=this.trn("one row","%1 rows",a,a)}else{c=this.trn("one of one row","%1 of %2 rows",a,b,a)}}if(this.__additionalStatusBarText){if(c){c+=this.__additionalStatusBarText}else{c=this.__additionalStatusBarText}}if(c){this.getChildControl("statusbar").setValue(c)}}},_updateScrollerWidths:function(){var e=this._getPaneScrollerArr();for(var b=0;b<e.length;b++){var d=(b==(e.length-1));var c=e[b].getTablePaneModel().getTotalWidth();e[b].setPaneWidth(c);var a=d?1:0;e[b].setLayoutProperties({flex:a})}},_updateScrollBarVisibility:function(){if(!this.getBounds()){return}var d=qx.ui.table.pane.Scroller.HORIZONTAL_SCROLLBAR;var f=qx.ui.table.pane.Scroller.VERTICAL_SCROLLBAR;var h=this._getPaneScrollerArr();var c=false;var g=false;for(var b=0;b<h.length;b++){var e=(b==(h.length-1));var a=h[b].getNeededScrollBars(c,!e);if(a&d){c=true}if(e&&(a&f)){g=true}}for(var b=0;b<h.length;b++){var e=(b==(h.length-1));h[b].setHorizontalScrollBarVisible(c);if(e){if(this.__hadVerticalScrollBar==null){this.__hadVerticalScrollBar=h[b].getVerticalScrollBarVisible();this.__timer=qx.event.Timer.once(function(){this.__hadVerticalScrollBar=null;this.__timer=null},this,0)}}h[b].setVerticalScrollBarVisible(e&&g);if(e&&g!=this.__hadVerticalScrollBar){this.fireDataEvent("verticalScrollBarChanged",g)}}},_initColumnMenu:function(){var h=this.getTableModel();var e=this.getTableColumnModel();var b=this.getChildControl("column-button");b.empty();var g=b.getMenu();var f={table:this,menu:g,columnButton:b};this.fireDataEvent("columnVisibilityMenuCreateStart",f);this.__columnMenuButtons={};for(var d=0,a=h.getColumnCount();d<a;d++){var c=b.factory("menu-button",{text:h.getColumnName(d),column:d,bVisible:e.isColumnVisible(d)});qx.core.Assert.assertInterface(c,qx.ui.table.IColumnMenuItem);c.addListener("changeVisible",this._createColumnVisibilityCheckBoxHandler(d),this);this.__columnMenuButtons[d]=c}f={table:this,menu:g,columnButton:b};this.fireDataEvent("columnVisibilityMenuCreateEnd",f)},_createColumnVisibilityCheckBoxHandler:function(a){return function(b){var c=this.getTableColumnModel();c.setColumnVisible(a,b.getData())}},setColumnWidth:function(a,b){this.getTableColumnModel().setColumnWidth(a,b)},_onResize:function(){this.fireEvent("tableWidthChanged");this._updateScrollerWidths();this._updateScrollBarVisibility()},addListener:function(e,f,c,b){if(this.self(arguments).__redirectEvents[e]){var g=[e];for(var d=0,a=this._getPaneScrollerArr();d<a.length;d++){g.push(a[d].addListener.apply(a[d],arguments))}return g.join('"')}else{return this.base(arguments,e,f,c,b)}},removeListener:function(e,f,c,b){if(this.self(arguments).__redirectEvents[e]){for(var d=0,a=this._getPaneScrollerArr();d<a.length;d++){a[d].removeListener.apply(a[d],arguments)}}else{this.base(arguments,e,f,c,b)}},removeListenerById:function(f){var d=f.split('"');var c=d.shift();if(this.self(arguments).__redirectEvents[c]){var e=true;for(var b=0,a=this._getPaneScrollerArr();b<a.length;b++){e=a[b].removeListenerById.call(a[b],d[b])&&e}return e}else{return this.base(arguments,f)}},destroy:function(){this.getChildControl("column-button").getMenu().destroy();this.base(arguments)}},destruct:function(){if(qx.core.Environment.get("qx.dynlocale")){qx.locale.Manager.getInstance().removeListener("changeLocale",this._onChangeLocale,this)}var a=this.getSelectionModel();if(a){a.dispose()}var b=this.getDataRowRenderer();if(b){b.dispose()}this._cleanUpMetaColumns(0);this.getTableColumnModel().dispose();this._disposeObjects("__selectionManager","__scrollerParent","__emptyTableModel","__emptyTableModel","__columnModel","__timer");this._disposeMap("__columnMenuButtons")}});qx.Class.define("qx.ui.treevirtual.TreeVirtual",{extend:qx.ui.table.Table,construct:function(g,d){if(!d){d={}}if(!d.dataModel){d.dataModel=new qx.ui.treevirtual.SimpleTreeDataModel()}if(d.treeColumn===undefined){d.treeColumn=0;d.dataModel.setTreeColumn(d.treeColumn)}if(!d.treeDataCellRenderer){d.treeDataCellRenderer=new qx.ui.treevirtual.SimpleTreeDataCellRenderer()}if(!d.defaultDataCellRenderer){d.defaultDataCellRenderer=new qx.ui.treevirtual.DefaultDataCellRenderer()}if(!d.dataRowRenderer){d.dataRowRenderer=new qx.ui.treevirtual.SimpleTreeDataRowRenderer()}if(!d.selectionManager){d.selectionManager=function(i){return new qx.ui.treevirtual.SelectionManager(i)}}if(!d.tableColumnModel){d.tableColumnModel=function(i){return new qx.ui.table.columnmodel.Resize(i)}}if(qx.lang.Type.isString(g)){g=[g]}d.dataModel.setColumns(g);d.dataModel.setTreeColumn(d.treeColumn);d.dataModel.setTree(this);this.base(arguments,d.dataModel,d);this.addListener("dataEdited",function(i){this.getDataModel().setData()},this);this.setColumnVisibilityButtonVisible(g.length>1);this.setRowHeight(16);this.setMetaColumnCounts(g.length>1?[1,-1]:[1]);this.setOverflow("hidden");var b=d.treeDataCellRenderer;var h=d.defaultDataCellRenderer;var f=this.getTableColumnModel();var a=this.getDataModel().getTreeColumn();for(var c=0;c<g.length;c++){f.setDataCellRenderer(c,c==a?b:h)}this.setDataRowRenderer(d.dataRowRenderer);this.setFocusCellOnMouseMove(true);this.setShowCellFocusIndicator(false);var e=this._getPaneScrollerArr();for(var c=0;c<e.length;c++){e[c].setSelectBeforeFocus(true)}},events:{treeOpenWithContent:"qx.event.type.Data",treeOpenWhileEmpty:"qx.event.type.Data",treeClose:"qx.event.type.Data",changeSelection:"qx.event.type.Data"},statics:{SelectionMode:{NONE:qx.ui.table.selection.Model.NO_SELECTION,SINGLE:qx.ui.table.selection.Model.SINGLE_SELECTION,SINGLE_INTERVAL:qx.ui.table.selection.Model.SINGLE_INTERVAL_SELECTION,MULTIPLE_INTERVAL:qx.ui.table.selection.Model.MULTIPLE_INTERVAL_SELECTION,MULTIPLE_INTERVAL_TOGGLE:qx.ui.table.selection.Model.MULTIPLE_INTERVAL_SELECTION_TOGGLE}},properties:{openCloseClickSelectsRow:{check:"Boolean",init:false},appearance:{refine:true,init:"treevirtual"}},members:{getDataModel:function(){return this.getTableModel()},setUseTreeLines:function(a){var e=this.getDataModel();var c=e.getTreeColumn();var d=this.getTableColumnModel().getDataCellRenderer(c);d.setUseTreeLines(a);if(e.hasListener("dataChanged")){var f={firstRow:0,lastRow:e.getRowCount()-1,firstColumn:0,lastColumn:e.getColumnCount()-1};e.fireDataEvent("dataChanged",f)}},getUseTreeLines:function(){var a=this.getDataModel().getTreeColumn();var b=this.getTableColumnModel().getDataCellRenderer(a);return b.getUseTreeLines()},setAlwaysShowOpenCloseSymbol:function(a){var e=this.getDataModel();var c=e.getTreeColumn();var d=this.getTableColumnModel().getDataCellRenderer(c);d.setAlwaysShowOpenCloseSymbol(a);if(e.hasListener("dataChanged")){var f={firstRow:0,lastRow:e.getRowCount()-1,firstColumn:0,lastColumn:e.getColumnCount()-1};e.fireDataEvent("dataChanged",f)}},setExcludeFirstLevelTreeLines:function(a){var e=this.getDataModel();var c=e.getTreeColumn();var d=this.getTableColumnModel().getDataCellRenderer(c);d.setExcludeFirstLevelTreeLines(a);if(e.hasListener("dataChanged")){var f={firstRow:0,lastRow:e.getRowCount()-1,firstColumn:0,lastColumn:e.getColumnCount()-1};e.fireDataEvent("dataChanged",f)}},getExcludeFirstLevelTreeLines:function(){var a=this.getDataModel().getTreeColumn();var b=this.getTableColumnModel().getDataCellRenderer(a);return b.getExcludeFirstLevelTreeLines()},getAlwaysShowOpenCloseSymbol:function(){var a=this.getDataModel().getTreeColumn();var b=this.getTableColumnModel().getDataCellRenderer(a);return b.getAlwaysShowOpenCloseSymbol()},setSelectionMode:function(a){this.getSelectionModel().setSelectionMode(a)},getSelectionMode:function(){return this.getSelectionModel().getSelectionMode()},getHierarchy:function(d){var f=this;var c=[];var b;var e;if(typeof(d)=="object"){b=d;e=b.nodeId}else{if(typeof(d)=="number"){e=d}else{throw new Error("Expected node object or node id")}}function a(h){if(!h){return}var g=f.getDataModel().getData()[h];c.unshift(g.label);a(g.parentNodeId)}a(e);return c},getSelectedNodes:function(){return this.getDataModel().getSelectedNodes()},_onKeyPress:function(j){if(!this.getEnabled()){return}var f=j.getKeyIdentifier();var h=false;var i=j.getModifiers();if(i==0){switch(f){case"Enter":var e=this.getDataModel();var d=this.getFocusedColumn();var a=e.getTreeColumn();if(d==a){var b=this.getFocusedRow();var c=e.getNode(b);if(!c.bHideOpenClose&&c.type!=qx.ui.treevirtual.SimpleTreeDataModel.Type.LEAF){e.setState(c,{bOpened:!c.bOpened})}h=true}break;case"Left":this.moveFocusedCell(-1,0);break;case"Right":this.moveFocusedCell(1,0);break}}else{if(i==qx.event.type.Dom.CTRL_MASK){switch(f){case"Left":var e=this.getDataModel();var b=this.getFocusedRow();var a=e.getTreeColumn();var c=e.getNode(b);if((c.type==qx.ui.treevirtual.SimpleTreeDataModel.Type.BRANCH)&&!c.bHideOpenClose&&c.bOpened){e.setState(c,{bOpened:!c.bOpened})}this.setFocusedCell(a,b,true);h=true;break;case"Right":var e=this.getDataModel();b=this.getFocusedRow();a=e.getTreeColumn();c=e.getNode(b);if((c.type==qx.ui.treevirtual.SimpleTreeDataModel.Type.BRANCH)&&!c.bHideOpenClose&&!c.bOpened){e.setState(c,{bOpened:!c.bOpened})}this.setFocusedCell(a,b,true);h=true;break}}else{if(i==qx.event.type.Dom.SHIFT_MASK){switch(f){case"Left":var e=this.getDataModel();var b=this.getFocusedRow();var a=e.getTreeColumn();var c=e.getNode(b);if(c.parentNodeId){var g=e.getRowFromNodeId(c.parentNodeId);this.setFocusedCell(this._focusedCol,g,true)}h=true;break;case"Right":var e=this.getDataModel();b=this.getFocusedRow();a=e.getTreeColumn();c=e.getNode(b);if((c.type==qx.ui.treevirtual.SimpleTreeDataModel.Type.BRANCH)&&!c.bHideOpenClose){if(!c.bOpened){e.setState(c,{bOpened:!c.bOpened})}if(c.children.length>0){this.moveFocusedCell(0,1)}}h=true;break}}}}if(h){j.preventDefault();j.stopPropagation()}else{this.base(arguments,j)}},_onSelectionChanged:function(a){this.getDataModel()._clearSelections();if(this.getSelectionMode()!=qx.ui.treevirtual.TreeVirtual.SelectionMode.NONE){var b=this._calculateSelectedNodes();this.fireDataEvent("changeSelection",b)}this.base(arguments,a)},_calculateSelectedNodes:function(){var e=this.getDataModel();var a=this.getSelectionModel().getSelectedRanges();var f=[];var d;for(var c=0;c<a.length;c++){for(var b=a[c].minIndex;b<=a[c].maxIndex;b++){d=e.getNode(b);e.setState(d,{bSelected:true});f.push(d)}}return f},setOverflow:function(a){if(a!="hidden"){throw new Error("Tree overflow must be hidden.  The internal elements of it will scroll.")}}}});qx.Interface.define("qx.ui.table.IRowRenderer",{members:{updateDataRowElement:function(b,a){},getRowHeightStyle:function(a){},createRowStyle:function(a){},getRowClass:function(a){}}});qx.Class.define("qx.ui.table.rowrenderer.Default",{extend:qx.core.Object,implement:qx.ui.table.IRowRenderer,construct:function(){this.base(arguments);this.__fontStyleString="";this.__fontStyleString={};this._colors={};this._renderFont(qx.theme.manager.Font.getInstance().resolve("default"));var a=qx.theme.manager.Color.getInstance();this._colors.bgcolFocusedSelected=a.resolve("table-row-background-focused-selected");this._colors.bgcolFocused=a.resolve("table-row-background-focused");this._colors.bgcolSelected=a.resolve("table-row-background-selected");this._colors.bgcolEven=a.resolve("table-row-background-even");this._colors.bgcolOdd=a.resolve("table-row-background-odd");this._colors.colSelected=a.resolve("table-row-selected");this._colors.colNormal=a.resolve("table-row");this._colors.horLine=a.resolve("table-row-line")},properties:{highlightFocusRow:{check:"Boolean",init:true}},members:{_colors:null,__fontStyle:null,__fontStyleString:null,_insetY:1,_renderFont:function(a){if(a){this.__fontStyle=a.getStyles();this.__fontStyleString=qx.bom.element.Style.compile(this.__fontStyle);this.__fontStyleString=this.__fontStyleString.replace(/"/g,"'")}else{this.__fontStyleString="";this.__fontStyle=qx.bom.Font.getDefaultStyles()}},updateDataRowElement:function(c,b){var d=this.__fontStyle;var a=b.style;qx.bom.element.Style.setStyles(b,d);if(c.focusedRow&&this.getHighlightFocusRow()){a.backgroundColor=c.selected?this._colors.bgcolFocusedSelected:this._colors.bgcolFocused}else{if(c.selected){a.backgroundColor=this._colors.bgcolSelected}else{a.backgroundColor=(c.row%2==0)?this._colors.bgcolEven:this._colors.bgcolOdd}}a.color=c.selected?this._colors.colSelected:this._colors.colNormal;a.borderBottom="1px solid "+this._colors.horLine},getRowHeightStyle:function(a){if(qx.core.Environment.get("css.boxmodel")=="content"){a-=this._insetY}return"height:"+a+"px;"},createRowStyle:function(b){var a=[];a.push(";");a.push(this.__fontStyleString);a.push("background-color:");if(b.focusedRow&&this.getHighlightFocusRow()){a.push(b.selected?this._colors.bgcolFocusedSelected:this._colors.bgcolFocused)}else{if(b.selected){a.push(this._colors.bgcolSelected)}else{a.push((b.row%2==0)?this._colors.bgcolEven:this._colors.bgcolOdd)}}a.push(";color:");a.push(b.selected?this._colors.colSelected:this._colors.colNormal);a.push(";border-bottom: 1px solid ",this._colors.horLine);return a.join("")},getRowClass:function(a){return""},getRowAttributes:function(a){return""}},destruct:function(){this._colors=this.__fontStyle=this.__fontStyleString=null}});qx.Interface.define("qx.ui.table.IColumnMenuButton",{properties:{menu:{}},members:{factory:function(b,a){return true},empty:function(){return true}}});qx.Class.define("qx.ui.table.columnmenu.Button",{extend:qx.ui.form.MenuButton,implement:qx.ui.table.IColumnMenuButton,construct:function(){this.base(arguments);this.__blocker=new qx.ui.core.Blocker(this)},members:{__columnMenuButtons:null,__blocker:null,factory:function(d,b){switch(d){case"menu":var e=new qx.ui.menu.Menu();this.setMenu(e);return e;case"menu-button":var a=new qx.ui.table.columnmenu.MenuItem(b.text);a.setVisible(b.bVisible);this.getMenu().add(a);return a;case"user-button":var c=new qx.ui.menu.Button(b.text);c.set({appearance:"table-column-reset-button"});return c;case"separator":return new qx.ui.menu.Separator();default:throw new Error("Unrecognized factory request: "+d)}},getBlocker:function(){return this.__blocker},empty:function(){var d=this.getMenu();var a=d.getChildren();for(var c=0,b=a.length;c<b;c++){a[0].destroy()}}},destruct:function(){this.__blocker.dispose()}});qx.Interface.define("qx.ui.form.IBooleanForm",{events:{changeValue:"qx.event.type.Data"},members:{setValue:function(a){return arguments.length==1},resetValue:function(){},getValue:function(){}}});qx.Class.define("qx.ui.menu.CheckBox",{extend:qx.ui.menu.AbstractButton,implement:[qx.ui.form.IBooleanForm],construct:function(a,b){this.base(arguments);if(a!=null){if(a.translate){this.setLabel(a.translate())}else{this.setLabel(a)}}if(b!=null){this.setMenu(b)}this.addListener("execute",this._onExecute,this)},properties:{appearance:{refine:true,init:"menu-checkbox"},value:{check:"Boolean",init:false,apply:"_applyValue",event:"changeValue",nullable:true}},members:{_applyValue:function(b,a){b?this.addState("checked"):this.removeState("checked")},_onExecute:function(a){this.toggleValue()},_onMouseUp:function(a){if(a.isLeftPressed()){this.execute()}else{if(this.getContextMenu()){return}}qx.ui.menu.Manager.getInstance().hideAll()},_onKeyPress:function(a){this.execute()}}});qx.Interface.define("qx.ui.table.IColumnMenuItem",{properties:{visible:{}},events:{changeVisible:"qx.event.type.Data"}});qx.Class.define("qx.ui.table.columnmenu.MenuItem",{extend:qx.ui.menu.CheckBox,implement:qx.ui.table.IColumnMenuItem,properties:{visible:{check:"Boolean",init:true,apply:"_applyVisible",event:"changeVisible"}},construct:function(a){this.base(arguments,a);this.addListener("changeValue",function(b){this.bInListener=true;this.setVisible(b.getData());this.bInListener=false})},members:{__bInListener:false,_applyVisible:function(b,a){if(!this.bInListener){this.setValue(b)}}}});qx.Class.define("qx.ui.table.pane.Pane",{extend:qx.ui.core.Widget,construct:function(a){this.base(arguments);this.__paneScroller=a;this.__lastColCount=0;this.__lastRowCount=0;this.__rowCache=[]},events:{paneReloadsData:"qx.event.type.Data",paneUpdated:"qx.event.type.Event"},properties:{firstVisibleRow:{check:"Number",init:0,apply:"_applyFirstVisibleRow"},visibleRowCount:{check:"Number",init:0,apply:"_applyVisibleRowCount"},maxCacheLines:{check:"Number",init:1000,apply:"_applyMaxCacheLines"},allowShrinkX:{refine:true,init:false}},members:{__lastRowCount:null,__lastColCount:null,__paneScroller:null,__tableContainer:null,__focusedRow:null,__focusedCol:null,__rowCache:null,__rowCacheCount:0,_applyFirstVisibleRow:function(b,a){this.updateContent(false,b-a)},_applyVisibleRowCount:function(b,a){this.updateContent(true)},_getContentHint:function(){return{width:this.getPaneScroller().getTablePaneModel().getTotalWidth(),height:400}},getPaneScroller:function(){return this.__paneScroller},getTable:function(){return this.__paneScroller.getTable()},setFocusedCell:function(b,d,c){if(b!=this.__focusedCol||d!=this.__focusedRow){var a=this.__focusedRow;this.__focusedCol=b;this.__focusedRow=d;if(d!=a&&!c){if(a!==null){this.updateContent(false,null,a,true)}if(d!==null){this.updateContent(false,null,d,true)}}}},onSelectionChanged:function(){this.updateContent(false,null,null,true)},onFocusChanged:function(){this.updateContent(false,null,null,true)},setColumnWidth:function(a,b){this.updateContent(true)},onColOrderChanged:function(){this.updateContent(true)},onPaneModelChanged:function(){this.updateContent(true)},onTableModelDataChanged:function(f,d,e,a){this.__rowCacheClear();var c=this.getFirstVisibleRow();var b=this.getVisibleRowCount();if(d==-1||d>=c&&f<c+b){this.updateContent()}},onTableModelMetaDataChanged:function(){this.updateContent(true)},_applyMaxCacheLines:function(b,a){if(this.__rowCacheCount>=b&&b!==-1){this.__rowCacheClear()}},__rowCacheClear:function(){this.__rowCache=[];this.__rowCacheCount=0},__rowCacheGet:function(c,a,b){if(!a&&!b&&this.__rowCache[c]){return this.__rowCache[c]}else{return null}},__rowCacheSet:function(e,d,b,c){var a=this.getMaxCacheLines();if(!b&&!c&&!this.__rowCache[e]&&a>0){this._applyMaxCacheLines(a);this.__rowCache[e]=d;this.__rowCacheCount+=1}},updateContent:function(d,b,a,c){if(d){this.__rowCacheClear()}if(b&&Math.abs(b)<=Math.min(10,this.getVisibleRowCount())){this._scrollContent(b)}else{if(c&&!this.getTable().getAlwaysUpdateCells()){this._updateRowStyles(a)}else{this._updateAllRows()}}},_updateRowStyles:function(a){var d=this.getContentElement().getDomElement();if(!d||!d.firstChild){this._updateAllRows();return}var k=this.getTable();var b=k.getSelectionModel();var j=k.getTableModel();var i=k.getDataRowRenderer();var c=d.firstChild.childNodes;var e={table:k};var l=this.getFirstVisibleRow();var h=0;var f=c.length;if(a!=null){var g=a-l;if(g>=0&&g<f){l=a;h=g;f=g+1}else{return}}for(;h<f;h++,l++){e.row=l;e.selected=b.isSelectedIndex(l);e.focusedRow=(this.__focusedRow==l);e.rowData=j.getRowData(l);i.updateDataRowElement(e,c[h])}},_getRowsHtml:function(a,m){var B=this.getTable();var r=B.getSelectionModel();var j=B.getTableModel();var y=B.getTableColumnModel();var o=this.getPaneScroller().getTablePaneModel();var d=B.getDataRowRenderer();j.prefetchRows(a,a+m-1);var c=B.getRowHeight();var q=o.getColumnCount();var e=0;var n=[];for(var l=0;l<q;l++){var g=o.getColumnAtX(l);var w=y.getColumnWidth(g);n.push({col:g,xPos:l,editable:j.isColumnEditable(g),focusedCol:this.__focusedCol==g,styleLeft:e,styleWidth:w});e+=w}var u=[];var E=false;for(var h=a;h<a+m;h++){var s=r.isSelectedIndex(h);var F=(this.__focusedRow==h);var f=this.__rowCacheGet(h,s,F);if(f){u.push(f);continue}var C=[];var k={table:B};k.styleHeight=c;k.row=h;k.selected=s;k.focusedRow=F;k.rowData=j.getRowData(h);if(!k.rowData){E=true}C.push("<div ");var i=d.getRowAttributes(k);if(i){C.push(i)}var t=d.getRowClass(k);if(t){C.push('class="',t,'" ')}var D=d.createRowStyle(k);D+=";position:relative;"+d.getRowHeightStyle(c)+"width:100%;";if(D){C.push('style="',D,'" ')}C.push(">");var A=false;for(l=0;l<q&&!A;l++){var b=n[l];for(var v in b){k[v]=b[v]}var g=k.col;k.value=j.getValue(g,h);var z=y.getDataCellRenderer(g);k.style=z.getDefaultCellStyle();A=z.createDataCellHtml(k,C)||false}C.push("</div>");var p=C.join("");this.__rowCacheSet(h,p,s,F);u.push(p)}this.fireDataEvent("paneReloadsData",E);return u.join("")},_scrollContent:function(h){var b=this.getContentElement().getDomElement();if(!(b&&b.firstChild)){this._updateAllRows();return}var d=b.firstChild;var k=d.childNodes;var n=this.getVisibleRowCount();var f=this.getFirstVisibleRow();var c=this.getTable().getTableModel();var o=0;o=c.getRowCount();if(f+n>o){this._updateAllRows();return}var j=h<0?n+h:0;var p=h<0?0:n-h;for(g=Math.abs(h)-1;g>=0;g--){var a=k[j];try{d.removeChild(a)}catch(e){break}}if(!this.__tableContainer){this.__tableContainer=document.createElement("div")}var m="<div>";m+=this._getRowsHtml(f+p,Math.abs(h));m+="</div>";this.__tableContainer.innerHTML=m;var l=this.__tableContainer.firstChild.childNodes;if(h>0){for(var g=l.length-1;g>=0;g--){var a=l[0];d.appendChild(a)}}else{for(var g=l.length-1;g>=0;g--){var a=l[l.length-1];d.insertBefore(a,d.firstChild)}}if(this.__focusedRow!==null){this._updateRowStyles(this.__focusedRow-h);this._updateRowStyles(this.__focusedRow)}this.fireEvent("paneUpdated")},_updateAllRows:function(){var b=this.getContentElement().getDomElement();if(!b){this.addListenerOnce("appear",arguments.callee,this);return}var k=this.getTable();var j=k.getTableModel();var l=this.getPaneScroller().getTablePaneModel();var i=l.getColumnCount();var a=k.getRowHeight();var d=this.getFirstVisibleRow();var f=this.getVisibleRowCount();var g=j.getRowCount();if(d+f>g){f=Math.max(0,g-d)}var c=l.getTotalWidth();var h;if(f>0){h=["<div style='","width: 100%;",(k.getForceLineHeight()?"line-height: "+a+"px;":""),"overflow: hidden;","'>",this._getRowsHtml(d,f),"</div>"]}else{h=[]}var e=h.join("");b.innerHTML=e;this.setWidth(c);this.__lastColCount=i;this.__lastRowCount=f;this.fireEvent("paneUpdated")}},destruct:function(){this.__tableContainer=this.__paneScroller=this.__rowCache=null}});qx.Class.define("qx.ui.table.pane.Header",{extend:qx.ui.core.Widget,construct:function(a){this.base(arguments);this._setLayout(new qx.ui.layout.HBox());this.__blocker=new qx.ui.core.Blocker(this);this.__paneScroller=a},members:{__paneScroller:null,__moveFeedback:null,__lastMouseOverColumn:null,__blocker:null,getPaneScroller:function(){return this.__paneScroller},getTable:function(){return this.__paneScroller.getTable()},getBlocker:function(){return this.__blocker},onColOrderChanged:function(){this._updateContent(true)},onPaneModelChanged:function(){this._updateContent(true)},onTableModelMetaDataChanged:function(){this._updateContent()},setColumnWidth:function(b,c,a){var d=this.getHeaderWidgetAtColumn(b);if(d!=null){d.setWidth(c)}},setMouseOverColumn:function(a){if(a!=this.__lastMouseOverColumn){if(this.__lastMouseOverColumn!=null){var b=this.getHeaderWidgetAtColumn(this.__lastMouseOverColumn);if(b!=null){b.removeState("hovered")}}if(a!=null){this.getHeaderWidgetAtColumn(a).addState("hovered")}this.__lastMouseOverColumn=a}},getHeaderWidgetAtColumn:function(a){var b=this.getPaneScroller().getTablePaneModel().getX(a);return this._getChildren()[b]},showColumnMoveFeedback:function(b,i){var g=this.getContainerLocation();if(this.__moveFeedback==null){var k=this.getTable();var e=this.getPaneScroller().getTablePaneModel().getX(b);var c=this._getChildren()[e];var j=k.getTableModel();var f=k.getTableColumnModel();var d={xPos:e,col:b,name:j.getColumnName(b),table:k};var h=f.getHeaderCellRenderer(b);var a=h.createHeaderCell(d);var l=c.getBounds();a.setWidth(l.width);a.setHeight(l.height);a.setZIndex(1000000);a.setOpacity(0.8);a.setLayoutProperties({top:g.top});this.getApplicationRoot().add(a);this.__moveFeedback=a}this.__moveFeedback.setLayoutProperties({left:g.left+i});this.__moveFeedback.show()},hideColumnMoveFeedback:function(){if(this.__moveFeedback!=null){this.__moveFeedback.destroy();this.__moveFeedback=null}},isShowingColumnMoveFeedback:function(){return this.__moveFeedback!=null},_updateContent:function(d){var m=this.getTable();var l=m.getTableModel();var g=m.getTableColumnModel();var n=this.getPaneScroller().getTablePaneModel();var a=this._getChildren();var k=n.getColumnCount();var e=l.getSortColumnIndex();if(d){this._cleanUpCells()}var c={};c.sortedAscending=l.isSortAscending();for(var j=0;j<k;j++){var b=n.getColumnAtX(j);if(b===undefined){continue}var f=g.getColumnWidth(b);var i=g.getHeaderCellRenderer(b);c.xPos=j;c.col=b;c.name=l.getColumnName(b);c.editable=l.isColumnEditable(b);c.sorted=(b==e);c.table=m;var h=a[j];if(h==null){h=i.createHeaderCell(c);h.set({width:f});this._add(h)}else{i.updateHeaderCell(c,h)}if(j===0){h.addState("first");h.removeState("last")}else{if(j===k-1){h.removeState("first");h.addState("last")}else{h.removeState("first");h.removeState("last")}}}},_cleanUpCells:function(){var b=this._getChildren();for(var a=b.length-1;a>=0;a--){var c=b[a];c.destroy()}}},destruct:function(){this.__blocker.dispose();this._disposeObjects("__paneScroller")}});qx.core.Environment.add("qx.nativeScrollBars",false);qx.core.Setting.defineDeprecated("qx.nativeScrollBars",false);qx.Mixin.define("qx.ui.core.scroll.MScrollBarFactory",{members:{_createScrollBar:function(a){if(qx.core.Environment.get("qx.nativeScrollBars")){return new qx.ui.core.scroll.NativeScrollBar(a)}else{return new qx.ui.core.scroll.ScrollBar(a)}}}});qx.Class.define("qx.ui.table.pane.Scroller",{extend:qx.ui.core.Widget,include:qx.ui.core.scroll.MScrollBarFactory,construct:function(b){this.base(arguments);this.__table=b;var a=new qx.ui.layout.Grid();a.setColumnFlex(0,1);a.setRowFlex(1,1);this._setLayout(a);this.__horScrollBar=this._showChildControl("scrollbar-x");this.__verScrollBar=this._showChildControl("scrollbar-y");this.__header=this._showChildControl("header");this.__tablePane=this._showChildControl("pane");this.__top=new qx.ui.container.Composite(new qx.ui.layout.HBox()).set({minWidth:0});this._add(this.__top,{row:0,column:0,colSpan:2});this.__headerClipper=new qx.ui.table.pane.Clipper();this.__headerClipper.add(this.__header);this.__headerClipper.addListener("losecapture",this._onChangeCaptureHeader,this);this.__headerClipper.addListener("mousemove",this._onMousemoveHeader,this);this.__headerClipper.addListener("mousedown",this._onMousedownHeader,this);this.__headerClipper.addListener("mouseup",this._onMouseupHeader,this);this.__headerClipper.addListener("click",this._onClickHeader,this);this.__top.add(this.__headerClipper,{flex:1});this.__paneClipper=new qx.ui.table.pane.Clipper();this.__paneClipper.add(this.__tablePane);this.__paneClipper.addListener("mousewheel",this._onMousewheel,this);this.__paneClipper.addListener("mousemove",this._onMousemovePane,this);this.__paneClipper.addListener("mousedown",this._onMousedownPane,this);this.__paneClipper.addListener("mouseup",this._onMouseupPane,this);this.__paneClipper.addListener("click",this._onClickPane,this);this.__paneClipper.addListener("contextmenu",this._onContextMenu,this);this.__paneClipper.addListener("dblclick",this._onDblclickPane,this);this.__paneClipper.addListener("resize",this._onResizePane,this);this._add(this.__paneClipper,{row:1,column:0});this.__focusIndicator=this.getChildControl("focus-indicator");this.initShowCellFocusIndicator();this.getChildControl("resize-line").hide();this.addListener("mouseout",this._onMouseout,this);this.addListener("appear",this._onAppear,this);this.addListener("disappear",this._onDisappear,this);this.__timer=new qx.event.Timer();this.__timer.addListener("interval",this._oninterval,this);this.initScrollTimeout()},statics:{MIN_COLUMN_WIDTH:10,RESIZE_REGION_RADIUS:5,CLICK_TOLERANCE:5,HORIZONTAL_SCROLLBAR:1,VERTICAL_SCROLLBAR:2},events:{changeScrollY:"qx.event.type.Data",changeScrollX:"qx.event.type.Data",cellClick:"qx.ui.table.pane.CellEvent",cellDblclick:"qx.ui.table.pane.CellEvent",cellContextmenu:"qx.ui.table.pane.CellEvent",beforeSort:"qx.event.type.Data"},properties:{horizontalScrollBarVisible:{check:"Boolean",init:false,apply:"_applyHorizontalScrollBarVisible",event:"changeHorizontalScrollBarVisible"},verticalScrollBarVisible:{check:"Boolean",init:false,apply:"_applyVerticalScrollBarVisible",event:"changeVerticalScrollBarVisible"},tablePaneModel:{check:"qx.ui.table.pane.Model",apply:"_applyTablePaneModel",event:"changeTablePaneModel"},liveResize:{check:"Boolean",init:false},focusCellOnMouseMove:{check:"Boolean",init:false},selectBeforeFocus:{check:"Boolean",init:false},showCellFocusIndicator:{check:"Boolean",init:true,apply:"_applyShowCellFocusIndicator"},contextMenuFromDataCellsOnly:{check:"Boolean",init:true},resetSelectionOnHeaderClick:{check:"Boolean",init:true},scrollTimeout:{check:"Integer",init:100,apply:"_applyScrollTimeout"},appearance:{refine:true,init:"table-scroller"}},members:{__lastRowCount:null,__table:null,__updateInterval:null,__updateContentPlanned:null,__onintervalWrapper:null,__moveColumn:null,__lastMoveColPos:null,__lastMoveTargetX:null,__lastMoveTargetScroller:null,__lastMoveMousePageX:null,__resizeColumn:null,__lastResizeMousePageX:null,__lastResizeWidth:null,__lastMouseDownCell:null,__firedClickEvent:false,__ignoreClick:null,__lastMousePageX:null,__lastMousePageY:null,__focusedCol:null,__focusedRow:null,__cellEditor:null,__cellEditorFactory:null,__topRightWidget:null,__horScrollBar:null,__verScrollBar:null,__header:null,__headerClipper:null,__tablePane:null,__paneClipper:null,__focusIndicator:null,__top:null,__timer:null,getPaneInsetRight:function(){var a=this.getTopRightWidget();var d=a&&a.isVisible()&&a.getBounds()?a.getBounds().width+a.getMarginLeft()+a.getMarginRight():0;var b=this.__verScrollBar;var c=this.getVerticalScrollBarVisible()?this.getVerticalScrollBarWidth()+b.getMarginLeft()+b.getMarginRight():0;return Math.max(d,c)},setPaneWidth:function(a){if(this.isVerticalScrollBarVisible()){a+=this.getPaneInsetRight()}this.setWidth(a)},_createChildControlImpl:function(c,b){var a;switch(c){case"header":a=(this.getTable().getNewTablePaneHeader())(this);break;case"pane":a=(this.getTable().getNewTablePane())(this);break;case"focus-indicator":a=new qx.ui.table.pane.FocusIndicator(this);a.setUserBounds(0,0,0,0);a.setZIndex(1000);a.addListener("mouseup",this._onMouseupFocusIndicator,this);this.__paneClipper.add(a);a.show();a.setDecorator(null);break;case"resize-line":a=new qx.ui.core.Widget();a.setUserBounds(0,0,0,0);a.setZIndex(1000);this.__paneClipper.add(a);break;case"scrollbar-x":a=this._createScrollBar("horizontal").set({minWidth:0,alignY:"bottom"});a.addListener("scroll",this._onScrollX,this);this._add(a,{row:2,column:0});break;case"scrollbar-y":a=this._createScrollBar("vertical");a.addListener("scroll",this._onScrollY,this);this._add(a,{row:1,column:1});break}return a||this.base(arguments,c)},_applyHorizontalScrollBarVisible:function(b,a){this.__horScrollBar.setVisibility(b?"visible":"excluded")},_applyVerticalScrollBarVisible:function(b,a){this.__verScrollBar.setVisibility(b?"visible":"excluded")},_applyTablePaneModel:function(b,a){if(a!=null){a.removeListener("modelChanged",this._onPaneModelChanged,this)}b.addListener("modelChanged",this._onPaneModelChanged,this)},_applyShowCellFocusIndicator:function(b,a){if(b){this.__focusIndicator.setDecorator("table-scroller-focus-indicator");this._updateFocusIndicator()}else{if(this.__focusIndicator){this.__focusIndicator.setDecorator(null)}}},getScrollY:function(){return this.__verScrollBar.getPosition()},setScrollY:function(b,a){this.__verScrollBar.scrollTo(b);if(a){this._updateContent()}},getScrollX:function(){return this.__horScrollBar.getPosition()},setScrollX:function(a){this.__horScrollBar.scrollTo(a)},getTable:function(){return this.__table},onColVisibilityChanged:function(){this.updateHorScrollBarMaximum();this._updateFocusIndicator()},setColumnWidth:function(b,c){this.__header.setColumnWidth(b,c);this.__tablePane.setColumnWidth(b,c);var d=this.getTablePaneModel();var a=d.getX(b);if(a!=-1){this.updateHorScrollBarMaximum();this._updateFocusIndicator()}},onColOrderChanged:function(){this.__header.onColOrderChanged();this.__tablePane.onColOrderChanged();this.updateHorScrollBarMaximum()},onTableModelDataChanged:function(e,c,d,a){this.__tablePane.onTableModelDataChanged(e,c,d,a);var b=this.getTable().getTableModel().getRowCount();if(b!=this.__lastRowCount){this.updateVerScrollBarMaximum();if(this.getFocusedRow()>=b){if(b==0){this.setFocusedCell(null,null)}else{this.setFocusedCell(this.getFocusedColumn(),b-1)}}this.__lastRowCount=b}},onSelectionChanged:function(){this.__tablePane.onSelectionChanged()},onFocusChanged:function(){this.__tablePane.onFocusChanged()},onTableModelMetaDataChanged:function(){this.__header.onTableModelMetaDataChanged();this.__tablePane.onTableModelMetaDataChanged()},_onPaneModelChanged:function(){this.__header.onPaneModelChanged();this.__tablePane.onPaneModelChanged()},_onResizePane:function(){this.updateHorScrollBarMaximum();this.updateVerScrollBarMaximum();this._updateContent();this.__header._updateContent();this.__table._updateScrollBarVisibility()},updateHorScrollBarMaximum:function(){var c=this.__paneClipper.getInnerSize();if(!c){return}var b=this.getTablePaneModel().getTotalWidth();var d=this.__horScrollBar;if(c.width<b){var a=Math.max(0,b-c.width);d.setMaximum(a);d.setKnobFactor(c.width/b);var e=d.getPosition();d.setPosition(Math.min(e,a))}else{d.setMaximum(0);d.setKnobFactor(1);d.setPosition(0)}},updateVerScrollBarMaximum:function(){var d=this.__paneClipper.getInnerSize();if(!d){return}var g=this.getTable().getTableModel();var b=g.getRowCount();if(this.getTable().getKeepFirstVisibleRowComplete()){b+=1}var f=this.getTable().getRowHeight();var c=b*f;var e=this.__verScrollBar;if(d.height<c){var a=Math.max(0,c-d.height);e.setMaximum(a);e.setKnobFactor(d.height/c);var h=e.getPosition();e.setPosition(Math.min(h,a))}else{e.setMaximum(0);e.setKnobFactor(1);e.setPosition(0)}},onKeepFirstVisibleRowCompleteChanged:function(){this.updateVerScrollBarMaximum();this._updateContent()},_onAppear:function(){this._startInterval(this.getScrollTimeout())},_onDisappear:function(){this._stopInterval()},_onScrollX:function(a){var b=a.getData();this.fireDataEvent("changeScrollX",b,a.getOldData());this.__headerClipper.scrollToX(b);this.__paneClipper.scrollToX(b)},_onScrollY:function(a){this.fireDataEvent("changeScrollY",a.getData(),a.getOldData());this._postponedUpdateContent()},_onMousewheel:function(d){var c=this.getTable();if(!c.getEnabled()){return}var f=d.getWheelDelta();if(f>0&&f<1){f=1}else{if(f<0&&f>-1){f=-1}}this.__verScrollBar.scrollBySteps(f);if(this.__lastMousePageX&&this.getFocusCellOnMouseMove()){this._focusCellAtPagePos(this.__lastMousePageX,this.__lastMousePageY)}var b=this.__verScrollBar.getPosition();var a=this.__verScrollBar.getMaximum();if(f<0&&b<=0||f>0&&b>=a){return}d.stop()},__handleResizeColumn:function(b){var d=this.getTable();var f=this.__header.getHeaderWidgetAtColumn(this.__resizeColumn);var e=f.getSizeHint().minWidth;var c=Math.max(e,this.__lastResizeWidth+b-this.__lastResizeMousePageX);if(this.getLiveResize()){var a=d.getTableColumnModel();a.setColumnWidth(this.__resizeColumn,c,true)}else{this.__header.setColumnWidth(this.__resizeColumn,c,true);var g=this.getTablePaneModel();this._showResizeLine(g.getColumnLeft(this.__resizeColumn)+c)}this.__lastResizeMousePageX+=c-this.__lastResizeWidth;this.__lastResizeWidth=c},__handleMoveColumn:function(b){var a=qx.ui.table.pane.Scroller.CLICK_TOLERANCE;if(this.__header.isShowingColumnMoveFeedback()||b>this.__lastMoveMousePageX+a||b<this.__lastMoveMousePageX-a){this.__lastMoveColPos+=b-this.__lastMoveMousePageX;this.__header.showColumnMoveFeedback(this.__moveColumn,this.__lastMoveColPos);var c=this.__table.getTablePaneScrollerAtPageX(b);if(this.__lastMoveTargetScroller&&this.__lastMoveTargetScroller!=c){this.__lastMoveTargetScroller.hideColumnMoveFeedback()}if(c!=null){this.__lastMoveTargetX=c.showColumnMoveFeedback(b)}else{this.__lastMoveTargetX=null}this.__lastMoveTargetScroller=c;this.__lastMoveMousePageX=b}},_onMousemoveHeader:function(f){var j=this.getTable();if(!j.getEnabled()){return}var a=false;var g=null;var d=f.getDocumentLeft();var c=f.getDocumentTop();this.__lastMousePageX=d;this.__lastMousePageY=c;if(this.__resizeColumn!=null){this.__handleResizeColumn(d);a=true;f.stopPropagation()}else{if(this.__moveColumn!=null){this.__handleMoveColumn(d);f.stopPropagation()}else{var k=this._getResizeColumnForPageX(d);if(k!=-1){a=true}else{var i=j.getTableModel();var b=this._getColumnForPageX(d);if(b!=null&&i.isColumnSortable(b)){g=b}}}}var h=a?"col-resize":null;this.getApplicationRoot().setGlobalCursor(h);this.setCursor(h);this.__header.setMouseOverColumn(g)},_onMousemovePane:function(d){var c=this.getTable();if(!c.getEnabled()){return}var b=d.getDocumentLeft();var a=d.getDocumentTop();this.__lastMousePageX=b;this.__lastMousePageY=a;var f=this._getRowForPagePos(b,a);if(f!=null&&this._getColumnForPageX(b)!=null){if(this.getFocusCellOnMouseMove()){this._focusCellAtPagePos(b,a)}}this.__header.setMouseOverColumn(null)},_onMousedownHeader:function(c){if(!this.getTable().getEnabled()){return}var b=c.getDocumentLeft();var a=this._getResizeColumnForPageX(b);if(a!=-1){this._startResizeHeader(a,b);c.stop()}else{var d=this._getColumnForPageX(b);if(d!=null){this._startMoveHeader(d,b);c.stop()}}},_startResizeHeader:function(c,b){var a=this.getTable().getTableColumnModel();this.__resizeColumn=c;this.__lastResizeMousePageX=b;this.__lastResizeWidth=a.getColumnWidth(this.__resizeColumn);this.__headerClipper.capture()},_startMoveHeader:function(b,a){this.__moveColumn=b;this.__lastMoveMousePageX=a;this.__lastMoveColPos=this.getTablePaneModel().getColumnLeft(b);this.__headerClipper.capture()},_onMousedownPane:function(f){var d=this.getTable();if(!d.getEnabled()){return}if(d.isEditing()){d.stopEditing()}var c=f.getDocumentLeft();var b=f.getDocumentTop();var g=this._getRowForPagePos(c,b);var a=this._getColumnForPageX(c);if(g!==null){this.__lastMouseDownCell={row:g,col:a};this.__firedClickEvent=false;var h=this.getSelectBeforeFocus();if(h){d.getSelectionManager().handleMouseDown(g,f)}if(!this.getFocusCellOnMouseMove()){this._focusCellAtPagePos(c,b)}if(!h){d.getSelectionManager().handleMouseDown(g,f)}}},_onMouseupFocusIndicator:function(a){if(this.__lastMouseDownCell&&!this.__firedClickEvent&&!this.isEditing()&&this.__focusIndicator.getRow()==this.__lastMouseDownCell.row&&this.__focusIndicator.getColumn()==this.__lastMouseDownCell.col){this.fireEvent("cellClick",qx.ui.table.pane.CellEvent,[this,a,this.__lastMouseDownCell.row,this.__lastMouseDownCell.col],true);this.__firedClickEvent=true}else{if(!this.isEditing()){this._onMousedownPane(a)}}},_onChangeCaptureHeader:function(a){if(this.__resizeColumn!=null){this._stopResizeHeader()}if(this.__moveColumn!=null){this._stopMoveHeader()}},_stopResizeHeader:function(){var b=this.getTable().getTableColumnModel();if(!this.getLiveResize()){this._hideResizeLine();b.setColumnWidth(this.__resizeColumn,this.__lastResizeWidth,true)}this.__resizeColumn=null;this.__headerClipper.releaseCapture();this.getApplicationRoot().setGlobalCursor(null);this.setCursor(null);if(this.isEditing()){var a=this.__cellEditor.getBounds().height;this.__cellEditor.setUserBounds(0,0,this.__lastResizeWidth,a)}},_stopMoveHeader:function(){var c=this.getTable().getTableColumnModel();var g=this.getTablePaneModel();this.__header.hideColumnMoveFeedback();if(this.__lastMoveTargetScroller){this.__lastMoveTargetScroller.hideColumnMoveFeedback()}if(this.__lastMoveTargetX!=null){var f=g.getFirstColumnX()+g.getX(this.__moveColumn);var a=this.__lastMoveTargetX;if(a!=f&&a!=f+1){var e=c.getVisibleColumnAtX(f);var h=c.getVisibleColumnAtX(a);var d=c.getOverallX(e);var b=(h!=null)?c.getOverallX(h):c.getOverallColumnCount();if(b>d){b--}c.moveColumn(d,b);this._updateFocusIndicator()}}this.__moveColumn=null;this.__lastMoveTargetX=null;this.__headerClipper.releaseCapture()},_onMouseupPane:function(b){var a=this.getTable();if(!a.getEnabled()){return}var c=this._getRowForPagePos(b.getDocumentLeft(),b.getDocumentTop());if(c!=-1&&c!=null&&this._getColumnForPageX(b.getDocumentLeft())!=null){a.getSelectionManager().handleMouseUp(c,b)}},_onMouseupHeader:function(b){var a=this.getTable();if(!a.getEnabled()){return}if(this.__resizeColumn!=null){this._stopResizeHeader();this.__ignoreClick=true;b.stop()}else{if(this.__moveColumn!=null){this._stopMoveHeader();b.stop()}}},_onClickHeader:function(f){if(this.__ignoreClick){this.__ignoreClick=false;return}var i=this.getTable();if(!i.getEnabled()){return}var h=i.getTableModel();var c=f.getDocumentLeft();var j=this._getResizeColumnForPageX(c);if(j==-1){var a=this._getColumnForPageX(c);if(a!=null&&h.isColumnSortable(a)){var g=h.getSortColumnIndex();var b=(a!=g)?true:!h.isSortAscending();var d={column:a,ascending:b,clickEvent:f};if(this.fireDataEvent("beforeSort",d,null,true)){h.sortByColumn(a,b);if(this.getResetSelectionOnHeaderClick()){i.getSelectionModel().resetSelection()}}}}f.stop()},_onClickPane:function(f){var d=this.getTable();if(!d.getEnabled()){return}var c=f.getDocumentLeft();var b=f.getDocumentTop();var g=this._getRowForPagePos(c,b);var a=this._getColumnForPageX(c);if(g!=null&&a!=null){d.getSelectionManager().handleClick(g,f);if(this.__focusIndicator.isHidden()||(this.__lastMouseDownCell&&!this.__firedClickEvent&&!this.isEditing()&&g==this.__lastMouseDownCell.row&&a==this.__lastMouseDownCell.col)){this.fireEvent("cellClick",qx.ui.table.pane.CellEvent,[this,f,g,a],true);this.__firedClickEvent=true}}},_onContextMenu:function(d){var c=d.getDocumentLeft();var b=d.getDocumentTop();var g=this._getRowForPagePos(c,b);var a=this._getColumnForPageX(c);if(g===null&&this.getContextMenuFromDataCellsOnly()){return}if(!this.getShowCellFocusIndicator()||g===null||(this.__lastMouseDownCell&&g==this.__lastMouseDownCell.row&&a==this.__lastMouseDownCell.col)){this.fireEvent("cellContextmenu",qx.ui.table.pane.CellEvent,[this,d,g,a],true);var f=this.getTable().getContextMenu();if(f){if(f.getChildren().length>0){f.openAtMouse(d)}else{f.exclude()}d.preventDefault()}}},_onContextMenuOpen:function(a){},_onDblclickPane:function(c){var b=c.getDocumentLeft();var a=c.getDocumentTop();this._focusCellAtPagePos(b,a);this.startEditing();var d=this._getRowForPagePos(b,a);if(d!=-1&&d!=null){this.fireEvent("cellDblclick",qx.ui.table.pane.CellEvent,[this,c,d],true)}},_onMouseout:function(b){var a=this.getTable();if(!a.getEnabled()){return}if(this.__resizeColumn==null){this.setCursor(null);this.getApplicationRoot().setGlobalCursor(null)}this.__header.setMouseOverColumn(null)},_showResizeLine:function(a){var b=this._showChildControl("resize-line");var c=b.getWidth();var d=this.__paneClipper.getBounds();b.setUserBounds(a-Math.round(c/2),0,c,d.height)},_hideResizeLine:function(){this._excludeChildControl("resize-line")},showColumnMoveFeedback:function(e){var n=this.getTablePaneModel();var i=this.getTable().getTableColumnModel();var a=this.__tablePane.getContainerLocation().left;var m=n.getColumnCount();var k=0;var j=0;var b=a;for(var g=0;g<m;g++){var c=n.getColumnAtX(g);var f=i.getColumnWidth(c);if(e<b+f/2){break}b+=f;k=g+1;j=b-a}var h=this.__paneClipper.getContainerLocation().left;var d=this.__paneClipper.getBounds().width;var l=h-a;j=qx.lang.Number.limit(j,l+2,l+d-1);this._showResizeLine(j);return n.getFirstColumnX()+k},hideColumnMoveFeedback:function(){this._hideResizeLine()},_focusCellAtPagePos:function(c,b){var d=this._getRowForPagePos(c,b);if(d!=-1&&d!=null){var a=this._getColumnForPageX(c);this.__table.setFocusedCell(a,d)}},setFocusedCell:function(a,b){if(!this.isEditing()){this.__tablePane.setFocusedCell(a,b,this.__updateContentPlanned);this.__focusedCol=a;this.__focusedRow=b;this._updateFocusIndicator()}},getFocusedColumn:function(){return this.__focusedCol},getFocusedRow:function(){return this.__focusedRow},scrollCellVisible:function(d,o){var p=this.getTablePaneModel();var f=p.getX(d);if(f!=-1){var l=this.__paneClipper.getInnerSize();if(!l){return}var g=this.getTable().getTableColumnModel();var n=p.getColumnLeft(d);var e=g.getColumnWidth(d);var c=this.getTable().getRowHeight();var b=o*c;var k=this.getScrollX();var j=this.getScrollY();var a=Math.min(n,n+e-l.width);var i=n;this.setScrollX(Math.max(a,Math.min(i,k)));var m=b+c-l.height;if(this.getTable().getKeepFirstVisibleRowComplete()){m+=c}var h=b;this.setScrollY(Math.max(m,Math.min(h,j)),true)}},isEditing:function(){return this.__cellEditor!=null},startEditing:function(){var h=this.getTable();var g=h.getTableModel();var a=this.__focusedCol;if(!this.isEditing()&&(a!=null)&&g.isColumnEditable(a)){var j=this.__focusedRow;var c=this.getTablePaneModel().getX(a);var e=g.getValue(a,j);this.scrollCellVisible(c,j);this.__cellEditorFactory=h.getTableColumnModel().getCellEditorFactory(a);var b={col:a,row:j,xPos:c,value:e,table:h};this.__cellEditor=this.__cellEditorFactory.createCellEditor(b);if(this.__cellEditor===null){return false}else{if(this.__cellEditor instanceof qx.ui.window.Window){this.__cellEditor.setModal(true);this.__cellEditor.setShowClose(false);this.__cellEditor.addListener("close",this._onCellEditorModalWindowClose,this);var d=h.getModalCellEditorPreOpenFunction();if(d!=null){d(this.__cellEditor,b)}this.__cellEditor.open()}else{var i=this.__focusIndicator.getInnerSize();this.__cellEditor.setUserBounds(0,0,i.width,i.height);this.__focusIndicator.addListener("mousedown",function(f){this.__lastMouseDownCell={row:this.__focusedRow,col:this.__focusedCol};f.stopPropagation()},this);this.__focusIndicator.add(this.__cellEditor);this.__focusIndicator.addState("editing");this.__focusIndicator.setKeepActive(false);this.__focusIndicator.setDecorator("table-scroller-focus-indicator");this.__cellEditor.focus();this.__cellEditor.activate()}}return true}return false},stopEditing:function(){if(!this.getShowCellFocusIndicator()){this.__focusIndicator.setDecorator(null)}this.flushEditor();this.cancelEditing()},flushEditor:function(){if(this.isEditing()){var b=this.__cellEditorFactory.getCellEditorValue(this.__cellEditor);var a=this.getTable().getTableModel().getValue(this.__focusedCol,this.__focusedRow);this.getTable().getTableModel().setValue(this.__focusedCol,this.__focusedRow,b);this.__table.focus();this.__table.fireDataEvent("dataEdited",{row:this.__focusedRow,col:this.__focusedCol,oldValue:a,value:b})}},cancelEditing:function(){if(this.isEditing()&&!this.__cellEditor.pendingDispose){if(this._cellEditorIsModalWindow){this.__cellEditor.destroy();this.__cellEditor=null;this.__cellEditorFactory=null;this.__cellEditor.pendingDispose=true}else{this.__focusIndicator.removeState("editing");this.__focusIndicator.setKeepActive(true);this.__cellEditor.destroy();this.__cellEditor=null;this.__cellEditorFactory=null}}},_onCellEditorModalWindowClose:function(a){this.stopEditing()},_getColumnForPageX:function(f){var e=this.getTable().getTableColumnModel();var h=this.getTablePaneModel();var g=h.getColumnCount();var c=this.__header.getContainerLocation().left;for(var a=0;a<g;a++){var b=h.getColumnAtX(a);var d=e.getColumnWidth(b);c+=d;if(f<c){return b}}return null},_getResizeColumnForPageX:function(c){var e=this.getTable().getTableColumnModel();var i=this.getTablePaneModel();var h=i.getColumnCount();var a=this.__header.getContainerLocation().left;var f=qx.ui.table.pane.Scroller.RESIZE_REGION_RADIUS;for(var g=0;g<h;g++){var b=i.getColumnAtX(g);var d=e.getColumnWidth(b);a+=d;if(c>=(a-f)&&c<=(a+f)){return b}}return -1},_getRowForPagePos:function(f,d){var e=this.__tablePane.getContentLocation();if(f<e.left||f>e.right){return null}if(d>=e.top&&d<=e.bottom){var b=this.getTable().getRowHeight();var h=this.__verScrollBar.getPosition();if(this.getTable().getKeepFirstVisibleRowComplete()){h=Math.floor(h/b)*b}var a=h+d-e.top;var j=Math.floor(a/b);var i=this.getTable().getTableModel();var g=i.getRowCount();return(j<g)?j:null}var c=this.__header.getContainerLocation();if(d>=c.top&&d<=c.bottom&&f<=c.right){return -1}return null},setTopRightWidget:function(b){var a=this.__topRightWidget;if(a!=null){this.__top.remove(a)}if(b!=null){this.__top.add(b)}this.__topRightWidget=b},getTopRightWidget:function(){return this.__topRightWidget},getHeader:function(){return this.__header},getTablePane:function(){return this.__tablePane},getVerticalScrollBarWidth:function(){var a=this.__verScrollBar;return a.isVisible()?(a.getSizeHint().width||0):0},getNeededScrollBars:function(q,c){var a=this.__verScrollBar;var j=a.getSizeHint().width+a.getMarginLeft()+a.getMarginRight();var b=this.__horScrollBar;var o=b.getSizeHint().height+b.getMarginTop()+b.getMarginBottom();var p=this.__paneClipper.getInnerSize();var h=p?p.width:0;if(this.getVerticalScrollBarVisible()){h+=j}var f=p?p.height:0;if(this.getHorizontalScrollBarVisible()){f+=o}var n=this.getTable().getTableModel();var l=n.getRowCount();var i=this.getTablePaneModel().getTotalWidth();var e=this.getTable().getRowHeight()*l;var m=false;var k=false;if(i>h){m=true;if(e>f-o){k=true}}else{if(e>f){k=true;if(!c&&(i>h-j)){m=true}}}var d=qx.ui.table.pane.Scroller.HORIZONTAL_SCROLLBAR;var g=qx.ui.table.pane.Scroller.VERTICAL_SCROLLBAR;return((q||m)?d:0)|((c||!k)?0:g)},getPaneClipper:function(){return this.__paneClipper},_applyScrollTimeout:function(b,a){this._startInterval(b)},_startInterval:function(a){this.__timer.setInterval(a);this.__timer.start()},_stopInterval:function(){this.__timer.stop()},_postponedUpdateContent:function(){this._updateContent()},_oninterval:qx.event.GlobalError.observeMethod(function(){if(this.__updateContentPlanned&&!this.__tablePane._layoutPending){this.__updateContentPlanned=false;this._updateContent()}}),_updateContent:function(){var i=this.__paneClipper.getInnerSize();if(!i){return}var b=i.height;var j=this.__horScrollBar.getPosition();var h=this.__verScrollBar.getPosition();var a=this.getTable().getRowHeight();var c=Math.floor(h/a);var f=this.__tablePane.getFirstVisibleRow();this.__tablePane.setFirstVisibleRow(c);var d=Math.ceil(b/a);var e=0;var g=this.getTable().getKeepFirstVisibleRowComplete();if(!g){d++;e=h%a}this.__tablePane.setVisibleRowCount(d);if(c!=f){this._updateFocusIndicator()}this.__paneClipper.scrollToX(j);if(!g){this.__paneClipper.scrollToY(e)}},_updateFocusIndicator:function(){var a=this.getTable();if(!a.getEnabled()){return}this.__focusIndicator.moveToCell(this.__focusedCol,this.__focusedRow)}},destruct:function(){this._stopInterval();var a=this.getTablePaneModel();if(a){a.dispose()}this.__lastMouseDownCell=this.__topRightWidget=this.__table=null;this._disposeObjects("__horScrollBar","__verScrollBar","__headerClipper","__paneClipper","__focusIndicator","__header","__tablePane","__top","__timer")}});qx.Interface.define("qx.ui.core.scroll.IScrollBar",{events:{scroll:"qx.event.type.Data"},properties:{orientation:{},maximum:{},position:{},knobFactor:{}},members:{scrollTo:function(a){this.assertNumber(a)},scrollBy:function(a){this.assertNumber(a)},scrollBySteps:function(a){this.assertNumber(a)}}});qx.Class.define("qx.ui.core.scroll.NativeScrollBar",{extend:qx.ui.core.Widget,implement:qx.ui.core.scroll.IScrollBar,construct:function(a){this.base(arguments);this.addState("native");this.getContentElement().addListener("scroll",this._onScroll,this);this.addListener("mousedown",this._stopPropagation,this);this.addListener("mouseup",this._stopPropagation,this);this.addListener("mousemove",this._stopPropagation,this);if((qx.core.Environment.get("engine.name")=="opera")){this.addListener("appear",this._onAppear,this)}this.getContentElement().add(this._getScrollPaneElement());if(a!=null){this.setOrientation(a)}else{this.initOrientation()}},properties:{appearance:{refine:true,init:"scrollbar"},orientation:{check:["horizontal","vertical"],init:"horizontal",apply:"_applyOrientation"},maximum:{check:"PositiveInteger",apply:"_applyMaximum",init:100},position:{check:"Number",init:0,apply:"_applyPosition",event:"scroll"},singleStep:{check:"Integer",init:20},knobFactor:{check:"PositiveNumber",nullable:true}},members:{__isHorizontal:null,__scrollPaneElement:null,_getScrollPaneElement:function(){if(!this.__scrollPaneElement){this.__scrollPaneElement=new qx.html.Element()}return this.__scrollPaneElement},renderLayout:function(e,d,c,a){var b=this.base(arguments,e,d,c,a);this._updateScrollBar();return b},_getContentHint:function(){var a=qx.bom.element.Overflow.getScrollbarWidth();return{width:this.__isHorizontal?100:a,maxWidth:this.__isHorizontal?null:a,minWidth:this.__isHorizontal?null:a,height:this.__isHorizontal?a:100,maxHeight:this.__isHorizontal?a:null,minHeight:this.__isHorizontal?a:null}},_applyEnabled:function(b,a){this.base(arguments,b,a);this._updateScrollBar()},_applyMaximum:function(a){this._updateScrollBar()},_applyPosition:function(b){var a=this.getContentElement();if(this.__isHorizontal){a.scrollToX(b)}else{a.scrollToY(b)}},_applyOrientation:function(b,a){var c=this.__isHorizontal=b==="horizontal";this.set({allowGrowX:c,allowShrinkX:c,allowGrowY:!c,allowShrinkY:!c});if(c){this.replaceState("vertical","horizontal")}else{this.replaceState("horizontal","vertical")}this.getContentElement().setStyles({overflowX:c?"scroll":"hidden",overflowY:c?"hidden":"scroll"});qx.ui.core.queue.Layout.add(this)},_updateScrollBar:function(){var d=this.__isHorizontal;var b=this.getBounds();if(!b){return}if(this.isEnabled()){var c=d?b.width:b.height;var a=this.getMaximum()+c}else{a=0}if((qx.core.Environment.get("engine.name")=="mshtml")){var b=this.getBounds();this.getContentElement().setStyles({left:d?"0":"-1px",top:d?"-1px":"0",width:(d?b.width:b.width+1)+"px",height:(d?b.height+1:b.height)+"px"})}this._getScrollPaneElement().setStyles({left:0,top:0,width:(d?a:1)+"px",height:(d?1:a)+"px"});this.scrollTo(this.getPosition())},scrollTo:function(a){this.setPosition(Math.max(0,Math.min(this.getMaximum(),a)))},scrollBy:function(a){this.scrollTo(this.getPosition()+a)},scrollBySteps:function(a){var b=this.getSingleStep();this.scrollBy(a*b)},_onScroll:function(c){var b=this.getContentElement();var a=this.__isHorizontal?b.getScrollX():b.getScrollY();this.setPosition(a)},_onAppear:function(a){this.scrollTo(this.getPosition())},_stopPropagation:function(a){a.stopPropagation()}},destruct:function(){this._disposeObjects("__scrollPaneElement")}});qx.Class.define("qx.ui.core.scroll.ScrollBar",{extend:qx.ui.core.Widget,implement:qx.ui.core.scroll.IScrollBar,construct:function(a){this.base(arguments);this._createChildControl("button-begin");this._createChildControl("slider").addListener("resize",this._onResizeSlider,this);this._createChildControl("button-end");if(a!=null){this.setOrientation(a)}else{this.initOrientation()}},properties:{appearance:{refine:true,init:"scrollbar"},orientation:{check:["horizontal","vertical"],init:"horizontal",apply:"_applyOrientation"},maximum:{check:"PositiveInteger",apply:"_applyMaximum",init:100},position:{check:"qx.lang.Type.isNumber(value)&&value>=0&&value<=this.getMaximum()",init:0,apply:"_applyPosition",event:"scroll"},singleStep:{check:"Integer",init:20},pageStep:{check:"Integer",init:10,apply:"_applyPageStep"},knobFactor:{check:"PositiveNumber",apply:"_applyKnobFactor",nullable:true}},members:{__offset:2,_createChildControlImpl:function(c,b){var a;switch(c){case"slider":a=new qx.ui.core.scroll.ScrollSlider();a.setPageStep(100);a.setFocusable(false);a.addListener("changeValue",this._onChangeSliderValue,this);this._add(a,{flex:1});break;case"button-begin":a=new qx.ui.form.RepeatButton();a.setFocusable(false);a.addListener("execute",this._onExecuteBegin,this);this._add(a);break;case"button-end":a=new qx.ui.form.RepeatButton();a.setFocusable(false);a.addListener("execute",this._onExecuteEnd,this);this._add(a);break}return a||this.base(arguments,c)},_applyMaximum:function(a){this.getChildControl("slider").setMaximum(a)},_applyPosition:function(a){this.getChildControl("slider").setValue(a)},_applyKnobFactor:function(a){this.getChildControl("slider").setKnobFactor(a)},_applyPageStep:function(a){this.getChildControl("slider").setPageStep(a)},_applyOrientation:function(c,a){var b=this._getLayout();if(b){b.dispose()}if(c==="horizontal"){this._setLayout(new qx.ui.layout.HBox());this.setAllowStretchX(true);this.setAllowStretchY(false);this.replaceState("vertical","horizontal");this.getChildControl("button-begin").replaceState("up","left");this.getChildControl("button-end").replaceState("down","right")}else{this._setLayout(new qx.ui.layout.VBox());this.setAllowStretchX(false);this.setAllowStretchY(true);this.replaceState("horizontal","vertical");this.getChildControl("button-begin").replaceState("left","up");this.getChildControl("button-end").replaceState("right","down")}this.getChildControl("slider").setOrientation(c)},scrollTo:function(a){this.getChildControl("slider").slideTo(a)},scrollBy:function(a){this.getChildControl("slider").slideBy(a)},scrollBySteps:function(a){var b=this.getSingleStep();this.getChildControl("slider").slideBy(a*b)},_onExecuteBegin:function(a){this.scrollBy(-this.getSingleStep())},_onExecuteEnd:function(a){this.scrollBy(this.getSingleStep())},_onChangeSliderValue:function(a){this.setPosition(a.getData())},_onResizeSlider:function(f){var a=this.getChildControl("slider").getChildControl("knob");var d=a.getSizeHint();var c=false;var b=this.getChildControl("slider").getInnerSize();if(this.getOrientation()=="vertical"){if(b.height<d.minHeight+this.__offset){c=true}}else{if(b.width<d.minWidth+this.__offset){c=true}}if(c){a.exclude()}else{a.show()}}}});qx.Interface.define("qx.ui.form.IRange",{members:{setMinimum:function(a){return arguments.length==1},getMinimum:function(){},setMaximum:function(a){return arguments.length==1},getMaximum:function(){},setSingleStep:function(a){return arguments.length==1},getSingleStep:function(){},setPageStep:function(a){return arguments.length==1},getPageStep:function(){}}});qx.Interface.define("qx.ui.form.INumberForm",{events:{changeValue:"qx.event.type.Data"},members:{setValue:function(a){return arguments.length==1},resetValue:function(){},getValue:function(){}}});qx.Class.define("qx.ui.form.Slider",{extend:qx.ui.core.Widget,implement:[qx.ui.form.IForm,qx.ui.form.INumberForm,qx.ui.form.IRange],include:[qx.ui.form.MForm],construct:function(a){this.base(arguments);this._setLayout(new qx.ui.layout.Canvas());this.addListener("keypress",this._onKeyPress);this.addListener("mousewheel",this._onMouseWheel);this.addListener("mousedown",this._onMouseDown);this.addListener("mouseup",this._onMouseUp);this.addListener("losecapture",this._onMouseUp);this.addListener("resize",this._onUpdate);this.addListener("contextmenu",this._onStopEvent);this.addListener("click",this._onStopEvent);this.addListener("dblclick",this._onStopEvent);if(a!=null){this.setOrientation(a)}else{this.initOrientation()}},events:{changeValue:"qx.event.type.Data"},properties:{appearance:{refine:true,init:"slider"},focusable:{refine:true,init:true},orientation:{check:["horizontal","vertical"],init:"horizontal",apply:"_applyOrientation"},value:{check:"typeof value==='number'&&value>=this.getMinimum()&&value<=this.getMaximum()",init:0,apply:"_applyValue",nullable:true},minimum:{check:"Integer",init:0,apply:"_applyMinimum",event:"changeMinimum"},maximum:{check:"Integer",init:100,apply:"_applyMaximum",event:"changeMaximum"},singleStep:{check:"Integer",init:1},pageStep:{check:"Integer",init:10},knobFactor:{check:"Number",apply:"_applyKnobFactor",nullable:true}},members:{__sliderLocation:null,__knobLocation:null,__knobSize:null,__dragMode:null,__dragOffset:null,__trackingMode:null,__trackingDirection:null,__trackingEnd:null,__timer:null,__dragTimer:null,__lastValueEvent:null,__dragValue:null,_forwardStates:{invalid:true},_createChildControlImpl:function(c,b){var a;switch(c){case"knob":a=new qx.ui.core.Widget();a.addListener("resize",this._onUpdate,this);a.addListener("mouseover",this._onMouseOver);a.addListener("mouseout",this._onMouseOut);this._add(a);break}return a||this.base(arguments,c)},_onMouseOver:function(a){this.addState("hovered")},_onMouseOut:function(a){this.removeState("hovered")},_onMouseWheel:function(b){var a=b.getWheelDelta()>0?1:-1;this.slideBy(a*this.getSingleStep());b.stop()},_onKeyPress:function(b){var d=this.getOrientation()==="horizontal";var c=d?"Left":"Up";var a=d?"Right":"Down";switch(b.getKeyIdentifier()){case a:this.slideForward();break;case c:this.slideBack();break;case"PageDown":this.slidePageForward();break;case"PageUp":this.slidePageBack();break;case"Home":this.slideToBegin();break;case"End":this.slideToEnd();break;default:return}b.stop()},_onMouseDown:function(g){if(this.__dragMode){return}var h=this.__isHorizontal;var a=this.getChildControl("knob");var d=h?"left":"top";var b=h?g.getDocumentLeft():g.getDocumentTop();var c=this.__sliderLocation=qx.bom.element.Location.get(this.getContentElement().getDomElement())[d];var f=this.__knobLocation=qx.bom.element.Location.get(a.getContainerElement().getDomElement())[d];if(g.getTarget()===a){this.__dragMode=true;if(!this.__dragTimer){this.__dragTimer=new qx.event.Timer(100);this.__dragTimer.addListener("interval",this._fireValue,this)}this.__dragTimer.start();this.__dragOffset=b+c-f;a.addState("pressed")}else{this.__trackingMode=true;this.__trackingDirection=b<=f?-1:1;this.__computeTrackingEnd(g);this._onInterval();if(!this.__timer){this.__timer=new qx.event.Timer(100);this.__timer.addListener("interval",this._onInterval,this)}this.__timer.start()}this.addListener("mousemove",this._onMouseMove);this.capture();g.stopPropagation()},_onMouseUp:function(c){if(this.__dragMode){this.releaseCapture();delete this.__dragMode;this.__dragTimer.stop();this._fireValue();delete this.__dragOffset;this.getChildControl("knob").removeState("pressed");if(c.getType()==="mouseup"){var b;var a;var d;if(this.__isHorizontal){b=c.getDocumentLeft()-(this._valueToPosition(this.getValue())+this.__sliderLocation);d=qx.bom.element.Location.get(this.getContentElement().getDomElement())["top"];a=c.getDocumentTop()-(d+this.getChildControl("knob").getBounds().top)}else{b=c.getDocumentTop()-(this._valueToPosition(this.getValue())+this.__sliderLocation);d=qx.bom.element.Location.get(this.getContentElement().getDomElement())["left"];a=c.getDocumentLeft()-(d+this.getChildControl("knob").getBounds().left)}if(a<0||a>this.__knobSize||b<0||b>this.__knobSize){this.getChildControl("knob").removeState("hovered")}}}else{if(this.__trackingMode){this.__timer.stop();this.releaseCapture();delete this.__trackingMode;delete this.__trackingDirection;delete this.__trackingEnd}}this.removeListener("mousemove",this._onMouseMove);if(c.getType()==="mouseup"){c.stopPropagation()}},_onMouseMove:function(c){if(this.__dragMode){var b=this.__isHorizontal?c.getDocumentLeft():c.getDocumentTop();var a=b-this.__dragOffset;this.slideTo(this._positionToValue(a))}else{if(this.__trackingMode){this.__computeTrackingEnd(c)}}c.stopPropagation()},_onInterval:function(c){var b=this.getValue()+(this.__trackingDirection*this.getPageStep());if(b<this.getMinimum()){b=this.getMinimum()}else{if(b>this.getMaximum()){b=this.getMaximum()}}var a=this.__trackingDirection==-1;if((a&&b<=this.__trackingEnd)||(!a&&b>=this.__trackingEnd)){b=this.__trackingEnd}this.slideTo(b)},_onUpdate:function(d){var c=this.getInnerSize();var a=this.getChildControl("knob").getBounds();var b=this.__isHorizontal?"width":"height";this._updateKnobSize();this.__slidingSpace=c[b]-a[b];this.__knobSize=a[b];this._updateKnobPosition()},__isHorizontal:false,__slidingSpace:0,__computeTrackingEnd:function(i){var l=this.__isHorizontal;var j=l?i.getDocumentLeft():i.getDocumentTop();var n=this.__sliderLocation;var h=this.__knobLocation;var d=this.__knobSize;var g=j-n;if(j>=h){g-=d}var m=this._positionToValue(g);var f=this.getMinimum();var k=this.getMaximum();if(m<f){m=f}else{if(m>k){m=k}else{var c=this.getValue();var b=this.getPageStep();var a=this.__trackingDirection<0?"floor":"ceil";m=c+(Math[a]((m-c)/b)*b)}}if(this.__trackingEnd==null||(this.__trackingDirection==-1&&m<=this.__trackingEnd)||(this.__trackingDirection==1&&m>=this.__trackingEnd)){this.__trackingEnd=m}},_positionToValue:function(a){var d=this.__slidingSpace;if(d==null||d==0){return 0}var c=a/d;if(c<0){c=0}else{if(c>1){c=1}}var b=this.getMaximum()-this.getMinimum();return this.getMinimum()+Math.round(b*c)},_valueToPosition:function(d){var c=this.__slidingSpace;if(c==null){return 0}var a=this.getMaximum()-this.getMinimum();if(a==0){return 0}var d=d-this.getMinimum();var b=d/a;if(b<0){b=0}else{if(b>1){b=1}}return Math.round(c*b)},_updateKnobPosition:function(){this._setKnobPosition(this._valueToPosition(this.getValue()))},_setKnobPosition:function(a){var b=this.getChildControl("knob").getContainerElement();if(this.__isHorizontal){b.setStyle("left",a+"px",true)}else{b.setStyle("top",a+"px",true)}},_updateKnobSize:function(){var b=this.getKnobFactor();if(b==null){return}var a=this.getInnerSize();if(a==null){return}if(this.__isHorizontal){this.getChildControl("knob").setWidth(Math.round(b*a.width))}else{this.getChildControl("knob").setHeight(Math.round(b*a.height))}},slideToBegin:function(){this.slideTo(this.getMinimum())},slideToEnd:function(){this.slideTo(this.getMaximum())},slideForward:function(){this.slideBy(this.getSingleStep())},slideBack:function(){this.slideBy(-this.getSingleStep())},slidePageForward:function(){this.slideBy(this.getPageStep())},slidePageBack:function(){this.slideBy(-this.getPageStep())},slideBy:function(a){this.slideTo(this.getValue()+a)},slideTo:function(a){if(a<this.getMinimum()){a=this.getMinimum()}else{if(a>this.getMaximum()){a=this.getMaximum()}else{a=this.getMinimum()+Math.round((a-this.getMinimum())/this.getSingleStep())*this.getSingleStep()}}this.setValue(a)},_applyOrientation:function(c,b){var a=this.getChildControl("knob");this.__isHorizontal=c==="horizontal";if(this.__isHorizontal){this.removeState("vertical");a.removeState("vertical");this.addState("horizontal");a.addState("horizontal");a.setLayoutProperties({top:0,right:null,bottom:0})}else{this.removeState("horizontal");a.removeState("horizontal");this.addState("vertical");a.addState("vertical");a.setLayoutProperties({right:0,bottom:null,left:0})}this._updateKnobPosition()},_applyKnobFactor:function(b,a){if(b!=null){this._updateKnobSize()}else{if(this.__isHorizontal){this.getChildControl("knob").resetWidth()}else{this.getChildControl("knob").resetHeight()}}},_applyValue:function(b,a){if(b!=null){this._updateKnobPosition();if(this.__dragMode){this.__dragValue=[b,a]}else{this.fireEvent("changeValue",qx.event.type.Data,[b,a])}}else{this.resetValue()}},_fireValue:function(){if(!this.__dragValue){return}var a=this.__dragValue;this.__dragValue=null;this.fireEvent("changeValue",qx.event.type.Data,a)},_applyMinimum:function(b,a){if(this.getValue()<b){this.setValue(b)}this._updateKnobPosition()},_applyMaximum:function(b,a){if(this.getValue()>b){this.setValue(b)}this._updateKnobPosition()}}});qx.Class.define("qx.ui.core.scroll.ScrollSlider",{extend:qx.ui.form.Slider,construct:function(a){this.base(arguments,a);this.removeListener("keypress",this._onKeyPress);this.removeListener("mousewheel",this._onMouseWheel)},members:{getSizeHint:function(a){var b=this.base(arguments);if(this.getOrientation()==="horizontal"){b.width=0}else{b.height=0}return b}}});qx.Class.define("qx.ui.table.pane.Clipper",{extend:qx.ui.container.Composite,construct:function(){this.base(arguments,new qx.ui.layout.Grow());this.setMinWidth(0)},members:{scrollToX:function(a){this.getContentElement().scrollToX(a,false)},scrollToY:function(a){this.getContentElement().scrollToY(a,true)}}});qx.Class.define("qx.ui.table.pane.FocusIndicator",{extend:qx.ui.container.Composite,construct:function(a){this.base(arguments);this.__scroller=a;this.setKeepActive(true);this.addListener("keypress",this._onKeyPress,this)},properties:{visibility:{refine:true,init:"excluded"},row:{check:"Integer",nullable:true},column:{check:"Integer",nullable:true}},members:{__scroller:null,_onKeyPress:function(b){var a=b.getKeyIdentifier();if(a!=="Escape"&&a!=="Enter"){b.stopPropagation()}},moveToCell:function(a,h){if(!this.__scroller.getShowCellFocusIndicator()&&!this.__scroller.getTable().getTableModel().isColumnEditable(a)){this.exclude();return}else{this.show()}if(a==null){this.hide();this.setRow(null);this.setColumn(null)}else{var g=this.__scroller.getTablePaneModel().getX(a);if(g==-1){this.hide();this.setRow(null);this.setColumn(null)}else{var d=this.__scroller.getTable();var b=d.getTableColumnModel();var f=this.__scroller.getTablePaneModel();var e=this.__scroller.getTablePane().getFirstVisibleRow();var c=d.getRowHeight();this.setUserBounds(f.getColumnLeft(a)-2,(h-e)*c-2,b.getColumnWidth(a)+3,c+3);this.show();this.setRow(h);this.setColumn(a)}}}},destruct:function(){this.__scroller=null}});qx.Class.define("qx.ui.table.pane.CellEvent",{extend:qx.event.type.Mouse,properties:{row:{check:"Integer",nullable:true},column:{check:"Integer",nullable:true}},members:{init:function(a,c,d,b){c.clone(this);this.setBubbles(false);if(d!=null){this.setRow(d)}else{this.setRow(a._getRowForPagePos(this.getDocumentLeft(),this.getDocumentTop()))}if(b!=null){this.setColumn(b)}else{this.setColumn(a._getColumnForPageX(this.getDocumentLeft()))}},clone:function(a){var b=this.base(arguments,a);b.set({row:this.getRow(),column:this.getColumn()});return b}}});qx.Class.define("qx.lang.Number",{statics:{isInRange:function(b,a,c){return b>=a&&b<=c},isBetweenRange:function(b,a,c){return b>a&&b<c},limit:function(b,a,c){if(c!=null&&b>c){return c}else{if(a!=null&&b<a){return a}else{return b}}}}});qx.Interface.define("qx.ui.window.IWindowManager",{members:{setDesktop:function(a){this.assertInterface(a,qx.ui.window.IDesktop)},changeActiveWindow:function(b,a){},updateStack:function(){},bringToFront:function(a){this.assertInstance(a,qx.ui.window.Window)},sendToBack:function(a){this.assertInstance(a,qx.ui.window.Window)}}});qx.Class.define("qx.ui.window.Manager",{extend:qx.core.Object,implement:qx.ui.window.IWindowManager,members:{__desktop:null,setDesktop:function(a){this.__desktop=a;this.updateStack()},getDesktop:function(){return this.__desktop},changeActiveWindow:function(b,a){if(b){this.bringToFront(b);b.setActive(true)}if(a){a.resetActive()}},_minZIndex:100000,updateStack:function(){qx.ui.core.queue.Widget.add(this)},syncWidget:function(){this.__desktop.forceUnblockContent();var d=this.__desktop.getWindows();var h=this._minZIndex;var g=h+d.length*2;var c=h+d.length*4;var f=null;for(var b=0,a=d.length;b<a;b++){var e=d[b];if(!e.isVisible()){continue}f=f||e;if(e.isModal()){e.setZIndex(c);this.__desktop.blockContent(c-1);c+=2;f=e}else{if(e.isAlwaysOnTop()){e.setZIndex(g);g+=2}else{e.setZIndex(h);h+=2}}if(!f.isModal()&&e.isActive()||e.getZIndex()>f.getZIndex()){f=e}}this.__desktop.setActiveWindow(f)},bringToFront:function(c){var a=this.__desktop.getWindows();var b=qx.lang.Array.remove(a,c);if(b){a.push(c);this.updateStack()}},sendToBack:function(c){var a=this.__desktop.getWindows();var b=qx.lang.Array.remove(a,c);if(b){a.unshift(c);this.updateStack()}}},destruct:function(){this._disposeObjects("__desktop")}});qx.Mixin.define("qx.ui.core.MMovable",{properties:{movable:{check:"Boolean",init:true},useMoveFrame:{check:"Boolean",init:false}},members:{__moveHandle:null,__moveFrame:null,__dragRange:null,__dragLeft:null,__dragTop:null,__parentLeft:null,__parentTop:null,__blockerAdded:false,__oldBlockerColor:null,__oldBlockerOpacity:0,_activateMoveHandle:function(a){if(this.__moveHandle){throw new Error("The move handle could not be redefined!")}this.__moveHandle=a;a.addListener("mousedown",this._onMoveMouseDown,this);a.addListener("mouseup",this._onMoveMouseUp,this);a.addListener("mousemove",this._onMoveMouseMove,this);a.addListener("losecapture",this.__onMoveLoseCapture,this)},__getMoveFrame:function(){var a=this.__moveFrame;if(!a){a=this.__moveFrame=new qx.ui.core.Widget();a.setAppearance("move-frame");a.exclude();qx.core.Init.getApplication().getRoot().add(a)}return a},__showMoveFrame:function(){var a=this.getContainerLocation();var b=this.getBounds();var c=this.__getMoveFrame();c.setUserBounds(a.left,a.top,b.width,b.height);c.show();c.setZIndex(this.getZIndex()+1)},__computeMoveCoordinates:function(d){var b=this.__dragRange;var g=Math.max(b.left,Math.min(b.right,d.getDocumentLeft()));var f=Math.max(b.top,Math.min(b.bottom,d.getDocumentTop()));var c=this.__dragLeft+g;var a=this.__dragTop+f;return{viewportLeft:c,viewportTop:a,parentLeft:c-this.__parentLeft,parentTop:a-this.__parentTop}},_onMoveMouseDown:function(c){if(!this.getMovable()||this.hasState("maximized")){return}var b=this.getLayoutParent();var f=b.getContentLocation();var d=b.getBounds();if(qx.Class.implementsInterface(b,qx.ui.window.IDesktop)){if(!b.isContentBlocked()){this.__oldBlockerColor=b.getBlockerColor();this.__oldBlockerOpacity=b.getBlockerOpacity();b.setBlockerColor(null);b.setBlockerOpacity(1);b.blockContent(this.getZIndex()-1);this.__blockerAdded=true}}this.__dragRange={left:f.left,top:f.top,right:f.left+d.width,bottom:f.top+d.height};var a=this.getContainerLocation();this.__parentLeft=f.left;this.__parentTop=f.top;this.__dragLeft=a.left-c.getDocumentLeft();this.__dragTop=a.top-c.getDocumentTop();this.addState("move");this.__moveHandle.capture();if(this.getUseMoveFrame()){this.__showMoveFrame()}c.stop()},_onMoveMouseMove:function(b){if(!this.hasState("move")){return}var a=this.__computeMoveCoordinates(b);if(this.getUseMoveFrame()){this.__getMoveFrame().setDomPosition(a.viewportLeft,a.viewportTop)}else{this.setDomPosition(a.parentLeft,a.parentTop)}b.stopPropagation()},_onMoveMouseUp:function(c){if(!this.hasState("move")){return}this.removeState("move");var a=this.getLayoutParent();if(qx.Class.implementsInterface(a,qx.ui.window.IDesktop)){if(this.__blockerAdded){a.unblockContent();a.setBlockerColor(this.__oldBlockerColor);a.setBlockerOpacity(this.__oldBlockerOpacity);this.__oldBlockerColor=null;this.__oldBlockerOpacity=0;this.__blockerAdded=false}}this.__moveHandle.releaseCapture();var b=this.__computeMoveCoordinates(c);this.setLayoutProperties({left:b.parentLeft,top:b.parentTop});if(this.getUseMoveFrame()){this.__getMoveFrame().exclude()}c.stopPropagation()},__onMoveLoseCapture:function(a){if(!this.hasState("move")){return}this.removeState("move");if(this.getUseMoveFrame()){this.__getMoveFrame().exclude()}}},destruct:function(){this._disposeObjects("__moveFrame","__moveHandle");this.__dragRange=null}});qx.Mixin.define("qx.ui.core.MContentPadding",{properties:{contentPaddingTop:{check:"Integer",init:0,apply:"_applyContentPadding",themeable:true},contentPaddingRight:{check:"Integer",init:0,apply:"_applyContentPadding",themeable:true},contentPaddingBottom:{check:"Integer",init:0,apply:"_applyContentPadding",themeable:true},contentPaddingLeft:{check:"Integer",init:0,apply:"_applyContentPadding",themeable:true},contentPadding:{group:["contentPaddingTop","contentPaddingRight","contentPaddingBottom","contentPaddingLeft"],mode:"shorthand",themeable:true}},members:{__contentPaddingSetter:{contentPaddingTop:"setPaddingTop",contentPaddingRight:"setPaddingRight",contentPaddingBottom:"setPaddingBottom",contentPaddingLeft:"setPaddingLeft"},__contentPaddingResetter:{contentPaddingTop:"resetPaddingTop",contentPaddingRight:"resetPaddingRight",contentPaddingBottom:"resetPaddingBottom",contentPaddingLeft:"resetPaddingLeft"},_applyContentPadding:function(c,a,b){var d=this._getContentPaddingTarget();if(c==null){var f=this.__contentPaddingResetter[b];d[f]()}else{var e=this.__contentPaddingSetter[b];d[e](c)}}}});qx.Mixin.define("qx.ui.core.MResizable",{construct:function(){var a=this.getContainerElement();a.addListener("mousedown",this.__onResizeMouseDown,this,true);a.addListener("mouseup",this.__onResizeMouseUp,this);a.addListener("mousemove",this.__onResizeMouseMove,this);a.addListener("mouseout",this.__onResizeMouseOut,this);a.addListener("losecapture",this.__onResizeLoseCapture,this);var b=this.getContainerElement().getDomElement();if(b==null){b=window}this.__dragDropHandler=qx.event.Registration.getManager(b).getHandler(qx.event.handler.DragDrop)},properties:{resizableTop:{check:"Boolean",init:true},resizableRight:{check:"Boolean",init:true},resizableBottom:{check:"Boolean",init:true},resizableLeft:{check:"Boolean",init:true},resizable:{group:["resizableTop","resizableRight","resizableBottom","resizableLeft"],mode:"shorthand"},resizeSensitivity:{check:"Integer",init:5},useResizeFrame:{check:"Boolean",init:true}},members:{__dragDropHandler:null,__resizeFrame:null,__resizeActive:null,__resizeLeft:null,__resizeTop:null,__resizeStart:null,__resizeRange:null,RESIZE_TOP:1,RESIZE_BOTTOM:2,RESIZE_LEFT:4,RESIZE_RIGHT:8,__getResizeFrame:function(){var a=this.__resizeFrame;if(!a){a=this.__resizeFrame=new qx.ui.core.Widget();a.setAppearance("resize-frame");a.exclude();qx.core.Init.getApplication().getRoot().add(a)}return a},__showResizeFrame:function(){var a=this.__getLocation();var b=this.__getResizeFrame();b.setUserBounds(a.left,a.top,a.right-a.left,a.bottom-a.top);b.show();b.setZIndex(this.getZIndex()+1)},__computeResizeResult:function(h){var g=this.__resizeActive;var d=this.getSizeHint();var f=this.__resizeRange;var a=this.__resizeStart;var b=a.width;var l=a.height;var j=a.containerWidth;var m=a.containerHeight;var c=a.left;var i=a.top;var k;if((g&this.RESIZE_TOP)||(g&this.RESIZE_BOTTOM)){k=Math.max(f.top,Math.min(f.bottom,h.getDocumentTop()))-this.__resizeTop;if(g&this.RESIZE_TOP){l-=k;m-=k}else{l+=k;m+=k}if(m<d.minHeight){l+=(d.minHeight-m);m=d.minHeight}else{if(m>d.maxHeight){l-=(d.maxHeight-m);m=d.maxHeight}}if(g&this.RESIZE_TOP){i+=a.containerHeight-m}}if((g&this.RESIZE_LEFT)||(g&this.RESIZE_RIGHT)){k=Math.max(f.left,Math.min(f.right,h.getDocumentLeft()))-this.__resizeLeft;if(g&this.RESIZE_LEFT){b-=k;j-=k}else{b+=k;j+=k}if(j<d.minWidth){b+=(d.minWidth-j);j=d.minWidth}else{if(b>d.maxWidth){b-=(d.maxWidth-j);j=d.maxWidth}}if(g&this.RESIZE_LEFT){c+=a.containerWidth-j}}return{viewportLeft:c,viewportTop:i,parentLeft:a.bounds.left+c-a.left,parentTop:a.bounds.top+i-a.top,containerWidth:j,containerHeight:m,width:b,height:l}},__resizeCursors:{1:"n-resize",2:"s-resize",4:"w-resize",8:"e-resize",5:"nw-resize",6:"sw-resize",9:"ne-resize",10:"se-resize"},__getLocation:function(){var a=this.getDecoratorElement();if(a&&a.getDomElement()){return qx.bom.element.Location.get(a.getDomElement())}else{return this.getContentLocation()}},__computeResizeMode:function(d){var a=this.__getLocation();var b=this.getResizeSensitivity();var g=d.getDocumentLeft();var f=d.getDocumentTop();var c=this.__computeResizeActive(a,g,f,b);if(c>0){c=c|this.__computeResizeActive(a,g,f,b*2)}this.__resizeActive=c},__computeResizeActive:function(a,e,d,b){var c=0;if(this.getResizableTop()&&Math.abs(a.top-d)<b&&e>a.left-b&&e<a.right+b){c+=this.RESIZE_TOP}else{if(this.getResizableBottom()&&Math.abs(a.bottom-d)<b&&e>a.left-b&&e<a.right+b){c+=this.RESIZE_BOTTOM}}if(this.getResizableLeft()&&Math.abs(a.left-e)<b&&d>a.top-b&&d<a.bottom+b){c+=this.RESIZE_LEFT}else{if(this.getResizableRight()&&Math.abs(a.right-e)<b&&d>a.top-b&&d<a.bottom+b){c+=this.RESIZE_RIGHT}}return c},__onResizeMouseDown:function(f){if(!this.__resizeActive){return}this.addState("resize");this.__resizeLeft=f.getDocumentLeft();this.__resizeTop=f.getDocumentTop();var b=this.getContainerLocation();var a=this.__getLocation();var d=this.getBounds();this.__resizeStart={top:a.top,left:a.left,containerWidth:b.right-b.left,containerHeight:b.bottom-b.top,width:a.right-a.left,height:a.bottom-a.top,bounds:qx.lang.Object.clone(d)};var c=this.getLayoutParent();var h=c.getContentLocation();var g=c.getBounds();this.__resizeRange={left:h.left,top:h.top,right:h.left+g.width,bottom:h.top+g.height};if(this.getUseResizeFrame()){this.__showResizeFrame()}this.capture();f.stop()},__onResizeMouseUp:function(b){if(!this.hasState("resize")){return}if(this.getUseResizeFrame()){this.__getResizeFrame().exclude()}var a=this.__computeResizeResult(b);this.setWidth(a.containerWidth);this.setHeight(a.containerHeight);if(this.getResizableLeft()||this.getResizableTop()){this.setLayoutProperties({left:a.parentLeft,top:a.parentTop})}this.__resizeActive=0;this.removeState("resize");this.resetCursor();this.getApplicationRoot().resetGlobalCursor();this.releaseCapture();b.stopPropagation()},__onResizeLoseCapture:function(a){if(!this.__resizeActive){return}this.resetCursor();this.getApplicationRoot().resetGlobalCursor();this.removeState("move");if(this.getUseResizeFrame()){this.__getResizeFrame().exclude()}},__onResizeMouseMove:function(d){if(this.hasState("resize")){var b=this.__computeResizeResult(d);if(this.getUseResizeFrame()){var g=this.__getResizeFrame();g.setUserBounds(b.viewportLeft,b.viewportTop,b.width,b.height)}else{this.setWidth(b.containerWidth);this.setHeight(b.containerHeight);if(this.getResizableLeft()||this.getResizableTop()){this.setLayoutProperties({left:b.parentLeft,top:b.parentTop})}}d.stopPropagation()}else{if(!this.hasState("maximized")&&!this.__dragDropHandler.isSessionActive()){this.__computeResizeMode(d);var c=this.__resizeActive;var a=this.getApplicationRoot();if(c){var f=this.__resizeCursors[c];this.setCursor(f);a.setGlobalCursor(f)}else{if(this.getCursor()){this.resetCursor();a.resetGlobalCursor()}}}}},__onResizeMouseOut:function(a){if(this.getCursor()&&!this.hasState("resize")){this.resetCursor();this.getApplicationRoot().resetGlobalCursor()}}},destruct:function(){if(this.__resizeFrame!=null&&!qx.core.ObjectRegistry.inShutDown){this.__resizeFrame.destroy();this.__resizeFrame=null}this.__dragDropHandler=null}});qx.Class.define("qx.ui.window.Window",{extend:qx.ui.core.Widget,include:[qx.ui.core.MRemoteChildrenHandling,qx.ui.core.MRemoteLayoutHandling,qx.ui.core.MResizable,qx.ui.core.MMovable,qx.ui.core.MContentPadding],construct:function(a,b){this.base(arguments);this._setLayout(new qx.ui.layout.VBox());this._createChildControl("captionbar");this._createChildControl("pane");if(b!=null){this.setIcon(b)}if(a!=null){this.setCaption(a)}this._updateCaptionBar();this.addListener("mousedown",this._onWindowMouseDown,this,true);this.addListener("focusout",this._onWindowFocusOut,this);qx.core.Init.getApplication().getRoot().add(this);this.initVisibility();qx.ui.core.FocusHandler.getInstance().addRoot(this)},statics:{DEFAULT_MANAGER_CLASS:qx.ui.window.Manager},events:{beforeClose:"qx.event.type.Event",close:"qx.event.type.Event",beforeMinimize:"qx.event.type.Event",minimize:"qx.event.type.Event",beforeMaximize:"qx.event.type.Event",maximize:"qx.event.type.Event",beforeRestore:"qx.event.type.Event",restore:"qx.event.type.Event"},properties:{appearance:{refine:true,init:"window"},visibility:{refine:true,init:"excluded"},focusable:{refine:true,init:true},active:{check:"Boolean",init:false,apply:"_applyActive",event:"changeActive"},alwaysOnTop:{check:"Boolean",init:false,event:"changeAlwaysOnTop"},modal:{check:"Boolean",init:false,event:"changeModal"},caption:{apply:"_applyCaptionBarChange",event:"changeCaption",nullable:true},icon:{check:"String",nullable:true,apply:"_applyCaptionBarChange",event:"changeIcon",themeable:true},status:{check:"String",nullable:true,apply:"_applyStatus",event:"changeStatus"},showClose:{check:"Boolean",init:true,apply:"_applyCaptionBarChange",themeable:true},showMaximize:{check:"Boolean",init:true,apply:"_applyCaptionBarChange",themeable:true},showMinimize:{check:"Boolean",init:true,apply:"_applyCaptionBarChange",themeable:true},allowClose:{check:"Boolean",init:true,apply:"_applyCaptionBarChange"},allowMaximize:{check:"Boolean",init:true,apply:"_applyCaptionBarChange"},allowMinimize:{check:"Boolean",init:true,apply:"_applyCaptionBarChange"},showStatusbar:{check:"Boolean",init:false,apply:"_applyShowStatusbar"}},members:{__restoredTop:null,__restoredLeft:null,getChildrenContainer:function(){return this.getChildControl("pane")},_forwardStates:{active:true,maximized:true,showStatusbar:true},setLayoutParent:function(a){if(qx.core.Environment.get("qx.debug")){a&&this.assertInterface(a,qx.ui.window.IDesktop,"Windows can only be added to widgets, which implement the interface qx.ui.window.IDesktop. All root widgets implement this interface.")}this.base(arguments,a)},_createChildControlImpl:function(e,d){var c;switch(e){case"statusbar":c=new qx.ui.container.Composite(new qx.ui.layout.HBox());this._add(c);c.add(this.getChildControl("statusbar-text"));break;case"statusbar-text":c=new qx.ui.basic.Label();c.setValue(this.getStatus());break;case"pane":c=new qx.ui.container.Composite();this._add(c,{flex:1});break;case"captionbar":var a=new qx.ui.layout.Grid();a.setRowFlex(0,1);a.setColumnFlex(1,1);c=new qx.ui.container.Composite(a);this._add(c);c.addListener("dblclick",this._onCaptionMouseDblClick,this);this._activateMoveHandle(c);break;case"icon":c=new qx.ui.basic.Image(this.getIcon());this.getChildControl("captionbar").add(c,{row:0,column:0});break;case"title":c=new qx.ui.basic.Label(this.getCaption());c.setWidth(0);c.setAllowGrowX(true);var b=this.getChildControl("captionbar");b.add(c,{row:0,column:1});break;case"minimize-button":c=new qx.ui.form.Button();c.setFocusable(false);c.addListener("execute",this._onMinimizeButtonClick,this);this.getChildControl("captionbar").add(c,{row:0,column:2});break;case"restore-button":c=new qx.ui.form.Button();c.setFocusable(false);c.addListener("execute",this._onRestoreButtonClick,this);this.getChildControl("captionbar").add(c,{row:0,column:3});break;case"maximize-button":c=new qx.ui.form.Button();c.setFocusable(false);c.addListener("execute",this._onMaximizeButtonClick,this);this.getChildControl("captionbar").add(c,{row:0,column:4});break;case"close-button":c=new qx.ui.form.Button();c.setFocusable(false);c.addListener("execute",this._onCloseButtonClick,this);this.getChildControl("captionbar").add(c,{row:0,column:6});break}return c||this.base(arguments,e)},_updateCaptionBar:function(){var b;var c=this.getIcon();if(c){this.getChildControl("icon").setSource(c);this._showChildControl("icon")}else{this._excludeChildControl("icon")}var a=this.getCaption();if(a){this.getChildControl("title").setValue(a);this._showChildControl("title")}else{this._excludeChildControl("title")}if(this.getShowMinimize()){this._showChildControl("minimize-button");b=this.getChildControl("minimize-button");this.getAllowMinimize()?b.resetEnabled():b.setEnabled(false)}else{this._excludeChildControl("minimize-button")}if(this.getShowMaximize()){if(this.isMaximized()){this._showChildControl("restore-button");this._excludeChildControl("maximize-button")}else{this._showChildControl("maximize-button");this._excludeChildControl("restore-button")}b=this.getChildControl("maximize-button");this.getAllowMaximize()?b.resetEnabled():b.setEnabled(false)}else{this._excludeChildControl("maximize-button");this._excludeChildControl("restore-button")}if(this.getShowClose()){this._showChildControl("close-button");b=this.getChildControl("close-button");this.getAllowClose()?b.resetEnabled():b.setEnabled(false)}else{this._excludeChildControl("close-button")}},close:function(){if(!this.isVisible()){return}if(this.fireNonBubblingEvent("beforeClose",qx.event.type.Event,[false,true])){this.hide();this.fireEvent("close")}},open:function(){this.show();this.setActive(true);this.focus()},center:function(){var a=this.getLayoutParent();if(a){var b=a.getBounds();if(b){var e=this.getSizeHint();var d=Math.round((b.width-e.width)/2);var c=Math.round((b.height-e.height)/2);if(c<0){c=0}this.moveTo(d,c);return}}if(qx.core.Environment.get("qx.debug")){this.warn("Centering depends on parent bounds!")}},maximize:function(){if(this.isMaximized()){return}var b=this.getLayoutParent();if(b!=null&&b.supportsMaximize()){if(this.fireNonBubblingEvent("beforeMaximize",qx.event.type.Event,[false,true])){if(!this.isVisible()){this.open()}var a=this.getLayoutProperties();this.__restoredLeft=a.left===undefined?0:a.left;this.__restoredTop=a.top===undefined?0:a.top;this.setLayoutProperties({left:null,top:null,edge:0});this.addState("maximized");this._updateCaptionBar();this.fireEvent("maximize")}}},minimize:function(){if(!this.isVisible()){return}if(this.fireNonBubblingEvent("beforeMinimize",qx.event.type.Event,[false,true])){var a=this.getLayoutProperties();this.__restoredLeft=a.left===undefined?0:a.left;this.__restoredTop=a.top===undefined?0:a.top;this.removeState("maximized");this.hide();this.fireEvent("minimize")}},restore:function(){if(this.getMode()==="normal"){return}if(this.fireNonBubblingEvent("beforeRestore",qx.event.type.Event,[false,true])){if(!this.isVisible()){this.open()}var b=this.__restoredLeft;var a=this.__restoredTop;this.setLayoutProperties({edge:null,left:b,top:a});this.removeState("maximized");this._updateCaptionBar();this.fireEvent("restore")}},moveTo:function(b,a){if(this.isMaximized()){return}this.setLayoutProperties({left:b,top:a})},isMaximized:function(){return this.hasState("maximized")},getMode:function(){if(!this.isVisible()){return"minimized"}else{if(this.isMaximized()){return"maximized"}else{return"normal"}}},_applyActive:function(b,a){if(a){this.removeState("active")}else{this.addState("active")}},_getContentPaddingTarget:function(){return this.getChildControl("pane")},_applyShowStatusbar:function(b,a){b?this.addState("showStatusbar"):this.removeState("showStatusbar");if(b){this._showChildControl("statusbar")}else{this._excludeChildControl("statusbar")}},_applyCaptionBarChange:function(b,a){this._updateCaptionBar()},_applyStatus:function(c,a){var b=this.getChildControl("statusbar-text",true);if(b){b.setValue(c)}},_onWindowEventStop:function(a){a.stopPropagation()},_onWindowMouseDown:function(a){this.setActive(true)},_onWindowFocusOut:function(b){if(this.getModal()){return}var a=b.getRelatedTarget();if(a!=null&&!qx.ui.core.Widget.contains(this,a)){this.setActive(false)}},_onCaptionMouseDblClick:function(a){if(this.getAllowMaximize()){this.isMaximized()?this.restore():this.maximize()}},_onMinimizeButtonClick:function(a){this.minimize();this.getChildControl("minimize-button").reset()},_onRestoreButtonClick:function(a){this.restore();this.getChildControl("restore-button").reset()},_onMaximizeButtonClick:function(a){this.maximize();this.getChildControl("maximize-button").reset()},_onCloseButtonClick:function(a){this.close();this.getChildControl("close-button").reset()}}});qx.Interface.define("qx.ui.window.IDesktop",{members:{setWindowManager:function(a){this.assertInterface(a,qx.ui.window.IWindowManager)},getWindows:function(){},supportsMaximize:function(){},blockContent:function(a){this.assertInteger(a)},unblockContent:function(){},isContentBlocked:function(){}}});qx.Class.define("qx.ui.table.pane.Model",{extend:qx.core.Object,construct:function(a){this.base(arguments);this.setTableColumnModel(a)},events:{modelChanged:"qx.event.type.Event"},statics:{EVENT_TYPE_MODEL_CHANGED:"modelChanged"},properties:{firstColumnX:{check:"Integer",init:0,apply:"_applyFirstColumnX"},maxColumnCount:{check:"Number",init:-1,apply:"_applyMaxColumnCount"}},members:{__columnCount:null,__tableColumnModel:null,_applyFirstColumnX:function(b,a){this.__columnCount=null;this.fireEvent(qx.ui.table.pane.Model.EVENT_TYPE_MODEL_CHANGED)},_applyMaxColumnCount:function(b,a){this.__columnCount=null;this.fireEvent(qx.ui.table.pane.Model.EVENT_TYPE_MODEL_CHANGED)},setTableColumnModel:function(a){if(this.__tableColumnModel){this.__tableColumnModel.removeListener("visibilityChangedPre",this._onColVisibilityChanged,this);this.__tableColumnModel.removeListener("headerCellRendererChanged",this._onColVisibilityChanged,this)}this.__tableColumnModel=a;this.__tableColumnModel.addListener("visibilityChangedPre",this._onColVisibilityChanged,this);this.__tableColumnModel.addListener("headerCellRendererChanged",this._onHeaderCellRendererChanged,this);this.__columnCount=null},_onColVisibilityChanged:function(a){this.__columnCount=null;this.fireEvent(qx.ui.table.pane.Model.EVENT_TYPE_MODEL_CHANGED)},_onHeaderCellRendererChanged:function(a){this.fireEvent(qx.ui.table.pane.Model.EVENT_TYPE_MODEL_CHANGED)},getColumnCount:function(){if(this.__columnCount==null){var a=this.getFirstColumnX();var b=this.getMaxColumnCount();var c=this.__tableColumnModel.getVisibleColumnCount();if(b==-1||(a+b)>c){this.__columnCount=c-a}else{this.__columnCount=b}}return this.__columnCount},getColumnAtX:function(b){var a=this.getFirstColumnX();return this.__tableColumnModel.getVisibleColumnAtX(a+b)},getX:function(c){var b=this.getFirstColumnX();var d=this.getMaxColumnCount();var a=this.__tableColumnModel.getVisibleX(c)-b;if(a>=0&&(d==-1||a<d)){return a}else{return -1}},getColumnLeft:function(c){var e=0;var d=this.getColumnCount();for(var b=0;b<d;b++){var a=this.getColumnAtX(b);if(a==c){return e}e+=this.__tableColumnModel.getColumnWidth(a)}return -1},getTotalWidth:function(){var b=0;var d=this.getColumnCount();for(var a=0;a<d;a++){var c=this.getColumnAtX(a);b+=this.__tableColumnModel.getColumnWidth(c)}return b}},destruct:function(){if(this.__tableColumnModel){this.__tableColumnModel.removeListener("visibilityChangedPre",this._onColVisibilityChanged,this);this.__tableColumnModel.removeListener("headerCellRendererChanged",this._onColVisibilityChanged,this)}this.__tableColumnModel=null}});qx.Class.define("qx.ui.table.model.Simple",{extend:qx.ui.table.model.Abstract,construct:function(){this.base(arguments);this.__rowArr=[];this.__sortColumnIndex=-1;this.__sortMethods=[];this.__editableColArr=null},properties:{caseSensitiveSorting:{check:"Boolean",init:true}},statics:{_defaultSortComparatorAscending:function(c,b){var e=c[arguments.callee.columnIndex];var d=b[arguments.callee.columnIndex];if(qx.lang.Type.isNumber(e)&&qx.lang.Type.isNumber(d)){var a=isNaN(e)?isNaN(d)?0:1:isNaN(d)?-1:null;if(a!=null){return a}}return(e>d)?1:((e==d)?0:-1)},_defaultSortComparatorInsensitiveAscending:function(c,b){var e=(c[arguments.callee.columnIndex].toLowerCase?c[arguments.callee.columnIndex].toLowerCase():c[arguments.callee.columnIndex]);var d=(b[arguments.callee.columnIndex].toLowerCase?b[arguments.callee.columnIndex].toLowerCase():b[arguments.callee.columnIndex]);if(qx.lang.Type.isNumber(e)&&qx.lang.Type.isNumber(d)){var a=isNaN(e)?isNaN(d)?0:1:isNaN(d)?-1:null;if(a!=null){return a}}return(e>d)?1:((e==d)?0:-1)},_defaultSortComparatorDescending:function(c,b){var e=c[arguments.callee.columnIndex];var d=b[arguments.callee.columnIndex];if(qx.lang.Type.isNumber(e)&&qx.lang.Type.isNumber(d)){var a=isNaN(e)?isNaN(d)?0:1:isNaN(d)?-1:null;if(a!=null){return a}}return(e<d)?1:((e==d)?0:-1)},_defaultSortComparatorInsensitiveDescending:function(c,b){var e=(c[arguments.callee.columnIndex].toLowerCase?c[arguments.callee.columnIndex].toLowerCase():c[arguments.callee.columnIndex]);var d=(b[arguments.callee.columnIndex].toLowerCase?b[arguments.callee.columnIndex].toLowerCase():b[arguments.callee.columnIndex]);if(qx.lang.Type.isNumber(e)&&qx.lang.Type.isNumber(d)){var a=isNaN(e)?isNaN(d)?0:1:isNaN(d)?-1:null;if(a!=null){return a}}return(e<d)?1:((e==d)?0:-1)}},members:{__rowArr:null,__editableColArr:null,__sortableColArr:null,__sortMethods:null,__sortColumnIndex:null,__sortAscending:null,getRowData:function(b){var a=this.__rowArr[b];if(a==null||a.originalData==null){return a}else{return a.originalData}},getRowDataAsMap:function(e){var c=this.__rowArr[e];if(c!=null){var d={};for(var a=0;a<this.getColumnCount();a++){d[this.getColumnId(a)]=c[a]}if(c.originalData!=null){for(var b in c.originalData){if(d[b]==undefined){d[b]=c.originalData[b]}}}return d}return(c&&c.originalData)?c.originalData:null},getDataAsMapArray:function(){var a=this.getRowCount();var c=[];for(var b=0;b<a;b++){c.push(this.getRowDataAsMap(b))}return c},setEditable:function(b){this.__editableColArr=[];for(var a=0;a<this.getColumnCount();a++){this.__editableColArr[a]=b}this.fireEvent("metaDataChanged")},setColumnEditable:function(b,a){if(a!=this.isColumnEditable(b)){if(this.__editableColArr==null){this.__editableColArr=[]}this.__editableColArr[b]=a;this.fireEvent("metaDataChanged")}},isColumnEditable:function(a){return this.__editableColArr?(this.__editableColArr[a]==true):false},setColumnSortable:function(a,b){if(b!=this.isColumnSortable(a)){if(this.__sortableColArr==null){this.__sortableColArr=[]}this.__sortableColArr[a]=b;this.fireEvent("metaDataChanged")}},isColumnSortable:function(a){return(this.__sortableColArr?(this.__sortableColArr[a]!==false):true)},sortByColumn:function(d,c){var b;var a=this.__sortMethods[d];if(a){b=(c?a.ascending:a.descending)}else{if(this.getCaseSensitiveSorting()){b=(c?qx.ui.table.model.Simple._defaultSortComparatorAscending:qx.ui.table.model.Simple._defaultSortComparatorDescending)}else{b=(c?qx.ui.table.model.Simple._defaultSortComparatorInsensitiveAscending:qx.ui.table.model.Simple._defaultSortComparatorInsensitiveDescending)}}b.columnIndex=d;this.__rowArr.sort(b);this.__sortColumnIndex=d;this.__sortAscending=c;var e={columnIndex:d,ascending:c};this.fireDataEvent("sorted",e);this.fireEvent("metaDataChanged")},setSortMethods:function(b,c){var a;if(qx.lang.Type.isFunction(c)){a={ascending:c,descending:function(e,d){return c(d,e)}}}else{a=c}this.__sortMethods[b]=a},getSortMethods:function(a){return this.__sortMethods[a]},clearSorting:function(){if(this.__sortColumnIndex!=-1){this.__sortColumnIndex=-1;this.__sortAscending=true;this.fireEvent("metaDataChanged")}},getSortColumnIndex:function(){return this.__sortColumnIndex},_setSortColumnIndex:function(a){this.__sortColumnIndex=a},isSortAscending:function(){return this.__sortAscending},_setSortAscending:function(a){this.__sortAscending=a},getRowCount:function(){return this.__rowArr.length},getValue:function(a,b){if(b<0||b>=this.__rowArr.length){throw new Error("this.__rowArr out of bounds: "+b+" (0.."+this.__rowArr.length+")")}return this.__rowArr[b][a]},setValue:function(a,d,c){if(this.__rowArr[d][a]!=c){this.__rowArr[d][a]=c;if(this.hasListener("dataChanged")){var b={firstRow:d,lastRow:d,firstColumn:a,lastColumn:a};this.fireDataEvent("dataChanged",b)}if(a==this.__sortColumnIndex){this.clearSorting()}}},setData:function(a,c){this.__rowArr=a;if(this.hasListener("dataChanged")){var b={firstRow:0,lastRow:a.length-1,firstColumn:0,lastColumn:this.getColumnCount()-1};this.fireDataEvent("dataChanged",b)}if(c!==false){this.clearSorting()}},getData:function(){return this.__rowArr},setDataAsMapArray:function(b,a,c){this.setData(this._mapArray2RowArr(b,a),c)},addRows:function(a,d,c){if(d==null){d=this.__rowArr.length}a.splice(0,0,d,0);Array.prototype.splice.apply(this.__rowArr,a);var b={firstRow:d,lastRow:this.__rowArr.length-1,firstColumn:0,lastColumn:this.getColumnCount()-1};this.fireDataEvent("dataChanged",b);if(c!==false){this.clearSorting()}},addRowsAsMapArray:function(b,d,a,c){this.addRows(this._mapArray2RowArr(b,a),d,c)},setRows:function(a,d,c){if(d==null){d=0}a.splice(0,0,d,a.length);Array.prototype.splice.apply(this.__rowArr,a);var b={firstRow:d,lastRow:this.__rowArr.length-1,firstColumn:0,lastColumn:this.getColumnCount()-1};this.fireDataEvent("dataChanged",b);if(c!==false){this.clearSorting()}},setRowsAsMapArray:function(b,d,a,c){this.setRows(this._mapArray2RowArr(b,a),d,c)},removeRows:function(d,a,c){this.__rowArr.splice(d,a);var b={firstRow:d,lastRow:this.__rowArr.length-1,firstColumn:0,lastColumn:this.getColumnCount()-1,removeStart:d,removeCount:a};this.fireDataEvent("dataChanged",b);if(c!==false){this.clearSorting()}},_mapArray2RowArr:function(d,b){var a=d.length;var h=this.getColumnCount();var f=new Array(a);var g;for(var e=0;e<a;++e){g=[];if(b){g.originalData=d[e]}for(var c=0;c<h;++c){g[c]=d[e][this.getColumnId(c)]}f[e]=g}return f}},destruct:function(){this.__rowArr=this.__editableColArr=this.__sortMethods=this.__sortableColArr=null}});qx.Class.define("qx.ui.decoration.Double",{extend:qx.ui.decoration.Abstract,include:[qx.ui.decoration.MBackgroundColor,qx.ui.decoration.MDoubleBorder],construct:function(d,c,b,a,e){this.base(arguments);if(d!=null){this.setWidth(d)}if(c!=null){this.setStyle(c)}if(b!=null){this.setColor(b)}if(a!=null){this.setInnerWidth(a)}if(e!=null){this.setInnerColor(e)}},members:{__markup:null,_getDefaultInsets:function(){return this._getDefaultInsetsForBorder()},_isInitialized:function(){return !!this.__markup},getMarkup:function(b){if(this.__markup){return this.__markup}var a={};this._styleBorder(a);return this.__markup=this._generateMarkup(a)},resize:function(e,b,k){var h=this.getBackgroundImage()&&this.getBackgroundRepeat()=="scale";var d=this.getInsets();if(h||qx.core.Environment.get("css.boxmodel")=="content"){var j=b-d.left-d.right;var a=k-d.top-d.bottom}else{var f=d.top-this.getInnerWidthTop();var i=d.bottom-this.getInnerWidthBottom();var c=d.left-this.getInnerWidthLeft();var g=d.right-this.getInnerWidthRight();var j=b-c-g;var a=k-f-i}if(j<0){j=0}if(a<0){a=0}e.firstChild.style.width=j+"px";e.firstChild.style.height=a+"px";e.style.left=(d.left-this.getWidthLeft()-this.getInnerWidthLeft())+"px";e.style.top=(d.top-this.getWidthTop()-this.getInnerWidthTop())+"px"},tint:function(b,a){this._tintBackgroundColor(b,a,b.style)}},destruct:function(){this.__markup=null}});qx.Theme.define("qx.theme.classic.Decoration",{aliases:{decoration:"qx/decoration/Classic"},decorations:{main:{decorator:qx.ui.decoration.Uniform,style:{width:1,color:"border-dark"}},"keyboard-focus":{decorator:qx.ui.decoration.Single,style:{width:1,color:"black",style:"dotted"}},inset:{decorator:qx.ui.decoration.Double,style:{width:1,innerWidth:1,color:["border-dark-shadow","border-light","border-light","border-dark-shadow"],innerColor:["border-dark","border-light-shadow","border-light-shadow","border-dark"]}},outset:{decorator:qx.ui.decoration.Double,style:{width:1,innerWidth:1,color:["border-light-shadow","border-dark","border-dark","border-light-shadow"],innerColor:["border-light","border-dark-shadow","border-dark-shadow","border-light"]}},groove:{decorator:qx.ui.decoration.Double,style:{width:1,innerWidth:1,color:["border-dark-shadow","border-light","border-light","border-dark-shadow"],innerColor:["border-light","border-dark-shadow","border-dark-shadow","border-light"]}},ridge:{decorator:qx.ui.decoration.Double,style:{width:1,innerWidth:1,color:["border-light","border-dark-shadow","border-dark-shadow","border-light"],innerColor:["border-dark-shadow","border-light","border-light","border-dark-shadow"]}},"inset-thin":{decorator:qx.ui.decoration.Single,style:{width:1,color:["border-dark-shadow","border-light","border-light","border-dark-shadow"]}},"outset-thin":{decorator:qx.ui.decoration.Single,style:{width:1,color:["border-light","border-dark-shadow","border-dark-shadow","border-light"]}},"focused-inset":{decorator:qx.ui.decoration.Double,style:{width:1,innerWidth:1,color:["border-focused-dark-shadow","border-focused-light","border-focused-light","border-focused-dark-shadow"],innerColor:["border-focused-dark","border-focused-light-shadow","border-focused-light-shadow","border-focused-dark"]}},"focused-outset":{decorator:qx.ui.decoration.Double,style:{width:1,innerWidth:1,color:["border-focused-light-shadow","border-focused-dark","border-focused-dark","border-focused-light-shadow"],innerColor:["border-focused-light","border-focused-dark-shadow","border-focused-dark-shadow","border-focused-light"]}},"border-invalid":{decorator:qx.ui.decoration.Double,style:{width:1,innerWidth:1,color:["border-dark-shadow","border-light","border-light","border-dark-shadow"],innerColor:"invalid"}},"separator-horizontal":{decorator:qx.ui.decoration.Single,style:{widthLeft:1,colorLeft:"border-separator"}},"separator-vertical":{decorator:qx.ui.decoration.Single,style:{widthTop:1,colorTop:"border-separator"}},shadow:{decorator:qx.ui.decoration.Grid,style:{baseImage:"decoration/shadow/shadow.png",insets:[4,8,8,4]}},"shadow-window":{decorator:qx.ui.decoration.Grid,style:{baseImage:"decoration/shadow/shadow.png",insets:[4,8,8,4]}},"shadow-small":{decorator:qx.ui.decoration.Grid,style:{baseImage:"decoration/shadow/shadow-small.png",insets:[0,3,3,0]}},"checkbox-invalid-shadow":{decorator:qx.ui.decoration.Beveled,style:{outerColor:"invalid",innerColor:"border-focused-invalid",insets:[0]}},"lead-item":{decorator:qx.ui.decoration.Uniform,style:{width:1,style:"dotted",color:"border-lead"}},tooltip:{decorator:qx.ui.decoration.Uniform,style:{width:1,color:"tooltip-text"}},"tooltip-error":{decorator:qx.ui.decoration.Uniform,style:{width:1,color:"tooltip-text"}},"toolbar-separator":{decorator:qx.ui.decoration.Single,style:{widthLeft:1,colorLeft:"border-dark-shadow"}},"toolbar-part-handle":{decorator:qx.ui.decoration.Single,style:{width:1,style:"solid",colorTop:"white",colorLeft:"white",colorRight:"border-dark-shadow",colorBottom:"border-dark-shadow"}},"menu-separator":{decorator:qx.ui.decoration.Single,style:{widthTop:1,widthBottom:1,colorTop:"border-dark",colorBottom:"border-light"}},"datechooser-date-pane":{decorator:qx.ui.decoration.Single,style:{widthTop:1,colorTop:"gray",style:"solid"}},"datechooser-weekday":{decorator:qx.ui.decoration.Single,style:{widthBottom:1,colorBottom:"gray",style:"solid"}},"datechooser-week":{decorator:qx.ui.decoration.Single,style:{widthRight:1,colorRight:"gray",style:"solid"}},"datechooser-week-header":{decorator:qx.ui.decoration.Single,style:{widthBottom:1,colorBottom:"gray",widthRight:1,colorRight:"gray",style:"solid"}},"tabview-page-button-top":{decorator:qx.ui.decoration.Double,style:{width:1,color:["border-light-shadow","border-dark","border-dark","border-light-shadow"],innerWidth:1,innerColor:["border-light","border-dark-shadow","border-dark-shadow","border-light"],widthBottom:0,innerWidthBottom:0}},"tabview-page-button-bottom":{decorator:qx.ui.decoration.Double,style:{width:1,color:["border-light-shadow","border-dark","border-dark","border-light-shadow"],innerWidth:1,innerColor:["border-light","border-dark-shadow","border-dark-shadow","border-light"],widthTop:0,innerWidthTop:0}},"tabview-page-button-left":{decorator:qx.ui.decoration.Double,style:{width:1,color:["border-light-shadow","border-dark","border-dark","border-light-shadow"],innerWidth:1,innerColor:["border-light","border-dark-shadow","border-dark-shadow","border-light"],widthRight:0,innerWidthRight:0}},"tabview-page-button-right":{decorator:qx.ui.decoration.Double,style:{width:1,color:["border-light-shadow","border-dark","border-dark","border-light-shadow"],innerWidth:1,innerColor:["border-light","border-dark-shadow","border-dark-shadow","border-light"],widthLeft:0,innerWidthLeft:0}},"table-statusbar":{decorator:qx.ui.decoration.Single,style:{widthTop:1,colorTop:"border-dark-shadow",styleTop:"solid"}},"table-scroller-header":{decorator:qx.ui.decoration.Single,style:{widthBottom:1,colorBottom:"table-header-border",styleBottom:"solid"}},"table-scroller-focus-indicator":{decorator:qx.ui.decoration.Single,style:{width:2,color:"table-focus-indicator",style:"solid"}},"table-header-cell":{decorator:qx.ui.decoration.Single,style:{widthRight:1,colorRight:"table-header-border",styleRight:"solid"}},"table-header-cell-hovered":{decorator:qx.ui.decoration.Single,style:{widthRight:1,colorRight:"table-header-border",styleRight:"solid",widthBottom:2,colorBottom:"effect",styleBottom:"solid"}},progressbar:{decorator:qx.ui.decoration.Single,style:{backgroundColor:"#FFF",width:1,color:"border-separator"}}}});qx.Theme.define("qx.theme.classic.Appearance",{appearances:{widget:{},label:{style:function(a){return{textColor:a.disabled?"text-disabled":undefined}}},image:{style:function(a){return{opacity:!a.replacement&&a.disabled?0.3:undefined}}},atom:{},"atom/label":"label","atom/icon":"image",root:{style:function(a){return{backgroundColor:"background",textColor:"text",font:"default"}}},popup:{style:function(a){return{decorator:"main",backgroundColor:"background-pane",shadow:"shadow-small"}}},tooltip:{include:"popup",style:function(a){return{backgroundColor:"tooltip",textColor:"tooltip-text",decorator:"tooltip",shadow:"shadow-small",padding:[1,3,2,3],offset:[15,5,5,5]}}},"tooltip/atom":"atom","tooltip-error":{include:"tooltip",style:function(a){return{textColor:"text-selected",showTimeout:100,hideTimeout:10000,decorator:"tooltip-error",font:"bold",backgroundColor:"tooltip-invalid"}}},"tooltip-error/atom":"atom",iframe:{style:function(a){return{backgroundColor:"white",decorator:"inset"}}},"move-frame":{style:function(a){return{decorator:"main"}}},"resize-frame":"move-frame","dragdrop-cursor":{style:function(a){var b="nodrop";if(a.copy){b="copy"}else{if(a.move){b="move"}else{if(a.alias){b="alias"}}}return{source:"decoration/cursors/"+b+".gif",position:"right-top",offset:[2,16,2,6]}}},"button-frame":{alias:"atom",style:function(b){if(b.pressed||b.abandoned||b.checked){var a=!b.inner&&b.focused?"focused-inset":"inset";var c=[4,3,2,5]}else{var a=!b.inner&&b.focused?"focused-outset":"outset";var c=[3,4]}return{backgroundColor:b.abandoned?"button-abandoned":b.hovered?"button-hovered":b.checked?"button-checked":"button",decorator:a,padding:c}}},button:{alias:"button-frame",include:"button-frame",style:function(a){return{center:true}}},"hover-button":{alias:"atom",include:"atom",style:function(a){return{backgroundColor:a.hovered?"background-selected":undefined,textColor:a.hovered?"text-selected":undefined}}},splitbutton:{},"splitbutton/button":"button","splitbutton/arrow":{alias:"button",include:"button",style:function(a){return{icon:"decoration/arrows/down.gif"}}},"scrollarea/corner":{style:function(){return{backgroundColor:"background"}}},scrollarea:"widget","scrollarea/pane":"widget","scrollarea/scrollbar-x":"scrollbar","scrollarea/scrollbar-y":"scrollbar",list:{alias:"scrollarea",style:function(b){var a;var e=!!b.focused;var d=!!b.invalid;var c=!!b.disabled;if(d&&!c){a="background-invalid"}else{if(e&&!d&&!c){a="background-focused"}else{if(c){a="background-disabled"}else{a="white"}}}return{decorator:b.focused?"focused-inset":"inset",backgroundColor:a}}},listitem:{alias:"atom",style:function(a){return{gap:4,padding:a.lead?[2,4]:[3,5],backgroundColor:a.selected?"background-selected":undefined,textColor:a.selected?"text-selected":undefined,decorator:a.lead?"lead-item":undefined}}},textfield:{style:function(b){var a;var f=!!b.focused;var e=!!b.invalid;var c=!!b.disabled;if(e&&!c){a="background-invalid"}else{if(f&&!e&&!c){a="background-focused"}else{if(c){a="background-disabled"}else{a="background-field"}}}var d;if(b.disabled){d="text-disabled"}else{if(b.showingPlaceholder){d="text-placeholder"}else{d=undefined}}return{decorator:b.focused?"focused-inset":"inset",padding:[2,3],textColor:d,backgroundColor:a}}},textarea:"textfield",checkbox:{alias:"atom",style:function(a){var b;if(a.checked){if(a.disabled){b="checkbox-checked"}else{if(a.focused){b="checkbox-checked-focused"}else{if(a.pressed){b="checkbox-checked-pressed"}else{if(a.hovered){b="checkbox-checked-hovered"}else{b="checkbox-checked"}}}}}else{if(a.undetermined){if(a.disabled){b="checkbox-undetermined"}else{if(a.focused){b="checkbox-undetermined-focused"}else{if(a.hovered){b="checkbox-undetermined-hovered"}else{b="checkbox-undetermined"}}}}else{if(!a.disabled){if(a.focused){b="checkbox-focused"}else{if(a.pressed){b="checkbox-pressed"}else{if(a.hovered){b="checkbox-hovered"}}}}}}b=b||"checkbox";var c=a.invalid&&!a.disabled?"-invalid":"";return{icon:"decoration/form/"+b+c+".png",gap:6}}},radiobutton:{alias:"checkbox",include:"checkbox",style:function(a){var b;if(a.checked&&a.focused){b="radiobutton-checked-focused"}else{if(a.checked&&a.disabled){b="radiobutton-checked-disabled"}else{if(a.checked&&a.pressed){b="radiobutton-checked-pressed"}else{if(a.checked&&a.hovered){b="radiobutton-checked-hovered"}else{if(a.checked){b="radiobutton-checked"}else{if(a.focused){b="radiobutton-focused"}else{if(a.pressed){b="radiobutton-pressed"}else{if(a.hovered){b="radiobutton-hovered"}else{b="radiobutton"}}}}}}}}var c=a.invalid&&!a.disabled?"-invalid":"";return{icon:"decoration/form/"+b+c+".png",shadow:undefined}}},spinner:{style:function(a){return{decorator:a.focused?"focused-inset":"inset",textColor:a.disabled?"text-disabled":undefined}}},"spinner/textfield":{include:"textfield",style:function(a){return{decorator:undefined,padding:[2,3]}}},"spinner/upbutton":{alias:"button",include:"button",style:function(a){return{icon:"decoration/arrows/up-small.gif",padding:a.pressed?[2,2,0,4]:[1,3,1,3],backgroundColor:a.hovered?"button-hovered":"button"}}},"spinner/downbutton":{alias:"button",include:"button",style:function(a){return{icon:"decoration/arrows/down-small.gif",padding:a.pressed?[2,2,0,4]:[1,3,1,3],backgroundColor:a.hovered?"button-hovered":"button"}}},datefield:"combobox","datefield/button":{alias:"combobox/button",include:"combobox/button",style:function(a){return{icon:"icon/16/apps/office-calendar.png",padding:[0,3],backgroundColor:undefined,decorator:undefined}}},"datefield/list":{alias:"datechooser",include:"datechooser",style:function(a){return{decorator:a.focused?"focused-inset":"inset"}}},groupbox:{style:function(a){return{backgroundColor:"background"}}},"groupbox/legend":{alias:"atom",style:function(a){return{backgroundColor:"background",textColor:a.invalid?"invalid":undefined,padding:[1,0,1,4]}}},"groupbox/frame":{style:function(a){return{padding:[12,9],marginTop:10,decorator:"groove"}}},"check-groupbox":"groupbox","check-groupbox/legend":{alias:"checkbox",include:"checkbox",style:function(a){return{backgroundColor:"background",textColor:a.invalid?"invalid":undefined,padding:[1,0,1,4]}}},"radio-groupbox":"groupbox","radio-groupbox/legend":{alias:"radiobutton",include:"radiobutton",style:function(a){return{backgroundColor:"background",textColor:a.invalid?"invalid":undefined,padding:[1,0,1,4]}}},toolbar:{style:function(a){return{backgroundColor:"background"}}},"toolbar/part":{},"toolbar/part/container":{},"toolbar/part/handle":{style:function(a){return{decorator:"toolbar-part-handle",backgroundColor:"background",padding:[0,1],margin:[3,2],allowGrowY:true}}},"toolbar-separator":{style:function(a){return{margin:[3,2],decorator:"toolbar-separator"}}},"toolbar-button":{alias:"atom",style:function(a){if(a.pressed||a.checked||a.abandoned){var b="inset-thin";var c=[3,2,1,4]}else{if(a.hovered){var b="outset-thin";var c=[2,3]}else{var b=undefined;var c=[3,4]}}return{cursor:"default",decorator:b,padding:c,backgroundColor:a.abandoned?"button-abandoned":a.checked?"background-light":"button"}}},"toolbar-menubutton":{alias:"toolbar-button",include:"toolbar-button",style:function(a){return{showArrow:true}}},"toolbar-menubutton/arrow":{alias:"image",include:"image",style:function(a){return{source:"decoration/arrows/down-small.gif"}}},"toolbar-splitbutton":{},"toolbar-splitbutton/button":"toolbar-button","toolbar-splitbutton/arrow":{alias:"toolbar-button",include:"toolbar-button",style:function(a){return{icon:"decoration/arrows/down.gif"}}},slidebar:{},"slidebar/scrollpane":{},"slidebar/content":{},"slidebar/button-forward":{alias:"button",include:"button",style:function(a){return{icon:a.vertical?"decoration/arrows/down.gif":"decoration/arrows/next.gif"}}},"slidebar/button-backward":{alias:"button",include:"button",style:function(a){return{icon:a.vertical?"decoration/arrows/up.gif":"decoration/arrows/left.gif"}}},tabview:{},"tabview/bar":{alias:"slidebar",style:function(a){var d=0,c=0,e=0,b=0;if(a.barTop){e=-2}else{if(a.barBottom){d=-2}else{if(a.barRight){b=-2}else{c=-2}}}return{marginBottom:e,marginTop:d,marginLeft:b,marginRight:c}}},"tabview/bar/button-forward":{include:"slidebar/button-forward",alias:"slidebar/button-forward",style:function(a){if(a.barTop||a.barBottom){return{marginTop:2,marginBottom:2}}else{return{marginLeft:2,marginRight:2}}}},"tabview/bar/button-backward":{include:"slidebar/button-backward",alias:"slidebar/button-backward",style:function(a){if(a.barTop||a.barBottom){return{marginTop:2,marginBottom:2}}else{return{marginLeft:2,marginRight:2}}}},"tabview/pane":{style:function(a){return{backgroundColor:"background",decorator:"outset",padding:10}}},"tabview-page":"widget","tabview-page/button":{style:function(j){var g;var a=0,h=0,f=0,e=0;if(j.barTop||j.barBottom){var i=2,b=2,d=6,c=6}else{var i=6,b=6,d=6,c=6}if(j.barTop){g="tabview-page-button-top"}else{if(j.barRight){g="tabview-page-button-right"}else{if(j.barBottom){g="tabview-page-button-bottom"}else{g="tabview-page-button-left"}}}if(j.checked){if(j.barTop||j.barBottom){d+=2;c+=2}else{i+=2;b+=2}}else{if(j.barTop||j.barBottom){f+=2;a+=2}else{if(j.barLeft||j.barRight){h+=2;e+=2}}}if(j.checked){if(!j.firstTab){if(j.barTop||j.barBottom){e=-4}else{a=-4}}if(!j.lastTab){if(j.barTop||j.barBottom){h=-4}else{f=-4}}}return{zIndex:j.checked?10:5,decorator:g,backgroundColor:"background",padding:[i,c,b,d],margin:[a,h,f,e]}}},"tabview-page/button/label":{alias:"label",style:function(a){return{padding:[0,1,0,1],margin:a.focused?0:1,decorator:a.focused?"keyboard-focus":undefined}}},"tabview-page/button/icon":"image","tabview-page/button/close-button":{alias:"atom",style:function(a){return{icon:"qx/icon/Oxygen/16/actions/window-close.png"}}},scrollbar:{},"scrollbar/slider":{alias:"slider",style:function(a){return{backgroundColor:"background-light"}}},"scrollbar/slider/knob":{include:"button-frame",style:function(a){return{height:14,width:14,minHeight:a.horizontal?undefined:9,minWidth:a.horizontal?9:undefined}}},"scrollbar/button":{alias:"button",include:"button",style:function(a){var c;if(a.up||a.down){if(a.pressed||a.abandoned||a.checked){c=[5,2,3,4]}else{c=[4,3]}}else{if(a.pressed||a.abandoned||a.checked){c=[4,3,2,5]}else{c=[3,4]}}var b="decoration/arrows/";if(a.left){b+="left.gif"}else{if(a.right){b+="right.gif"}else{if(a.up){b+="up.gif"}else{b+="down.gif"}}}return{padding:c,icon:b}}},"scrollbar/button-begin":"scrollbar/button","scrollbar/button-end":"scrollbar/button",slider:{style:function(b){var a;if(b.disabled){a="background-disabled"}else{if(b.invalid){a="background-invalid"}else{if(b.focused){a="background-light"}else{a="background-field"}}}return{backgroundColor:a,decorator:b.focused?"focused-inset":"inset"}}},"slider/knob":{include:"button-frame",style:function(a){return{width:14,height:14,decorator:"outset"}}},"tree-folder/open":{style:function(a){return{source:a.opened?"decoration/tree/minus.gif":"decoration/tree/plus.gif"}}},"tree-folder":{style:function(a){return{padding:[2,3,2,0],icon:a.opened?"icon/16/places/folder-open.png":"icon/16/places/folder.png",iconOpened:"icon/16/places/folder-open.png"}}},"tree-folder/icon":{style:function(a){return{padding:[0,4,0,0]}}},"tree-folder/label":{style:function(a){return{padding:[1,2],backgroundColor:a.selected?"background-selected":undefined,textColor:a.selected?"text-selected":undefined}}},"tree-file":{include:"tree-folder",alias:"tree-folder",style:function(a){return{icon:"icon/16/mimetypes/text-plain.png"}}},tree:{include:"list",alias:"list",style:function(a){return{contentPadding:[4,4,4,4]}}},treevirtual:{style:function(a){return{decorator:"main"}}},"treevirtual-folder":{style:function(a){return{icon:(a.opened?"icon/16/places/folder-open.png":"icon/16/places/folder.png")}}},"treevirtual-file":{include:"treevirtual-folder",alias:"treevirtual-folder",style:function(a){return{icon:"icon/16/mimetypes/text-plain.png"}}},"treevirtual-line":{style:function(a){return{icon:"decoration/treevirtual/line.gif"}}},"treevirtual-contract":{style:function(a){return{icon:"decoration/tree/minus.gif"}}},"treevirtual-expand":{style:function(a){return{icon:"decoration/tree/plus.gif"}}},"treevirtual-only-contract":{style:function(a){return{icon:"decoration/treevirtual/only_minus.gif"}}},"treevirtual-only-expand":{style:function(a){return{icon:"decoration/treevirtual/only_plus.gif"}}},"treevirtual-start-contract":{style:function(a){return{icon:"decoration/treevirtual/start_minus.gif"}}},"treevirtual-start-expand":{style:function(a){return{icon:"decoration/treevirtual/start_plus.gif"}}},"treevirtual-end-contract":{style:function(a){return{icon:"decoration/treevirtual/end_minus.gif"}}},"treevirtual-end-expand":{style:function(a){return{icon:"decoration/treevirtual/end_plus.gif"}}},"treevirtual-cross-contract":{style:function(a){return{icon:"decoration/treevirtual/cross_minus.gif"}}},"treevirtual-cross-expand":{style:function(a){return{icon:"decoration/treevirtual/cross_plus.gif"}}},"treevirtual-end":{style:function(a){return{icon:"decoration/treevirtual/end.gif"}}},"treevirtual-cross":{style:function(a){return{icon:"decoration/treevirtual/cross.gif"}}},window:{style:function(a){return{contentPadding:[10,10,10,10],backgroundColor:"background",decorator:a.maximized?undefined:"outset",shadow:a.maximized?undefined:"shadow-small"}}},"window/pane":{},"window/captionbar":{style:function(a){return{padding:1,backgroundColor:a.active?"window-active-caption":"window-inactive-caption",textColor:a.active?"window-active-caption-text":"window-inactive-caption-text"}}},"window/icon":{style:function(a){return{marginRight:4}}},"window/title":{style:function(a){return{cursor:"default",font:"bold",marginRight:20,alignY:"middle"}}},"window/minimize-button":{include:"button",alias:"button",style:function(a){return{icon:"decoration/window/minimize.gif",padding:a.pressed||a.abandoned?[2,1,0,3]:[1,2]}}},"window/restore-button":{include:"button",alias:"button",style:function(a){return{icon:"decoration/window/restore.gif",padding:a.pressed||a.abandoned?[2,1,0,3]:[1,2]}}},"window/maximize-button":{include:"button",alias:"button",style:function(a){return{icon:"decoration/window/maximize.gif",padding:a.pressed||a.abandoned?[2,1,0,3]:[1,2]}}},"window/close-button":{include:"button",alias:"button",style:function(a){return{marginLeft:2,icon:"decoration/window/close.gif",padding:a.pressed||a.abandoned?[2,1,0,3]:[1,2]}}},"window/statusbar":{style:function(a){return{decorator:"inset-thin",padding:[2,6]}}},"window/statusbar-text":"label",resizer:{style:function(a){return{decorator:"outset"}}},splitpane:{},"splitpane/splitter":{style:function(a){return{backgroundColor:"background"}}},"splitpane/splitter/knob":{style:function(a){return{source:a.horizontal?"decoration/splitpane/knob-horizontal.png":"decoration/splitpane/knob-vertical.png",padding:2}}},"splitpane/slider":{style:function(a){return{backgroundColor:"border-dark",opacity:0.3}}},selectbox:{include:"button-frame",style:function(a){var b="button";if(a.invalid&&!a.disabled){b="background-invalid"}else{if(a.abandoned){b="button-abandoned"}else{if(!a.abandoned&&a.hovered){b="button-hovered"}else{if(!a.abandoned&&!a.hovered&&a.checked){b="button-checked"}}}}return{backgroundColor:b}}},"selectbox/atom":"atom","selectbox/popup":"popup","selectbox/list":"list","selectbox/arrow":{include:"image",style:function(a){return{source:"decoration/arrows/down.gif",paddingRight:4,paddingLeft:5}}},datechooser:{style:function(a){return{decorator:"outset"}}},"datechooser/navigation-bar":{style:function(a){return{backgroundColor:"date-chooser",textColor:a.disabled?"text-disabled":a.invalid?"invalid":undefined,padding:[2,10]}}},"datechooser/last-year-button-tooltip":"tooltip","datechooser/last-month-button-tooltip":"tooltip","datechooser/next-year-button-tooltip":"tooltip","datechooser/next-month-button-tooltip":"tooltip","datechooser/last-year-button":"datechooser/button","datechooser/last-month-button":"datechooser/button","datechooser/next-year-button":"datechooser/button","datechooser/next-month-button":"datechooser/button","datechooser/button/icon":{},"datechooser/button":{style:function(b){var a={width:17,show:"icon"};if(b.lastYear){a.icon="decoration/arrows/rewind.gif"}else{if(b.lastMonth){a.icon="decoration/arrows/left.gif"}else{if(b.nextYear){a.icon="decoration/arrows/forward.gif"}else{if(b.nextMonth){a.icon="decoration/arrows/right.gif"}}}}if(b.pressed||b.checked||b.abandoned){a.decorator="inset-thin"}else{if(b.hovered){a.decorator="outset-thin"}else{a.decorator=undefined}}if(b.pressed||b.checked||b.abandoned){a.padding=[2,0,0,2]}else{if(b.hovered){a.padding=1}else{a.padding=2}}return a}},"datechooser/month-year-label":{style:function(a){return{font:"bold",textAlign:"center"}}},"datechooser/date-pane":{style:function(a){return{decorator:"datechooser-date-pane",backgroundColor:"date-chooser"}}},"datechooser/weekday":{style:function(a){return{decorator:"datechooser-weekday",font:"bold",textAlign:"center",textColor:a.disabled?"text-disabled":a.weekend?"date-chooser-title":"date-chooser",backgroundColor:a.weekend?"date-chooser":"date-chooser-title"}}},"datechooser/day":{style:function(a){return{textAlign:"center",decorator:a.today?"main":undefined,textColor:a.disabled?"text-disabled":a.selected?"text-selected":a.otherMonth?"text-disabled":undefined,backgroundColor:a.disabled?undefined:a.selected?"date-chooser-selected":undefined,padding:[2,4]}}},"datechooser/week":{style:function(a){return{textAlign:"center",textColor:"date-chooser-title",padding:[2,4],decorator:a.header?"datechooser-week-header":"datechooser-week"}}},combobox:{style:function(b){var a;if(b.disabled){a="background-disabled"}else{if(b.invalid){a="background-invalid"}else{if(b.focused){a="background-light"}else{a="background-field"}}}return{decorator:b.focused?"focused-inset":"inset",textColor:b.disabled?"text-disabled":undefined,backgroundColor:a}}},"combobox/button":{alias:"button",include:"button",style:function(a){return{icon:"decoration/arrows/down.gif",backgroundColor:a.hovered?"button-hovered":"button"}}},"combobox/popup":"popup","combobox/list":"list","combobox/textfield":{include:"textfield",style:function(a){return{decorator:undefined,padding:[2,3],backgroundColor:undefined}}},menu:{style:function(b){var a={backgroundColor:"background",shadow:"shadow-small",decorator:"outset",spacingX:6,spacingY:1,iconColumnWidth:16,arrowColumnWidth:4,padding:1,placementModeY:b.submenu||b.contextmenu?"best-fit":"keep-align"};if(b.submenu){a.position="right-top";a.offset=[-2,-3]}if(b.contextmenu){a.offset=4}return a}},"menu/slidebar":"menu-slidebar","menu-slidebar":"widget","menu-slidebar-button":{style:function(a){return{backgroundColor:a.hovered?"background-selected":undefined,padding:6,center:true}}},"menu-slidebar/button-backward":{include:"menu-slidebar-button",style:function(a){return{icon:a.hovered?"decoration/arrows/up-invert.gif":"decoration/arrows/up.gif"}}},"menu-slidebar/button-forward":{include:"menu-slidebar-button",style:function(a){return{icon:a.hovered?"decoration/arrows/down-invert.gif":"decoration/arrows/down.gif"}}},"menu-separator":{style:function(a){return{height:0,decorator:"menu-separator",marginTop:4,marginBottom:4,marginLeft:2,marginRight:2}}},"menu-button":{alias:"atom",style:function(a){return{backgroundColor:a.selected?"background-selected":undefined,textColor:a.selected?"text-selected":undefined,padding:[2,6]}}},"menu-button/icon":{include:"image",style:function(a){return{alignY:"middle"}}},"menu-button/label":{include:"label",style:function(a){return{alignY:"middle",padding:1}}},"menu-button/shortcut":{include:"label",style:function(a){return{alignY:"middle",marginLeft:14,padding:1}}},"menu-button/arrow":{include:"image",style:function(a){return{source:a.selected?"decoration/arrows/right-invert.gif":"decoration/arrows/right.gif",alignY:"middle"}}},"menu-checkbox":{alias:"menu-button",include:"menu-button",style:function(a){return{icon:!a.checked?undefined:a.selected?"decoration/menu/checkbox-invert.gif":"decoration/menu/checkbox.gif"}}},"menu-radiobutton":{alias:"menu-button",include:"menu-button",style:function(a){return{icon:!a.checked?undefined:a.selected?"decoration/menu/radiobutton-invert.gif":"decoration/menu/radiobutton.gif"}}},menubar:{style:function(a){return{backgroundColor:"background",decorator:"outset"}}},"menubar-button":{alias:"atom",style:function(a){return{padding:[2,6],backgroundColor:a.pressed||a.hovered?"background-selected":undefined,textColor:a.pressed||a.hovered?"text-selected":undefined}}},colorselector:"widget","colorselector/control-bar":"widget","colorselector/visual-pane":"groupbox","colorselector/control-pane":"widget","colorselector/preset-grid":"widget","colorselector/colorbucket":{style:function(a){return{decorator:"inset-thin",width:16,height:16}}},"colorselector/preset-field-set":"groupbox","colorselector/input-field-set":"groupbox","colorselector/preview-field-set":"groupbox","colorselector/hex-field-composite":"widget","colorselector/hex-field":"textfield","colorselector/rgb-spinner-composite":"widget","colorselector/rgb-spinner-red":"spinner","colorselector/rgb-spinner-green":"spinner","colorselector/rgb-spinner-blue":"spinner","colorselector/hsb-spinner-composite":"widget","colorselector/hsb-spinner-hue":"spinner","colorselector/hsb-spinner-saturation":"spinner","colorselector/hsb-spinner-brightness":"spinner","colorselector/preview-content-old":{style:function(a){return{decorator:"inset-thin",width:50,height:10}}},"colorselector/preview-content-new":{style:function(a){return{decorator:"inset-thin",backgroundColor:"white",width:50,height:10}}},"colorselector/hue-saturation-field":{style:function(a){return{decorator:"inset-thin",margin:5}}},"colorselector/brightness-field":{style:function(a){return{decorator:"inset-thin",margin:[5,7]}}},"colorselector/hue-saturation-pane":"widget","colorselector/hue-saturation-handle":"widget","colorselector/brightness-pane":"widget","colorselector/brightness-handle":"widget",table:"widget","table/statusbar":{style:function(a){return{decorator:"table-statusbar",paddingLeft:2,paddingRight:2}}},"table/column-button":{alias:"button",style:function(a){var b,c;if(a.pressed||a.checked||a.abandoned){b="inset-thin";c=[3,2,1,4]}else{if(a.hovered){b="outset-thin";c=[2,3]}else{b=undefined;c=[3,4]}}return{decorator:b,padding:c,backgroundColor:a.abandoned?"button-abandoned":"button",icon:"decoration/table/select-column-order.png"}}},"table-column-reset-button":{extend:"menu-button",alias:"menu-button",style:function(){return{icon:"icon/16/actions/view-refresh.png"}}},"table-scroller/scrollbar-x":"scrollbar","table-scroller/scrollbar-y":"scrollbar","table-scroller":"widget","table-scroller/header":{style:function(a){return{decorator:"table-scroller-header",backgroundColor:"table-header"}}},"table-scroller/pane":{style:function(a){return{backgroundColor:"table-pane"}}},"table-scroller/focus-indicator":{style:function(a){return{decorator:"table-scroller-focus-indicator"}}},"table-scroller/resize-line":{style:function(a){return{backgroundColor:"table-header-border",width:3}}},"table-header-cell":{alias:"atom",style:function(a){return{minWidth:13,paddingLeft:2,paddingRight:2,paddingBottom:a.hovered?0:2,decorator:a.hovered?"table-header-cell-hovered":"table-header-cell",backgroundColor:a.hovered?"table-header-cell-hover":"table-header-cell",sortIcon:a.sorted?(a.sortedAscending?"decoration/table/ascending.png":"decoration/table/descending.png"):undefined}}},"table-header-cell/icon":{style:function(a){return{marginRight:4}}},"table-header-cell/sort-icon":{style:function(a){return{alignY:"middle"}}},"table-editor-textfield":{include:"textfield",style:function(a){return{decorator:undefined,padding:[2,2]}}},"table-editor-selectbox":{include:"selectbox",alias:"selectbox",style:function(a){return{padding:[0,2]}}},"table-editor-combobox":{include:"combobox",alias:"combobox",style:function(a){return{decorator:undefined}}},colorpopup:{alias:"popup",include:"popup",style:function(a){return{decorator:"outset",padding:5,backgroundColor:"background"}}},"colorpopup/field":{style:function(a){return{decorator:"inset-thin",margin:2,width:14,height:14,backgroundColor:"background"}}},"colorpopup/selector-button":"button","colorpopup/auto-button":"button","colorpopup/preview-pane":"groupbox","colorpopup/current-preview":{style:function(a){return{height:20,padding:4,marginLeft:4,decorator:"inset-thin",allowGrowX:true}}},"colorpopup/selected-preview":{style:function(a){return{height:20,padding:4,marginRight:4,decorator:"inset-thin",allowGrowX:true}}},"colorpopup/colorselector-okbutton":{alias:"button",include:"button",style:function(a){return{icon:"icon/16/actions/dialog-ok.png"}}},"colorpopup/colorselector-cancelbutton":{alias:"button",include:"button",style:function(a){return{icon:"icon/16/actions/dialog-cancel.png"}}},"virtual-list":"list","virtual-list/row-layer":"row-layer","row-layer":"widget","column-layer":"widget","group-item":{include:"label",alias:"label",style:function(a){return{padding:4,backgroundColor:"#BABABA",textColor:"white",font:"bold"}}},"virtual-selectbox":"selectbox","virtual-selectbox/dropdown":"popup","virtual-selectbox/dropdown/list":{alias:"virtual-list"},"virtual-combobox":"combobox","virtual-combobox/dropdown":"popup","virtual-combobox/dropdown/list":{alias:"virtual-list"},"virtual-tree":"list","virtual-tree-folder":"tree-folder","virtual-tree-file":"tree-file",cell:{style:function(a){return{backgroundColor:a.selected?"table-row-background-selected":"table-row-background-even",textColor:a.selected?"text-selected":"text",padding:[3,6]}}},"cell-string":"cell","cell-number":{include:"cell",style:function(a){return{textAlign:"right"}}},"cell-image":"cell","cell-boolean":"cell","cell-atom":"cell","cell-date":"cell","cell-html":"cell",htmlarea:{include:"widget",style:function(a){return{backgroundColor:"white"}}},progressbar:{style:function(a){return{decorator:"progressbar",padding:[1],backgroundColor:"white"}}},"progressbar/progress":{style:function(a){return{backgroundColor:a.disabled?"background-disabled":"background-selected"}}},"app-header":{style:function(a){return{textColor:"text-selected",backgroundColor:"background-selected",padding:[8,12]}}},"app-header-label":"label"}});qx.Theme.define("qx.theme.classic.Font",{fonts:{"default":{size:11,lineHeight:1.4,family:["Lucida Grande","Tahoma","Verdana","Bitstream Vera Sans","Liberation Sans"]},bold:{size:11,lineHeight:1.4,family:["Lucida Grande","Tahoma","Verdana","Bitstream Vera Sans","Liberation Sans"],bold:true},small:{size:10,lineHeight:1.4,family:["Lucida Grande","Tahoma","Verdana","Bitstream Vera Sans","Liberation Sans"]},monospace:{size:11,lineHeight:1.4,family:["DejaVu Sans Mono","Courier New","monospace"]}}});qx.Theme.define("qx.theme.classic.Color",{colors:{background:"#EBE9ED","background-light":"#F3F0F5","background-focused":"#F3F8FD","background-focused-inner":"#DBEAF9","background-disabled":"#F4F4F4","background-selected":"#3E6CA8","background-field":"white","background-pane":"#FAFBFE","background-invalid":"#FFE0E0","border-lead":"#888888","border-light":"white","border-light-shadow":"#DCDFE4","border-dark-shadow":"#A7A6AA","border-dark":"#85878C","border-main":"#85878C","border-focused-light":"#BCCEE5","border-focused-light-shadow":"#A5BDDE","border-focused-dark-shadow":"#7CA0CF","border-focused-dark":"#3E6CA8","border-separator":"#808080",invalid:"#990000","border-focused-invalid":"#FF9999",text:"black","text-disabled":"#A7A6AA","text-selected":"white","text-focused":"#3E5B97","text-placeholder":"#CBC8CD",tooltip:"#FFFFE1","tooltip-text":"black","tooltip-invalid":"#C82C2C",button:"#EBE9ED","button-hovered":"#F6F5F7","button-abandoned":"#F9F8E9","button-checked":"#F3F0F5","window-active-caption-text":[255,255,255],"window-inactive-caption-text":[255,255,255],"window-active-caption":[51,94,168],"window-inactive-caption":[111,161,217],"date-chooser":"white","date-chooser-title":[116,116,116],"date-chooser-selected":[52,52,52],effect:[254,200,60],"table-pane":"white","table-header":[242,242,242],"table-header-border":[214,213,217],"table-header-cell":[235,234,219],"table-header-cell-hover":[255,255,255],"table-focus-indicator":[179,217,255],"table-row-background-focused-selected":[90,138,211],"table-row-background-focused":[221,238,255],"table-row-background-selected":[51,94,168],"table-row-background-even":[250,248,243],"table-row-background-odd":[255,255,255],"table-row-selected":[255,255,255],"table-row":[0,0,0],"table-row-line":"#EEE","table-column-line":"#EEE","progressive-table-header":"#AAAAAA","progressive-table-row-background-even":[250,248,243],"progressive-table-row-background-odd":[255,255,255],"progressive-progressbar-background":"gray","progressive-progressbar-indicator-done":"#CCCCCC","progressive-progressbar-indicator-undone":"white","progressive-progressbar-percent-background":"gray","progressive-progressbar-percent-text":"white"}});qx.Theme.define("qx.theme.icon.Oxygen",{title:"Oxygen",aliases:{icon:"qx/icon/Oxygen"},icons:{}});qx.Theme.define("qx.theme.Classic",{title:"Classic Windows",meta:{color:qx.theme.classic.Color,decoration:qx.theme.classic.Decoration,font:qx.theme.classic.Font,appearance:qx.theme.classic.Appearance,icon:qx.theme.icon.Oxygen}});qx.Theme.define("qx.theme.Modern",{title:"Modern",meta:{color:qx.theme.modern.Color,decoration:qx.theme.modern.Decoration,font:qx.theme.modern.Font,appearance:qx.theme.modern.Appearance,icon:qx.theme.icon.Tango}});qx.Class.define("qx.ui.treevirtual.SimpleTreeDataCellRenderer",{extend:qx.ui.table.cellrenderer.Abstract,construct:function(){var a=qx.ui.treevirtual.SimpleTreeDataCellRenderer;if(a.__bVirgin){a.__preloadImages();a.__bVirgin=false}this.base(arguments);this.__am=qx.util.AliasManager.getInstance();this.__rm=qx.util.ResourceManager.getInstance();this.__tm=qx.theme.manager.Appearance.getInstance();this.BLANK=this.__rm.toUri(this.__am.resolve("static/blank.gif"))},statics:{__icon:{},__bVirgin:true,__preloadImages:function(){qx.theme.manager.Meta.getInstance().initialize();var b=qx.ui.treevirtual.SimpleTreeDataCellRenderer;var c=qx.io.ImageLoader;var d=qx.util.AliasManager.getInstance();var f=qx.util.ResourceManager.getInstance();var a=qx.theme.manager.Appearance.getInstance();var e=function(g){c.load(f.toUri(d.resolve(g)))};b.__icon.line=a.styleFrom("treevirtual-line");e(b.__icon.line.icon);b.__icon.contract=a.styleFrom("treevirtual-contract");e(b.__icon.contract.icon);b.__icon.expand=a.styleFrom("treevirtual-expand");e(b.__icon.expand.icon);b.__icon.onlyContract=a.styleFrom("treevirtual-only-contract");e(b.__icon.onlyContract.icon);b.__icon.onlyExpand=a.styleFrom("treevirtual-only-expand");e(b.__icon.onlyExpand.icon);b.__icon.startContract=a.styleFrom("treevirtual-start-contract");e(b.__icon.startContract.icon);b.__icon.startExpand=a.styleFrom("treevirtual-start-expand");e(b.__icon.startExpand.icon);b.__icon.endContract=a.styleFrom("treevirtual-end-contract");e(b.__icon.endContract.icon);b.__icon.endExpand=a.styleFrom("treevirtual-end-expand");e(b.__icon.endExpand.icon);b.__icon.crossContract=a.styleFrom("treevirtual-cross-contract");e(b.__icon.crossContract.icon);b.__icon.crossExpand=a.styleFrom("treevirtual-cross-expand");e(b.__icon.crossExpand.icon);b.__icon.end=a.styleFrom("treevirtual-end");e(b.__icon.end.icon);b.__icon.cross=a.styleFrom("treevirtual-cross");e(b.__icon.cross.icon)}},properties:{useTreeLines:{check:"Boolean",init:true},excludeFirstLevelTreeLines:{check:"Boolean",init:false},alwaysShowOpenCloseSymbol:{check:"Boolean",init:false}},members:{__am:null,__tm:null,__rm:null,_getCellStyle:function(a){var c=a.value;var b=this.base(arguments,a)+(c.cellStyle?c.cellStyle+";":"");return b},_getContentHtml:function(c){var d="";var f=0;var a=this._addExtraContentBeforeIndentation(c,f);d+=a.html;f=a.pos;var b=this._addIndentation(c,f);d+=b.html;f=b.pos;a=this._addExtraContentBeforeIcon(c,f);d+=a.html;f=a.pos;var e=this._addIcon(c,f);d+=e.html;f=e.pos;a=this._addExtraContentBeforeLabel(c,f);d+=a.html;f=a.pos;d+=this._addLabel(c,f);return d},_addImage:function(a){var b=[];var d=this.__rm.toUri(this.__am.resolve(a.url));if(a.position){var e=a.position;b.push('<div style="position:absolute;');if(!(qx.core.Environment.get("engine.name")=="mshtml")){b.push(qx.bom.element.BoxSizing.compile("content-box"))}if(e.top!==undefined){b.push("top:"+e.top+"px;")}if(e.right!==undefined){b.push("right:"+e.right+"px;")}if(e.bottom!==undefined){b.push("bottom:"+e.bottom+"px;")}if(e.left!==undefined){b.push("left:"+e.left+"px;")}if(e.width!==undefined){b.push("width:"+e.width+"px;")}if(e.height!==undefined){b.push("height:"+e.height+"px;")}b.push('">')}b.push('<div style="');b.push("background-image:url("+d+");");b.push("background-repeat:no-repeat;");if(a.imageWidth&&a.imageHeight){b.push(";width:"+a.imageWidth+"px;height:"+a.imageHeight+"px")}var c=a.tooltip;if(c!=null){b.push('" title="'+c)}b.push('">&nbsp;</div>');if(a.position){b.push("</div>")}return b.join("")},_addIndentation:function(e,k){var d=e.value;var b;var g="";var h=this.getUseTreeLines();var j=this.getExcludeFirstLevelTreeLines();var c=this.getAlwaysShowOpenCloseSymbol();for(var f=0;f<d.level;f++){b=this._getIndentSymbol(f,d,h,c,j);var a=e.table.getRowHeight();g+=this._addImage({url:b.icon,position:{top:0+(b.paddingTop||0),left:k+(b.paddingLeft||0),width:a+3,height:a},imageWidth:a,imageHeight:a});k+=a+3}return({html:g,pos:k})},_addIcon:function(c,h){var f=c.value;var b=(f.bSelected?f.iconSelected:f.icon);if (!b) return ({html : "", pos: h + 0});if(!b){if(f.type==qx.ui.treevirtual.SimpleTreeDataModel.Type.LEAF){var g=this.__tm.styleFrom("treevirtual-file")}else{var a={opened:f.bOpened};var g=this.__tm.styleFrom("treevirtual-folder",a)}b=g.icon}var e=c.table.getRowHeight();var d=this._addImage({url:b,position:{top:0,left:h,width:e+3,height:e},imageWidth:e,imageHeight:e});return({html:d,pos:h+e+3})},_addLabel:function(b,e){var d=b.value;var a=d.label;if(qx.core.Environment.get("qx.dynlocale")){if(a&&a.translate){a=a.translate()}}var c='<div style="position:absolute;left:'+e+"px;top:0;"+(d.labelStyle?d.labelStyle+";":"")+'"><span'+(b.labelSpanStyle?'style="'+b.labelSpanStyle+';"':"")+">"+a+"</span></div>";return c},_addExtraContentBeforeIndentation:function(a,b){return{html:"",pos:b}},_addExtraContentBeforeIcon:function(a,b){return{html:"",pos:b}},_addExtraContentBeforeLabel:function(a,b){return{html:"",pos:b}},_getIndentSymbol:function(d,f,e,a,c){var b=qx.ui.treevirtual.SimpleTreeDataCellRenderer;if(d==0&&c){e=false}if(d<f.level-1){return(e&&!f.lastChild[d]?b.__icon.line:{icon:this.BLANK})}var g=f.lastChild[f.lastChild.length-1];if(f.type==qx.ui.treevirtual.SimpleTreeDataModel.Type.BRANCH&&!f.bHideOpenClose){if(f.children.length>0||a){if(!e){return(f.bOpened?b.__icon.contract:b.__icon.expand)}if(d==0&&f.bFirstChild){if(g){return(f.bOpened?b.__icon.onlyContract:b.__icon.onlyExpand)}else{return(f.bOpened?b.__icon.startContract:b.__icon.startExpand)}}if(g){return(f.bOpened?b.__icon.endContract:b.__icon.endExpand)}return(f.bOpened?b.__icon.crossContract:b.__icon.crossExpand)}}if(e){if(f.parentNodeId==0){if(g&&f.bFirstChild){return{icon:this.BLANK}}if(g){return b.__icon.end}if(f.bFirstChild){return(f.bOpened?b.__icon.startContract:b.__icon.startExpand)}}return(g?b.__icon.end:b.__icon.cross)}return{icon:this.BLANK}}},destruct:function(){this.__am=this.__rm=this.__tm=null}});qx.Class.define("qx.ui.treevirtual.DefaultDataCellRenderer",{extend:qx.ui.table.cellrenderer.Default});qx.Class.define("qx.ui.treevirtual.SimpleTreeDataRowRenderer",{extend:qx.ui.table.rowrenderer.Default,construct:function(){this.base(arguments)},members:{updateDataRowElement:function(f,d){var a=f.table;var e=f.rowData;var h=a.getTableModel();var b=h.getTreeColumn();var c=e[b];f.selected=c.bSelected;if(c.bSelected){var g=f.row;a.getSelectionModel()._addSelectionInterval(g,g)}this.base(arguments,f,d)}}});qx.Class.define("qx.ui.core.selection.Abstract",{type:"abstract",extend:qx.core.Object,construct:function(){this.base(arguments);this.__selection={}},events:{changeSelection:"qx.event.type.Data"},properties:{mode:{check:["single","multi","additive","one"],init:"single",apply:"_applyMode"},drag:{check:"Boolean",init:false},quick:{check:"Boolean",init:false}},members:{__scrollStepX:0,__scrollStepY:0,__scrollTimer:null,__frameScroll:null,__lastRelX:null,__lastRelY:null,__frameLocation:null,__dragStartX:null,__dragStartY:null,__inCapture:null,__mouseX:null,__mouseY:null,__moveDirectionX:null,__moveDirectionY:null,__selectionModified:null,__selectionContext:null,__leadItem:null,__selection:null,__anchorItem:null,__mouseDownOnSelected:null,_userInteraction:false,__oldScrollTop:null,getSelectionContext:function(){return this.__selectionContext},selectAll:function(){var a=this.getMode();if(a=="single"||a=="one"){throw new Error("Can not select all items in selection mode: "+a)}this._selectAllItems();this._fireChange()},selectItem:function(a){this._setSelectedItem(a);var b=this.getMode();if(b!=="single"&&b!=="one"){this._setLeadItem(a);this._setAnchorItem(a)}this._scrollItemIntoView(a);this._fireChange()},addItem:function(a){var b=this.getMode();if(b==="single"||b==="one"){this._setSelectedItem(a)}else{if(!this._getAnchorItem()){this._setAnchorItem(a)}this._setLeadItem(a);this._addToSelection(a)}this._scrollItemIntoView(a);this._fireChange()},removeItem:function(a){this._removeFromSelection(a);if(this.getMode()==="one"&&this.isSelectionEmpty()){var b=this._getFirstSelectable();if(b){this.addItem(b)}if(b==a){return}}if(this.getLeadItem()==a){this._setLeadItem(null)}if(this._getAnchorItem()==a){this._setAnchorItem(null)}this._fireChange()},selectItemRange:function(b,a){var c=this.getMode();if(c=="single"||c=="one"){throw new Error("Can not select multiple items in selection mode: "+c)}this._selectItemRange(b,a);this._setAnchorItem(b);this._setLeadItem(a);this._scrollItemIntoView(a);this._fireChange()},clearSelection:function(){if(this.getMode()=="one"){return}this._clearSelection();this._setLeadItem(null);this._setAnchorItem(null);this._fireChange()},replaceSelection:function(a){var b=this.getMode();if(b=="one"||b==="single"){if(a.length>1){throw new Error("Could not select more than one items in mode: "+b+"!")}if(a.length==1){this.selectItem(a[0])}else{this.clearSelection()}return}else{this._replaceMultiSelection(a)}},getSelectedItem:function(){var b=this.getMode();if(b==="single"||b==="one"){var a=this._getSelectedItem();return a!=undefined?a:null}throw new Error("The method getSelectedItem() is only supported in 'single' and 'one' selection mode!")},getSelection:function(){return qx.lang.Object.getValues(this.__selection)},getSortedSelection:function(){var a=this.getSelectables();var b=qx.lang.Object.getValues(this.__selection);b.sort(function(d,c){return a.indexOf(d)-a.indexOf(c)});return b},isItemSelected:function(a){var b=this._selectableToHashCode(a);return this.__selection[b]!==undefined},isSelectionEmpty:function(){return qx.lang.Object.isEmpty(this.__selection)},invertSelection:function(){var c=this.getMode();if(c==="single"||c==="one"){throw new Error("The method invertSelection() is only supported in 'multi' and 'additive' selection mode!")}var a=this.getSelectables();for(var b=0;b<a.length;b++){this._toggleInSelection(a[b])}this._fireChange()},_setLeadItem:function(b){var a=this.__leadItem;if(a!==null){this._styleSelectable(a,"lead",false)}if(b!==null){this._styleSelectable(b,"lead",true)}this.__leadItem=b},getLeadItem:function(){return this.__leadItem!==null?this.__leadItem:null},_setAnchorItem:function(b){var a=this.__anchorItem;if(a){this._styleSelectable(a,"anchor",false)}if(b){this._styleSelectable(b,"anchor",true)}this.__anchorItem=b},_getAnchorItem:function(){return this.__anchorItem!==null?this.__anchorItem:null},_isSelectable:function(a){throw new Error("Abstract method call: _isSelectable()")},_getSelectableFromMouseEvent:function(a){var b=a.getTarget();if(b&&this._isSelectable(b)){return b}return null},_selectableToHashCode:function(a){throw new Error("Abstract method call: _selectableToHashCode()")},_styleSelectable:function(c,b,a){throw new Error("Abstract method call: _styleSelectable()")},_capture:function(){throw new Error("Abstract method call: _capture()")},_releaseCapture:function(){throw new Error("Abstract method call: _releaseCapture()")},_getLocation:function(){throw new Error("Abstract method call: _getLocation()")},_getDimension:function(){throw new Error("Abstract method call: _getDimension()")},_getSelectableLocationX:function(a){throw new Error("Abstract method call: _getSelectableLocationX()")},_getSelectableLocationY:function(a){throw new Error("Abstract method call: _getSelectableLocationY()")},_getScroll:function(){throw new Error("Abstract method call: _getScroll()")},_scrollBy:function(a,b){throw new Error("Abstract method call: _scrollBy()")},_scrollItemIntoView:function(a){throw new Error("Abstract method call: _scrollItemIntoView()")},getSelectables:function(a){throw new Error("Abstract method call: getSelectables()")},_getSelectableRange:function(b,a){throw new Error("Abstract method call: _getSelectableRange()")},_getFirstSelectable:function(){throw new Error("Abstract method call: _getFirstSelectable()")},_getLastSelectable:function(){throw new Error("Abstract method call: _getLastSelectable()")},_getRelatedSelectable:function(b,a){throw new Error("Abstract method call: _getRelatedSelectable()")},_getPage:function(b,a){throw new Error("Abstract method call: _getPage()")},_applyMode:function(b,a){this._setLeadItem(null);this._setAnchorItem(null);this._clearSelection();if(b==="one"){var c=this._getFirstSelectable();if(c!=null){this._setSelectedItem(c);this._scrollItemIntoView(c)}}this._fireChange()},handleMouseOver:function(b){if(this.__oldScrollTop!=null&&this.__oldScrollTop!=this._getScroll().top){this.__oldScrollTop=null;return}this._userInteraction=true;if(!this.getQuick()){this._userInteraction=false;return}var c=this.getMode();if(c!=="one"&&c!=="single"){this._userInteraction=false;return}var a=this._getSelectableFromMouseEvent(b);if(a===null){this._userInteraction=false;return}this._setSelectedItem(a);this._fireChange("quick");this._userInteraction=false},handleMouseDown:function(d){this._userInteraction=true;var c=this._getSelectableFromMouseEvent(d);if(c===null){this._userInteraction=false;return}var f=d.isCtrlPressed()||(qx.core.Environment.get("os.name")=="osx"&&d.isMetaPressed());var b=d.isShiftPressed();if(this.isItemSelected(c)&&!b&&!f&&!this.getDrag()){this.__mouseDownOnSelected=c;this._userInteraction=false;return}else{this.__mouseDownOnSelected=null}this._scrollItemIntoView(c);switch(this.getMode()){case"single":case"one":this._setSelectedItem(c);break;case"additive":this._setLeadItem(c);this._setAnchorItem(c);this._toggleInSelection(c);break;case"multi":this._setLeadItem(c);if(b){var a=this._getAnchorItem();if(a===null){a=this._getFirstSelectable();this._setAnchorItem(a)}this._selectItemRange(a,c,f)}else{if(f){this._setAnchorItem(c);this._toggleInSelection(c)}else{this._setAnchorItem(c);this._setSelectedItem(c)}}break}var e=this.getMode();if(this.getDrag()&&e!=="single"&&e!=="one"&&!b&&!f){this.__frameLocation=this._getLocation();this.__frameScroll=this._getScroll();this.__dragStartX=d.getDocumentLeft()+this.__frameScroll.left;this.__dragStartY=d.getDocumentTop()+this.__frameScroll.top;this.__inCapture=true;this._capture()}this._fireChange("click");this._userInteraction=false},handleMouseUp:function(c){this._userInteraction=true;var e=c.isCtrlPressed()||(qx.core.Environment.get("os.name")=="osx"&&c.isMetaPressed());var a=c.isShiftPressed();if(!e&&!a&&this.__mouseDownOnSelected){var b=this._getSelectableFromMouseEvent(c);if(b===null||!this.isItemSelected(b)){this._userInteraction=false;return}var d=this.getMode();if(d==="additive"){this._removeFromSelection(b)}else{this._setSelectedItem(b);if(this.getMode()==="multi"){this._setLeadItem(b);this._setAnchorItem(b)}}this._userInteraction=false}this._cleanup()},handleLoseCapture:function(a){this._cleanup()},handleMouseMove:function(b){if(!this.__inCapture){return}this.__mouseX=b.getDocumentLeft();this.__mouseY=b.getDocumentTop();this._userInteraction=true;var d=this.__mouseX+this.__frameScroll.left;if(d>this.__dragStartX){this.__moveDirectionX=1}else{if(d<this.__dragStartX){this.__moveDirectionX=-1}else{this.__moveDirectionX=0}}var c=this.__mouseY+this.__frameScroll.top;if(c>this.__dragStartY){this.__moveDirectionY=1}else{if(c<this.__dragStartY){this.__moveDirectionY=-1}else{this.__moveDirectionY=0}}var a=this.__frameLocation;if(this.__mouseX<a.left){this.__scrollStepX=this.__mouseX-a.left}else{if(this.__mouseX>a.right){this.__scrollStepX=this.__mouseX-a.right}else{this.__scrollStepX=0}}if(this.__mouseY<a.top){this.__scrollStepY=this.__mouseY-a.top}else{if(this.__mouseY>a.bottom){this.__scrollStepY=this.__mouseY-a.bottom}else{this.__scrollStepY=0}}if(!this.__scrollTimer){this.__scrollTimer=new qx.event.Timer(100);this.__scrollTimer.addListener("interval",this._onInterval,this)}this.__scrollTimer.start();this._autoSelect();b.stopPropagation();this._userInteraction=false},handleAddItem:function(b){var a=b.getData();if(this.getMode()==="one"&&this.isSelectionEmpty()){this.addItem(a)}},handleRemoveItem:function(a){this.removeItem(a.getData())},_cleanup:function(){if(!this.getDrag()&&this.__inCapture){return}if(this.__selectionModified){this._fireChange("click")}delete this.__inCapture;delete this.__lastRelX;delete this.__lastRelY;this._releaseCapture();if(this.__scrollTimer){this.__scrollTimer.stop()}},_onInterval:function(a){this._scrollBy(this.__scrollStepX,this.__scrollStepY);this.__frameScroll=this._getScroll();this._autoSelect()},_autoSelect:function(){var l=this._getDimension();var h=Math.max(0,Math.min(this.__mouseX-this.__frameLocation.left,l.width))+this.__frameScroll.left;var g=Math.max(0,Math.min(this.__mouseY-this.__frameLocation.top,l.height))+this.__frameScroll.top;if(this.__lastRelX===h&&this.__lastRelY===g){return}this.__lastRelX=h;this.__lastRelY=g;var c=this._getAnchorItem();var e=c;var b=this.__moveDirectionX;var k,i;while(b!==0){k=b>0?this._getRelatedSelectable(e,"right"):this._getRelatedSelectable(e,"left");if(k!==null){i=this._getSelectableLocationX(k);if((b>0&&i.left<=h)||(b<0&&i.right>=h)){e=k;continue}}break}var a=this.__moveDirectionY;var j,f;while(a!==0){j=a>0?this._getRelatedSelectable(e,"under"):this._getRelatedSelectable(e,"above");if(j!==null){f=this._getSelectableLocationY(j);if((a>0&&f.top<=g)||(a<0&&f.bottom>=g)){e=j;continue}}break}var d=this.getMode();if(d==="multi"){this._selectItemRange(c,e)}else{if(d==="additive"){if(this.isItemSelected(c)){this._selectItemRange(c,e,true)}else{this._deselectItemRange(c,e)}this._setAnchorItem(e)}}this._fireChange("drag")},__navigationKeys:{Home:1,Down:1,Right:1,PageDown:1,End:1,Up:1,Left:1,PageUp:1},handleKeyPress:function(a){this._userInteraction=true;var g,d;var j=a.getKeyIdentifier();var f=this.getMode();var e=a.isCtrlPressed()||(qx.core.Environment.get("os.name")=="osx"&&a.isMetaPressed());var b=a.isShiftPressed();var i=false;if(j==="A"&&e){if(f!=="single"&&f!=="one"){this._selectAllItems();i=true}}else{if(j==="Escape"){if(f!=="single"&&f!=="one"){this._clearSelection();i=true}}else{if(j==="Space"){var h=this.getLeadItem();if(h&&!b){if(e||f==="additive"){this._toggleInSelection(h)}else{this._setSelectedItem(h)}i=true}}else{if(this.__navigationKeys[j]){i=true;if(f==="single"||f=="one"){g=this._getSelectedItem()}else{g=this.getLeadItem()}if(g!==null){switch(j){case"Home":d=this._getFirstSelectable();break;case"End":d=this._getLastSelectable();break;case"Up":d=this._getRelatedSelectable(g,"above");break;case"Down":d=this._getRelatedSelectable(g,"under");break;case"Left":d=this._getRelatedSelectable(g,"left");break;case"Right":d=this._getRelatedSelectable(g,"right");break;case"PageUp":d=this._getPage(g,true);break;case"PageDown":d=this._getPage(g,false);break}}else{switch(j){case"Home":case"Down":case"Right":case"PageDown":d=this._getFirstSelectable();break;case"End":case"Up":case"Left":case"PageUp":d=this._getLastSelectable();break}}if(d!==null){switch(f){case"single":case"one":this._setSelectedItem(d);break;case"additive":this._setLeadItem(d);break;case"multi":if(b){var c=this._getAnchorItem();if(c===null){this._setAnchorItem(c=this._getFirstSelectable())}this._setLeadItem(d);this._selectItemRange(c,d,e)}else{this._setAnchorItem(d);this._setLeadItem(d);if(!e){this._setSelectedItem(d)}}break}this.__oldScrollTop=this._getScroll().top;this._scrollItemIntoView(d)}}}}}if(i){a.stop();this._fireChange("key")}this._userInteraction=false},_selectAllItems:function(){var b=this.getSelectables();for(var c=0,a=b.length;c<a;c++){this._addToSelection(b[c])}},_clearSelection:function(){var a=this.__selection;for(var b in a){this._removeFromSelection(a[b])}this.__selection={}},_selectItemRange:function(g,f,h){var e=this._getSelectableRange(g,f);if(!h){var b=this.__selection;var j=this.__rangeToMap(e);for(var c in b){if(!j[c]){this._removeFromSelection(b[c])}}}for(var d=0,a=e.length;d<a;d++){this._addToSelection(e[d])}},_deselectItemRange:function(d,b){var c=this._getSelectableRange(d,b);for(var e=0,a=c.length;e<a;e++){this._removeFromSelection(c[e])}},__rangeToMap:function(c){var b={};var e;for(var d=0,a=c.length;d<a;d++){e=c[d];b[this._selectableToHashCode(e)]=e}return b},_getSelectedItem:function(){for(var a in this.__selection){return this.__selection[a]}return null},_setSelectedItem:function(a){if(this._isSelectable(a)){var c=this.__selection;var b=this._selectableToHashCode(a);if(!c[b]||qx.lang.Object.hasMinLength(c,2)){this._clearSelection();this._addToSelection(a)}}},_addToSelection:function(a){var b=this._selectableToHashCode(a);if(!this.__selection[b]&&this._isSelectable(a)){this.__selection[b]=a;this._styleSelectable(a,"selected",true);this.__selectionModified=true}},_toggleInSelection:function(a){var b=this._selectableToHashCode(a);if(!this.__selection[b]){this.__selection[b]=a;this._styleSelectable(a,"selected",true)}else{delete this.__selection[b];this._styleSelectable(a,"selected",false)}this.__selectionModified=true},_removeFromSelection:function(a){var b=this._selectableToHashCode(a);if(this.__selection[b]!=null){delete this.__selection[b];this._styleSelectable(a,"selected",false);this.__selectionModified=true}},_replaceMultiSelection:function(g){var k=false;var h,c;var a={};for(var d=0,b=g.length;d<b;d++){h=g[d];if(this._isSelectable(h)){c=this._selectableToHashCode(h);a[c]=h}}var e=g[0];var j=h;var f=this.__selection;for(var c in f){if(a[c]){delete a[c]}else{h=f[c];delete f[c];this._styleSelectable(h,"selected",false);k=true}}for(var c in a){h=f[c]=a[c];this._styleSelectable(h,"selected",true);k=true}if(!k){return false}this._scrollItemIntoView(j);this._setLeadItem(e);this._setAnchorItem(e);this.__selectionModified=true;this._fireChange()},_fireChange:function(a){if(this.__selectionModified){this.__selectionContext=a||null;this.fireDataEvent("changeSelection",this.getSelection());delete this.__selectionModified}}},destruct:function(){this._disposeObjects("__scrollTimer");this.__selection=this.__mouseDownOnSelected=this.__anchorItem=null;this.__leadItem=null}});qx.Class.define("qx.ui.virtual.selection.Abstract",{extend:qx.ui.core.selection.Abstract,construct:function(b,a){this.base(arguments);if(qx.core.Environment.get("qx.debug")){this.assertInstance(b,qx.ui.virtual.core.Pane)}this._pane=b;this._delegate=a||{}},members:{_isSelectable:function(a){return this._delegate.isItemSelectable?this._delegate.isItemSelectable(a):true},_styleSelectable:function(c,b,a){if(this._delegate.styleSelectable){this._delegate.styleSelectable(c,b,a)}},attachMouseEvents:function(){var a=this._pane.getContainerElement();a.addListener("mousedown",this.handleMouseDown,this);a.addListener("mouseup",this.handleMouseUp,this);a.addListener("mouseover",this.handleMouseOver,this);a.addListener("mousemove",this.handleMouseMove,this);a.addListener("losecapture",this.handleLoseCapture,this)},detatchMouseEvents:function(){var a=this._pane.getContainerElement();a.removeListener("mousedown",this.handleMouseDown,this);a.removeListener("mouseup",this.handleMouseUp,this);a.removeListener("mouseover",this.handleMouseOver,this);a.removeListener("mousemove",this.handleMouseMove,this);a.removeListener("losecapture",this.handleLoseCapture,this)},attachKeyEvents:function(a){a.addListener("keypress",this.handleKeyPress,this)},detachKeyEvents:function(a){a.removeListener("keypress",this.handleKeyPress,this)},attachListEvents:function(a){a.addListener("addItem",this.handleAddItem,this);a.addListener("removeItem",this.handleRemoveItem,this)},detachListEvents:function(a){a.removeListener("addItem",this.handleAddItem,this);a.removeListener("removeItem",this.handleRemoveItem,this)},_capture:function(){this._pane.capture()},_releaseCapture:function(){this._pane.releaseCapture()},_getScroll:function(){return{left:this._pane.getScrollX(),top:this._pane.getScrollY()}},_scrollBy:function(a,b){this._pane.setScrollX(this._pane.getScrollX()+a);this._pane.setScrollY(this._pane.getScrollY()+b)},_getLocation:function(){var a=this._pane.getContentElement().getDomElement();return a?qx.bom.element.Location.get(a):null},_getDimension:function(){return this._pane.getInnerSize()}},destruct:function(){this._pane=this._delegate=null}});qx.Class.define("qx.ui.virtual.selection.Row",{extend:qx.ui.virtual.selection.Abstract,members:{_getItemCount:function(){return this._pane.getRowConfig().getItemCount()},_getSelectableFromMouseEvent:function(b){var a=this._pane.getCellAtPosition(b.getDocumentLeft(),b.getDocumentTop());if(!a){return null}return this._isSelectable(a.row)?a.row:null},getSelectables:function(d){var a=[];for(var c=0,b=this._getItemCount();c<b;c++){if(this._isSelectable(c)){a.push(c)}}return a},_getSelectableRange:function(d,c){var b=[];var f=Math.min(d,c);var a=Math.max(d,c);for(var e=f;e<=a;e++){if(this._isSelectable(e)){b.push(e)}}return b},_getFirstSelectable:function(){var b=this._getItemCount();for(var a=0;a<b;a++){if(this._isSelectable(a)){return a}}return null},_getLastSelectable:function(){var b=this._getItemCount();for(var a=b-1;a>=0;a--){if(this._isSelectable(a)){return a}}return null},_getRelatedSelectable:function(d,c){if(c=="above"){var f=d-1;var e=0;var a=-1}else{if(c=="under"){var f=d+1;var e=this._getItemCount()-1;var a=1}else{return null}}for(var b=f;b!==e+a;b+=a){if(this._isSelectable(b)){return b}}return null},_getPage:function(b,a){if(a){return this._getFirstSelectable()}else{return this._getLastSelectable()}},_selectableToHashCode:function(a){return a},_scrollItemIntoView:function(a){this._pane.scrollRowIntoView(a)},_getSelectableLocationX:function(a){return{left:0,right:this._pane.getColumnConfig().getTotalSize()-1}},_getSelectableLocationY:function(c){var d=this._pane.getRowConfig();var b=d.getItemPosition(c);var a=b+d.getItemSize(c)-1;return{top:b,bottom:a}},_applyDefaultSelection:function(){if(this.getMode()==="one"&&this.isSelectionEmpty()){var a=this._getFirstSelectable();if(a!=null){this.selectItem(a)}}}}});qx.Class.define("qx.ui.virtual.selection.Column",{extend:qx.ui.virtual.selection.Row,members:{_getItemCount:function(){return this._pane.getColumnConfig().getItemCount()},_getSelectableFromMouseEvent:function(b){var a=this._pane.getCellAtPosition(b.getDocumentLeft(),b.getDocumentTop());if(!a){return null}return this._isSelectable(a.column)?a.column:null},_getRelatedSelectable:function(d,c){if(c=="left"){var f=d-1;var e=0;var a=-1}else{if(c=="right"){var f=d+1;var e=this._getItemCount()-1;var a=1}else{return null}}for(var b=f;b!==e+a;b+=a){if(this._isSelectable(b)){return b}}return null},_scrollItemIntoView:function(a){this._pane.scrollColumnIntoView(a)},_getSelectableLocationX:function(d){var a=this._pane.getColumnConfig();var b=a.getItemPosition(d);var c=b+a.getItemSize(d)-1;return{left:b,right:c}},_getSelectableLocationY:function(a){return{top:0,bottom:this._pane.getRowConfig().getTotalSize()-1}}}});qx.Class.define("qx.ui.virtual.core.Pane",{extend:qx.ui.core.Widget,construct:function(b,d,a,c){this.base(arguments);this.__rowConfig=new qx.ui.virtual.core.Axis(a,b);this.__columnConfig=new qx.ui.virtual.core.Axis(c,d);this.__scrollTop=0;this.__scrollLeft=0;this.__paneHeight=0;this.__paneWidth=0;this.__layerWindow={};this.__jobs={};this.__layerContainer=new qx.ui.container.Composite();this.__layerContainer.setUserBounds(0,0,0,0);this._add(this.__layerContainer);this.__layers=[];this.__rowConfig.addListener("change",this.fullUpdate,this);this.__columnConfig.addListener("change",this.fullUpdate,this);this.addListener("resize",this._onResize,this);this.addListenerOnce("appear",this._onAppear,this);this.addListener("click",this._onClick,this);this.addListener("dblclick",this._onDblclick,this);this.addListener("contextmenu",this._onContextmenu,this)},events:{cellClick:"qx.ui.virtual.core.CellEvent",cellContextmenu:"qx.ui.virtual.core.CellEvent",cellDblclick:"qx.ui.virtual.core.CellEvent",update:"qx.event.type.Event",scrollX:"qx.event.type.Data",scrollY:"qx.event.type.Data"},properties:{width:{refine:true,init:400},height:{refine:true,init:300}},members:{__rowConfig:null,__columnConfig:null,__scrollTop:null,__scrollLeft:null,__paneHeight:null,__paneWidth:null,__layerWindow:null,__jobs:null,__layerContainer:null,__layers:null,__dontFireUpdate:null,__columnSizes:null,__rowSizes:null,getRowConfig:function(){return this.__rowConfig},getColumnConfig:function(){return this.__columnConfig},getChildren:function(){return[this.__layerContainer]},addLayer:function(a){if(qx.core.Environment.get("qx.debug")){this.assertInterface(a,qx.ui.virtual.core.ILayer)}this.__layers.push(a);a.setUserBounds(0,0,0,0);this.__layerContainer.add(a)},getLayers:function(){return this.__layers},getVisibleLayers:function(){var c=[];for(var b=0;b<this.__layers.length;b++){var a=this.__layers[b];if(a.isVisible()){c.push(a)}}return c},getScrollMaxX:function(){var a=this.getBounds();if(a){return Math.max(0,this.__columnConfig.getTotalSize()-a.width)}return 0},getScrollMaxY:function(){var a=this.getBounds();if(a){return Math.max(0,this.__rowConfig.getTotalSize()-a.height)}return 0},setScrollY:function(c){var a=this.getScrollMaxY();if(c<0){c=0}else{if(c>a){c=a}}if(this.__scrollTop!==c){var b=this.__scrollTop;this.__scrollTop=c;this._deferredUpdateScrollPosition();this.fireDataEvent("scrollY",c,b)}},getScrollY:function(){return this.__scrollTop},setScrollX:function(c){var a=this.getScrollMaxX();if(c<0){c=0}else{if(c>a){c=a}}if(c!==this.__scrollLeft){var b=this.__scrollLeft;this.__scrollLeft=c;this._deferredUpdateScrollPosition();this.fireDataEvent("scrollX",c,b)}},getScrollX:function(){return this.__scrollLeft},getScrollSize:function(){return{width:this.__columnConfig.getTotalSize(),height:this.__rowConfig.getTotalSize()}},scrollRowIntoView:function(e){var c=this.getBounds();if(!c){this.addListenerOnce("appear",function(){qx.event.Timer.once(function(){this.scrollRowIntoView(e)},this,0)},this);return}var b=this.__rowConfig.getItemPosition(e);var a=b+this.__rowConfig.getItemSize(e);var d=this.getScrollY();if(b<d){this.setScrollY(b)}else{if(a>d+c.height){this.setScrollY(a-c.height)}}},scrollColumnIntoView:function(b){var d=this.getBounds();if(!d){this.addListenerOnce("appear",function(){qx.event.Timer.once(function(){this.scrollColumnIntoView(b)},this,0)},this);return}var a=this.__columnConfig.getItemPosition(b);var c=a+this.__columnConfig.getItemSize(b);var e=this.getScrollX();if(a<e){this.setScrollX(a)}else{if(c>e+d.width){this.setScrollX(c-d.width)}}},scrollCellIntoView:function(a,c){var b=this.getBounds();if(!b){this.addListenerOnce("appear",function(){qx.event.Timer.once(function(){this.scrollCellIntoView(a,c)},this,0)},this);return}this.scrollColumnIntoView(a);this.scrollRowIntoView(c)},getCellAtPosition:function(e,d){var c,b;var a=this.getContentLocation();if(!a||d<a.top||d>=a.bottom||e<a.left||e>=a.right){return null}c=this.__rowConfig.getItemAtPosition(this.getScrollY()+d-a.top);b=this.__columnConfig.getItemAtPosition(this.getScrollX()+e-a.left);if(!c||!b){return null}return{row:c.index,column:b.index}},prefetchX:function(e,b,i,h){var f=this.getVisibleLayers();if(f.length==0){return}var a=this.getBounds();if(!a){return}var d=this.__scrollLeft+a.width;var g=this.__paneWidth-d;if(this.__scrollLeft-this.__layerWindow.left<Math.min(this.__scrollLeft,e)||this.__layerWindow.right-d<Math.min(g,i)){var c=Math.min(this.__scrollLeft,b);var j=Math.min(g,h);this._setLayerWindow(f,this.__scrollLeft-c,this.__scrollTop,a.width+c+j,a.height,false)}},prefetchY:function(g,e,i,f){var d=this.getVisibleLayers();if(d.length==0){return}var a=this.getBounds();if(!a){return}var c=this.__scrollTop+a.height;var b=this.__paneHeight-c;if(this.__scrollTop-this.__layerWindow.top<Math.min(this.__scrollTop,g)||this.__layerWindow.bottom-c<Math.min(b,i)){var h=Math.min(this.__scrollTop,e);var j=Math.min(b,f);this._setLayerWindow(d,this.__scrollLeft,this.__scrollTop-h,a.width,a.height+h+j,false)}},_onResize:function(){if(this.getContainerElement().getDomElement()){this.__dontFireUpdate=true;this._updateScrollPosition();this.__dontFireUpdate=null;this.fireEvent("update")}},_onAppear:function(){this.fullUpdate()},_onClick:function(a){this.__handleMouseCellEvent(a,"cellClick")},_onContextmenu:function(a){this.__handleMouseCellEvent(a,"cellContextmenu")},_onDblclick:function(a){this.__handleMouseCellEvent(a,"cellDblclick")},__handleMouseCellEvent:function(c,a){var b=this.getCellAtPosition(c.getDocumentLeft(),c.getDocumentTop());if(!b){return}this.fireNonBubblingEvent(a,qx.ui.virtual.core.CellEvent,[this,c,b.row,b.column])},syncWidget:function(){if(this.__jobs._fullUpdate){this._fullUpdate()}else{if(this.__jobs._updateScrollPosition){this._updateScrollPosition()}}this.__jobs={}},_setLayerWindow:function(h,e,m,l,f,d){var k=this.__rowConfig.getItemAtPosition(m);if(k){var a=k.index;var b=this.__rowConfig.getItemSizes(a,f+k.offset);var r=qx.lang.Array.sum(b);var p=m-k.offset;var j=m-k.offset+r}else{var a=0;var b=[];var r=0;var p=0;var j=0}var g=this.__columnConfig.getItemAtPosition(e);if(g){var t=g.index;var n=this.__columnConfig.getItemSizes(t,l+g.offset);var o=qx.lang.Array.sum(n);var c=e-g.offset;var s=e-g.offset+o}else{var t=0;var n=[];var o=0;var c=0;var s=0}this.__layerWindow={top:p,bottom:j,left:c,right:s};this.__layerContainer.setUserBounds(this.__layerWindow.left-this.__scrollLeft,this.__layerWindow.top-this.__scrollTop,o,r);this.__columnSizes=n;this.__rowSizes=b;for(var q=0;q<this.__layers.length;q++){var u=this.__layers[q];u.setUserBounds(0,0,o,r);if(d){u.fullUpdate(a,t,b,n)}else{u.updateLayerWindow(a,t,b,n)}}},__checkPaneResize:function(){if(this.__dontFireUpdate){return}var a=this.getScrollSize();if(this.__paneHeight!==a.height||this.__paneWidth!==a.width){this.__paneHeight=a.height;this.__paneWidth=a.width;this.fireEvent("update")}},fullUpdate:function(){this.__jobs._fullUpdate=1;qx.ui.core.queue.Widget.add(this)},isUpdatePending:function(){return !!this.__jobs._fullUpdate},_fullUpdate:function(){var b=this.getVisibleLayers();if(b.length==0){this.__checkPaneResize();return}if(!this.getContainerElement().getDomElement()){return}var a=this.getBounds();this._setLayerWindow(b,this.__scrollLeft,this.__scrollTop,a.width,a.height,true);this.__checkPaneResize()},_deferredUpdateScrollPosition:function(){this.__jobs._updateScrollPosition=1;qx.ui.core.queue.Widget.add(this)},_updateScrollPosition:function(){var b=this.getVisibleLayers();if(b.length==0){this.__checkPaneResize();return}var a=this.getBounds();if(!a){return}var c={top:this.__scrollTop,bottom:this.__scrollTop+a.height,left:this.__scrollLeft,right:this.__scrollLeft+a.width};if(this.__layerWindow.top<=c.top&&this.__layerWindow.bottom>=c.bottom&&this.__layerWindow.left<=c.left&&this.__layerWindow.right>=c.right){this.__layerContainer.setUserBounds(this.__layerWindow.left-c.left,this.__layerWindow.top-c.top,this.__layerWindow.right-this.__layerWindow.left,this.__layerWindow.bottom-this.__layerWindow.top)}else{this._setLayerWindow(b,this.__scrollLeft,this.__scrollTop,a.width,a.height,false)}this.__checkPaneResize()}},destruct:function(){this._disposeArray("__layers");this._disposeObjects("__rowConfig","__columnConfig","__layerContainer");this.__layerWindow=this.__jobs=this.__columnSizes=this.__rowSizes=null}});qx.Class.define("qx.ui.virtual.core.Axis",{extend:qx.core.Object,construct:function(b,a){this.base(arguments);this.itemCount=a;this.defaultItemSize=b;this.customSizes={}},events:{change:"qx.event.type.Event"},members:{__ranges:null,getDefaultItemSize:function(){return this.defaultItemSize},setDefaultItemSize:function(a){if(this.defaultItemSize!==a){this.defaultItemSize=a;this.__ranges=null;this.fireNonBubblingEvent("change")}},getItemCount:function(){return this.itemCount},setItemCount:function(a){if(this.itemCount!==a){this.itemCount=a;this.__ranges=null;this.fireNonBubblingEvent("change")}},setItemSize:function(a,b){if(qx.core.Environment.get("qx.debug")){this.assertArgumentsCount(arguments,2,2);this.assert(b>0||b===null,"'size' must be 'null' or an integer larger than 0.")}if(this.customSizes[a]==b){return}if(b===null){delete this.customSizes[a]}else{this.customSizes[a]=b}this.__ranges=null;this.fireNonBubblingEvent("change")},getItemSize:function(a){return this.customSizes[a]||this.defaultItemSize},resetItemSizes:function(){this.customSizes={};this.__ranges=null;this.fireNonBubblingEvent("change")},__getRanges:function(){if(this.__ranges){return this.__ranges}var k=this.defaultItemSize;var a=this.itemCount;var g=[];for(var l in this.customSizes){var h=parseInt(l,10);if(h<a){g.push(h)}}if(g.length==0){var c=[{startIndex:0,endIndex:a-1,firstItemSize:k,rangeStart:0,rangeEnd:a*k-1}];this.__ranges=c;return c}g.sort(function(n,i){return n>i?1:-1});var c=[];var f=0;for(var e=0;e<g.length;e++){var h=g[e];if(h>=a){break}var b=this.customSizes[h];var m=h*k+f;f+=b-k;c[e]={startIndex:h,firstItemSize:b,rangeStart:m};if(e>0){c[e-1].rangeEnd=m-1;c[e-1].endIndex=h-1}}if(c[0].rangeStart>0){c.unshift({startIndex:0,endIndex:c[0].startIndex-1,firstItemSize:k,rangeStart:0,rangeEnd:c[0].rangeStart-1})}var d=c[c.length-1];var j=(a-d.startIndex-1)*k;d.rangeEnd=d.rangeStart+d.firstItemSize+j-1;d.endIndex=a-1;this.__ranges=c;return c},__findRangeByPosition:function(a){var d=this.__ranges||this.__getRanges();var f=0;var c=d.length-1;while(true){var b=f+((c-f)>>1);var e=d[b];if(e.rangeEnd<a){f=b+1}else{if(e.rangeStart>a){c=b-1}else{return e}}}},getItemAtPosition:function(a){if(a<0||a>=this.getTotalSize()){return null}var b=this.__findRangeByPosition(a);var d=b.rangeStart;var c=b.startIndex;var e=b.firstItemSize;if(d+e>a){return{index:c,offset:a-d}}else{var f=this.defaultItemSize;return{index:c+1+Math.floor((a-d-e)/f),offset:(a-d-e)%f}}},__findRangeByIndex:function(e){var c=this.__ranges||this.__getRanges();var f=0;var b=c.length-1;while(true){var a=f+((b-f)>>1);var d=c[a];if(d.endIndex<e){f=a+1}else{if(d.startIndex>e){b=a-1}else{return d}}}},getItemPosition:function(b){if(b<0||b>=this.itemCount){return null}var a=this.__findRangeByIndex(b);if(a.startIndex==b){return a.rangeStart}else{return a.rangeStart+a.firstItemSize+(b-a.startIndex-1)*this.defaultItemSize}},getTotalSize:function(){var a=this.__ranges||this.__getRanges();return a[a.length-1].rangeEnd+1},getItemSizes:function(h,g){var c=this.customSizes;var f=this.defaultItemSize;var b=0;var d=[];var a=0;while(b<g){var e=c[h++]||f;b+=e;d[a++]=e;if(h>=this.itemCount){break}}return d}},destruct:function(){this.customSizes=this.__ranges=null}});qx.Interface.define("qx.ui.virtual.core.ILayer",{members:{fullUpdate:function(d,c,a,b){this.assertArgumentsCount(arguments,6,6);this.assertPositiveInteger(d);this.assertPositiveInteger(c);this.assertArray(a);this.assertArray(b)},updateLayerWindow:function(d,c,a,b){this.assertArgumentsCount(arguments,6,6);this.assertPositiveInteger(d);this.assertPositiveInteger(c);this.assertArray(a);this.assertArray(b)},updateLayerData:function(){}}});qx.Class.define("qx.ui.virtual.core.CellEvent",{extend:qx.event.type.Mouse,properties:{row:{check:"Integer",nullable:true},column:{check:"Integer",nullable:true}},members:{init:function(a,c,d,b){c.clone(this);this.setBubbles(false);this.setRow(d);this.setColumn(b)}}});qx.Class.define("qx.type.BaseArray",{extend:Array,construct:function(a){},members:{toArray:null,valueOf:null,pop:null,push:null,reverse:null,shift:null,sort:null,splice:null,unshift:null,concat:null,join:null,slice:null,toString:null,indexOf:null,lastIndexOf:null,forEach:null,filter:null,map:null,some:null,every:null}});(function(){function b(d){if((qx.core.Environment.get("engine.name")=="mshtml")){a.prototype={length:0,$$isArray:true};var e="pop.push.reverse.shift.sort.splice.unshift.join.slice".split(".");for(var g=e.length;g;){a.prototype[e[--g]]=Array.prototype[e[g]]}}var i=Array.prototype.slice;a.prototype.concat=function(){var k=this.slice(0);for(var j=0,l=arguments.length;j<l;j++){var m;if(arguments[j] instanceof a){m=i.call(arguments[j],0)}else{if(arguments[j] instanceof Array){m=arguments[j]}else{m=[arguments[j]]}}k.push.apply(k,m)}return k};a.prototype.toString=function(){return i.call(this,0).toString()};a.prototype.toLocaleString=function(){return i.call(this,0).toLocaleString()};a.prototype.constructor=a;a.prototype.indexOf=qx.lang.Core.arrayIndexOf;a.prototype.lastIndexOf=qx.lang.Core.arrayLastIndexOf;a.prototype.forEach=qx.lang.Core.arrayForEach;a.prototype.some=qx.lang.Core.arraySome;a.prototype.every=qx.lang.Core.arrayEvery;var f=qx.lang.Core.arrayFilter;var h=qx.lang.Core.arrayMap;a.prototype.filter=function(){var j=new this.constructor;j.push.apply(j,f.apply(this,arguments));return j};a.prototype.map=function(){var j=new this.constructor;j.push.apply(j,h.apply(this,arguments));return j};a.prototype.slice=function(){var j=new this.constructor;j.push.apply(j,Array.prototype.slice.apply(this,arguments));return j};a.prototype.splice=function(){var j=new this.constructor;j.push.apply(j,Array.prototype.splice.apply(this,arguments));return j};a.prototype.toArray=function(){return Array.prototype.slice.call(this,0)};a.prototype.valueOf=function(){return this.length};return a}function a(d){if(arguments.length===1&&typeof d==="number"){this.length=-1<d&&d===d>>0.5?d:this.push(d)}else{if(arguments.length){this.push.apply(this,arguments)}}}function c(){}c.prototype=[];a.prototype=new c;a.prototype.length=0;qx.type.BaseArray=b(a)})();qx.Interface.define("qx.ui.virtual.cell.ICell",{members:{getCellProperties:function(b,a){}}});qx.Class.define("qx.ui.virtual.cell.Abstract",{type:"abstract",extend:qx.core.Object,implement:qx.ui.virtual.cell.ICell,construct:function(){this.base(arguments);qx.ui.virtual.cell.CellStylesheet.getInstance()},members:{getCssClasses:function(b,a){return"qx-cell"},getAttributes:function(b,a){return""},getStyles:function(b,a){return""},getInsets:function(b,a){return[0,0]},getContent:function(b,a){return b},getCellProperties:function(b,a){return{classes:this.getCssClasses(b,a),style:this.getStyles(b,a),attributes:this.getAttributes(b,a),content:this.getContent(b,a),insets:this.getInsets(b,a)}}}});qx.Class.define("qx.ui.virtual.cell.Cell",{extend:qx.ui.virtual.cell.Abstract,construct:function(){this.base(arguments);this.__stylesheet=qx.ui.virtual.cell.CellStylesheet.getInstance();this.__userStyles={};this.__themeStyles={};this.__userPaddings={};this.__themePaddings={};this.__states={};this.__themeValues={};this.initAppearance();this.__initializeThemableProperties()},properties:{appearance:{check:"String",init:"cell",apply:"_applyAppearance"},backgroundColor:{nullable:true,check:"Color",apply:"_applyBackgroundColor",themeable:true},textColor:{nullable:true,check:"Color",apply:"_applyTextColor",themeable:true},textAlign:{check:["left","center","right","justify"],nullable:true,themeable:true,apply:"_applyTextAlign"},font:{nullable:true,apply:"_applyFont",check:"Font",themeable:true},paddingTop:{check:"Integer",init:0,apply:"_applyPadding",themeable:true},paddingRight:{check:"Integer",nullable:true,apply:"_applyPadding",themeable:true},paddingBottom:{check:"Integer",nullable:true,apply:"_applyPadding",themeable:true},paddingLeft:{check:"Integer",nullable:true,apply:"_applyPadding",themeable:true},padding:{group:["paddingTop","paddingRight","paddingBottom","paddingLeft"],mode:"shorthand",themeable:true}},members:{__themableProperties:null,__statesKey:null,__states:null,__themeValues:null,__themeStyles:null,__userStyles:null,__userPaddings:null,__themePaddings:null,__isThemed:false,__stylesheet:null,__initializeThemableProperties:function(){var a=qx.util.PropertyUtil;var d=qx.lang.Object.fromArray(this._getCssProperties());this.__themableProperties=[];var b=this.constructor;while(b){var c=a.getProperties(b);for(var e in c){if(!d[e]){this.__themableProperties.push(e)}}b=b.superclass}},_getCssProperties:function(){return["backgroundColor","textColor","font","textAlign","paddingTop","paddingRight","paddingBottom","paddingLeft"]},_applyAppearance:function(b,a){if(a){this.__themeStyles={}}},_getValue:function(a){if(this.__isThemed){return qx.util.PropertyUtil.getThemeValue(this,a)}else{return qx.util.PropertyUtil.getUserValue(this,a)}},_storeStyle:function(b,c){var a;if(this.__isThemed){a=this.__themeStyles}else{a=this.__userStyles}if(c===null){delete a[b]}else{a[b]=c}},_applyBackgroundColor:function(c,a,b){var c=this._getValue(b);if(!c){this._storeStyle(b,null)}else{this._storeStyle(b,"background-color:"+qx.theme.manager.Color.getInstance().resolve(c))}},_applyTextColor:function(c,a,b){var c=this._getValue(b);if(!c){this._storeStyle(b,null)}else{this._storeStyle(b,"color:"+qx.theme.manager.Color.getInstance().resolve(c))}},_applyTextAlign:function(c,a,b){var c=this._getValue(b);if(!c){this._storeStyle(b,null)}else{this._storeStyle(b,"text-align:"+c)}},_applyFont:function(d,a,c){var d=this._getValue(c);if(!d){this._storeStyle(c,null)}else{var b=qx.theme.manager.Font.getInstance().resolve(d);this._storeStyle(c,qx.bom.element.Style.compile(b.getStyles()))}},_applyPadding:function(d,a,b){var d=this._getValue(b);if(this.__isThemed){var e=this.__themePaddings}else{e=this.__userPaddings}if(d===null){delete e[b]}else{e[b]=d}if(d===null){this._storeStyle(b,null)}else{var c=qx.lang.String.hyphenate(b);this._storeStyle(b,c+":"+d+"px")}},getCellProperties:function(b,a){this.__setStates(a);return{classes:this.getCssClasses(b,a),style:this.getStyles(b,a),attributes:this.getAttributes(b,a),content:this.getContent(b,a),insets:this.getInsets(b,a)}},getAttributes:function(b,a){return""},getContent:function(b,a){return b},getCssClasses:function(c,b){var a=this.__stylesheet.getCssClass(this.__statesKey)||"";return"qx-cell "+a},__setStates:function(c){if(!c){c={}}var b=this.getAppearance();var d=b+"-"+qx.lang.Object.getKeys(c).sort().join(" ");if(this.__statesKey==d){return}this.__statesKey=d;var a=this.__states[this.__statesKey];if(!a){this.__clearThemedPropertyValues();this.__updateThemeableProperties(c);this.__computeCssClassForStates(c);this.__cacheThemedValues();this.__states[this.__statesKey]=1}this.__applyThemeValues()},__clearThemedPropertyValues:function(){var a=qx.util.PropertyUtil;var c=this._getCssProperties();for(var b=0;b<c.length;b++){a.deleteThemeValue(this,c[b])}},__updateThemeableProperties:function(c){this.__themeStyles={};this.__isThemed=true;var b=this.getAppearance();var a=qx.util.PropertyUtil;var d=qx.theme.manager.Appearance.getInstance().styleFrom(b,c);for(var e in d){if(d[e]!==undefined){a.setThemed(this,e,d[e])}}this.__isThemed=false},__computeCssClassForStates:function(){var a=qx.lang.Object.getValues(this.__themeStyles).join(";");this.__stylesheet.computeClassForStyles(this.__statesKey,a)},__cacheThemedValues:function(){var d=this.__themableProperties;var a=qx.util.PropertyUtil;var f={};for(var c=0;c<d.length;c++){var b=d[c];var e=a.getThemeValue(this,b);if(e!==undefined){f[b]=e}}this.__themeValues[this.__statesKey]=f},__applyThemeValues:function(){var a=qx.util.PropertyUtil;var c=this.__themeValues[this.__statesKey]||{};for(var b in c){a.setThemed(this,b,c[b])}},getStyles:function(b,a){return qx.lang.Object.getValues(this.__userStyles).join(";")},getInsets:function(e,c){var b=this.__userPaddings;var h=this.__themePaddings;var g=(b.paddingTop!==undefined?b.paddingTop:h.paddingTop)||0;var d=(b.paddingRight!==undefined?b.paddingRight:h.paddingRight)||0;var a=(b.paddingBottom!==undefined?b.paddingBottom:h.paddingBottom)||0;var f=(b.paddingLeft!==undefined?b.paddingLeft:h.paddingLeft)||0;return[f+d,g+a]}},destruct:function(){this.__stylesheet=this.__userStyles=this.__themeStyles=this.__userPaddings=this.__themePaddings=this.__states=this.__themeValues=this.__themableProperties=null}});qx.Class.define("qx.ui.virtual.cell.Date",{extend:qx.ui.virtual.cell.Cell,construct:function(a){this.base(arguments);if(a){this.setDateFormat(a)}else{this.initDateFormat(qx.util.format.DateFormat.getDateTimeInstance())}},properties:{appearance:{refine:true,init:"cell-date"},dateFormat:{check:"qx.util.format.DateFormat",deferredInit:true}},members:{getContent:function(b,a){return b?this.getDateFormat().format(b):""}}});qx.Class.define("qx.ui.virtual.cell.CellStylesheet",{extend:qx.core.Object,type:"singleton",construct:function(){this.base(arguments);var a=".qx-cell {"+qx.bom.element.Style.compile({position:"absolute",overflow:"hidden",cursor:"default",textOverflow:"ellipsis",userSelect:"none"})+"} ";if(!(qx.core.Environment.get("engine.name")=="mshtml")){a+=".qx-cell {"+qx.bom.element.BoxSizing.compile("content-box")+"}"}this.__stylesheet=qx.bom.Stylesheet.createElement(a);this.__classes={};this.__styles={}},members:{__stylesheet:null,__classes:null,__styles:null,getStylesheet:function(){return this.__stylesheet},getCssClass:function(a){return this.__classes[a]||null},computeClassForStyles:function(c,b){var a=this.__styles[b];if(!a){var a=this.__getNextClassname();qx.bom.Stylesheet.addRule(this.__stylesheet,"."+a,b);this.__styles[b]=a}this.__classes[c]=a;return a},__getNextClassname:function(){return"qx-cell-"+this.toHashCode()+"-"+(this.__classCounter++)},__classCounter:0},destruct:function(){this.__stylesheet=this.__classes=this.__styles=null}});qx.Class.define("qx.util.PropertyUtil",{statics:{getProperties:function(a){return a.$$properties},getAllProperties:function(a){var b={};var e=a;while(e!=qx.core.Object){var d=this.getProperties(e);for(var c in d){b[c]=d[c]}e=e.superclass}return b},getUserValue:function(b,a){return b["$$user_"+a]},setUserValue:function(b,a,c){b["$$user_"+a]=c},deleteUserValue:function(b,a){delete (b["$$user_"+a])},getInitValue:function(b,a){return b["$$init_"+a]},setInitValue:function(b,a,c){b["$$init_"+a]=c},deleteInitValue:function(b,a){delete (b["$$init_"+a])},getThemeValue:function(b,a){return b["$$theme_"+a]},setThemeValue:function(b,a,c){b["$$theme_"+a]=c},deleteThemeValue:function(b,a){delete (b["$$theme_"+a])},setThemed:function(b,a,d){var c=qx.core.Property.$$method.setThemed;b[c[a]](d)},resetThemed:function(b,a){var c=qx.core.Property.$$method.resetThemed;b[c[a]]()}}});qx.Interface.define("qx.ui.form.IColorForm",{events:{changeValue:"qx.event.type.Data"},members:{setValue:function(a){return arguments.length==1},resetValue:function(){},getValue:function(){}}});qx.Class.define("qx.ui.control.ColorSelector",{extend:qx.ui.core.Widget,implement:[qx.ui.form.IColorForm],construct:function(){this.base(arguments);this._setLayout(new qx.ui.layout.VBox());this._createChildControl("control-bar");this.addListener("appear",this._onAppear,this)},events:{dialogok:"qx.event.type.Event",dialogcancel:"qx.event.type.Event",changeValue:"qx.event.type.Data"},properties:{appearance:{refine:true,init:"colorselector"},red:{check:"Integer",init:255,apply:"_applyRed"},green:{check:"Integer",init:255,apply:"_applyGreen"},blue:{check:"Integer",init:255,apply:"_applyBlue"},hue:{check:"Number",init:0,apply:"_applyHue"},saturation:{check:"Number",init:0,apply:"_applySaturation"},brightness:{check:"Number",init:100,apply:"_applyBrightness"}},members:{__updateContext:null,__presetTable:["maroon","red","orange","yellow","olive","purple","fuchsia","lime","green","navy","blue","aqua","teal","black","#333","#666","#999","#BBB","#EEE","white"],__capture:"",__brightnessSubtract:0,__hueSaturationSubtractTop:0,__hueSaturationSubtractLeft:0,__nullValue:true,__preventChangeValueEvent:false,_createChildControlImpl:function(b,h){var k;switch(b){case"control-bar":k=new qx.ui.container.Composite(new qx.ui.layout.HBox(10));k.add(this.getChildControl("control-pane"));k.add(this.getChildControl("visual-pane"));this._add(k);break;case"visual-pane":k=new qx.ui.groupbox.GroupBox(this.tr("Visual"));k.setLayout(new qx.ui.layout.HBox(10));k.add(this.getChildControl("hue-saturation-pane"));k.add(this.getChildControl("brightness-pane"));break;case"control-pane":k=new qx.ui.container.Composite(new qx.ui.layout.VBox(12));k.add(this.getChildControl("preset-field-set"));k.add(this.getChildControl("input-field-set"));k.add(this.getChildControl("preview-field-set"),{flex:1});break;case"hue-saturation-pane":k=new qx.ui.container.Composite(new qx.ui.layout.Canvas());k.setAllowGrowY(false);k.addListener("mousewheel",this._onHueSaturationPaneMouseWheel,this);k.add(this.getChildControl("hue-saturation-field"));k.add(this.getChildControl("hue-saturation-handle"),{left:0,top:256});break;case"hue-saturation-field":k=new qx.ui.basic.Image("decoration/colorselector/huesaturation-field.jpg");k.addListener("mousedown",this._onHueSaturationFieldMouseDown,this);break;case"hue-saturation-handle":k=new qx.ui.basic.Image("decoration/colorselector/huesaturation-handle.gif");k.addListener("mousedown",this._onHueSaturationFieldMouseDown,this);k.addListener("mouseup",this._onHueSaturationHandleMouseUp,this);k.addListener("mousemove",this._onHueSaturationHandleMouseMove,this);break;case"brightness-pane":k=new qx.ui.container.Composite(new qx.ui.layout.Canvas());k.setAllowGrowY(false);k.addListener("mousewheel",this._onBrightnessPaneMouseWheel,this);k.add(this.getChildControl("brightness-field"));k.add(this.getChildControl("brightness-handle"));break;case"brightness-field":k=new qx.ui.basic.Image("decoration/colorselector/brightness-field.png");k.addListener("mousedown",this._onBrightnessFieldMouseDown,this);break;case"brightness-handle":k=new qx.ui.basic.Image("decoration/colorselector/brightness-handle.gif");k.addListener("mousedown",this._onBrightnessHandleMouseDown,this);k.addListener("mouseup",this._onBrightnessHandleMouseUp,this);k.addListener("mousemove",this._onBrightnessHandleMouseMove,this);break;case"preset-field-set":k=new qx.ui.groupbox.GroupBox(this.tr("Presets"));k.setLayout(new qx.ui.layout.Grow());k.add(this.getChildControl("preset-grid"));break;case"colorbucket":k=new qx.ui.core.Widget();k.addListener("mousedown",this._onColorFieldClick,this);break;case"preset-grid":n=new qx.ui.layout.Grid(3,3);k=new qx.ui.container.Composite(n);var a;var o;for(var l=0;l<2;l++){for(var e=0;e<10;e++){o=l*10+e;a=this.getChildControl("colorbucket#"+o);a.setBackgroundColor(this.__presetTable[o]);k.add(a,{column:e,row:l})}}break;case"input-field-set":k=new qx.ui.groupbox.GroupBox(this.tr("Details"));var n=new qx.ui.layout.VBox();n.setSpacing(10);k.setLayout(n);k.add(this.getChildControl("hex-field-composite"));k.add(this.getChildControl("rgb-spinner-composite"));k.add(this.getChildControl("hsb-spinner-composite"));break;case"preview-field-set":k=new qx.ui.groupbox.GroupBox(this.tr("Preview (Old/New)"));var n=new qx.ui.layout.HBox(10);k.setLayout(n);k.add(this.getChildControl("preview-content-old"),{flex:1});k.add(this.getChildControl("preview-content-new"),{flex:1});break;case"hex-field-composite":var m=new qx.ui.layout.HBox(4);m.setAlignY("middle");k=new qx.ui.container.Composite(m);var g=new qx.ui.basic.Label(this.tr("Hex"));k.add(g);var f=new qx.ui.basic.Label("#");k.add(f);k.add(this.getChildControl("hex-field"));break;case"hex-field":k=new qx.ui.form.TextField("FFFFFF");k.setMaxLength(6);k.setFilter(/[0-9A-Fa-f]/);k.setWidth(55);k.addListener("changeValue",this._onHexFieldChange,this);break;case"rgb-spinner-composite":var m=new qx.ui.layout.HBox(4);m.setAlignY("middle");k=new qx.ui.container.Composite(m);var d=new qx.ui.basic.Label(this.tr("RGB"));d.setWidth(25);k.add(d);k.add(this.getChildControl("rgb-spinner-red"));k.add(this.getChildControl("rgb-spinner-green"));k.add(this.getChildControl("rgb-spinner-blue"));break;case"rgb-spinner-red":k=new qx.ui.form.Spinner(0,255,255);k.setWidth(50);k.addListener("changeValue",this._setRedFromSpinner,this);break;case"rgb-spinner-green":k=new qx.ui.form.Spinner(0,255,255);k.setWidth(50);k.addListener("changeValue",this._setGreenFromSpinner,this);break;case"rgb-spinner-blue":k=new qx.ui.form.Spinner(0,255,255);k.setWidth(50);k.addListener("changeValue",this._setBlueFromSpinner,this);break;case"hsb-spinner-composite":var m=new qx.ui.layout.HBox(4);m.setAlignY("middle");k=new qx.ui.container.Composite(m);var c=new qx.ui.basic.Label(this.tr("HSB"));c.setWidth(25);k.add(c);k.add(this.getChildControl("hsb-spinner-hue"));k.add(this.getChildControl("hsb-spinner-saturation"));k.add(this.getChildControl("hsb-spinner-brightness"));break;case"hsb-spinner-hue":k=new qx.ui.form.Spinner(0,0,360);k.setWidth(50);k.addListener("changeValue",this._setHueFromSpinner,this);break;case"hsb-spinner-saturation":k=new qx.ui.form.Spinner(0,0,100);k.setWidth(50);k.addListener("changeValue",this._setSaturationFromSpinner,this);break;case"hsb-spinner-brightness":k=new qx.ui.form.Spinner(0,100,100);k.setWidth(50);k.addListener("changeValue",this._setBrightnessFromSpinner,this);break;case"preview-content-old":k=new qx.ui.core.Widget();break;case"preview-content-new":k=new qx.ui.core.Widget();break}return k||this.base(arguments,b)},setValue:function(b){var a;if(b==null){this.__nullValue=true;a=[255,255,255]}else{a=qx.util.ColorUtil.stringToRgb(b);this.__nullValue=false}this.__preventChangeValueEvent=true;this.setRed(a[0]);this.setGreen(a[1]);this.__preventChangeValueEvent=false;this.setBlue(a[2])},getValue:function(){return this.__nullValue?null:"#"+qx.util.ColorUtil.rgbToHexString([this.getRed(),this.getGreen(),this.getBlue()])},resetValue:function(){this.__nullValue=true;this.__preventChangeValueEvent=true;this.setRed(255);this.setGreen(255);this.__preventChangeValueEvent=false;this.setBlue(255)},__fireChangeValueEvent:function(){if(!this.__preventChangeValueEvent){this.__nullValue=false;this.fireDataEvent("changeValue",this.getValue())}},_applyRed:function(b,a){if(this.__updateContext===null){this.__updateContext="redModifier"}if(this.__updateContext!=="rgbSpinner"){this.getChildControl("rgb-spinner-red").setValue(b)}if(this.__updateContext!=="hexField"){this._setHexFromRgb()}switch(this.__updateContext){case"rgbSpinner":case"hexField":case"redModifier":this._setHueFromRgb()}this._setPreviewFromRgb();this.__fireChangeValueEvent();if(this.__updateContext==="redModifier"){this.__updateContext=null}},_applyGreen:function(b,a){if(this.__updateContext===null){this.__updateContext="greenModifier"}if(this.__updateContext!=="rgbSpinner"){this.getChildControl("rgb-spinner-green").setValue(b)}if(this.__updateContext!=="hexField"){this._setHexFromRgb()}switch(this.__updateContext){case"rgbSpinner":case"hexField":case"greenModifier":this._setHueFromRgb()}this._setPreviewFromRgb();this.__fireChangeValueEvent();if(this.__updateContext==="greenModifier"){this.__updateContext=null}},_applyBlue:function(b,a){if(this.__updateContext===null){this.__updateContext="blueModifier"}if(this.__updateContext!=="rgbSpinner"){this.getChildControl("rgb-spinner-blue").setValue(b)}if(this.__updateContext!=="hexField"){this._setHexFromRgb()}switch(this.__updateContext){case"rgbSpinner":case"hexField":case"blueModifier":this._setHueFromRgb()}this._setPreviewFromRgb();this.__fireChangeValueEvent();if(this.__updateContext==="blueModifier"){this.__updateContext=null}},_applyHue:function(b,a){if(this.__updateContext===null){this.__updateContext="hueModifier"}if(this.__updateContext!=="hsbSpinner"){this.getChildControl("hsb-spinner-hue").setValue(b)}if(this.__updateContext!=="hueSaturationField"){if(this.getChildControl("hue-saturation-handle").getBounds()){this.getChildControl("hue-saturation-handle").setDomLeft(Math.round(b/1.40625)+this.getChildControl("hue-saturation-pane").getPaddingLeft())}else{this.getChildControl("hue-saturation-handle").setLayoutProperties({left:Math.round(b/1.40625)})}}switch(this.__updateContext){case"hsbSpinner":case"hueSaturationField":case"hueModifier":this._setRgbFromHue()}this._setBrightnessGradiant();if(this.__updateContext==="hueModifier"){this.__updateContext=null}},_applySaturation:function(b,a){if(this.__updateContext===null){this.__updateContext="saturationModifier"}if(this.__updateContext!=="hsbSpinner"){this.getChildControl("hsb-spinner-saturation").setValue(b)}if(this.__updateContext!=="hueSaturationField"){this._setBrightnessGradiant();if(this.getChildControl("hue-saturation-handle").getBounds()){this.getChildControl("hue-saturation-handle").setDomTop(256-Math.round(b*2.56)+this.getChildControl("hue-saturation-pane").getPaddingTop())}else{this.getChildControl("hue-saturation-handle").setLayoutProperties({top:256-Math.round(b*2.56)})}}switch(this.__updateContext){case"hsbSpinner":case"hueSaturationField":case"saturationModifier":this._setRgbFromHue()}if(this.__updateContext==="saturationModifier"){this.__updateContext=null}},_applyBrightness:function(b,a){if(this.__updateContext===null){this.__updateContext="brightnessModifier"}if(this.__updateContext!=="hsbSpinner"){this.getChildControl("hsb-spinner-brightness").setValue(b)}if(this.__updateContext!=="brightnessField"){var c=256-Math.round(b*2.56);if(this.getChildControl("brightness-handle").getBounds()){this.getChildControl("brightness-handle").setDomTop(c+this.getChildControl("brightness-pane").getPaddingTop())}else{this.getChildControl("brightness-handle").setLayoutProperties({top:c})}}switch(this.__updateContext){case"hsbSpinner":case"brightnessField":case"brightnessModifier":this._setRgbFromHue()}if(this.__updateContext==="brightnessModifier"){this.__updateContext=null}},_onBrightnessHandleMouseDown:function(d){this.getChildControl("brightness-handle").capture();this.__capture="brightness-handle";var a=this.getChildControl("brightness-field").getContainerLocation();var c=this.getChildControl("brightness-handle").getContainerLocation();var b=this.getChildControl("brightness-field").getBounds();this.__brightnessSubtract=a.top+(d.getDocumentTop()-c.top)-b.top;d.stopPropagation()},_onBrightnessHandleMouseUp:function(a){this.getChildControl("brightness-handle").releaseCapture();this.__capture=null},_onBrightnessHandleMouseMove:function(a){if(this.__capture==="brightness-handle"){this._setBrightnessOnFieldEvent(a);a.stopPropagation()}},_onBrightnessFieldMouseDown:function(c){var a=this.getChildControl("brightness-field").getContainerLocation();var b=this.getChildControl("brightness-handle").getBounds();this.__brightnessSubtract=a.top+(b.height/2);this._setBrightnessOnFieldEvent(c);this.getChildControl("brightness-handle").capture();this.__capture="brightness-handle"},_onBrightnessPaneMouseWheel:function(a){this.setBrightness(qx.lang.Number.limit(this.getBrightness()+a.getWheelDelta(),0,100));a.stop()},_setBrightnessOnFieldEvent:function(b){var a=qx.lang.Number.limit(b.getDocumentTop()-this.__brightnessSubtract,0,256);this.__updateContext="brightnessField";if(this.getChildControl("brightness-handle").getBounds()){this.getChildControl("brightness-handle").setDomTop(a)}else{this.getChildControl("brightness-handle").setLayoutProperties({top:a})}this.setBrightness(100-Math.round(a/2.56));this.__updateContext=null},_onHueSaturationHandleMouseUp:function(a){if(this.__capture){a.stopPropagation();this.getChildControl("hue-saturation-handle").releaseCapture();this.__capture=null}},_onHueSaturationHandleMouseMove:function(a){if(this.__capture==="hue-saturation-handle"){this._setHueSaturationOnFieldEvent(a);a.stopPropagation()}},_onHueSaturationFieldMouseDown:function(c){var a=this.getChildControl("hue-saturation-field").getContainerLocation();var d=this.getChildControl("hue-saturation-handle").getBounds();var b=this.getChildControl("hue-saturation-field").getBounds();this.__hueSaturationSubtractTop=a.top+(d.height/2)-b.top;this.__hueSaturationSubtractLeft=a.left+(d.width/2)-b.left;this._setHueSaturationOnFieldEvent(c);this.getChildControl("hue-saturation-handle").capture();this.__capture="hue-saturation-handle"},_onHueSaturationPaneMouseWheel:function(a){this.setSaturation(qx.lang.Number.limit(this.getSaturation()+a.getWheelDelta(),0,100));a.stop()},_setHueSaturationOnFieldEvent:function(b){var a=qx.lang.Number.limit(b.getDocumentTop()-this.__hueSaturationSubtractTop,0,256);var c=qx.lang.Number.limit(b.getDocumentLeft()-this.__hueSaturationSubtractLeft,0,256);this.getChildControl("hue-saturation-handle").setDomPosition(c,a);this.__updateContext="hueSaturationField";this.setSaturation(100-Math.round(a/2.56));this.setHue(Math.round(c*1.40625));this.__updateContext=null},_setRedFromSpinner:function(){if(this.__updateContext!==null){return}this.__updateContext="rgbSpinner";this.setRed(this.getChildControl("rgb-spinner-red").getValue());this.__updateContext=null},_setGreenFromSpinner:function(){if(this.__updateContext!==null){return}this.__updateContext="rgbSpinner";this.setGreen(this.getChildControl("rgb-spinner-green").getValue());this.__updateContext=null},_setBlueFromSpinner:function(){if(this.__updateContext!==null){return}this.__updateContext="rgbSpinner";this.setBlue(this.getChildControl("rgb-spinner-blue").getValue());this.__updateContext=null},_setHueFromSpinner:function(){if(this.__updateContext!==null){return}this.__updateContext="hsbSpinner";this.setHue(this.getChildControl("hsb-spinner-hue").getValue());this.__updateContext=null},_setSaturationFromSpinner:function(){if(this.__updateContext!==null){return}this.__updateContext="hsbSpinner";this.setSaturation(this.getChildControl("hsb-spinner-saturation").getValue());this.__updateContext=null},_setBrightnessFromSpinner:function(){if(this.__updateContext!==null){return}this.__updateContext="hsbSpinner";this.setBrightness(this.getChildControl("hsb-spinner-brightness").getValue());this.__updateContext=null},_onHexFieldChange:function(c){if(this.__updateContext!==null){return}try{var d=this.getChildControl("hex-field");var a=qx.util.ColorUtil.hexStringToRgb("#"+d.getValue())}catch(b){return}this.__updateContext="hexField";this.setRed(a[0]);this.setGreen(a[1]);this.setBlue(a[2]);this.__updateContext=null},_setHexFromRgb:function(){var a=qx.util.ColorUtil.rgbToHexString([this.getRed(),this.getGreen(),this.getBlue()]);this.getChildControl("hex-field").setValue(a)},_onColorFieldClick:function(c){var a=c.getTarget().getBackgroundColor();if(!a){return this.error("Missing backgroundColor value for field: "+c.getTarget())}var b=qx.util.ColorUtil.stringToRgb(a);this.setRed(b[0]);this.setGreen(b[1]);this.setBlue(b[2])},_setHueFromRgb:function(){switch(this.__updateContext){case"hsbSpinner":case"hueSaturationField":case"brightnessField":break;default:var a=qx.util.ColorUtil.rgbToHsb([this.getRed(),this.getGreen(),this.getBlue()]);this.setHue(a[0]);this.setSaturation(a[1]);this.setBrightness(a[2])}},_setRgbFromHue:function(){switch(this.__updateContext){case"rgbSpinner":case"hexField":break;default:var a=qx.util.ColorUtil.hsbToRgb([this.getHue(),this.getSaturation(),this.getBrightness()]);this.setRed(a[0]);this.setGreen(a[1]);this.setBlue(a[2])}},_setPreviewFromRgb:function(){var a=qx.util.ColorUtil.rgbToRgbString([this.getRed(),this.getGreen(),this.getBlue()]);this.getChildControl("preview-content-new").setBackgroundColor(a)},setPreviousColor:function(d,c,a){var b=qx.util.ColorUtil.rgbToRgbString([d,c,a]);this.getChildControl("preview-content-old").setBackgroundColor(b);this.setRed(d);this.setGreen(c);this.setBlue(a)},_setBrightnessGradiant:function(){var c=qx.util.ColorUtil;var a=c.hsbToRgb([this.getHue(),this.getSaturation(),255]);var b=c.rgbToRgbString(a);this.getChildControl("brightness-field").setBackgroundColor(b)},_onAppear:function(b){var a=qx.util.ColorUtil.rgbToRgbString([this.getRed(),this.getGreen(),this.getBlue()]);this.getChildControl("preview-content-old").setBackgroundColor(a);this.getChildControl("preview-content-new").setBackgroundColor(a)}}});qx.Class.define("qx.ui.groupbox.GroupBox",{extend:qx.ui.core.Widget,include:[qx.ui.core.MRemoteChildrenHandling,qx.ui.core.MRemoteLayoutHandling,qx.ui.core.MContentPadding,qx.ui.form.MForm],implement:[qx.ui.form.IForm],construct:function(b,a){this.base(arguments);this._setLayout(new qx.ui.layout.Canvas);this._createChildControl("frame");this._createChildControl("legend");if(b!=null){this.setLegend(b)}if(a!=null){this.setIcon(a)}},properties:{appearance:{refine:true,init:"groupbox"},legendPosition:{check:["top","middle"],init:"middle",apply:"_applyLegendPosition",themeable:true}},members:{_forwardStates:{invalid:true},_createChildControlImpl:function(c,b){var a;switch(c){case"frame":a=new qx.ui.container.Composite();this._add(a,{left:0,top:6,right:0,bottom:0});break;case"legend":a=new qx.ui.basic.Atom();a.addListener("resize",this._repositionFrame,this);this._add(a,{left:0,right:0});break}return a||this.base(arguments,c)},_getContentPaddingTarget:function(){return this.getChildControl("frame")},_applyLegendPosition:function(a){if(this.getChildControl("legend").getBounds()){this._repositionFrame()}},_repositionFrame:function(){var b=this.getChildControl("legend");var c=this.getChildControl("frame");var a=b.getBounds().height;if(this.getLegendPosition()=="middle"){c.setLayoutProperties({top:Math.round(a/2)})}else{if(this.getLegendPosition()=="top"){c.setLayoutProperties({top:a})}}},getChildrenContainer:function(){return this.getChildControl("frame")},setLegend:function(a){var b=this.getChildControl("legend");if(a!==null){b.setLabel(a);b.show()}else{b.exclude()}},getLegend:function(){return this.getChildControl("legend").getLabel()},setIcon:function(a){this.getChildControl("legend").setIcon(a)},getIcon:function(){this.getChildControl("legend").getIcon()}}});qx.Class.define("qx.ui.form.Spinner",{extend:qx.ui.core.Widget,implement:[qx.ui.form.INumberForm,qx.ui.form.IRange,qx.ui.form.IForm],include:[qx.ui.core.MContentPadding,qx.ui.form.MForm],construct:function(b,d,a){this.base(arguments);var c=new qx.ui.layout.Grid();c.setColumnFlex(0,1);c.setRowFlex(0,1);c.setRowFlex(1,1);this._setLayout(c);this.addListener("keydown",this._onKeyDown,this);this.addListener("keyup",this._onKeyUp,this);this.addListener("mousewheel",this._onMouseWheel,this);if(qx.core.Environment.get("qx.dynlocale")){qx.locale.Manager.getInstance().addListener("changeLocale",this._onChangeLocale,this)}this._createChildControl("textfield");this._createChildControl("upbutton");this._createChildControl("downbutton");if(b!=null){this.setMinimum(b)}if(a!=null){this.setMaximum(a)}if(d!==undefined){this.setValue(d)}else{this.initValue()}},properties:{appearance:{refine:true,init:"spinner"},focusable:{refine:true,init:true},singleStep:{check:"Number",init:1},pageStep:{check:"Number",init:10},minimum:{check:"Number",apply:"_applyMinimum",init:0,event:"changeMinimum"},value:{check:"this._checkValue(value)",nullable:true,apply:"_applyValue",init:0,event:"changeValue"},maximum:{check:"Number",apply:"_applyMaximum",init:100,event:"changeMaximum"},wrap:{check:"Boolean",init:false,apply:"_applyWrap"},editable:{check:"Boolean",init:true,apply:"_applyEditable"},numberFormat:{check:"qx.util.format.NumberFormat",apply:"_applyNumberFormat",nullable:true},allowShrinkY:{refine:true,init:false}},members:{__lastValidValue:null,__pageUpMode:false,__pageDownMode:false,_createChildControlImpl:function(c,b){var a;switch(c){case"textfield":a=new qx.ui.form.TextField();a.setFilter(this._getFilterRegExp());a.addState("inner");a.setWidth(40);a.setFocusable(false);a.addListener("changeValue",this._onTextChange,this);this._add(a,{column:0,row:0,rowSpan:2});break;case"upbutton":a=new qx.ui.form.RepeatButton();a.addState("inner");a.setFocusable(false);a.addListener("execute",this._countUp,this);this._add(a,{column:1,row:0});break;case"downbutton":a=new qx.ui.form.RepeatButton();a.addState("inner");a.setFocusable(false);a.addListener("execute",this._countDown,this);this._add(a,{column:1,row:1});break}return a||this.base(arguments,c)},_getFilterRegExp:function(){var b=qx.locale.Number.getDecimalSeparator(qx.locale.Manager.getInstance().getLocale());var a=qx.locale.Number.getGroupSeparator(qx.locale.Manager.getInstance().getLocale());var d="";var e="";if(this.getNumberFormat()!==null){d=this.getNumberFormat().getPrefix()||"";e=this.getNumberFormat().getPostfix()||""}var c=new RegExp("[0-9"+qx.lang.String.escapeRegexpChars(b)+qx.lang.String.escapeRegexpChars(a)+qx.lang.String.escapeRegexpChars(d)+qx.lang.String.escapeRegexpChars(e)+"-]");return c},_forwardStates:{focused:true,invalid:true},tabFocus:function(){var a=this.getChildControl("textfield");a.getFocusElement().focus();a.selectAllText()},_applyMinimum:function(b,a){if(this.getMaximum()<b){this.setMaximum(b)}if(this.getValue()<b){this.setValue(b)}else{this._updateButtons()}},_applyMaximum:function(b,a){if(this.getMinimum()>b){this.setMinimum(b)}if(this.getValue()>b){this.setValue(b)}else{this._updateButtons()}},_applyEnabled:function(b,a){this.base(arguments,b,a);this._updateButtons()},_checkValue:function(a){return typeof a==="number"&&a>=this.getMinimum()&&a<=this.getMaximum()},_applyValue:function(c,b){var a=this.getChildControl("textfield");this._updateButtons();this.__lastValidValue=c;if(c!==null){if(this.getNumberFormat()){a.setValue(this.getNumberFormat().format(c))}else{a.setValue(c+"")}}else{a.setValue("")}},_applyEditable:function(c,b){var a=this.getChildControl("textfield");if(a){a.setReadOnly(!c)}},_applyWrap:function(b,a){this._updateButtons()},_applyNumberFormat:function(c,a){var b=this.getChildControl("textfield");b.setFilter(this._getFilterRegExp());this.getNumberFormat().addListener("changeNumberFormat",this._onChangeNumberFormat,this);this._applyValue(this.__lastValidValue,undefined)},_getContentPaddingTarget:function(){return this.getChildControl("textfield")},_updateButtons:function(){var a=this.getChildControl("upbutton");var c=this.getChildControl("downbutton");var b=this.getValue();if(!this.getEnabled()){a.setEnabled(false);c.setEnabled(false)}else{if(this.getWrap()){a.setEnabled(true);c.setEnabled(true)}else{if(b!==null&&b<this.getMaximum()){a.setEnabled(true)}else{a.setEnabled(false)}if(b!==null&&b>this.getMinimum()){c.setEnabled(true)}else{c.setEnabled(false)}}}},_onKeyDown:function(a){switch(a.getKeyIdentifier()){case"PageUp":this.__pageUpMode=true;case"Up":this.getChildControl("upbutton").press();break;case"PageDown":this.__pageDownMode=true;case"Down":this.getChildControl("downbutton").press();break;default:return}a.stopPropagation();a.preventDefault()},_onKeyUp:function(a){switch(a.getKeyIdentifier()){case"PageUp":this.getChildControl("upbutton").release();this.__pageUpMode=false;break;case"Up":this.getChildControl("upbutton").release();break;case"PageDown":this.getChildControl("downbutton").release();this.__pageDownMode=false;break;case"Down":this.getChildControl("downbutton").release();break}},_onMouseWheel:function(a){if(a.getWheelDelta()>0){this._countDown()}else{this._countUp()}a.stop()},_onTextChange:function(d){var a=this.getChildControl("textfield");var c;if(this.getNumberFormat()){try{c=this.getNumberFormat().parse(a.getValue())}catch(b){}}if(c===undefined){c=parseFloat(a.getValue())}if(!isNaN(c)){if(c>this.getMaximum()){a.setValue(this.getMaximum()+"");return}else{if(c<this.getMinimum()){a.setValue(this.getMinimum()+"");return}}this.setValue(c)}else{this._applyValue(this.__lastValidValue,undefined)}},_onChangeLocale:function(b){if(this.getNumberFormat()!==null){this.setNumberFormat(this.getNumberFormat());var a=this.getChildControl("textfield");a.setFilter(this._getFilterRegExp());a.setValue(this.getNumberFormat().format(this.getValue()))}},_onChangeNumberFormat:function(b){var a=this.getChildControl("textfield");a.setFilter(this._getFilterRegExp());a.setValue(this.getNumberFormat().format(this.getValue()))},_countUp:function(){if(this.__pageUpMode){var b=this.getValue()+this.getPageStep()}else{var b=this.getValue()+this.getSingleStep()}if(this.getWrap()){if(b>this.getMaximum()){var a=this.getMaximum()-b;b=this.getMinimum()+a}}this.gotoValue(b)},_countDown:function(){if(this.__pageDownMode){var b=this.getValue()-this.getPageStep()}else{var b=this.getValue()-this.getSingleStep()}if(this.getWrap()){if(b<this.getMinimum()){var a=this.getMinimum()+b;b=this.getMaximum()-a}}this.gotoValue(b)},gotoValue:function(a){return this.setValue(Math.min(this.getMaximum(),Math.max(this.getMinimum(),a)))}},destruct:function(){if(qx.core.Environment.get("qx.dynlocale")){qx.locale.Manager.getInstance().removeListener("changeLocale",this._onChangeLocale,this)}}});qx.Class.define("qx.dev.unit.Sinon",{type:"static",statics:{getSinon:null}});(function(){var sinon=(function(){var div=typeof document!="undefined"&&document.createElement("div");function isNode(obj){try{div.appendChild(obj);div.removeChild(obj)}catch(e){return false}return true}function isElement(obj){return div&&obj&&obj.nodeType===1&&isNode(obj)}return{wrapMethod:function wrapMethod(object,property,method){if(!object){throw new TypeError("Should wrap property of object")}if(typeof method!="function"){throw new TypeError("Method wrapper should be function")}var wrappedMethod=object[property];var type=typeof wrappedMethod;if(type!="function"){throw new TypeError("Attempted to wrap "+type+" property "+property+" as function")}if(wrappedMethod.restore&&wrappedMethod.restore.sinon){throw new TypeError("Attempted to wrap "+property+" which is already wrapped")}if(wrappedMethod.calledBefore){var verb=!!wrappedMethod.returns?"stubbed":"spied on";throw new TypeError("Attempted to wrap "+property+" which is already "+verb)}object[property]=method;method.displayName=property;method.restore=function(){object[property]=wrappedMethod};method.restore.sinon=true;return method},extend:function extend(target){for(var i=1,l=arguments.length;i<l;i+=1){for(var prop in arguments[i]){if(arguments[i].hasOwnProperty(prop)){target[prop]=arguments[i][prop]}}}return target},create:function create(proto){if(Object.create){return Object.create(proto)}else{var F=function(){};F.prototype=proto;return new F()}},deepEqual:function deepEqual(a,b){if(typeof a!="object"||typeof b!="object"){return a===b}if(isElement(a)||isElement(b)){return a===b}if(a===b){return true}if(Object.prototype.toString.call(a)=="[object Array]"){if(a.length!==b.length){return false}for(var i=0,l=a.length;i<l;i+=1){if(!deepEqual(a[i],b[i])){return false}}return true}var prop,aLength=0,bLength=0;for(prop in a){aLength+=1;if(!deepEqual(a[prop],b[prop])){return false}}for(prop in b){bLength+=1}if(aLength!=bLength){return false}return true},keys:function keys(object){var objectKeys=[];for(var prop in object){if(object.hasOwnProperty(prop)){objectKeys.push(prop)}}return objectKeys.sort()},functionName:function functionName(func){var name=func.displayName||func.name;if(!name){var matches=func.toString().match(/function ([^\s\(]+)/);name=matches&&matches[1]}return name},functionToString:function toString(){if(this.getCall&&this.callCount){var thisValue,prop,i=this.callCount;while(i--){thisValue=this.getCall(i).thisValue;for(prop in thisValue){if(thisValue[prop]===this){return prop}}}}return this.displayName||"sinon fake"},getConfig:function(custom){var config={};custom=custom||{};var defaults=sinon.defaultConfig;for(var prop in defaults){if(defaults.hasOwnProperty(prop)){config[prop]=custom.hasOwnProperty(prop)?custom[prop]:defaults[prop]}}return config},defaultConfig:{injectIntoThis:true,injectInto:null,properties:["spy","stub","mock","clock","server","requests"],useFakeTimers:true,useFakeServer:true}}}());if(typeof module=="object"&&typeof require=="function"){require.paths.unshift(__dirname);module.exports=sinon;module.exports.spy=require("sinon/spy");module.exports.stub=require("sinon/stub");module.exports.mock=require("sinon/mock");module.exports.collection=require("sinon/collection");module.exports.assert=require("sinon/assert");module.exports.test=require("sinon/test");module.exports.testCase=require("sinon/test_case");require.paths.shift()}(function(sinon){var commonJSModule=typeof module=="object"&&typeof require=="function";var spyCall;var callId=0;if(!sinon&&commonJSModule){sinon=require("sinon")}if(!sinon){return}function spy(object,property){if(!property&&typeof object=="function"){return spy.create(object)}if(!object||!property){return spy.create(function(){})}var method=object[property];return sinon.wrapMethod(object,property,spy.create(method))}sinon.extend(spy,(function(){var slice=Array.prototype.slice;function delegateToCalls(api,method,matchAny,actual){api[method]=function(){if(!this.called){return false}var currentCall;var matches=0;for(var i=0,l=this.callCount;i<l;i+=1){currentCall=this.getCall(i);if(currentCall[actual||method].apply(currentCall,arguments)){matches+=1;if(matchAny){return true}}}return matches===this.callCount}}var spyApi={called:false,calledOnce:false,calledTwice:false,calledThrice:false,callCount:0,create:function create(func){var name;if(typeof func!="function"){func=function(){}}else{name=sinon.functionName(func)}function proxy(){return proxy.invoke(func,this,slice.call(arguments))}sinon.extend(proxy,spy);delete proxy.create;sinon.extend(proxy,func);proxy.args=[];proxy.returnValues=[];proxy.thisValues=[];proxy.exceptions=[];proxy.callIds=[];proxy.prototype=func.prototype;proxy.displayName=name||"spy";proxy.toString=sinon.functionToString;return proxy},invoke:function invoke(func,thisValue,args){var exception,returnValue;this.called=true;this.callCount+=1;this.calledOnce=this.callCount==1;this.calledTwice=this.callCount==2;this.calledThrice=this.callCount==3;this.thisValues.push(thisValue);this.args.push(args);this.callIds.push(callId++);try{returnValue=func.apply(thisValue,args)}catch(e){this.returnValues.push(undefined);exception=e;throw e}finally{this.exceptions.push(exception)}this.returnValues.push(returnValue);return returnValue},getCall:function getCall(i){if(i<0||i>=this.callCount){return null}return spyCall.create(this.thisValues[i],this.args[i],this.returnValues[i],this.exceptions[i],this.callIds[i])},calledBefore:function calledBefore(spyFn){if(!this.called){return false}if(!spyFn.called){return true}return this.callIds[0]<spyFn.callIds[0]},calledAfter:function calledAfter(spyFn){if(!this.called||!spyFn.called){return false}return this.callIds[this.callCount-1]>spyFn.callIds[spyFn.callCount-1]}};delegateToCalls(spyApi,"calledOn",true);delegateToCalls(spyApi,"alwaysCalledOn",false,"calledOn");delegateToCalls(spyApi,"calledWith",true);delegateToCalls(spyApi,"alwaysCalledWith",false,"calledWith");delegateToCalls(spyApi,"calledWithExactly",true);delegateToCalls(spyApi,"alwaysCalledWithExactly",false,"calledWithExactly");delegateToCalls(spyApi,"threw",true);delegateToCalls(spyApi,"alwaysThrew",false,"threw");delegateToCalls(spyApi,"returned",true);delegateToCalls(spyApi,"alwaysReturned",false,"returned");return spyApi}()));spyCall=(function(){return{create:function create(thisValue,args,returnValue,exception,id){var proxyCall=sinon.create(spyCall);delete proxyCall.create;proxyCall.thisValue=thisValue;proxyCall.args=args;proxyCall.returnValue=returnValue;proxyCall.exception=exception;proxyCall.callId=typeof id=="number"&&id||callId++;return proxyCall},calledOn:function calledOn(thisValue){return this.thisValue===thisValue},calledWith:function calledWith(){for(var i=0,l=arguments.length;i<l;i+=1){if(!sinon.deepEqual(arguments[i],this.args[i])){return false}}return true},calledWithExactly:function calledWithExactly(){return arguments.length==this.args.length&&this.calledWith.apply(this,arguments)},returned:function returned(value){return this.returnValue===value},threw:function threw(error){if(typeof error=="undefined"||!this.exception){return !!this.exception}if(typeof error=="string"){return this.exception.name==error}return this.exception===error},calledBefore:function(other){return this.callId<other.callId},calledAfter:function(other){return this.callId>other.callId}}}());if(commonJSModule){module.exports=spy}else{sinon.spy=spy;sinon.spyCall=spyCall}}(typeof sinon=="object"&&sinon||null));(function(sinon){var commonJSModule=typeof module=="object"&&typeof require=="function";if(!sinon&&commonJSModule){sinon=require("sinon")}if(!sinon){return}function stub(object,property,func){if(!!func&&typeof func!="function"){throw new TypeError("Custom stub should be function")}var wrapper;if(func){wrapper=sinon.spy&&sinon.spy.create?sinon.spy.create(func):func}else{wrapper=stub.create()}if(!object&&!property){return sinon.stub.create()}if(!property&&!!object&&typeof object=="object"){for(var prop in object){if(object.hasOwnProperty(prop)&&typeof object[prop]=="function"){stub(object,prop)}}return object}return sinon.wrapMethod(object,property,wrapper)}sinon.extend(stub,(function(){var slice=Array.prototype.slice;function throwsException(error,message){if(typeof error=="string"){this.exception=new Error(message);this.exception.name=error}else{if(!error){this.exception=new Error("Error")}else{this.exception=error}}return this}return{create:function create(){var functionStub=function(){if(functionStub.exception){throw functionStub.exception}if(typeof functionStub.callArgAt=="number"){var func=arguments[functionStub.callArgAt];if(typeof func!="function"){throw new TypeError("argument at index "+functionStub.callArgAt+" is not a function: "+func)}func.apply(null,functionStub.callbackArguments)}return functionStub.returnValue};if(sinon.spy){functionStub=sinon.spy.create(functionStub)}sinon.extend(functionStub,stub);functionStub.displayName="stub";functionStub.toString=sinon.functionToString;return functionStub},returns:function returns(value){this.returnValue=value;return this},"throws":throwsException,throwsException:throwsException,callsArg:function callsArg(pos){if(typeof pos!="number"){throw new TypeError("argument index is not number")}this.callArgAt=pos;this.callbackArguments=[]},callsArgWith:function callsArgWith(pos){if(typeof pos!="number"){throw new TypeError("argument index is not number")}this.callArgAt=pos;this.callbackArguments=slice.call(arguments,1)}}}()));if(commonJSModule){module.exports=stub}else{sinon.stub=stub}}(typeof sinon=="object"&&sinon||null));(function(sinon){var commonJSModule=typeof module=="object"&&typeof require=="function";if(!sinon&&commonJSModule){sinon=require("sinon")}if(!sinon){return}function mock(object){if(!object){return sinon.expectation.create("Anonymous mock")}return mock.create(object)}sinon.mock=mock;sinon.extend(mock,(function(){function each(collection,callback){if(!collection){return}for(var i=0,l=collection.length;i<l;i+=1){callback(collection[i])}}return{create:function create(object){if(!object){throw new TypeError("object is null")}var mockObject=sinon.extend({},mock);mockObject.object=object;delete mockObject.create;return mockObject},expects:function expects(method){if(!method){throw new TypeError("method is falsy")}if(!this.expectations){this.expectations={};this.proxies=[]}if(!this.expectations[method]){this.expectations[method]=[];var mockObject=this;sinon.wrapMethod(this.object,method,function(){return mockObject.invokeMethod(method,this,arguments)});this.proxies.push(method)}var expectation=sinon.expectation.create(method);this.expectations[method].push(expectation);return expectation},restore:function restore(){var object=this.object;each(this.proxies,function(proxy){if(typeof object[proxy].restore=="function"){object[proxy].restore()}})},verify:function verify(){var expectations=this.expectations||{};var exception;try{each(this.proxies,function(proxy){each(expectations[proxy],function(expectation){expectation.verify()})})}catch(e){exception=e}this.restore();if(exception){throw exception}return true},invokeMethod:function invokeMethod(method,thisValue,args){var expectations=this.expectations&&this.expectations[method];var length=expectations&&expectations.length||0;for(var i=0;i<length;i+=1){if(!expectations[i].met()){return expectations[i].apply(thisValue,args)}}return expectations[length-1].apply(thisValue,args)}}}()));function err(message){var exception=new Error(message);exception.name="ExpectationError";throw exception}sinon.expectation=(function(){var slice=Array.prototype.slice;var _invoke=sinon.spy.invoke;function timesInWords(times){if(times==1){return"once"}else{if(times==2){return"twice"}else{if(times==3){return"thrice"}}}return times+" times"}function receivedMinCalls(expectation){var hasMinLimit=typeof expectation.minCalls=="number";return !hasMinLimit||expectation.callCount>=expectation.minCalls}function receivedMaxCalls(expectation){if(typeof expectation.maxCalls!="number"){return false}return expectation.callCount==expectation.maxCalls}return{minCalls:1,maxCalls:1,create:function create(methodName){var expectation=sinon.extend(sinon.stub.create(),sinon.expectation);delete expectation.create;expectation.method=methodName;return expectation},invoke:function invoke(func,thisValue,args){this.verifyCallAllowed(thisValue,args);return _invoke.apply(this,arguments)},atLeast:function atLeast(num){if(typeof num!="number"){throw new TypeError("'"+num+"' is not number")}if(!this.limitsSet){this.maxCalls=null;this.limitsSet=true}this.minCalls=num;return this},atMost:function atMost(num){if(typeof num!="number"){throw new TypeError("'"+num+"' is not number")}if(!this.limitsSet){this.minCalls=null;this.limitsSet=true}this.maxCalls=num;return this},never:function never(){return this.exactly(0)},once:function once(){return this.exactly(1)},twice:function twice(){return this.exactly(2)},thrice:function thrice(){return this.exactly(3)},exactly:function exactly(num){if(typeof num!="number"){throw new TypeError("'"+num+"' is not a number")}this.atLeast(num);return this.atMost(num)},met:function met(){return !this.failed&&receivedMinCalls(this)},verifyCallAllowed:function verifyCallAllowed(thisValue,args){if(receivedMaxCalls(this)){this.failed=true;err(this.method+" already called "+timesInWords(this.maxCalls))}if("expectedThis" in this&&this.expectedThis!==thisValue){err(this.method+" called with "+thisValue+" as thisValue, expected "+this.expectedThis)}if(!("expectedArguments" in this)){return}if(!args||args.length===0){err(this.method+" received no arguments, expected "+this.expectedArguments.join())}if(args.length<this.expectedArguments.length){err(this.method+" received too few arguments ("+args.join()+"), expected "+this.expectedArguments.join())}if(this.expectsExactArgCount&&args.length!=this.expectedArguments.length){err(this.method+" received too many arguments ("+args.join()+"), expected "+this.expectedArguments.join())}for(var i=0,l=this.expectedArguments.length;i<l;i+=1){if(!sinon.deepEqual(this.expectedArguments[i],args[i])){err(this.method+" received wrong arguments ("+args.join()+"), expected "+this.expectedArguments.join())}}},withArgs:function withArgs(){this.expectedArguments=slice.call(arguments);return this},withExactArgs:function withExactArgs(){this.withArgs.apply(this,arguments);this.expectsExactArgCount=true;return this},on:function on(thisValue){this.expectedThis=thisValue;return this},verify:function verify(){if(!this.met()){err(this.method+" expected to be called "+timesInWords(this.minCalls)+", but was called "+timesInWords(this.callCount))}return true}}}());if(commonJSModule){module.exports=mock}else{sinon.mock=mock}}(typeof sinon=="object"&&sinon||null));(function(sinon){var commonJSModule=typeof module=="object"&&typeof require=="function";if(!sinon&&commonJSModule){sinon=require("sinon")}if(!sinon){return}function getFakes(fakeCollection){if(!fakeCollection.fakes){fakeCollection.fakes=[]}return fakeCollection.fakes}function each(fakeCollection,method){var fakes=getFakes(fakeCollection);for(var i=0,l=fakes.length;i<l;i+=1){if(typeof fakes[i][method]=="function"){fakes[i][method]()}}}var collection={verify:function resolve(){each(this,"verify")},restore:function restore(){each(this,"restore")},verifyAndRestore:function verifyAndRestore(){var exception;try{this.verify()}catch(e){exception=e}this.restore();if(exception){throw exception}},add:function add(fake){getFakes(this).push(fake);return fake},spy:function spy(){return this.add(sinon.spy.apply(sinon,arguments))},stub:function stub(){return this.add(sinon.stub.apply(sinon,arguments))},mock:function mock(){return this.add(sinon.mock.apply(sinon,arguments))},inject:function inject(obj){var col=this;obj.spy=function(){return col.spy.apply(col,arguments)};obj.stub=function(){return col.stub.apply(col,arguments)};obj.mock=function(){return col.mock.apply(col,arguments)};return obj}};if(commonJSModule){module.exports=collection}else{sinon.collection=collection}}(typeof sinon=="object"&&sinon||null));if(typeof sinon=="undefined"){var sinon={}}sinon.clock=(function(){var id=0;function addTimer(args,recurring){if(args.length===0){throw new Error("Function requires at least 1 parameter")}var toId=id++;var delay=args[1]||0;if(!this.timeouts){this.timeouts={}}this.timeouts[toId]={id:toId,func:args[0],callAt:this.now+delay};if(recurring===true){this.timeouts[toId].interval=delay}return toId}function parseTime(str){if(!str){return 0}var strings=str.split(":");var l=strings.length,i=l;var ms=0,parsed;if(l>3||!/^(\d\d:){0,2}\d\d?$/.test(str)){throw new Error("tick only understands numbers and 'h:m:s'")}while(i--){parsed=parseInt(strings[i],10);if(parsed>=60){throw new Error("Invalid time "+str)}ms+=parsed*Math.pow(60,(l-i-1))}return ms*1000}function createObject(object){var newObject;if(Object.create){newObject=Object.create(object)}else{var F=function(){};F.prototype=object;newObject=new F()}newObject.Date.clock=newObject;return newObject}return{now:0,create:function create(now){var clock=createObject(this);if(typeof now=="number"){this.now=now}return clock},setTimeout:function setTimeout(callback,timeout){return addTimer.call(this,arguments,false)},clearTimeout:function clearTimeout(timerId){if(!this.timeouts){this.timeouts=[]}delete this.timeouts[timerId]},setInterval:function setInterval(callback,timeout){return addTimer.call(this,arguments,true)},clearInterval:function clearInterval(timerId){this.clearTimeout(timerId)},tick:function tick(ms){ms=typeof ms=="number"?ms:parseTime(ms);var tickFrom=this.now,tickTo=this.now+ms,previous=this.now;var timer=this.firstTimerInRange(tickFrom,tickTo);while(timer&&tickFrom<=tickTo){if(this.timeouts[timer.id]){tickFrom=this.now=timer.callAt;this.callTimer(timer)}timer=this.firstTimerInRange(previous,tickTo);previous=tickFrom}this.now=tickTo},firstTimerInRange:function(from,to){var timer,smallest,originalTimer;for(var id in this.timeouts){if(this.timeouts.hasOwnProperty(id)){if(this.timeouts[id].callAt<from||this.timeouts[id].callAt>to){continue}if(!smallest||this.timeouts[id].callAt<smallest){originalTimer=this.timeouts[id];smallest=this.timeouts[id].callAt;timer={func:this.timeouts[id].func,callAt:this.timeouts[id].callAt,interval:this.timeouts[id].interval,id:this.timeouts[id].id}}}}return timer||null},callTimer:function(timer){try{if(typeof timer.func=="function"){timer.func.call(null)}else{eval(timer.func)}}catch(e){}if(!this.timeouts[timer.id]){return}if(typeof timer.interval=="number"){this.timeouts[timer.id].callAt+=timer.interval}else{delete this.timeouts[timer.id]}},reset:function reset(){this.timeouts={}},Date:(function(){var NativeDate=Date;function ClockDate(year,month,date,hour,minute,second,ms){switch(arguments.length){case 0:return new NativeDate(ClockDate.clock.now);case 1:return new NativeDate(year);case 2:return new NativeDate(year,month);case 3:return new NativeDate(year,month,date);case 4:return new NativeDate(year,month,date,hour);case 5:return new NativeDate(year,month,date,hour,minute);case 6:return new NativeDate(year,month,date,hour,minute,second);default:return new NativeDate(year,month,date,hour,minute,second,ms)}}if(NativeDate.now){ClockDate.now=function now(){return ClockDate.clock.now}}if(NativeDate.toSource){ClockDate.toSource=function toSource(){return NativeDate.toSource()}}ClockDate.toString=function toString(){return NativeDate.toString()};ClockDate.prototype=NativeDate.prototype;ClockDate.parse=NativeDate.parse;ClockDate.UTC=NativeDate.UTC;return ClockDate}())}}());sinon.timers={setTimeout:setTimeout,clearTimeout:clearTimeout,setInterval:setInterval,clearInterval:clearInterval,Date:Date};sinon.useFakeTimers=(function(){var global=this;var methods=["Date","setTimeout","setInterval","clearTimeout","clearInterval"];function restore(){var method;for(var i=0,l=this.methods.length;i<l;i++){method=this.methods[i];global[method]=this["_"+method]}}function stubGlobal(method,clock){clock["_"+method]=global[method];global[method]=function(){return clock[method].apply(clock,arguments)};for(var prop in clock[method]){if(clock[method].hasOwnProperty(prop)){global[method][prop]=clock[method][prop]}}global[method].clock=clock}return function useFakeTimers(now){var clock=sinon.clock.create(now);clock.restore=restore;clock.methods=Array.prototype.slice.call(arguments,typeof now=="number"?1:0);if(clock.methods.length===0){clock.methods=methods}for(var i=0,l=clock.methods.length;i<l;i++){stubGlobal(clock.methods[i],clock)}return clock}}());if(typeof module=="object"&&typeof require=="function"){module.exports=sinon}if(typeof sinon=="undefined"){this.sinon={}}sinon.xhr={XMLHttpRequest:this.XMLHttpRequest};sinon.FakeXMLHttpRequest=(function(){var unsafeHeaders={"Accept-Charset":true,"Accept-Encoding":true,Connection:true,"Content-Length":true,Cookie:true,Cookie2:true,"Content-Transfer-Encoding":true,Date:true,Expect:true,Host:true,"Keep-Alive":true,Referer:true,TE:true,Trailer:true,"Transfer-Encoding":true,Upgrade:true,"User-Agent":true,Via:true};function FakeXMLHttpRequest(){this.readyState=FakeXMLHttpRequest.UNSENT;this.requestHeaders={};this.requestBody=null;this.status=0;this.statusText="";if(typeof FakeXMLHttpRequest.onCreate=="function"){FakeXMLHttpRequest.onCreate(this)}}function verifyState(xhr){if(xhr.readyState!==FakeXMLHttpRequest.OPENED){throw new Error("INVALID_STATE_ERR")}if(xhr.sendFlag){throw new Error("INVALID_STATE_ERR")}}sinon.extend(FakeXMLHttpRequest.prototype,{async:true,open:function open(method,url,async,username,password){this.method=method;this.url=url;this.async=typeof async=="boolean"?async:true;this.username=username;this.password=password;this.responseText=null;this.responseXML=null;this.requestHeaders={};this.sendFlag=false;this.readyStateChange(FakeXMLHttpRequest.OPENED)},readyStateChange:function readyStateChange(state){this.readyState=state;if(typeof this.onreadystatechange=="function"){this.onreadystatechange()}},setRequestHeader:function setRequestHeader(header,value){verifyState(this);if(unsafeHeaders[header]||/^(Sec-|Proxy-)/.test(header)){throw new Error('Refused to set unsafe header "'+header+'"')}if(this.requestHeaders[header]){this.requestHeaders[header]+=","+value}else{this.requestHeaders[header]=value}},setResponseHeaders:function setResponseHeaders(headers){this.responseHeaders={};for(var header in headers){if(headers.hasOwnProperty(header)){this.responseHeaders[header.toLowerCase()]=headers[header]}}if(this.async){this.readyStateChange(FakeXMLHttpRequest.HEADERS_RECEIVED)}},send:function send(data){verifyState(this);if(!/^(get|head)$/i.test(this.method)){if(this.requestHeaders["Content-Type"]){var value=this.requestHeaders["Content-Type"].split(";");this.requestHeaders["Content-Type"]=value[0]+";charset=utf-8"}else{this.requestHeaders["Content-Type"]="text/plain;charset=utf-8"}this.requestBody=data}this.errorFlag=false;this.sendFlag=this.async;this.readyStateChange(FakeXMLHttpRequest.OPENED);if(typeof this.onSend=="function"){this.onSend(this)}},abort:function abort(){this.aborted=true;this.responseText=null;this.errorFlag=true;this.requestHeaders={};if(this.readyState>sinon.FakeXMLHttpRequest.OPENED){this.readyStateChange(sinon.FakeXMLHttpRequest.DONE);this.sendFlag=false}this.readyState=sinon.FakeXMLHttpRequest.UNSENT},getResponseHeader:function getResponseHeader(header){if(this.readyState<FakeXMLHttpRequest.HEADERS_RECEIVED){return null}if(/^Set-Cookie2?$/i.test(header)){return null}return this.responseHeaders[header.toLowerCase()]},getAllResponseHeaders:function getAllResponseHeaders(){if(this.readyState<FakeXMLHttpRequest.HEADERS_RECEIVED){return null}var headers={};for(var header in this.responseHeaders){if(this.responseHeaders.hasOwnProperty(header)&&!/^Set-Cookie2?$/i.test(header)){headers[header]=this.responseHeaders[header]}}return headers},setResponseBody:function setResponseBody(body){if(this.readyState==FakeXMLHttpRequest.DONE){throw new Error("Request done")}if(this.async&&this.readyState!=FakeXMLHttpRequest.HEADERS_RECEIVED){throw new Error("No headers received")}var chunkSize=this.chunkSize||10;var index=0;this.responseText="";do{if(this.async){this.readyStateChange(FakeXMLHttpRequest.LOADING)}this.responseText+=body.substring(index,index+chunkSize);index+=chunkSize}while(index<body.length);var type=this.getResponseHeader("Content-Type");if(this.responseText&&(!type||/(text\/xml)|(application\/xml)|(\+xml)/.test(type))){this.responseXML=FakeXMLHttpRequest.parseXML(this.responseText)}if(this.async){this.readyStateChange(FakeXMLHttpRequest.DONE)}else{this.readyState=FakeXMLHttpRequest.DONE}},respond:function respond(status,headers,body){this.setResponseHeaders(headers||{});this.status=typeof status=="number"?status:200;this.statusText=FakeXMLHttpRequest.statusCodes[this.status];this.setResponseBody(body||"")}});sinon.extend(FakeXMLHttpRequest,{UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4});FakeXMLHttpRequest.parseXML=function parseXML(text){var xmlDoc;if(typeof DOMParser!="undefined"){var parser=new DOMParser();xmlDoc=parser.parseFromString(text,"text/xml")}else{xmlDoc=new ActiveXObject("Microsoft.XMLDOM");xmlDoc.async="false";xmlDoc.loadXML(text)}return xmlDoc};FakeXMLHttpRequest.statusCodes={100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",300:"Multiple Choice",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported"};return FakeXMLHttpRequest}());(function(global){var GlobalXMLHttpRequest=global.XMLHttpRequest;var GlobalActiveXObject=global.ActiveXObject;var supportsActiveX=typeof ActiveXObject!="undefined";var supportsXHR=typeof XMLHttpRequest!="undefined";sinon.useFakeXMLHttpRequest=function(){sinon.FakeXMLHttpRequest.restore=function restore(keepOnCreate){if(supportsXHR){global.XMLHttpRequest=GlobalXMLHttpRequest}if(supportsActiveX){global.ActiveXObject=GlobalActiveXObject}delete sinon.FakeXMLHttpRequest.restore;if(keepOnCreate!==true){delete sinon.FakeXMLHttpRequest.onCreate}};if(supportsXHR){global.XMLHttpRequest=sinon.FakeXMLHttpRequest}if(supportsActiveX){global.ActiveXObject=function ActiveXObject(objId){if(objId=="Microsoft.XMLHTTP"||/^Msxml2\.XMLHTTP/.test(objId)){return new sinon.FakeXMLHttpRequest()}return new GlobalActiveXObject(objId)}}return sinon.FakeXMLHttpRequest}}(this));if(typeof module=="object"&&typeof require=="function"){module.exports=sinon}if(typeof sinon=="undefined"){var sinon={}}sinon.fakeServer=(function(){function F(){}function create(proto){F.prototype=proto;return new F()}function responseArray(strOrArray){if(Object.prototype.toString.call(strOrArray)=="[object Array]"){return strOrArray}return[200,{},strOrArray]}var wloc=window.location;var rCurrLoc=new RegExp("^"+wloc.protocol+"//"+wloc.host);function matchOne(response,requestMethod,requestUrl){var rmeth=response.method;var matchMethod=!rmeth||rmeth.toLowerCase()==requestMethod.toLowerCase();var url=response.url;var matchUrl=!url||url==requestUrl||(typeof url.test=="function"&&url.test(requestUrl));return matchMethod&&matchUrl}function match(response,requestMethod,requestUrl){if(matchOne(response,requestMethod,requestUrl)){return true}if(!/^https?:\/\//.test(requestUrl)||rCurrLoc.test(requestUrl)){var strippedUrl=requestUrl.replace(rCurrLoc,"");return matchOne(response,requestMethod,strippedUrl)}return false}return{create:function(){var server=create(this);this.xhr=sinon.useFakeXMLHttpRequest();server.requests=[];this.xhr.onCreate=function(xhrObj){server.addRequest(xhrObj)};return server},addRequest:function addRequest(xhrObj){var server=this;this.requests.push(xhrObj);xhrObj.onSend=function(){server.handleRequest(this)}},getHTTPMethod:function getHTTPMethod(request){if(this.fakeHTTPMethods&&/post/i.test(request.method)){var matches=request.requestBody.match(/_method=([^\b;]+)/);return !!matches?matches[1]:request.method}return request.method},handleRequest:function handleRequest(xhr){if(xhr.async){if(!this.queue){this.queue=[]}this.queue.push(xhr)}else{this.processRequest(xhr)}},respondWith:function respondWith(method,url,body){if(arguments.length==1){this.response=responseArray(method)}else{if(!this.responses){this.responses=[]}if(arguments.length==2){body=url;url=method;method=null}this.responses.push({method:method,url:url,response:responseArray(body)})}},respond:function respond(){var queue=this.queue||[];for(var i=0,l=queue.length;i<l;i++){this.processRequest(queue[i])}this.queue=[]},processRequest:function processRequest(request){try{if(request.aborted){return}var response=this.response||[404,{},""];if(this.responses){for(var i=0,l=this.responses.length;i<l;i++){if(match(this.responses[i],this.getHTTPMethod(request),request.url)){response=this.responses[i].response;break}}}request.respond(response[0],response[1],response[2])}catch(e){}},restore:function restore(){return this.xhr.restore&&this.xhr.restore.apply(this.xhr,arguments)}}}());if(typeof module=="object"&&typeof require=="function"){module.exports=sinon}(function(){function Server(){}Server.prototype=sinon.fakeServer;sinon.fakeServerWithClock=new Server();sinon.fakeServerWithClock.addRequest=function addRequest(xhr){if(xhr.async){if(typeof setTimeout.clock=="object"){this.clock=setTimeout.clock}else{this.clock=sinon.useFakeTimers();this.resetClock=true}if(!this.longestTimeout){var clockSetTimeout=this.clock.setTimeout;var clockSetInterval=this.clock.setInterval;var server=this;this.clock.setTimeout=function(fn,timeout){server.longestTimeout=Math.max(timeout,server.longestTimeout||0);return clockSetTimeout.apply(this,arguments)};this.clock.setInterval=function(fn,timeout){server.longestTimeout=Math.max(timeout,server.longestTimeout||0);return clockSetInterval.apply(this,arguments)}}}return sinon.fakeServer.addRequest.call(this,xhr)};sinon.fakeServerWithClock.respond=function respond(){var returnVal=sinon.fakeServer.respond.apply(this,arguments);if(this.clock){this.clock.tick(this.longestTimeout||0);this.longestTimeout=0;if(this.resetClock){this.clock.restore();this.resetClock=false}}return returnVal};sinon.fakeServerWithClock.restore=function restore(){if(this.clock){this.clock.restore()}return sinon.fakeServer.restore.apply(this,arguments)}}());if(typeof require=="function"){var sinon=require("sinon");sinon.extend(sinon,require("sinon/util/fake_timers"))}(function(){function exposeValue(sandbox,config,key,value){if(!value){return}if(config.injectInto){config.injectInto[key]=value}else{sandbox.args.push(value)}}function prepareSandboxFromConfig(config){var sandbox=sinon.create(sinon.sandbox);if(config.useFakeServer){if(typeof config.useFakeServer=="object"){sandbox.serverPrototype=config.useFakeServer}sandbox.useFakeServer()}if(config.useFakeTimers){if(typeof config.useFakeTimers=="object"){sandbox.useFakeTimers.apply(sandbox,config.useFakeTimers)}else{sandbox.useFakeTimers()}}return sandbox}sinon.sandbox=sinon.extend(sinon.create(sinon.collection),{useFakeTimers:function useFakeTimers(){this.clock=sinon.useFakeTimers.apply(sinon,arguments);return this.add(this.clock)},serverPrototype:sinon.fakeServer,useFakeServer:function useFakeServer(){this.server=(this.serverPrototype||sinon.fakeServer).create();return this.add(this.server)},inject:function(obj){sinon.collection.inject.call(this,obj);if(this.clock){obj.clock=this.clock}if(this.server){obj.server=this.server;obj.requests=this.server.requests}return obj},create:function(config){if(!config){return sinon.create(sinon.sandbox)}var sandbox=prepareSandboxFromConfig(config);sandbox.args=sandbox.args||[];var prop,value,exposed=sandbox.inject({});if(config.properties){for(var i=0,l=config.properties.length;i<l;i++){prop=config.properties[i];value=exposed[prop]||prop=="sandbox"&&sandbox;exposeValue(sandbox,config,prop,value)}}else{exposeValue(sandbox,config,"sandbox",value)}return sandbox}});sinon.sandbox.useFakeXMLHttpRequest=sinon.sandbox.useFakeServer;if(typeof module!="undefined"){module.exports=sinon.sandbox}}());(function(sinon){var commonJSModule=typeof module=="object"&&typeof require=="function";if(!sinon&&commonJSModule){sinon=require("sinon")}if(!sinon){return}function test(callback){var type=typeof callback;if(type!="function"){throw new TypeError("sinon.test needs to wrap a test function, got "+type)}return function(){var config=sinon.getConfig(sinon.config);config.injectInto=config.injectIntoThis&&this||config.injectInto;var sandbox=sinon.sandbox.create(config);var exception,result;var args=Array.prototype.slice.call(arguments).concat(sandbox.args);try{result=callback.apply(this,args)}catch(e){exception=e}sandbox.verifyAndRestore();if(exception){throw exception}return result}}test.config={injectIntoThis:true,injectInto:null,properties:["spy","stub","mock","clock","server","requests"],useFakeTimers:true,useFakeServer:true};if(commonJSModule){module.exports=test}else{sinon.test=test}}(typeof sinon=="object"&&sinon||null));(function(sinon){var commonJSModule=typeof module=="object"&&typeof require=="function";if(!sinon&&commonJSModule){sinon=require("sinon")}if(!sinon||!Object.prototype.hasOwnProperty){return}function createTest(property,setUp,tearDown){return function(){if(setUp){setUp.apply(this,arguments)}var exception;try{property.apply(this,arguments)}catch(e){exception=e}if(tearDown){tearDown.apply(this,arguments)}if(exception){throw exception}}}function testCase(tests,prefix){if(!tests||typeof tests!="object"){throw new TypeError("sinon.testCase needs an object with test functions")}prefix=prefix||"test";var rPrefix=new RegExp("^"+prefix);var methods={},testName,property,method;var setUp=tests.setUp;var tearDown=tests.tearDown;for(testName in tests){if(tests.hasOwnProperty(testName)){property=tests[testName];if(/^(setUp|tearDown)$/.test(testName)){continue}if(typeof property=="function"&&rPrefix.test(testName)){method=property;if(setUp||tearDown){method=createTest(property,setUp,tearDown)}methods[testName]=sinon.test(method)}}}return methods}if(commonJSModule){module.exports=testCase}else{sinon.testCase=testCase}}(typeof sinon=="object"&&sinon||null));(function(sinon){var commonJSModule=typeof module=="object"&&typeof require=="function";var slice=Array.prototype.slice;var assert;if(!sinon&&commonJSModule){sinon=require("sinon")}if(!sinon){return}function times(count){return count==1&&"once"||count==2&&"twice"||count==3&&"thrice"||(count||0)+" times"}function verifyIsStub(method){if(!method){assert.fail("fake is not a spy")}if(typeof method!="function"){assert.fail(method+" is not a function")}if(typeof method.getCall!="function"){assert.fail(method+" is not stubbed")}}function failAssertion(object,msg){var failMethod=assert.fail||object.fail;failMethod.call(object,msg)}function mirrorAssertion(method,message){assert[method]=function(fake){verifyIsStub(fake);var failed=typeof fake[method]=="function"?!fake[method].apply(fake,slice.call(arguments,1)):!fake[method];if(failed){var msg=message.replace("%c",times(fake.callCount));msg=msg.replace("%n",fake+"");msg=msg.replace("%*",[].slice.call(arguments,1).join(", "));for(var i=0,l=arguments.length;i<l;i++){msg=msg.replace("%"+i,arguments[i])}failAssertion(this,msg)}else{assert.pass(method)}}}assert={failException:"AssertError",fail:function fail(message){var error=new Error(message);error.name=this.failException||assert.failException;throw error},pass:function pass(assertion){},called:function assertCalled(method){verifyIsStub(method);if(!method.called){failAssertion(this,"expected "+method+" to have been called at least once but was never called")}else{assert.pass("called")}},notCalled:function assertNotCalled(method){verifyIsStub(method);if(method.called){failAssertion(this,"expected "+method+" to not have been called but was called "+times(method.callCount))}else{assert.pass("notCalled")}},callOrder:function assertCallOrder(){verifyIsStub(arguments[0]);var expected=[];var actual=[];var failed=false;expected.push(arguments[0]);for(var i=1,l=arguments.length;i<l;i++){verifyIsStub(arguments[i]);expected.push(arguments[i]);if(!arguments[i-1].calledBefore(arguments[i])){failed=true}}if(failed){actual=[].concat(expected).sort(function(a,b){var aId=a.getCall(0).callId;var bId=b.getCall(0).callId;return aId<bId?-1:1});var expectedStr,actualStr;try{expectedStr=expected.join(", ");actualStr=actual.join(", ")}catch(e){}failAssertion(this,"expected "+(expectedStr||"")+" to be called in order but were called as "+actualStr)}else{assert.pass("callOrder")}},callCount:function assertCallCount(method,count){verifyIsStub(method);if(method.callCount!=count){failAssertion(this,"expected "+method+" to be called "+times(count)+" but was called "+times(method.callCount))}else{assert.pass("callCount")}},expose:function expose(target,options){if(!target){throw new TypeError("target is null or undefined")}options=options||{};var prefix=typeof options.prefix=="undefined"&&"assert"||options.prefix;var name=function(prop){if(!prefix){return prop}return prefix+prop.substring(0,1).toUpperCase()+prop.substring(1)};for(var assertion in this){if(!/^(fail|expose)/.test(assertion)){target[name(assertion)]=this[assertion]}}if(typeof options.includeFail=="undefined"||!!options.includeFail){target.fail=this.fail;target.failException=this.failException}return target}};mirrorAssertion("calledOnce","expected %n to be called once but was called %c");mirrorAssertion("calledTwice","expected %n to be called twice but was called %c");mirrorAssertion("calledThrice","expected %n to be called thrice but was called %c");mirrorAssertion("calledOn","expected %n to be called with %1 as this");mirrorAssertion("alwaysCalledOn","expected %n to always be called with %1 as this");mirrorAssertion("calledWith","expected %n to be called with arguments %*");mirrorAssertion("alwaysCalledWith","expected %n to always be called with arguments %*");mirrorAssertion("calledWithExactly","expected %n to be called with exact arguments %*");mirrorAssertion("alwaysCalledWithExactly","expected %n to always be called with exact arguments %*");mirrorAssertion("threw","%n did not throw exception");mirrorAssertion("alwaysThrew","%n did not always throw exception");if(commonJSModule){module.exports=assert}else{sinon.assert=assert}}(typeof sinon=="object"&&sinon||null));var Sinon=qx.dev.unit.Sinon;Sinon.getSinon=function(){return sinon};sinon.assert.fail=function(msg){this.fail(msg,true)}})();qx.Class.define("qx.ui.embed.AbstractIframe",{extend:qx.ui.core.Widget,construct:function(a){this.base(arguments);if(a){this.setSource(a)}this._getIframeElement().addListener("navigate",this.__onNavigate,this)},events:{load:"qx.event.type.Event",navigate:"qx.event.type.Data"},properties:{source:{check:"String",apply:"_applySource",nullable:true},frameName:{check:"String",init:"",apply:"_applyFrameName"}},members:{_getIframeElement:function(){throw new Error("Abstract method call")},_applySource:function(b,a){this._getIframeElement().setSource(b)},_applyFrameName:function(b,a){this._getIframeElement().setAttribute("name",b)},getWindow:function(){return this._getIframeElement().getWindow()},getDocument:function(){return this._getIframeElement().getDocument()},getBody:function(){return this._getIframeElement().getBody()},getName:function(){return this._getIframeElement().getName()},reload:function(){this._getIframeElement().reload()},__onNavigate:function(b){var a=b.getData();if(a){this.setSource(a)}this.fireDataEvent("navigate",a)}}});qx.Class.define("qx.ui.embed.ThemedIframe",{extend:qx.ui.embed.AbstractIframe,construct:function(b){this.base(arguments,b);var a=new qx.ui.layout.Grid();a.setColumnFlex(0,1);a.setRowFlex(0,1);this._setLayout(a);this._showChildControl("iframe")},properties:{appearance:{refine:true,init:"scrollarea"},scrollbarX:{check:["auto","on","off"],init:"auto",themeable:true,apply:"_updateScrollbars"},scrollbarY:{check:["auto","on","off"],init:"auto",themeable:true,apply:"_updateScrollbars"},scrollbar:{group:["scrollbarX","scrollbarY"]}},members:{__iframeSize:null,__iframeObserverId:null,_getIframeElement:function(){return this.getChildControl("iframe").getContentElement()},_createChildControlImpl:function(c,b){var a;switch(c){case"iframe":a=new qx.ui.embed.Iframe(this.getSource());a.addListener("load",this._onIframeLoad,this);a.addListener("resize",this._onIframeResize,this);this._add(a,{row:0,column:0});break;case"scrollbar-x":a=new qx.ui.core.scroll.ScrollBar("horizontal");a.setMinWidth(0);a.exclude();a.addListener("scroll",this._onScrollBarX,this);this._add(a,{row:1,column:0});break;case"scrollbar-y":a=new qx.ui.core.scroll.ScrollBar("vertical");a.setMinHeight(0);a.exclude();a.addListener("scroll",this._onScrollBarY,this);this._add(a,{row:0,column:1});break;case"corner":a=new qx.ui.core.Widget();a.setWidth(0);a.setHeight(0);a.exclude();this._add(a,{row:1,column:1});break}return a||this.base(arguments,c)},_onIframeLoad:function(){this._disableScollbars();var a=this._getIframeElement().getBody();if(a){this._startIframeObserver();this._addWheelListener()}this.fireEvent("load")},_onIframeResize:function(){this._updateScrollbars()},_disableScollbars:function(){this._excludeChildControl("scrollbar-x");this._excludeChildControl("scrollbar-y");this._excludeChildControl("corner");this._stopIframeObserver()},_addWheelListener:function(){try{var a=this._getIframeElement().getBody();qx.bom.Element.addListener(a,"mousewheel",this._onMouseWheel,this)}catch(b){this._disableScollbars()}},_onMouseWheel:function(b){var a=this._isChildControlVisible("scrollbar-y")&&this.getChildControl("scrollbar-y").isEnabled();if(!a){return}var c=this.getChildControl("scrollbar-y",true);c.scrollBySteps(parseInt(b.getWheelDelta()));b.stop()},_startIframeObserver:function(){if(this.__iframeObserverId){this._stopIframeObserver()}var a=qx.event.Idle.getInstance();this.__iframeObserverId=a.addListener("interval",this._onIframeObserverInterval,this)},_stopIframeObserver:function(){this.__iframeSize=null;if(!this.__iframeObserverId){return}var a=qx.event.Idle.getInstance();a.removeListenerById(this.__iframeObserverId)},_onIframeObserverInterval:function(){var a=this._getIframeSize();if(!a){this._disableScollbars();return}if(this.__iframeSize&&a.width==this.__iframeSize.width&&a.height==this.__iframeSize.height){return}this.__iframeSize=a;this._preventIframeScrolling();this._updateScrollbars()},_preventIframeScrolling:function(){try{var c=this._getIframeElement().getWindow();var b=this._getIframeElement().getDocument();if(qx.bom.Document.isStandardMode(c)){b.documentElement.style.overflow="hidden"}else{b.body.style.overflow="hidden"}}catch(a){this._disableScollbars()}},_updateScrollbars:function(){var g=this.__iframeSize;var d=this.getChildControl("iframe").getBounds();var b=this.getChildControl("iframe").getInnerSize();if(!g||!b||!b){return}var e=false;var c=false;var a=this.getScrollbarX();var f=this.getScrollbarY();if(a==="auto"&&f==="auto"){var e=g.width>b.width;var c=g.height>b.height;if((e||c)&&!(e&&c)){if(e){c=g.height>d.height}else{if(c){e=g.width>d.width}}}}else{var e=a==="on";var c=f==="on";if(g.width>(e?d.width:b.width)&&a==="auto"){e=true}if(g.height>(e?d.height:b.height)&&f==="auto"){c=true}}this._configureScrollbar("scrollbar-x",e,b.width,g.width);this._configureScrollbar("scrollbar-y",c,b.height,g.height);this._updateCornerWidget()},_getIframeSize:function(){try{var c=this._getIframeElement().getWindow();var a={width:qx.bom.Document.getWidth(c),height:qx.bom.Document.getHeight(c)};return a}catch(b){return null}},_updateCornerWidget:function(){if(this._isChildControlVisible("scrollbar-x")&&this._isChildControlVisible("scrollbar-y")){this._showChildControl("corner")}else{this._excludeChildControl("corner")}},_configureScrollbar:function(e,a,d,c){if(!a){this._excludeChildControl(e);return}var b=this._showChildControl(e);if(d>=c){b.set({position:0,maximum:c,knobFactor:1,enabled:false})}else{b.setMaximum(1000000);b.set({position:Math.min(b.getPosition(),c),maximum:c-d,knobFactor:d/c,enabled:true})}},_onScrollBarX:function(a){this.scrollToX(a.getData())},_onScrollBarY:function(a){this.scrollToY(a.getData())},scrollToX:function(a){try{var c=this._getIframeElement().getWindow();c.scroll(a,qx.bom.Viewport.getScrollTop(c))}catch(b){this._disableScollbars()}},scrollToY:function(c){try{var b=this._getIframeElement().getWindow();b.scroll(qx.bom.Viewport.getScrollLeft(b),c)}catch(a){this._disableScollbars()}}},destruct:function(){this._stopIframeObserver();this.__iframeSize=null}});qx.Class.define("qx.ui.embed.Iframe",{extend:qx.ui.embed.AbstractIframe,construct:function(a){if(a!=null){this.__source=a}this.base(arguments,a);qx.event.Registration.addListener(document.body,"mousedown",this.block,this,true);qx.event.Registration.addListener(document.body,"mouseup",this.release,this,true);qx.event.Registration.addListener(document.body,"losecapture",this.release,this,true);this.__blockerElement=this._createBlockerElement();this.getContainerElement().add(this.__blockerElement);if((qx.core.Environment.get("engine.name")=="gecko")){this.addListenerOnce("appear",function(c){var b=this.getContainerElement().getDomElement();qx.bom.Event.addNativeListener(b,"DOMNodeInserted",this._onDOMNodeInserted)});this._onDOMNodeInserted=qx.lang.Function.listener(this._syncSourceAfterDOMMove,this)}},properties:{appearance:{refine:true,init:"iframe"},nativeContextMenu:{refine:true,init:false},nativeHelp:{check:"Boolean",init:false,apply:"_applyNativeHelp"},scrollbar:{check:["auto","no","yes"],nullable:true,themeable:true,apply:"_applyScrollbar"}},members:{__source:null,__blockerElement:null,renderLayout:function(f,e,d,a){this.base(arguments,f,e,d,a);var c="px";var b=this.getInsets();this.__blockerElement.setStyles({left:b.left+c,top:b.top+c,width:(d-b.left-b.right)+c,height:(a-b.top-b.bottom)+c})},_createContentElement:function(){var a=new qx.html.Iframe(this.__source);a.addListener("load",this._onIframeLoad,this);return a},_getIframeElement:function(){return this.getContentElement()},_createBlockerElement:function(){var a=new qx.html.Blocker();a.setStyles({zIndex:20,display:"none"});return a},_onIframeLoad:function(a){this._applyNativeContextMenu(this.getNativeContextMenu(),null);this._applyNativeHelp(this.getNativeHelp(),null);this.fireNonBubblingEvent("load")},block:function(){this.__blockerElement.setStyle("display","block")},release:function(){this.__blockerElement.setStyle("display","none")},_applyNativeContextMenu:function(c,a){if(c!==false&&a!==false){return}var f=this.getDocument();if(!f){return}try{var b=f.documentElement}catch(d){return}if(a===false){qx.event.Registration.removeListener(b,"contextmenu",this._onNativeContextMenu,this,true)}if(c===false){qx.event.Registration.addListener(b,"contextmenu",this._onNativeContextMenu,this,true)}},_onNativeContextMenu:function(a){a.preventDefault()},_applyNativeHelp:qx.core.Environment.select("engine.name",{mshtml:function(c,b){var a=this.getDocument();if(!a){return}try{if(b===false){qx.bom.Event.removeNativeListener(a,"help",qx.lang.Function.returnFalse)}if(c===false){qx.bom.Event.addNativeListener(a,"help",qx.lang.Function.returnFalse)}}catch(d){}},"default":function(){}}),_syncSourceAfterDOMMove:function(){var b=this.getContentElement().getDomElement();var a=b.src;if(a.charAt(a.length-1)=="/"){a=a.substring(0,a.length-1)}if(a!=this.getSource()){qx.bom.Iframe.getWindow(b).stop();b.src=this.getSource()}},_applyScrollbar:function(a){this.getContentElement().setAttribute("scrolling",a)}},destruct:function(){this._disposeObjects("__blockerElement");qx.event.Registration.removeListener(document.body,"mousedown",this.block,this,true);qx.event.Registration.removeListener(document.body,"mouseup",this.release,this,true);qx.event.Registration.removeListener(document.body,"losecapture",this.release,this,true)}});qx.Class.define("qx.html.Iframe",{extend:qx.html.Element,construct:function(b,c,a){this.base(arguments,"iframe",c,a);this.setSource(b);this.addListener("navigate",this.__onNavigate,this)},events:{load:"qx.event.type.Event",navigate:"qx.event.type.Data"},members:{_applyProperty:function(a,c){this.base(arguments,a,c);if(a=="source"){var b=this.getDomElement();var d=qx.bom.Iframe.queryCurrentUrl(b);if(c==d){return}qx.bom.Iframe.setSource(b,c)}},_createDomElement:function(){return qx.bom.Iframe.create(this._content)},getWindow:function(){var a=this.getDomElement();if(a){return qx.bom.Iframe.getWindow(a)}else{return null}},getDocument:function(){var a=this.getDomElement();if(a){return qx.bom.Iframe.getDocument(a)}else{return null}},getBody:function(){var a=this.getDomElement();if(a){return qx.bom.Iframe.getBody(a)}else{return null}},setSource:function(a){this._setProperty("source",a);return this},getSource:function(){return this._getProperty("source")},setName:function(a){this.setAttribute("name",a);return this},getName:function(){return this.getAttribute("name")},reload:function(){var b=this.getDomElement();if(b){var a=this.getSource();this.setSource(null);this.setSource(a)}},__onNavigate:function(b){var a=b.getData();if(a){this.setSource(a)}}}});qx.Class.define("qx.event.message.Bus",{type:"singleton",extend:qx.core.Object,statics:{getSubscriptions:function(){return this.getInstance().getSubscriptions()},subscribe:function(c,b,a){return this.getInstance().subscribe(c,b,a)},checkSubscription:function(c,b,a){return this.getInstance().checkSubscription(c,b,a)},unsubscribe:function(c,b,a){return this.getInstance().unsubscribe(c,b,a)},dispatch:function(a){return this.getInstance().dispatch.apply(this.getInstance(),arguments)},dispatchByName:function(a,b){return this.getInstance().dispatchByName.apply(this.getInstance(),arguments)}},construct:function(){this.__subscriptions={}},members:{__subscriptions:null,getSubscriptions:function(){return this.__subscriptions},subscribe:function(d,c,a){if(!d||typeof c!="function"){this.error("Invalid parameters! "+[d,c,a]);return false}var b=this.getSubscriptions();if(this.checkSubscription(d)){if(this.checkSubscription(d,c,a)){this.warn("Object method already subscribed to "+d);return false}b[d].push({subscriber:c,context:a||null});return true}else{b[d]=[{subscriber:c,context:a||null}];return true}},checkSubscription:function(e,d,b){var c=this.getSubscriptions();if(!c[e]||c[e].length===0){return false}if(d){for(var a=0;a<c[e].length;a++){if(c[e][a].subscriber===d&&c[e][a].context===(b||null)){return true}}return false}return true},unsubscribe:function(g,e,c){var d=this.getSubscriptions();var a=d[g];if(a){if(!c){c=null}var b=a.length;var f;do{f=a[--b];if(f.subscriber===e&&f.context===c){a.splice(b,1);if(a.length===0){d[g]=null;delete d[g]}return true}}while(b)}return false},dispatch:function(d){var b=this.getSubscriptions();var f=d.getName();var c=false;for(var a in b){var e=a.indexOf("*");if(e>-1){if(e===0||a.substr(0,e)===f.substr(0,e)){this.__callSubscribers(b[a],d);c=true}}else{if(a===f){this.__callSubscribers(b[f],d);c=true}}}return c},dispatchByName:function(a,c){var b=new qx.event.message.Message(a,c);return this.dispatch(b)},__callSubscribers:function(d,e){for(var b=0;b<d.length;b++){var c=d[b].subscriber;var a=d[b].context;if(a&&a.isDisposed){if(a.isDisposed()){d.splice(b,1);b--}else{c.call(a,e)}}else{c.call(a,e)}}}}});qx.Class.define("qx.event.message.Message",{extend:qx.core.Object,construct:function(a,b){this.base(arguments);if(a!=null){this.setName(a)}if(b!=null){this.setData(b)}},properties:{name:{check:"String"},data:{init:null,nullable:true},sender:{check:"Object"}}});qx.Interface.define("qx.ui.list.provider.IListProvider",{members:{createLayer:function(){},createItemRenderer:function(){},createGroupRenderer:function(){},styleSelectabled:function(a){},styleUnselectabled:function(a){},isSelectable:function(a){},setLabelPath:function(a){},setIconPath:function(a){},setLabelOptions:function(a){},setIconOptions:function(a){},setDelegate:function(a){},removeBindings:function(){}}});qx.Interface.define("qx.ui.virtual.core.IWidgetCellProvider",{members:{getCellWidget:function(b,a){},poolCellWidget:function(a){}}});qx.Mixin.define("qx.ui.list.core.MWidgetController",{construct:function(){this.__boundItems=[]},properties:{labelPath:{check:"String",nullable:true},iconPath:{check:"String",nullable:true},groupLabelPath:{check:"String",nullable:true},labelOptions:{nullable:true},iconOptions:{nullable:true},groupLabelOptions:{nullable:true},delegate:{event:"changeDelegate",init:null,nullable:true}},members:{__boundItems:null,bindDefaultProperties:function(b,a){if(b.getUserData("cell.type")!="group"){this.bindProperty("","model",null,b,a);this.bindProperty(this.getLabelPath(),"label",this.getLabelOptions(),b,a);if(this.getIconPath()!=null){this.bindProperty(this.getIconPath(),"icon",this.getIconOptions(),b,a)}}else{this.bindProperty(this.getGroupLabelPath(),"value",this.getGroupLabelOptions(),b,a)}},bindProperty:function(a,g,h,b,d){var e=b.getUserData("cell.type");var f=this.__getBindPath(d,a,e);var i=this._list;if(e=="group"){i=this._list._groups}var c=i.bind(f,b,g,h);this.__addBinding(b,c)},bindPropertyReverse:function(b,e,h,g,c){var d=g.getUserData("cell.type");var f=this.__getBindPath(c,b,d);var i=this._list;if(d=="group"){i=this._list._groups}var a=g.bind(e,i,f,h);this.__addBinding(g,a)},removeBindings:function(){while(this.__boundItems.length>0){var a=this.__boundItems.pop();this._removeBindingsFrom(a)}},_configureItem:function(b){var a=this.getDelegate();if(a!=null&&a.configureItem!=null){a.configureItem(b)}},_configureGroupItem:function(b){var a=this.getDelegate();if(a!=null&&a.configureGroupItem!=null){a.configureGroupItem(b)}},_bindItem:function(c,a){var b=this.getDelegate();if(b!=null&&b.bindItem!=null){b.bindItem(this,c,a)}else{this.bindDefaultProperties(c,a)}},_bindGroupItem:function(c,a){var b=this.getDelegate();if(b!=null&&b.bindGroupItem!=null){b.bindGroupItem(this,c,a)}else{this.bindDefaultProperties(c,a)}},_removeBindingsFrom:function(a){var d=this.__getBindings(a);while(d.length>0){var c=d.pop();try{this._list.removeBinding(c)}catch(b){try{this._list._groups.removeBinding(c)}catch(b){a.removeBinding(c)}}}if(qx.lang.Array.contains(this.__boundItems,a)){qx.lang.Array.remove(this.__boundItems,a)}},__getBindPath:function(a,c,b){var d="model["+a+"]";if(b=="group"){d="["+a+"]"}if(c!=null&&c!=""){d+="."+c}return d},__addBinding:function(a,c){var b=this.__getBindings(a);if(!qx.lang.Array.contains(b,c)){b.push(c)}if(!qx.lang.Array.contains(this.__boundItems,a)){this.__boundItems.push(a)}},__getBindings:function(a){var b=a.getUserData("BindingIds");if(b==null){b=[];a.setUserData("BindingIds",b)}return b}},destruct:function(){this.__boundItems=null}});qx.Class.define("qx.ui.list.provider.WidgetProvider",{extend:qx.core.Object,implement:[qx.ui.virtual.core.IWidgetCellProvider,qx.ui.list.provider.IListProvider],include:[qx.ui.list.core.MWidgetController],construct:function(a){this.base(arguments);this._list=a;this._itemRenderer=this.createItemRenderer();this._groupRenderer=this.createGroupRenderer();this._itemRenderer.addListener("created",this._onItemCreated,this);this._groupRenderer.addListener("created",this._onGroupItemCreated,this);this._list.addListener("changeDelegate",this._onChangeDelegate,this)},members:{_itemRenderer:null,_groupRenderer:null,getCellWidget:function(c,a){var b=null;if(!this._list._isGroup(c)){b=this._itemRenderer.getCellWidget();b.setUserData("cell.type","item");this._bindItem(b,this._list._lookup(c));if(this._list._manager.isItemSelected(c)){this._styleSelectabled(b)}else{this._styleUnselectabled(b)}}else{b=this._groupRenderer.getCellWidget();b.setUserData("cell.type","group");this._bindGroupItem(b,this._list._lookupGroup(c))}return b},poolCellWidget:function(a){this._removeBindingsFrom(a);if(a.getUserData("cell.type")=="item"){this._itemRenderer.pool(a)}else{if(a.getUserData("cell.type")=="group"){this._groupRenderer.pool(a)}}},createLayer:function(){return new qx.ui.virtual.layer.WidgetCell(this)},createItemRenderer:function(){var a=qx.util.Delegate.getMethod(this.getDelegate(),"createItem");if(a==null){a=function(){return new qx.ui.form.ListItem()}}var b=new qx.ui.virtual.cell.WidgetCell();b.setDelegate({createWidget:a});return b},createGroupRenderer:function(){var a=qx.util.Delegate.getMethod(this.getDelegate(),"createGroupItem");if(a==null){a=function(){var c=new qx.ui.basic.Label();c.setAppearance("group-item");return c}}var b=new qx.ui.virtual.cell.WidgetCell();b.setDelegate({createWidget:a});return b},styleSelectabled:function(b){var a=this.__getWidgetFrom(b);this._styleSelectabled(a)},styleUnselectabled:function(b){var a=this.__getWidgetFrom(b);this._styleUnselectabled(a)},isSelectable:function(b){if(this._list._isGroup(b)){return false}var a=this._list._layer.getRenderedCellWidget(b,0);if(a!=null){return a.isEnabled()}else{return true}},_styleSelectabled:function(a){this.__updateStates(a,{selected:1})},_styleUnselectabled:function(a){this.__updateStates(a,{})},_onItemCreated:function(a){var b=a.getData();this._configureItem(b)},_onGroupItemCreated:function(a){var b=a.getData();this._configureGroupItem(b)},_onChangeDelegate:function(a){this._itemRenderer.dispose();this._itemRenderer=this.createItemRenderer();this._itemRenderer.addListener("created",this._onItemCreated,this);this._groupRenderer.dispose();this._groupRenderer=this.createGroupRenderer();this._groupRenderer.addListener("created",this._onGroupItemCreated,this);this.removeBindings();this._list.getPane().fullUpdate()},__getWidgetFrom:function(a){return this._list._layer.getRenderedCellWidget(a,0)},__updateStates:function(b,a){if(b==null){return}this._itemRenderer.updateStates(b,a)}},destruct:function(){this._itemRenderer.dispose();this._groupRenderer.dispose();this._itemRenderer=this._groupRenderer=null}});qx.Class.define("qx.ui.virtual.layer.Abstract",{extend:qx.ui.core.Widget,type:"abstract",implement:[qx.ui.virtual.core.ILayer],construct:function(){this.base(arguments);this.__jobs={}},properties:{anonymous:{refine:true,init:true}},members:{__jobs:null,__arguments:null,__firstRow:null,__firstColumn:null,__rowSizes:null,__columnSizes:null,getFirstRow:function(){return this.__firstRow},getFirstColumn:function(){return this.__firstColumn},getRowSizes:function(){return this.__rowSizes||[]},getColumnSizes:function(){return this.__columnSizes||[]},syncWidget:function(){if(!this.getContentElement().getDomElement()){return}if(this.__jobs.fullUpdate||this.__jobs.updateLayerWindow&&this.__jobs.updateLayerData){this._fullUpdate.apply(this,this.__arguments)}else{if(this.__jobs.updateLayerWindow){this._updateLayerWindow.apply(this,this.__arguments)}else{if(this.__jobs.updateLayerData&&this.__rowSizes){this._updateLayerData()}}}if(this.__jobs.fullUpdate||this.__jobs.updateLayerWindow){var a=this.__arguments;this.__firstRow=a[0];this.__firstColumn=a[1];this.__rowSizes=a[2];this.__columnSizes=a[3]}this.__jobs={}},_updateLayerData:function(){this._fullUpdate(this.__firstRow,this.__firstColumn,this.__rowSizes,this.__columnSizes)},_fullUpdate:function(d,c,a,b){throw new Error("Abstract method '_fullUpdate' called!")},_updateLayerWindow:function(d,c,a,b){this._fullUpdate(d,c,a,b)},updateLayerData:function(){this.__jobs.updateLayerData=true;qx.ui.core.queue.Widget.add(this)},fullUpdate:function(d,c,a,b){this.__arguments=arguments;this.__jobs.fullUpdate=true;qx.ui.core.queue.Widget.add(this)},updateLayerWindow:function(d,c,a,b){this.__arguments=arguments;this.__jobs.updateLayerWindow=true;qx.ui.core.queue.Widget.add(this)}},destruct:function(){this.__jobs=this.__arguments=this.__rowSizes=this.__columnSizes=null}});qx.Class.define("qx.ui.virtual.layer.WidgetCell",{extend:qx.ui.virtual.layer.Abstract,include:[qx.ui.core.MChildrenHandling],construct:function(a){this.base(arguments);this.setZIndex(2);if(qx.core.Environment.get("qx.debug")){this.assertInterface(a,qx.ui.virtual.core.IWidgetCellProvider)}this._cellProvider=a;this.__spacerPool=[]},properties:{anonymous:{refine:true,init:false}},events:{updated:"qx.event.type.Event"},members:{__spacerPool:null,getRenderedCellWidget:function(g,b){var e=this.getColumnSizes().length;var a=this.getRowSizes().length;var f=this.getFirstRow();var d=this.getFirstColumn();if(g<f||g>=f+a||b<d||b>=d+e){return null}var h=(b-d)+(g-f)*e;var c=this._getChildren()[h];if(c.getUserData("cell.empty")){return null}else{return c}},_getSpacer:function(){var a=this.__spacerPool.pop();if(!a){a=new qx.ui.core.Spacer();a.setUserData("cell.empty",1)}return a},_activateNotEmptyChild:function(d){var c=qx.ui.core.FocusHandler.getInstance().getActiveWidget();if(c==d||qx.ui.core.Widget.contains(d,c)){var b=this._getChildren();for(var a=b.length-1;a>=0;a--){if(!b[a].getUserData("cell.empty")){b[a].activate();break}}}},_fullUpdate:function(g,j,d,a){var n=this._cellProvider;var c=this._getChildren();for(var h=0;h<c.length;h++){var b=c[h];if(b.getUserData("cell.empty")){this.__spacerPool.push(b)}else{this._activateNotEmptyChild(b);n.poolCellWidget(b)}}this._removeAll();var l=0;var e=0;for(var k=0;k<d.length;k++){for(var m=0;m<a.length;m++){var p=g+k;var f=j+m;var o=n.getCellWidget(p,f)||this._getSpacer();o.setUserBounds(e,l,a[m],d[k]);o.setUserData("cell.row",p);o.setUserData("cell.column",f);this._add(o);e+=a[m]}l+=d[k];e=0}this.fireEvent("updated")},_updateLayerWindow:function(b,w,e,q){if(qx.core.Environment.get("qx.debug")){this.assertPositiveInteger(b);this.assertPositiveInteger(w);this.assertArray(e);this.assertArray(q)}var r=b+e.length-1;var l=w+q.length-1;var a={firstRow:Math.max(b,this.getFirstRow()),lastRow:Math.min(r,this._lastRow),firstColumn:Math.max(w,this.getFirstColumn()),lastColumn:Math.min(l,this._lastColumn)};this._lastColumn=l;this._lastRow=r;if(a.firstRow>a.lastRow||a.firstColumn>a.lastColumn){return this._fullUpdate(b,w,e,q)}var g=this._getChildren();var t=this.getColumnSizes().length;var s=[];var n={};for(var j=b;j<=r;j++){s[j]=[];for(var d=w;d<=l;d++){if(j>=a.firstRow&&j<=a.lastRow&&d>=a.firstColumn&&d<=a.lastColumn){var o=d-this.getFirstColumn();var m=j-this.getFirstRow();var k=m*t+o;s[j][d]=g[k];n[k]=true}}}var c=this._cellProvider;var g=this._getChildren();for(var u=0;u<g.length;u++){if(!n[u]){var h=g[u];if(h.getUserData("cell.empty")){this.__spacerPool.push(h)}else{this._activateNotEmptyChild(h);c.poolCellWidget(h)}}}this._removeAll();var p=0;var f=0;for(var m=0;m<e.length;m++){for(var o=0;o<q.length;o++){var j=b+m;var d=w+o;var v=s[j][d]||c.getCellWidget(j,d)||this._getSpacer();v.setUserBounds(f,p,q[o],e[m]);v.setUserData("cell.row",j);v.setUserData("cell.column",d);this._add(v);f+=q[o]}p+=e[m];f=0}this.fireEvent("updated")}},destruct:function(){var b=this._getChildren();for(var a=0;a<b.length;a++){b[a].dispose()}this._cellProvider=this.__spacerPool=null}});qx.Class.define("qx.util.Delegate",{statics:{getMethod:function(b,a){if(qx.util.Delegate.containsMethod(b,a)){return b[a]}return null},containsMethod:function(c,b){var a=qx.lang.Type;if(a.isObject(c)){return a.isFunction(c[b])}return false}}});qx.Interface.define("qx.ui.form.IModel",{events:{changeModel:"qx.event.type.Data"},members:{setModel:function(a){},getModel:function(){},resetModel:function(){}}});qx.Mixin.define("qx.ui.form.MModelProperty",{properties:{model:{nullable:true,event:"changeModel",dereference:true}}});qx.Class.define("qx.ui.form.ListItem",{extend:qx.ui.basic.Atom,implement:[qx.ui.form.IModel],include:[qx.ui.form.MModelProperty],construct:function(b,c,a){this.base(arguments,b,c);if(a!=null){this.setModel(a)}this.addListener("mouseover",this._onMouseOver,this);this.addListener("mouseout",this._onMouseOut,this)},events:{action:"qx.event.type.Event"},properties:{appearance:{refine:true,init:"listitem"}},members:{_forwardStates:{focused:true,hovered:true,selected:true,dragover:true},_onMouseOver:function(){this.addState("hovered")},_onMouseOut:function(){this.removeState("hovered")}},destruct:function(){this.removeListener("mouseover",this._onMouseOver,this);this.removeListener("mouseout",this._onMouseOut,this)}});qx.Interface.define("qx.ui.virtual.cell.IWidgetCell",{members:{getCellWidget:function(b,a){},pool:function(a){},updateStates:function(b,a){},updateData:function(b,a){}}});qx.Class.define("qx.ui.virtual.cell.AbstractWidget",{extend:qx.core.Object,implement:[qx.ui.virtual.cell.IWidgetCell],construct:function(){this.base(arguments);this.__pool=[]},events:{created:"qx.event.type.Data"},members:{__pool:null,_createWidget:function(){throw new Error("abstract method call")},updateData:function(b,a){throw new Error("abstract method call")},updateStates:function(e,b){var a=e.getUserData("cell.states");if(a){var c=b||{};for(var d in a){if(!c[d]){e.removeState(d)}}}else{a={}}if(b){for(var d in b){if(!a.state){e.addState(d)}}}e.setUserData("cell.states",b)},getCellWidget:function(c,a){var b=this.__getWidgetFromPool();this.updateStates(b,a);this.updateData(b,c);return b},pool:function(a){this.__pool.push(a)},_cleanupPool:function(){var a=this.__pool.pop();while(a){a.destroy();a=this.__pool.pop()}},__getWidgetFromPool:function(){var a=this.__pool.pop();if(a==null){a=this._createWidget();this.fireDataEvent("created",a)}return a}},destruct:function(){this.__pool=null}});qx.Class.define("qx.ui.virtual.cell.WidgetCell",{extend:qx.ui.virtual.cell.AbstractWidget,properties:{delegate:{apply:"_applyDelegate",init:null,nullable:true}},members:{_applyDelegate:function(b,a){this._cleanupPool()},_createWidget:function(){var a=this.getDelegate();if(a!=null&&a.createWidget!=null){return a.createWidget()}else{return new qx.ui.core.Widget()}},updateData:function(c,b){for(var a in b){if(qx.Class.hasProperty(c.constructor,a)){qx.util.PropertyUtil.setUserValue(c,a,b[a])}else{throw new Error("Can't update data! The key '"+a+"' is not a Property!")}}}}});qx.Class.define("qx.ui.form.core.AbstractVirtualBox",{extend:qx.ui.core.Widget,include:qx.ui.form.MForm,implement:qx.ui.form.IForm,type:"abstract",construct:function(a){this.base(arguments);var b=new qx.ui.layout.HBox();this._setLayout(b);b.setAlignY("middle");this.addListener("keypress",this._handleKeyboard,this);this.addListener("click",this._handleMouse,this);this.addListener("blur",this._onBlur,this);this.addListener("resize",this._onResize,this);this._createChildControl("dropdown");if(a!=null){this.initModel(a)}else{this.initModel(new qx.data.Array())}},properties:{focusable:{refine:true,init:true},width:{refine:true,init:120},model:{check:"qx.data.Array",apply:"_applyModel",event:"changeModel",nullable:false,deferredInit:true},delegate:{apply:"_applyDelegate",event:"changeDelegate",init:null,nullable:true},labelPath:{check:"String",apply:"_applyLabelPath",event:"changeLabelPath",nullable:true},labelOptions:{apply:"_applyLabelOptions",event:"changeLabelOptions",nullable:true},iconPath:{check:"String",event:"changeIconPath",apply:"_applyIconPath",nullable:true},iconOptions:{apply:"_applyIconOptions",event:"changeIconOptions",nullable:true},itemHeight:{check:"Integer",init:25,apply:"_applyRowHeight",themeable:true},maxListHeight:{check:"Number",apply:"_applyMaxListHeight",nullable:true,init:200}},members:{_forwardStates:{focused:true},open:function(){this._beforeOpen();this.getChildControl("dropdown").open()},close:function(){this._beforeClose();this.getChildControl("dropdown").close()},toggle:function(){var a=this.getChildControl("dropdown");if(a.isVisible()){this.close()}else{this.open()}},_createChildControlImpl:function(c,b){var a;switch(c){case"dropdown":a=new qx.ui.form.core.VirtualDropDownList(this);break}return a||this.base(arguments,c,b)},_beforeOpen:function(){},_beforeClose:function(){},_getAction:function(c){var d=c.getKeyIdentifier();var a=this.getChildControl("dropdown").isVisible();var b=this._isModifierPressed(c);if(!a&&!b&&(d==="Down"||d==="Up")){return"open"}else{if(a&&!b&&d==="Escape"){return"close"}else{return null}}},_getBindPath:function(a,b){var c=a+"[0]";if(b!=null&&b!=""){c+="."+b}return c},_isModifierPressed:function(c){var e=c.isAltPressed();var d=c.isCtrlOrCommandPressed();var b=c.isShiftPressed();var a=c.isMetaPressed();return(e||d||b||a)},_onBlur:function(a){this.close()},_handleKeyboard:function(b){var c=this._getAction(b);var a=this.getChildControl("dropdown").isVisible();switch(c){case"open":this.open();break;case"close":this.close();break;default:if(a){this.getChildControl("dropdown")._handleKeyboard(b)}break}},_handleMouse:function(a){},_onResize:function(a){this.getChildControl("dropdown").setMinWidth(a.getData().width)},_applyModel:function(b,a){this.getChildControl("dropdown").getChildControl("list").setModel(b);qx.ui.core.queue.Widget.add(this)},_applyDelegate:function(b,a){this.getChildControl("dropdown").getChildControl("list").setDelegate(b)},_applyLabelPath:function(b,a){this.getChildControl("dropdown").getChildControl("list").setLabelPath(b);qx.ui.core.queue.Widget.add(this)},_applyLabelOptions:function(b,a){this.getChildControl("dropdown").getChildControl("list").setLabelOptions(b);qx.ui.core.queue.Widget.add(this)},_applyIconPath:function(b,a){this.getChildControl("dropdown").getChildControl("list").setIconPath(b);qx.ui.core.queue.Widget.add(this)},_applyIconOptions:function(b,a){this.getChildControl("dropdown").getChildControl("list").setIconOptions(b);qx.ui.core.queue.Widget.add(this)},_applyRowHeight:function(b,a){this.getChildControl("dropdown").getChildControl("list").setRowHeight(b)},_applyMaxListHeight:function(b,a){this.getChildControl("dropdown").getChildControl("list").setMaxHeight(b)}}});qx.Class.define("qx.ui.form.VirtualSelectBox",{extend:qx.ui.form.core.AbstractVirtualBox,construct:function(a){this.base(arguments,a);this._createChildControl("atom");this._createChildControl("spacer");this._createChildControl("arrow");this.addListener("mouseover",this._onMouseOver,this);this.addListener("mouseout",this._onMouseOut,this);this.__bindings=[];this.initSelection(this.getChildControl("dropdown").getSelection());this.__searchTimer=new qx.event.Timer(500);this.__searchTimer.addListener("interval",this.__preselect,this)},properties:{appearance:{refine:true,init:"virtual-selectbox"},width:{refine:true,init:120},selection:{check:"qx.data.Array",event:"changeSelection",apply:"_applySelection",nullable:false,deferredInit:true}},members:{__searchValue:"",__searchTimer:null,__bindings:null,syncWidget:function(){this._removeBindings();this._addBindings()},_createChildControlImpl:function(c,b){var a;switch(c){case"spacer":a=new qx.ui.core.Spacer();this._add(a,{flex:1});break;case"atom":a=new qx.ui.form.ListItem("");a.setCenter(false);a.setAnonymous(true);this._add(a,{flex:1});break;case"arrow":a=new qx.ui.basic.Image();a.setAnonymous(true);this._add(a);break}return a||this.base(arguments,c,b)},_getAction:function(c){var d=c.getKeyIdentifier();var a=this.getChildControl("dropdown").isVisible();var b=this._isModifierPressed(c);if(!a&&!b&&(d==="Enter"||d==="Space")){return"open"}else{if(a&&c.isPrintable()){return"search"}else{return this.base(arguments,c)}}},_addBindings:function(){var d=this.getChildControl("atom");var c=this._getBindPath("selection","");var e=this.bind(c,d,"model",null);this.__bindings.push(e);var b=this._getBindPath("selection",this.getLabelPath());e=this.bind(b,d,"label",this.getLabelOptions());this.__bindings.push(e);if(this.getIconPath()!=null){var a=this._getBindPath("selection",this.getIconPath());e=this.bind(a,d,"icon",this.getIconOptions());this.__bindings.push(e)}},_removeBindings:function(){while(this.__bindings.length>0){var a=this.__bindings.pop();this.removeBinding(a)}},_handleMouse:function(b){this.base(arguments,b);var a=b.getType();if(a==="click"){this.toggle()}},_handleKeyboard:function(a){var b=this._getAction(a);switch(b){case"search":this.__searchValue+=this.__convertKeyIdentifier(a.getKeyIdentifier());this.__searchTimer.restart();break;default:this.base(arguments,a);break}},_onMouseOver:function(a){if(!this.isEnabled()||a.getTarget()!==this){return}if(this.hasState("abandoned")){this.removeState("abandoned");this.addState("pressed")}this.addState("hovered")},_onMouseOut:function(a){if(!this.isEnabled()||a.getTarget()!==this){return}this.removeState("hovered");if(this.hasState("pressed")){this.removeState("pressed");this.addState("abandoned")}},_applySelection:function(b,a){this.getChildControl("dropdown").setSelection(b);qx.ui.core.queue.Widget.add(this)},__preselect:function(){this.__searchTimer.stop();var a=this.__searchValue;if(a==null||a==""){return}var f=this.getModel();var g=this.getChildControl("dropdown").getChildControl("list");var j=g.getSelection();var b=g._getLookupTable().length;var k=f.indexOf(j.getItem(0));var l=g._reverseLookup(k);for(var d=1;d<=b;d++){var n=(d+l)%b;var m=f.getItem(g._lookup(n));var h=m;if(this.getLabelPath()!=null){h=qx.data.SingleValueBinding.getValueFromObject(m,this.getLabelPath());var e=this.getLabelOptions();if(e!=null){var c=qx.util.Delegate.getMethod(e,"converter");if(c!=null){h=c(h,m)}}}if(qx.lang.String.startsWith(h.toLowerCase(),a.toLowerCase())){j.push(m);break}}this.__searchValue=""},__convertKeyIdentifier:function(a){if(a==="Space"){return" "}else{return a}}},destruct:function(){this._removeBindings();this.__searchTimer.removeListener("interval",this.__preselect,this);this.__searchTimer.dispose();this.__searchTimer==null}});qx.Class.define("qx.ui.form.core.VirtualDropDownList",{extend:qx.ui.popup.Popup,construct:function(a){qx.core.Assert.assertNotNull(a,"Invalid parameter 'target'!");qx.core.Assert.assertNotUndefined(a,"Invalid parameter 'target'!");qx.core.Assert.assertInterface(a,qx.ui.form.core.AbstractVirtualBox,"Invalid parameter 'target'!");this.base(arguments,new qx.ui.layout.VBox());this._target=a;this._createChildControl("list");this.addListener("changeVisibility",this.__onChangeVisibility,this);this.initSelection(new qx.data.Array())},properties:{autoHide:{refine:true,init:false},keepActive:{refine:true,init:true},selection:{check:"qx.data.Array",event:"changeSelection",apply:"_applySelection",nullable:false,deferredInit:true}},members:{_target:null,_preselected:null,__ignoreSelection:false,__ignoreListSelection:false,open:function(){this.placeToWidget(this._target,true);this.show()},close:function(){this.hide()},setPreselected:function(b){this._preselected=b;this.__ignoreListSelection=true;var a=this.getChildControl("list").getSelection();this.__synchronizeSelection(new qx.data.Array([b]),a);this.__ignoreListSelection=false},_createChildControlImpl:function(c,b){var a;switch(c){case"list":a=new qx.ui.list.List().set({focusable:false,keepFocus:true,height:null,width:null,maxHeight:this._target.getMaxListHeight(),selectionMode:"one",quickSelection:true});a.getSelection().addListener("change",this._onListChangeSelection,this);a.addListener("mouseup",this._handleMouse,this);a.addListener("changeModel",this._onChangeModel,this);a.addListener("changeDelegate",this._onChangeDelegate,this);this.add(a,{flex:1});break}return a||this.base(arguments,c,b)},_handleKeyboard:function(a){if(this.isVisible()&&a.getKeyIdentifier()==="Enter"){this.__selectPreselected();return}var b=a.clone();b.setTarget(this.getChildControl("list"));b.setBubbles(false);this.getChildControl("list").dispatchEvent(b)},_handleMouse:function(a){this.__selectPreselected()},__onChangeSelection:function(c){if(this.__ignoreSelection){return}var b=this.getSelection();var a=this.getChildControl("list").getSelection();this.__ignoreListSelection=true;this.__synchronizeSelection(b,a);this.__ignoreListSelection=false;this.__ignoreSelection=true;this.__synchronizeSelection(a,b);this.__ignoreSelection=false},_onListChangeSelection:function(b){if(this.__ignoreListSelection){return}var a=this.getChildControl("list").getSelection();if(this.isVisible()){this.setPreselected(a.getItem(0))}else{this.__ignoreSelection=true;this.__synchronizeSelection(a,this.getSelection());this.__ignoreSelection=false}},__onChangeVisibility:function(c){if(this.isVisible()){if(this._preselected==null){var b=this.getSelection();var a=this.getChildControl("list").getSelection();this.__synchronizeSelection(b,a)}this.__adjustSize()}else{this.setPreselected(null)}},_onChangeModel:function(a){this.getSelection().removeAll()},_onChangeDelegate:function(a){this.getSelection().removeAll()},_applySelection:function(b,a){b.addListener("change",this.__onChangeSelection,this);if(a!=null){a.removeListener("change",this.__onChangeSelection,this)}this.__synchronizeSelection(b,this.getChildControl("list").getSelection(b))},__selectPreselected:function(){if(this._preselected!=null){var a=this.getSelection();a.splice(0,1,this._preselected);this._preselected=null;this.close()}},__synchronizeSelection:function(c,d){if(c.equals(d)){return}if(c.getLength()<=0){d.removeAll()}else{var b=d.toArray();qx.lang.Array.removeAll(b);for(var a=0;a<c.getLength();a++){b.push(c.getItem(a))}d.length=b.length;var e=d.getLength()-1;d.splice(e,1,d.getItem(e))}},__adjustSize:function(){this.__adjustWidth();this.__adjustHeight()},__adjustWidth:function(){var a=this._target.getBounds().width;this.setWidth(a)},__adjustHeight:function(){var b=this.__getAvailableHeigth();var a=this._target.getMaxListHeight();var c=this.getChildControl("list");var d=c.getPane().getRowConfig().getTotalSize();if(a==null||d<a){a=d}if(a>b){c.setMaxHeight(b)}else{if(a<b){c.setMaxHeight(a)}}},__getAvailableHeigth:function(){var d=this.getLayoutLocation(this._target);var c=qx.bom.Viewport.getHeight();var a=d.top;var b=c-d.bottom;return a>b?a:b}}});qx.Mixin.define("qx.ui.list.core.MSelectionHandling",{construct:function(){this._initSelectionManager();this.initSelection(new qx.data.Array())},properties:{selection:{check:"qx.data.Array",event:"changeSelection",apply:"_applySelection",nullable:false,deferredInit:true},selectionMode:{check:["single","multi","additive","one"],init:"single",apply:"_applySelectionMode"},dragSelection:{check:"Boolean",init:false,apply:"_applyDragSelection"},quickSelection:{check:"Boolean",init:false,apply:"_applyQuickSelection"}},members:{_manager:null,__ignoreChangeSelection:false,__ignoreManagerChangeSelection:false,_initSelectionManager:function(){var a=this;var b={isItemSelectable:function(c){return a._provider.isSelectable(c)},styleSelectable:function(e,c,d){if(c!="selected"){return}if(d){a._provider.styleSelectabled(e)}else{a._provider.styleUnselectabled(e)}}};this._manager=new qx.ui.virtual.selection.Row(this.getPane(),b);this._manager.attachMouseEvents(this.getPane());this._manager.attachKeyEvents(this);this._manager.addListener("changeSelection",this._onManagerChangeSelection,this);this._manager._applyDefaultSelection()},_applySelection:function(b,a){b.addListener("change",this._onChangeSelection,this);if(a!=null){a.removeListener("change",this._onChangeSelection,this)}this._onChangeSelection()},_applySelectionMode:function(b,a){this._manager.setMode(b)},_applyDragSelection:function(b,a){this._manager.setDrag(b)},_applyQuickSelection:function(b,a){this._manager.setQuick(b)},_onChangeSelection:function(g){if(this.__ignoreManagerChangeSelection==true){return}this.__ignoreChangeSelection=true;var d=this.getSelection();var a=[];for(var c=0;c<d.getLength();c++){var f=d.getItem(c);var b=this.getModel().indexOf(f);var h=this._reverseLookup(b);if(h>=0){a.push(h)}}try{this._manager.replaceSelection(a)}catch(g){this._manager.selectItem(a[a.length-1])}this.__synchronizeSelection();this.__ignoreChangeSelection=false},_onManagerChangeSelection:function(c){if(this.__ignoreChangeSelection==true){return}var b=this.getSelection();var a=c.getData();this.__ignoreManagerChangeSelection=true;this.__synchronizeSelection();if(b.getLength()>0){var d=b.getLength()-1;b.splice(d,1,this._getDataFromRow(a[d]))}else{b.removeAll()}this.__ignoreManagerChangeSelection=false},__synchronizeSelection:function(){var b=this.getSelection();var a=b.toArray();var c=this._manager.getSelection();qx.lang.Array.removeAll(a);for(var d=0;d<c.length;d++){a.push(this._getDataFromRow(c[d]))}b.length=a.length},_applyDefaultSelection:function(){if(this._manager!=null){this._manager._applyDefaultSelection()}}},destruct:function(){this._manager.dispose();this._manager=null}});qx.Class.define("qx.ui.core.scroll.AbstractScrollArea",{extend:qx.ui.core.Widget,include:qx.ui.core.scroll.MScrollBarFactory,type:"abstract",construct:function(){this.base(arguments);var a=new qx.ui.layout.Grid();a.setColumnFlex(0,1);a.setRowFlex(0,1);this._setLayout(a);this.addListener("mousewheel",this._onMouseWheel,this);if(qx.core.Environment.get("event.touch")){this.addListener("touchmove",this._onTouchMove,this);this.addListener("touchstart",function(){this.__old={x:0,y:0}},this);this.__old={};this.__impulseTimerId={}}},properties:{appearance:{refine:true,init:"scrollarea"},width:{refine:true,init:100},height:{refine:true,init:200},scrollbarX:{check:["auto","on","off"],init:"auto",themeable:true,apply:"_computeScrollbars"},scrollbarY:{check:["auto","on","off"],init:"auto",themeable:true,apply:"_computeScrollbars"},scrollbar:{group:["scrollbarX","scrollbarY"]}},members:{__old:null,__impulseTimerId:null,_createChildControlImpl:function(c,b){var a;switch(c){case"pane":a=new qx.ui.core.scroll.ScrollPane();a.addListener("update",this._computeScrollbars,this);a.addListener("scrollX",this._onScrollPaneX,this);a.addListener("scrollY",this._onScrollPaneY,this);this._add(a,{row:0,column:0});break;case"scrollbar-x":a=this._createScrollBar("horizontal");a.setMinWidth(0);a.exclude();a.addListener("scroll",this._onScrollBarX,this);a.addListener("changeVisibility",this._onChangeScrollbarXVisibility,this);this._add(a,{row:1,column:0});break;case"scrollbar-y":a=this._createScrollBar("vertical");a.setMinHeight(0);a.exclude();a.addListener("scroll",this._onScrollBarY,this);a.addListener("changeVisibility",this._onChangeScrollbarYVisibility,this);this._add(a,{row:0,column:1});break;case"corner":a=new qx.ui.core.Widget();a.setWidth(0);a.setHeight(0);a.exclude();this._add(a,{row:1,column:1});break}return a||this.base(arguments,c)},getPaneSize:function(){return this.getChildControl("pane").getInnerSize()},getItemTop:function(a){return this.getChildControl("pane").getItemTop(a)},getItemBottom:function(a){return this.getChildControl("pane").getItemBottom(a)},getItemLeft:function(a){return this.getChildControl("pane").getItemLeft(a)},getItemRight:function(a){return this.getChildControl("pane").getItemRight(a)},scrollToX:function(a){qx.ui.core.queue.Manager.flush();this.getChildControl("scrollbar-x").scrollTo(a)},scrollByX:function(a){qx.ui.core.queue.Manager.flush();this.getChildControl("scrollbar-x").scrollBy(a)},getScrollX:function(){var a=this.getChildControl("scrollbar-x",true);return a?a.getPosition():0},scrollToY:function(a){qx.ui.core.queue.Manager.flush();this.getChildControl("scrollbar-y").scrollTo(a)},scrollByY:function(a){qx.ui.core.queue.Manager.flush();this.getChildControl("scrollbar-y").scrollBy(a)},getScrollY:function(){var a=this.getChildControl("scrollbar-y",true);return a?a.getPosition():0},_onScrollBarX:function(a){this.getChildControl("pane").scrollToX(a.getData())},_onScrollBarY:function(a){this.getChildControl("pane").scrollToY(a.getData())},_onScrollPaneX:function(a){this.scrollToX(a.getData())},_onScrollPaneY:function(a){this.scrollToY(a.getData())},_onMouseWheel:function(f){var d=this._isChildControlVisible("scrollbar-x");var c=this._isChildControlVisible("scrollbar-y");var h=(c)?this.getChildControl("scrollbar-y",true):(d?this.getChildControl("scrollbar-x",true):null);if(h){var g=parseInt(f.getWheelDelta());h.scrollBySteps(g);var b=h.getPosition();var a=h.getMaximum();if(g<0&&b<=0||g>0&&b>=a){return}f.stop()}},_onTouchMove:function(a){this._onTouchMoveDirectional("x",a);this._onTouchMoveDirectional("y",a);a.stop()},_onTouchMoveDirectional:function(b,d){var c=(b=="x"?"Left":"Top");var g=this.getChildControl("scrollbar-"+b,true);var a=this._isChildControlVisible("scrollbar-"+b);if(a&&g){if(this.__old[b]==0){var f=0}else{var f=-(d["getDocument"+c]()-this.__old[b])}this.__old[b]=d["getDocument"+c]();g.scrollBy(f);if(this.__impulseTimerId[b]){clearTimeout(this.__impulseTimerId[b]);this.__impulseTimerId[b]=null}this.__impulseTimerId[b]=setTimeout(qx.lang.Function.bind(function(e){this.__handleScrollImpulse(e,b)},this,f),100)}},__handleScrollImpulse:function(d,b){this.__impulseTimerId[b]=null;var a=this._isChildControlVisible("scrollbar-"+b);if(d==0||!a){return}if(d>0){d=Math.max(0,d-3)}else{d=Math.min(0,d+3)}this.__impulseTimerId[b]=setTimeout(qx.lang.Function.bind(function(f,e){this.__handleScrollImpulse(f,e)},this,d,b),20);var c=this.getChildControl("scrollbar-"+b,true);c.scrollBy(d)},_onChangeScrollbarXVisibility:function(c){var b=this._isChildControlVisible("scrollbar-x");var a=this._isChildControlVisible("scrollbar-y");if(!b){this.scrollToX(0)}b&&a?this._showChildControl("corner"):this._excludeChildControl("corner")},_onChangeScrollbarYVisibility:function(c){var b=this._isChildControlVisible("scrollbar-x");var a=this._isChildControlVisible("scrollbar-y");if(!a){this.scrollToY(0)}b&&a?this._showChildControl("corner"):this._excludeChildControl("corner")},_computeScrollbars:function(){var c=this.getChildControl("pane");var d=c.getChildren()[0];if(!d){this._excludeChildControl("scrollbar-x");this._excludeChildControl("scrollbar-y");return}var f=this.getInnerSize();var j=c.getInnerSize();var b=c.getScrollSize();if(!j||!b){return}var h=this.getScrollbarX();var e=this.getScrollbarY();if(h==="auto"&&e==="auto"){var i=b.width>f.width;var g=b.height>f.height;if((i||g)&&!(i&&g)){if(i){g=b.height>j.height}else{if(g){i=b.width>j.width}}}}else{var i=h==="on";var g=e==="on";if(b.width>(i?j.width:f.width)&&h==="auto"){i=true}if(b.height>(i?j.height:f.height)&&e==="auto"){g=true}}if(i){var a=this.getChildControl("scrollbar-x");a.show();a.setMaximum(Math.max(0,b.width-j.width));a.setKnobFactor((b.width===0)?0:j.width/b.width)}else{this._excludeChildControl("scrollbar-x")}if(g){var k=this.getChildControl("scrollbar-y");k.show();k.setMaximum(Math.max(0,b.height-j.height));k.setKnobFactor((b.height===0)?0:j.height/b.height)}else{this._excludeChildControl("scrollbar-y")}}}});qx.Class.define("qx.ui.virtual.core.Scroller",{extend:qx.ui.core.scroll.AbstractScrollArea,construct:function(b,d,a,c){this.base(arguments);this.__pane=new qx.ui.virtual.core.Pane(b,d,a,c);this.__pane.addListener("update",this._computeScrollbars,this);this.__pane.addListener("scrollX",this._onScrollPaneX,this);this.__pane.addListener("scrollY",this._onScrollPaneY,this);this._add(this.__pane,{row:0,column:0})},properties:{width:{refine:true,init:null},height:{refine:true,init:null}},members:{__pane:null,getPane:function(){return this.__pane},_createChildControlImpl:function(b,a){if(b=="pane"){return this.__pane}else{return this.base(arguments,b)}},getItemTop:function(a){throw new Error("The method 'getItemTop' is not implemented!")},getItemBottom:function(a){throw new Error("The method 'getItemBottom' is not implemented!")},getItemLeft:function(a){throw new Error("The method 'getItemLeft' is not implemented!")},getItemRight:function(a){throw new Error("The method 'getItemRight' is not implemented!")},_onScrollBarX:function(a){this.__pane.setScrollX(a.getData())},_onScrollBarY:function(a){this.__pane.setScrollY(a.getData())}},destruct:function(){this.__pane.dispose();this.__pane=null}});qx.Class.define("qx.ui.list.List",{extend:qx.ui.virtual.core.Scroller,include:[qx.ui.list.core.MSelectionHandling],construct:function(a){this.base(arguments,0,1,20,100);this._init();if(a!=null){this.initModel(a)}else{this.initModel(new qx.data.Array())}this.initItemHeight()},properties:{appearance:{refine:true,init:"virtual-list"},focusable:{refine:true,init:true},width:{refine:true,init:100},height:{refine:true,init:200},model:{check:"qx.data.Array",apply:"_applyModel",event:"changeModel",nullable:false,deferredInit:true},itemHeight:{check:"Integer",init:25,apply:"_applyRowHeight",themeable:true},labelPath:{check:"String",apply:"_applyLabelPath",nullable:true},iconPath:{check:"String",apply:"_applyIconPath",nullable:true},groupLabelPath:{check:"String",apply:"_applyGroupLabelPath",nullable:true},labelOptions:{apply:"_applyLabelOptions",nullable:true},iconOptions:{apply:"_applyIconOptions",nullable:true},groupLabelOptions:{apply:"_applyGroupLabelOptions",nullable:true},delegate:{apply:"_applyDelegate",event:"changeDelegate",init:null,nullable:true}},members:{_background:null,_provider:null,_layer:null,__lookupTable:null,_groups:null,__lookupTableForGroup:null,__groupHashMap:null,__groupHashKeyOrder:null,__groupStringsUsed:false,__groupObjectsUsed:false,__defaultGroupUsed:false,_createChildControlImpl:function(c,b){var a;switch(c){case"row-layer":a=new qx.ui.virtual.layer.Row(null,null);break}return a||this.base(arguments,c)},_init:function(){this._provider=new qx.ui.list.provider.WidgetProvider(this);this.__lookupTable=[];this.__lookupTableForGroup=[];this.__groupHashMap={};this.__groupStringsUsed=false;this.__groupObjectsUsed=false;this.__defaultGroupUsed=false;this._groups=new qx.data.Array();this.getPane().addListener("resize",this._onResize,this);this._initBackground();this._initLayer()},_initBackground:function(){this._background=this.getChildControl("row-layer");this.getPane().addLayer(this._background)},_initLayer:function(){this._layer=this._provider.createLayer();this.getPane().addLayer(this._layer)},_getDataFromRow:function(b){var a=null;if(this._isGroup(b)){a=this._groups.getItem(this._lookupGroup(b))}else{a=this.getModel().getItem(this._lookup(b))}if(a!=null){return a}else{return null}},_getLookupTable:function(){return this.__lookupTable},_lookup:function(a){return this.__lookupTable[a]},_lookupGroup:function(a){return this.__lookupTableForGroup.indexOf(a)},_reverseLookup:function(a){return this.__lookupTable.indexOf(a)},_isGroup:function(a){return this._lookup(a)==-1},_applyModel:function(b,a){b.addListener("change",this._onModelChange,this);if(a!=null){a.removeListener("change",this._onModelChange,this)}this._provider.removeBindings();this._onModelChange()},_applyRowHeight:function(b,a){this.getPane().getRowConfig().setDefaultItemSize(b)},_applyLabelPath:function(b,a){this._provider.setLabelPath(b)},_applyIconPath:function(b,a){this._provider.setIconPath(b)},_applyGroupLabelPath:function(b,a){this._provider.setGroupLabelPath(b)},_applyLabelOptions:function(b,a){this._provider.setLabelOptions(b)},_applyIconOptions:function(b,a){this._provider.setIconOptions(b)},_applyGroupLabelOptions:function(b,a){this._provider.setGroupLabelOptions(b)},_applyDelegate:function(b,a){this._provider.setDelegate(b);this.__buildUpLookupTable()},_onResize:function(a){this.getPane().getColumnConfig().setItemSize(0,a.getData().width)},_onModelChange:function(a){this.__buildUpLookupTable();this._applyDefaultSelection()},__updateRowCount:function(){this.getPane().getRowConfig().setItemCount(this.__lookupTable.length);this.getPane().fullUpdate()},__buildUpLookupTable:function(){this.__lookupTable=[];this.__lookupTableForGroup=[];this.__groupHashMap={};this.__groupHashKeyOrder=[];this._groups.removeAll();var a=this.getModel();if(a==null){return}this._runDelegateFilter(a);this._runDelegateSorter(a);this._runDelegateGroup(a);this.__updateRowCount()},_runDelegateFilter:function(b){var d=qx.util.Delegate.getMethod(this.getDelegate(),"filter");for(var c=0,a=b.length;c<a;++c){if(d==null||d(b.getItem(c))){this.__lookupTable.push(c)}}},_runDelegateSorter:function(a){if(this.__lookupTable.length==0){return}var b=qx.util.Delegate.getMethod(this.getDelegate(),"sorter");if(b!=null){this.__lookupTable.sort(function(d,c){return b(a.getItem(d),a.getItem(c))})}},_runDelegateGroup:function(d){var c=qx.util.Delegate.getMethod(this.getDelegate(),"group");if(c!=null){for(var e=0,a=this.__lookupTable.length;e<a;++e){var b=this.__lookupTable[e];var f=this.getModel().getItem(b);var g=c(f);this.__addGroup(g,b)}this.__lookupTable=this.__createLookupFromGroup()}},__addGroup:function(c,b){if(c==null){this.__defaultGroupUsed=true;c="???"}var a=this.__getUniqueGroupName(c);if(this.__groupHashMap[a]==null){this.__groupHashKeyOrder.push(a);this.__groupHashMap[a]=[];this._groups.push(c)}this.__groupHashMap[a].push(b)},__createLookupFromGroup:function(){this.__checkGroupStructure();var a=[];var f=0;for(var e=0;e<this.__groupHashKeyOrder.length;e++){var d=this.__groupHashKeyOrder[e];a.push(-1);this.__lookupTableForGroup.push(f);f++;var c=this.__groupHashMap[d];for(var b=0;b<c.length;b++){a.push(c[b]);f++}}return a},__getUniqueGroupName:function(c){var b=null;if(!qx.lang.Type.isString(c)){var a=this._groups.indexOf(c);this.__groupObjectsUsed=true;b="group";if(a==-1){b+=this._groups.getLength()}else{b+=a}}else{this.__groupStringsUsed=true;var b=c}return b},__checkGroupStructure:function(){if(this.__groupObjectsUsed&&this.__defaultGroupUsed||this.__groupObjectsUsed&&this.__groupStringsUsed){throw new Error("GroupingTypeError: You can't mix 'Objects' and 'Strings' as group identifier!")}}},destruct:function(){this._background.dispose();this._provider.dispose();this._layer.dispose();this._groups.dispose();this._background=this._provider=this._layer=this._groups=this.__lookupTable=this.__lookupTableForGroup=this.__groupHashMap=this.__groupHashKeyOrder=null}});qx.Class.define("qx.ui.virtual.layer.AbstractBackground",{extend:qx.ui.virtual.layer.Abstract,construct:function(b,a){this.base(arguments);if(b){this.setColorEven(b)}if(a){this.setColorOdd(a)}this.__customColors={};this.__decorators={}},properties:{colorEven:{nullable:true,check:"Color",apply:"_applyColorEven",themeable:true},colorOdd:{nullable:true,check:"Color",apply:"_applyColorOdd",themeable:true}},members:{__colorEven:null,__colorOdd:null,__customColors:null,__decorators:null,setColor:function(b,a){if(a){this.__customColors[b]=qx.theme.manager.Color.getInstance().resolve(a)}else{delete (this.__customColors[b])}},clearCustomColors:function(){this.__customColors={};this.updateLayerData()},getColor:function(b){var a=this.__customColors[b];if(a){return a}else{return b%2==0?this.__colorEven:this.__colorOdd}},_applyColorEven:function(b,a){if(b){this.__colorEven=qx.theme.manager.Color.getInstance().resolve(b)}else{this.__colorEven=null}this.updateLayerData()},_applyColorOdd:function(b,a){if(b){this.__colorOdd=qx.theme.manager.Color.getInstance().resolve(b)}else{this.__colorOdd=null}this.updateLayerData()},setBackground:function(b,a){if(a){this.__decorators[b]=qx.theme.manager.Decoration.getInstance().resolve(a)}else{delete (this.__decorators[b])}this.updateLayerData()},getBackground:function(a){return this.__decorators[a]}},destruct:function(){this.__customColors=this.__decorators=null}});qx.Class.define("qx.ui.virtual.layer.Row",{extend:qx.ui.virtual.layer.AbstractBackground,properties:{appearance:{refine:true,init:"row-layer"}},members:{_fullUpdate:function(h,o,d,a){var n=[];var b=qx.lang.Array.sum(a);var e=[];var r=0;var s=h;var k=0;for(var q=0;q<d.length;q++){var j=this.getBackground(s);if(j){e.push({childIndex:k,decorator:j,width:b,height:d[q]});n.push("<div style='","position: absolute;","left: 0;","top:",r,"px;","'>",j.getMarkup(),"</div>");k++}else{var g=this.getColor(s);if(g){n.push("<div style='","position: absolute;","left: 0;","top:",r,"px;","height:",d[q],"px;","width:",b,"px;","background-color:",g,"'>","</div>");k++}}r+=d[q];s+=1}var c=this.getContentElement().getDomElement();c.style.display="none";c.innerHTML=n.join("");for(var m=0,f=e.length;m<f;m++){var p=e[m];p.decorator.resize(c.childNodes[p.childIndex].firstChild,p.width,p.height)}c.style.display="block";this._width=b},_updateLayerWindow:function(d,c,a,b){if(d!==this.getFirstRow()||a.length!==this.getRowSizes().length||this._width<qx.lang.Array.sum(b)){this._fullUpdate(d,c,a,b)}},setColor:function(b,a){this.base(arguments,b,a);if(this.__isRowRendered(b)){this.updateLayerData()}},setBackground:function(b,a){this.base(arguments,b,a);if(this.__isRowRendered(b)){this.updateLayerData()}},__isRowRendered:function(a){var c=this.getFirstRow();var b=c+this.getRowSizes().length-1;return a>=c&&a<=b}}});qx.Class.define("qx.ui.tree.core.AbstractItem",{extend:qx.ui.core.Widget,type:"abstract",include:[qx.ui.form.MModelProperty],implement:[qx.ui.form.IModel],construct:function(a){this.base(arguments);if(a!=null){this.setLabel(a)}this._setLayout(new qx.ui.layout.HBox());this._addWidgets();this.initOpen()},properties:{open:{check:"Boolean",init:false,event:"changeOpen",apply:"_applyOpen"},openSymbolMode:{check:["always","never","auto"],init:"auto",event:"changeOpenSymbolMode",apply:"_applyOpenSymbolMode"},indent:{check:"Integer",init:19,apply:"_applyIndent",event:"changeIndent",themeable:true},icon:{check:"String",apply:"_applyIcon",event:"changeIcon",nullable:true,themeable:true},iconOpened:{check:"String",apply:"_applyIconOpened",event:"changeIconOpened",nullable:true,themeable:true},label:{check:"String",apply:"_applyLabel",event:"changeLabel",init:""}},members:{__labelAdded:null,__iconAdded:null,__spacer:null,_addWidgets:function(){throw new Error("Abstract method call.")},_createChildControlImpl:function(c,b){var a;switch(c){case"label":a=new qx.ui.basic.Label().set({alignY:"middle",value:this.getLabel()});break;case"icon":a=new qx.ui.basic.Image().set({alignY:"middle",source:this.getIcon()});break;case"open":a=new qx.ui.tree.core.FolderOpenButton().set({alignY:"middle"});a.addListener("changeOpen",this._onChangeOpen,this);a.addListener("resize",this._updateIndent,this);break}return a||this.base(arguments,c)},addWidget:function(b,a){this._add(b,a)},addSpacer:function(){if(!this.__spacer){this.__spacer=new qx.ui.core.Spacer()}else{this._remove(this.__spacer)}this._add(this.__spacer)},addOpenButton:function(){this._add(this.getChildControl("open"))},_onChangeOpen:function(a){if(this.isOpenable()){this.setOpen(a.getData())}},addIcon:function(){var a=this.getChildControl("icon");if(this.__iconAdded){this._remove(a)}this._add(a);this.__iconAdded=true},addLabel:function(b){var a=this.getChildControl("label");if(this.__labelAdded){this._remove(a)}if(b){this.setLabel(b)}else{a.setValue(this.getLabel())}this._add(a);this.__labelAdded=true},_applyIcon:function(b,a){if(!this.__getUserValueIconOpened()){this.__setIconSource(b)}else{if(!this.isOpen()){this.__setIconSource(b)}}},_applyIconOpened:function(b,a){if(this.isOpen()){if(this.__getUserValueIcon()&&this.__getUserValueIconOpened()){this.__setIconSource(b)}else{if(!this.__getUserValueIcon()&&this.__getUserValueIconOpened()){this.__setIconSource(b)}}}},_applyLabel:function(c,a){var b=this.getChildControl("label",true);if(b){b.setValue(c)}},_applyOpen:function(d,a){var b=this.getChildControl("open",true);if(b){b.setOpen(d)}var c;if(d){c=this.__getUserValueIconOpened()?this.getIconOpened():null}else{c=this.getIcon()}if(c){this.__setIconSource(c)}d?this.addState("opened"):this.removeState("opened")},__getUserValueIcon:function(){return qx.util.PropertyUtil.getUserValue(this,"icon")},__getUserValueIconOpened:function(){return qx.util.PropertyUtil.getUserValue(this,"iconOpened")},__setIconSource:function(a){var b=this.getChildControl("icon",true);if(b){b.setSource(a)}},isOpenable:function(){var a=this.getOpenSymbolMode();return(a==="always"||a==="auto"&&this.hasChildren())},_shouldShowOpenSymbol:function(){throw new Error("Abstract method call.")},_applyOpenSymbolMode:function(b,a){this._updateIndent()},_updateIndent:function(){var c=0;var a=this.getChildControl("open",true);if(a){if(this._shouldShowOpenSymbol()){a.show();var b=a.getBounds();if(b){c=b.width}else{return}}else{a.exclude()}}if(this.__spacer){this.__spacer.setWidth((this.getLevel()+1)*this.getIndent()-c)}},_applyIndent:function(b,a){this._updateIndent()},getLevel:function(){throw new Error("Abstract method call.")},syncWidget:function(){this._updateIndent()},hasChildren:function(){throw new Error("Abstract method call.")}},destruct:function(){this._disposeObjects("__spacer")}});qx.Class.define("qx.ui.tree.VirtualTreeItem",{extend:qx.ui.tree.core.AbstractItem,properties:{appearance:{refine:true,init:"virtual-tree-folder"}},members:{_forwardStates:{selected:true},_addWidgets:function(){this.addSpacer();this.addOpenButton();this.addIcon();this.addLabel()},_shouldShowOpenSymbol:function(){var a=this.getChildControl("open",true);if(a==null){return false}return this.isOpenable()},getLevel:function(){return this.getUserData("cell.level")},hasChildren:function(){return !!this.getUserData("cell.children")}}});qx.Class.define("qx.ui.tree.core.FolderOpenButton",{extend:qx.ui.basic.Image,include:qx.ui.core.MExecutable,construct:function(){this.base(arguments);this.initOpen();this.addListener("click",this._onClick);this.addListener("mousedown",this._stopPropagation,this);this.addListener("mouseup",this._stopPropagation,this)},properties:{open:{check:"Boolean",init:false,event:"changeOpen",apply:"_applyOpen"}},members:{_applyOpen:function(b,a){b?this.addState("opened"):this.removeState("opened");this.execute()},_stopPropagation:function(a){a.stopPropagation()},_onClick:function(a){this.toggleOpen();a.stopPropagation()}}});qx.Class.define("qx.ui.core.selection.Widget",{extend:qx.ui.core.selection.Abstract,construct:function(a){this.base(arguments);this.__widget=a},members:{__widget:null,_isSelectable:function(a){return this._isItemSelectable(a)&&a.getLayoutParent()===this.__widget},_selectableToHashCode:function(a){return a.$$hash},_styleSelectable:function(c,b,a){a?c.addState(b):c.removeState(b)},_capture:function(){this.__widget.capture()},_releaseCapture:function(){this.__widget.releaseCapture()},_isItemSelectable:function(a){if(this._userInteraction){return a.isVisible()&&a.isEnabled()}else{return a.isVisible()}},_getWidget:function(){return this.__widget},_getLocation:function(){var a=this.__widget.getContentElement().getDomElement();return a?qx.bom.element.Location.get(a):null},_getDimension:function(){return this.__widget.getInnerSize()},_getSelectableLocationX:function(b){var a=b.getBounds();if(a){return{left:a.left,right:a.left+a.width}}},_getSelectableLocationY:function(b){var a=b.getBounds();if(a){return{top:a.top,bottom:a.top+a.height}}},_getScroll:function(){return{left:0,top:0}},_scrollBy:function(a,b){},_scrollItemIntoView:function(a){this.__widget.scrollChildIntoView(a)},getSelectables:function(e){var f=false;if(!e){f=this._userInteraction;this._userInteraction=true}var d=this.__widget.getChildren();var a=[];var g;for(var c=0,b=d.length;c<b;c++){g=d[c];if(this._isItemSelectable(g)){a.push(g)}}this._userInteraction=f;return a},_getSelectableRange:function(d,c){if(d===c){return[d]}var f=this.__widget.getChildren();var a=[];var g=false;var h;for(var e=0,b=f.length;e<b;e++){h=f[e];if(h===d||h===c){if(g){a.push(h);break}else{g=true}}if(g&&this._isItemSelectable(h)){a.push(h)}}return a},_getFirstSelectable:function(){var c=this.__widget.getChildren();for(var b=0,a=c.length;b<a;b++){if(this._isItemSelectable(c[b])){return c[b]}}return null},_getLastSelectable:function(){var b=this.__widget.getChildren();for(var a=b.length-1;a>0;a--){if(this._isItemSelectable(b[a])){return b[a]}}return null},_getRelatedSelectable:function(g,f){var a=this.__widget.getOrientation()==="vertical";var d=this.__widget.getChildren();var b=d.indexOf(g);var e;if((a&&f==="above")||(!a&&f==="left")){for(var c=b-1;c>=0;c--){e=d[c];if(this._isItemSelectable(e)){return e}}}else{if((a&&f==="under")||(!a&&f==="right")){for(var c=b+1;c<d.length;c++){e=d[c];if(this._isItemSelectable(e)){return e}}}}return null},_getPage:function(b,a){if(a){return this._getFirstSelectable()}else{return this._getLastSelectable()}}},destruct:function(){this.__widget=null}});qx.Class.define("qx.dev.unit.TestFunction",{extend:qx.core.Object,construct:function(a,b,c){if(c){this.setTestFunction(c)}if(a){this.setClassName(a.classname);this.setTestClass(a)}this.setName(b)},properties:{testFunction:{check:"Function"},name:{check:"String"},className:{check:"String",init:""},testClass:{check:"qx.dev.unit.TestCase",init:null}},members:{run:function(a){var c=this.getTestClass();var d=this.getName();var b=this;a.run(this,function(){c.setTestFunc(b);c.setTestResult(a);try{c[d]()}catch(e){throw e}})},setUp:function(){var a=this.getTestClass();if(qx.lang.Type.isFunction(a.setUp)){a.setUp()}},tearDown:function(){var a=this.getTestClass();if(qx.lang.Type.isFunction(a.tearDown)){a.tearDown()}},getFullName:function(){return[this.getClassName(),this.getName()].join(":")}}});qx.Class.define("qx.ui.table.model.Filtered",{extend:qx.ui.table.model.Simple,construct:function(){this.base(arguments);this.numericAllowed=new Array("==","!=",">","<",">=","<=");this.betweenAllowed=new Array("between","!between");this.__applyingFilters=false;this.Filters=new Array()},members:{__fullArr:null,__applyingFilters:null,_js_in_array:function(e,c){var d=c.toString();if(d==""){return false}var b=new RegExp(e,"g");var a=b.test(c);return a},addBetweenFilter:function(d,c,a,e){if(this._js_in_array(d,this.betweenAllowed)&&e!=null){if(c!=null&&a!=null){var b=new Array(d,c,a,e)}}if(b!=null){this.Filters.push(b)}else{throw new Error("Filter not recognized or value1/value2 is null!")}},addNumericFilter:function(c,b,d){var a=null;if(this._js_in_array(c,this.numericAllowed)&&d!=null){if(b!=null){a=[c,b,d]}}if(a!=null){this.Filters.push(a)}else{throw new Error("Filter not recognized: value or target is null!")}},addRegex:function(d,e,c){var b;if(c){b="gi"}else{b="g"}if(d!=null&&e!=null){var a=new Array("regex",d,e,b)}if(a!=null){this.Filters.push(a)}else{throw new Error("regex cannot be null!")}},addNotRegex:function(d,e,c){var b;if(c){b="gi"}else{b="g"}if(d!=null&&e!=null){var a=new Array("notregex",d,e,b)}if(a!=null){this.Filters.push(a)}else{throw new Error("notregex cannot be null!")}},applyFilters:function(){var d;var e;var b;var f=this.getData();var c=f.length;for(var h=0;h<c;h++){e=false;for(d in this.Filters){if(this._js_in_array(this.Filters[d][0],this.numericAllowed)&&e==false){b=this.getValueById(this.Filters[d][2],h);switch(this.Filters[d][0]){case"==":if(b==this.Filters[d][1]){e=true}break;case"!=":if(b!=this.Filters[d][1]){e=true}break;case">":if(b>this.Filters[d][1]){e=true}break;case"<":if(b<this.Filters[d][1]){e=true}break;case">=":if(b>=this.Filters[d][1]){e=true}break;case"<=":if(b<=this.Filters[d][1]){e=true}break}}else{if(this._js_in_array(this.Filters[d][0],this.betweenAllowed)&&e==false){b=this.getValueById(this.Filters[d][3],h);switch(this.Filters[d][0]){case"between":if(b>=this.Filters[d][1]&&b<=this.Filters[d][2]){e=true}break;case"!between":if(b<this.Filters[d][1]&&b>this.Filters[d][2]){e=true}break}}else{if(this.Filters[d][0]=="regex"&&e==false){b=this.getValueById(this.Filters[d][2],h);var a=new RegExp(this.Filters[d][1],this.Filters[d][3]);e=a.test(b)}else{if(this.Filters[d][0]=="notregex"&&e==false){b=this.getValueById(this.Filters[d][2],h);var a=new RegExp(this.Filters[d][1],this.Filters[d][3]);e=!a.test(b)}}}}}if(e==true){this.hideRows(h,1,false);h--;c--}}var g={firstRow:0,lastRow:c-1,firstColumn:0,lastColumn:this.getColumnCount()-1};this.fireDataEvent("dataChanged",g)},hideRows:function(e,a,f){var c=this.getData();f=(f!=null?f:true);if(!this.__applyingFilters){this.__fullArr=c.slice(0);this.__applyingFilters=true}if(a==null||a<1){a=1}for(var b=e;b<(c.length-a);b++){c[b]=c[b+a]}this.removeRows(b,a);if(f){var d={firstRow:0,lastRow:c.length-1,firstColumn:0,lastColumn:this.getColumnCount()-1};this.fireDataEvent("dataChanged",d)}},resetHiddenRows:function(){if(!this.__fullArr){return}this.Filters=[];this.setData(qx.lang.Array.clone(this.__fullArr))},setData:function(a,b){this.__fullArr=qx.lang.Array.clone(a);this.Filters=[];this.base(arguments,a,b)}},destruct:function(){this.__fullArr=this.numericAllowed=this.betweenAllowed=this.Filters=null}});qx.Class.define("qx.dev.unit.AbstractTestSuite",{extend:qx.core.Object,type:"abstract",construct:function(){this.base(arguments);this._tests=[]},members:{_tests:null,addTestFunction:function(a,b){this._tests.push(new qx.dev.unit.TestFunction(null,a,b))},addTestMethod:function(a,b){this._tests.push(new qx.dev.unit.TestFunction(a,b))},addFail:function(b,a){this.addTestFunction(b,function(){this.fail(a)})},run:function(a){for(var b=0;b<this._tests.length;b++){(this._tests[b]).run(a)}},getTestMethods:function(){var a=[];for(var b=0;b<this._tests.length;b++){var c=this._tests[b];if(c instanceof qx.dev.unit.TestFunction){a.push(c)}}return a}},destruct:function(){this._disposeArray("_tests")}});qx.Class.define("qx.dev.unit.TestClass",{extend:qx.dev.unit.AbstractTestSuite,construct:function(b){this.base(arguments);if(!b){this.addFail("existsCheck","Unknown test class!");return}if(!qx.Class.isSubClassOf(b,qx.dev.unit.TestCase)){this.addFail("Sub class check.","The test class '"+b.classname+"'is not a sub class of 'qx.dev.unit.TestCase'");return}var c=b.prototype;var a=new b;for(var d in c){if(qx.lang.Type.isFunction(c[d])&&d.indexOf("test")==0){this.addTestMethod(a,d)}}this.setName(b.classname)},properties:{name:{check:"String"}}});qx.Class.define("qx.dev.unit.TestCase",{extend:qx.core.Object,include:[qx.core.MAssert],events:{assertionFailed:"qx.event.type.Data"},properties:{testResult:{init:null},testFunc:{init:null}},members:{isDebugOn:function(){return(qx.core.Environment.get("qx.debug"))?true:false},wait:function(a,c,b){throw new qx.dev.unit.AsyncWrapper(a,c,b)},resume:function(b,a){this.getTestResult().run(this.getTestFunc(),b||qx.lang.Function.empty,a||this,true)}}});qx.Class.define("qx.dev.unit.AsyncWrapper",{extend:qx.core.Object,construct:function(a,d,c){for(var b=0;b<2;b++){if(qx.lang.Type.isFunction(arguments[b])){this.setDeferredFunction(arguments[b])}else{if(qx.lang.Type.isNumber(arguments[b])){this.setDelay(arguments[b])}}}if(c){this.setContext(c)}},properties:{deferredFunction:{check:"Function",init:false},context:{check:"Object",init:null},delay:{check:"Integer",nullable:false,init:5000}}});qx.Interface.define("qx.ui.form.IDateForm",{events:{changeValue:"qx.event.type.Data"},members:{setValue:function(a){return arguments.length==1},resetValue:function(){},getValue:function(){}}});qx.Class.define("qx.ui.control.DateChooser",{extend:qx.ui.core.Widget,include:[qx.ui.core.MExecutable,qx.ui.form.MForm],implement:[qx.ui.form.IExecutable,qx.ui.form.IForm,qx.ui.form.IDateForm],construct:function(b){this.base(arguments);var c=new qx.ui.layout.VBox();this._setLayout(c);this._createChildControl("navigation-bar");this._createChildControl("date-pane");this.addListener("keypress",this._onKeyPress);var a=(b!=null)?b:new Date();this.showMonth(a.getMonth(),a.getFullYear());if(qx.core.Environment.get("qx.dynlocale")){qx.locale.Manager.getInstance().addListener("changeLocale",this._updateDatePane,this)}this.addListener("mousedown",this._onMouseUpDown,this);this.addListener("mouseup",this._onMouseUpDown,this)},statics:{MONTH_YEAR_FORMAT:qx.locale.Date.getDateTimeFormat("yyyyMMMM","MMMM yyyy"),WEEKDAY_FORMAT:"EE",WEEK_FORMAT:"ww"},properties:{appearance:{refine:true,init:"datechooser"},width:{refine:true,init:200},height:{refine:true,init:150},shownMonth:{check:"Integer",init:null,nullable:true,event:"changeShownMonth"},shownYear:{check:"Integer",init:null,nullable:true,event:"changeShownYear"},value:{check:"Date",init:null,nullable:true,event:"changeValue",apply:"_applyValue"}},members:{__weekdayLabelArr:null,__dayLabelArr:null,__weekLabelArr:null,_forwardStates:{invalid:true},_createChildControlImpl:function(h,f){var e;switch(h){case"navigation-bar":e=new qx.ui.container.Composite(new qx.ui.layout.HBox());e.add(this.getChildControl("last-year-button"));e.add(this.getChildControl("last-month-button"));e.add(this.getChildControl("month-year-label"),{flex:1});e.add(this.getChildControl("next-month-button"));e.add(this.getChildControl("next-year-button"));this._add(e);break;case"last-year-button-tooltip":e=new qx.ui.tooltip.ToolTip(this.tr("Last year"));break;case"last-year-button":e=new qx.ui.toolbar.Button();e.addState("lastYear");e.setFocusable(false);e.setToolTip(this.getChildControl("last-year-button-tooltip"));e.addListener("click",this._onNavButtonClicked,this);break;case"last-month-button-tooltip":e=new qx.ui.tooltip.ToolTip(this.tr("Last month"));break;case"last-month-button":e=new qx.ui.toolbar.Button();e.addState("lastMonth");e.setFocusable(false);e.setToolTip(this.getChildControl("last-month-button-tooltip"));e.addListener("click",this._onNavButtonClicked,this);break;case"next-month-button-tooltip":e=new qx.ui.tooltip.ToolTip(this.tr("Next month"));break;case"next-month-button":e=new qx.ui.toolbar.Button();e.addState("nextMonth");e.setFocusable(false);e.setToolTip(this.getChildControl("next-month-button-tooltip"));e.addListener("click",this._onNavButtonClicked,this);break;case"next-year-button-tooltip":e=new qx.ui.tooltip.ToolTip(this.tr("Next year"));break;case"next-year-button":e=new qx.ui.toolbar.Button();e.addState("nextYear");e.setFocusable(false);e.setToolTip(this.getChildControl("next-year-button-tooltip"));e.addListener("click",this._onNavButtonClicked,this);break;case"month-year-label":e=new qx.ui.basic.Label();e.setAllowGrowX(true);e.setAnonymous(true);break;case"week":e=new qx.ui.basic.Label();e.setAllowGrowX(true);e.setAllowGrowY(true);e.setSelectable(false);e.setAnonymous(true);e.setCursor("default");break;case"weekday":e=new qx.ui.basic.Label();e.setAllowGrowX(true);e.setAllowGrowY(true);e.setSelectable(false);e.setAnonymous(true);e.setCursor("default");break;case"day":e=new qx.ui.basic.Label();e.setAllowGrowX(true);e.setAllowGrowY(true);e.setCursor("default");e.addListener("mousedown",this._onDayClicked,this);e.addListener("dblclick",this._onDayDblClicked,this);break;case"date-pane":var c=new qx.ui.layout.Grid();e=new qx.ui.container.Composite(c);for(var d=0;d<8;d++){c.setColumnFlex(d,1)}for(var d=0;d<7;d++){c.setRowFlex(d,1)}var b=this.getChildControl("week#0");b.addState("header");e.add(b,{column:0,row:0});this.__weekdayLabelArr=[];for(var d=0;d<7;d++){b=this.getChildControl("weekday#"+d);e.add(b,{column:d+1,row:0});this.__weekdayLabelArr.push(b)}this.__dayLabelArr=[];this.__weekLabelArr=[];for(var g=0;g<6;g++){var b=this.getChildControl("week#"+(g+1));e.add(b,{column:0,row:g+1});this.__weekLabelArr.push(b);for(var a=0;a<7;a++){var b=this.getChildControl("day#"+((g*7)+a));e.add(b,{column:a+1,row:g+1});this.__dayLabelArr.push(b)}}this._add(e);break}return e||this.base(arguments,h)},_applyValue:function(f,a){if((f!=null)&&(this.getShownMonth()!=f.getMonth()||this.getShownYear()!=f.getFullYear())){this.showMonth(f.getMonth(),f.getFullYear())}else{var e=(f==null)?-1:f.getDate();for(var c=0;c<6*7;c++){var d=this.__dayLabelArr[c];if(d.hasState("otherMonth")){if(d.hasState("selected")){d.removeState("selected")}}else{var b=parseInt(d.getValue(),10);if(b==e){d.addState("selected")}else{if(d.hasState("selected")){d.removeState("selected")}}}}}},_onMouseUpDown:function(b){var a=b.getTarget();if(a==this.getChildControl("navigation-bar")||a==this.getChildControl("date-pane")){b.stopPropagation();return}},_onNavButtonClicked:function(a){var b=this.getShownYear();var c=this.getShownMonth();switch(a.getCurrentTarget()){case this.getChildControl("last-year-button"):b--;break;case this.getChildControl("last-month-button"):c--;if(c<0){c=11;b--}break;case this.getChildControl("next-month-button"):c++;if(c>=12){c=0;b++}break;case this.getChildControl("next-year-button"):b++;break}this.showMonth(c,b)},_onDayClicked:function(a){var b=a.getCurrentTarget().dateTime;this.setValue(new Date(b))},_onDayDblClicked:function(){this.execute()},_onKeyPress:function(a){var e=null;var b=null;var d=null;if(a.getModifiers()==0){switch(a.getKeyIdentifier()){case"Left":e=-1;break;case"Right":e=1;break;case"Up":e=-7;break;case"Down":e=7;break;case"PageUp":b=-1;break;case"PageDown":b=1;break;case"Escape":if(this.getValue()!=null){this.setValue(null);return true}break;case"Enter":case"Space":if(this.getValue()!=null){this.execute()}return}}else{if(a.isShiftPressed()){switch(a.getKeyIdentifier()){case"PageUp":d=-1;break;case"PageDown":d=1;break}}}if(e!=null||b!=null||d!=null){var c=this.getValue();if(c!=null){c=new Date(c.getTime())}if(c==null){c=new Date()}else{if(e!=null){c.setDate(c.getDate()+e)}if(b!=null){c.setMonth(c.getMonth()+b)}if(d!=null){c.setFullYear(c.getFullYear()+d)}}this.setValue(c)}},showMonth:function(b,a){if((b!=null&&b!=this.getShownMonth())||(a!=null&&a!=this.getShownYear())){if(b!=null){this.setShownMonth(b)}if(a!=null){this.setShownYear(a)}this._updateDatePane()}},handleKeyPress:function(a){this._onKeyPress(a)},_updateDatePane:function(){var v=qx.ui.control.DateChooser;var w=new Date();var e=w.getFullYear();var l=w.getMonth();var C=w.getDate();var a=this.getValue();var t=(a==null)?-1:a.getFullYear();var b=(a==null)?-1:a.getMonth();var z=(a==null)?-1:a.getDate();var g=this.getShownMonth();var s=this.getShownYear();var A=qx.locale.Date.getWeekStart();var x=new Date(this.getShownYear(),this.getShownMonth(),1);var u=new qx.util.format.DateFormat(v.MONTH_YEAR_FORMAT);this.getChildControl("month-year-label").setValue(u.format(x));var m=x.getDay();var h=1+((7-m)%7);var c=new qx.util.format.DateFormat(v.WEEKDAY_FORMAT);for(var q=0;q<7;q++){var p=(q+A)%7;var o=this.__weekdayLabelArr[q];x.setDate(h+p);o.setValue(c.format(x));if(qx.locale.Date.isWeekend(p)){o.addState("weekend")}else{o.removeState("weekend")}}x=new Date(s,g,1,12,0,0);var r=(7+m-A)%7;x.setDate(x.getDate()-r);var j=new qx.util.format.DateFormat(v.WEEK_FORMAT);for(var n=0;n<6;n++){this.__weekLabelArr[n].setValue(j.format(x));for(var q=0;q<7;q++){var o=this.__dayLabelArr[n*7+q];var f=x.getFullYear();var y=x.getMonth();var k=x.getDate();var d=(t==f&&b==y&&z==k);if(d){o.addState("selected")}else{o.removeState("selected")}if(y!=g){o.addState("otherMonth")}else{o.removeState("otherMonth")}var B=(f==e&&y==l&&k==C);if(B){o.addState("today")}else{o.removeState("today")}o.setValue(""+k);o.dateTime=x.getTime();x.setDate(x.getDate()+1)}}u.dispose();c.dispose();j.dispose()}},destruct:function(){if(qx.core.Environment.get("qx.dynlocale")){qx.locale.Manager.getInstance().removeListener("changeLocale",this._updateDatePane,this)}this.__weekdayLabelArr=this.__dayLabelArr=this.__weekLabelArr=null}});qx.Class.define("qx.data.store.Json",{extend:qx.core.Object,construct:function(a,b){this.base(arguments);this._marshaler=new qx.data.marshal.Json(b);this._delegate=b;if(a!=null){this.setUrl(a)}},events:{loaded:"qx.event.type.Data",error:"qx.event.type.Event"},properties:{model:{nullable:true,event:"changeModel"},state:{check:["configured","queued","sending","receiving","completed","aborted","timeout","failed"],init:"configured",event:"changeState"},url:{check:"String",apply:"_applyUrl",event:"changeUrl",nullable:true}},members:{__request:null,_delegate:null,_applyUrl:function(b,a){if(b!=null){this._createRequest(b)}},_createRequest:function(b){this.__request=new qx.io.remote.Request(b,"GET","application/json");this.__request.addListener("completed",this.__requestCompleteHandler,this);var a=this._delegate;if(a&&qx.lang.Type.isFunction(a.configureRequest)){this._delegate.configureRequest(this.__request)}this.__request.addListener("changeState",function(c){var d=c.getData();this.setState(d);if(d==="failed"||d==="aborted"||d==="timeout"){this.fireEvent("error")}},this);this.__request.send()},__requestCompleteHandler:function(b){var c=b.getContent();var a=this._delegate;if(a&&qx.lang.Type.isFunction(a.manipulateData)){c=this._delegate.manipulateData(c)}this._marshaler.toClass(c,true);var d=this.getModel();this.setModel(this._marshaler.toModel(c));if(d&&d.dispose){d.dispose()}this.fireDataEvent("loaded",this.getModel())},reload:function(){var a=this.getUrl();if(a!=null){this._createRequest(a)}}},destruct:function(){this._disposeObjects("_marshaler","__request");this._delegate=null}});qx.Class.define("qx.data.store.Jsonp",{extend:qx.data.store.Json,construct:function(a,c,b){if(b!=undefined){this.setCallbackParam(b)}this.base(arguments,a,c)},properties:{callbackParam:{check:"String",nullable:false}},members:{__loader:null,_createRequest:function(b){if(this.__loader){this.__loader.dispose()}this.__loader=new qx.io.ScriptLoader();var a=this._delegate;if(a&&qx.lang.Type.isFunction(a.configureRequest)){this._delegate.configureRequest(this.__loader)}var c=b.indexOf("?")==-1?"?":"&";b+=c+this.getCallbackParam()+"=";var d=parseInt(this.toHashCode(),10);qx.data.store.Jsonp[d]=this;b+="qx.data.store.Jsonp["+d+"].callback";this.__loader.load(b,function(e){delete this[d];if(e==="fail"){this.fireEvent("error")}},this)},callback:function(a){if(this.isDisposed()){return}this.__loaded(a)},__loaded:function(b){if(b==undefined){this.setState("failed");this.fireEvent("error");return}var a=this._delegate;if(a&&qx.lang.Type.isFunction(a.manipulateData)){b=this._delegate.manipulateData(b)}this._marshaler.toClass(b);this.setModel(this._marshaler.toModel(b));this.fireDataEvent("loaded",this.getModel())}},destruct:function(){if(this.__loader){this.__loader.dispose()}this.__loader=null}});qx.Interface.define("qx.data.marshal.IMarshaler",{members:{toClass:function(b,a){},toModel:function(a){}}});qx.Class.define("qx.data.marshal.Json",{extend:qx.core.Object,implement:[qx.data.marshal.IMarshaler],construct:function(a){this.base(arguments);this.__delegate=a},statics:{__instance:null,createModel:function(b,a){if(this.__instance===null){this.__instance=new qx.data.marshal.Json()}this.__instance.toClass(b,a);return this.__instance.toModel(b)}},members:{__delegate:null,__jsonToHash:function(c){var b=[];for(var a in c){b.push(a)}return b.sort().join('"')},toClass:function(c,e){if(qx.lang.Type.isNumber(c)||qx.lang.Type.isString(c)||qx.lang.Type.isBoolean(c)||c==null||c instanceof qx.core.Object){return}if(qx.lang.Type.isArray(c)){for(var d=0;d<c.length;d++){this.toClass(c[d],e)}return}var b=this.__jsonToHash(c);if(this.__delegate&&this.__delegate.getModelClass&&this.__delegate.getModelClass(b)!=null){return}for(var l in c){this.toClass(c[l],e)}if(qx.Class.isDefined("qx.data.model."+b)){return}var h={};var a={__disposeItem:this.__disposeItem};for(var l in c){l=l.replace(/-/g,"");if(qx.core.Environment.get("qx.debug")){this.assertTrue((/^[$A-Za-z_][0-9A-Za-z_]*$/).test(l),"The key '"+l+"' is not a valid JavaScript identifier.")}h[l]={};h[l].nullable=true;h[l].event="change"+qx.lang.String.firstUp(l);if(e){h[l].apply="_applyEventPropagation"}if(this.__delegate&&this.__delegate.getValidationRule){var k=this.__delegate.getValidationRule(b,l);if(k){h[l].validate="_validate"+l;a["_validate"+l]=k}}}if(this.__delegate&&this.__delegate.getModelSuperClass){var j=this.__delegate.getModelSuperClass(b)||qx.core.Object}else{var j=qx.core.Object}var f=[];if(this.__delegate&&this.__delegate.getModelMixins){var m=this.__delegate.getModelMixins(b);if(!qx.lang.Type.isArray(m)){if(m!=null){f=[m]}}}if(e){f.push(qx.data.marshal.MEventBubbling)}var g={extend:j,include:f,properties:h,members:a,destruct:this.__disposeProperties};qx.Class.define("qx.data.model."+b,g)},__disposeProperties:function(){var a=qx.util.PropertyUtil.getAllProperties(this.constructor);for(var b in a){this.__disposeItem(this.get(a[b].name))}},__disposeItem:function(b){if(!(b instanceof qx.core.Object)){return}if(b.isDisposed()){return}if(qx.Class.implementsInterface(b,qx.data.IListData)){for(var a=0;a<b.getLength();a++){this.__disposeItem(b.getItem(a))}}b.dispose()},__createInstance:function(c){var b;if(this.__delegate&&this.__delegate.getModelClass){b=this.__delegate.getModelClass(c)}if(b!=null){return(new b())}else{var a=qx.Class.getByName("qx.data.model."+c);return(new a())}},toModel:function(e){if(qx.lang.Type.isNumber(e)||qx.lang.Type.isString(e)||qx.lang.Type.isBoolean(e)||qx.lang.Type.isDate(e)||e==null||e instanceof qx.core.Object){return e}else{if(qx.lang.Type.isArray(e)){var g=new qx.data.Array();for(var d=0;d<e.length;d++){g.push(this.toModel(e[d]))}return g}else{if(qx.lang.Type.isObject(e)){var f=this.__jsonToHash(e);var b=this.__createInstance(f);for(var c in e){var a=c.replace(/-/g,"");if((qx.core.Environment.get("qx.debug"))&&qx.core.Environment.get("qx.debug.databinding")){if(c!=a){this.warn("The model contained an illegal name: '"+c+"'. Replaced it with '"+a+"'.")}}b["set"+qx.lang.String.firstUp(a)](this.toModel(e[c]))}return b}}}throw new Error("Unsupported type!")}},destruct:function(){this.__delegate=null}});qx.Class.define("qx.io.remote.Request",{extend:qx.core.Object,construct:function(c,a,b){this.base(arguments);this.__requestHeaders={};this.__urlParameters={};this.__dataParameters={};this.__formFields={};if(c!==undefined){this.setUrl(c)}if(a!==undefined){this.setMethod(a)}if(b!==undefined){this.setResponseType(b)}this.setProhibitCaching(true);this.__seqNum=++qx.io.remote.Request.__seqNum},events:{created:"qx.event.type.Event",configured:"qx.event.type.Event",sending:"qx.event.type.Event",receiving:"qx.event.type.Event",completed:"qx.io.remote.Response",aborted:"qx.event.type.Event",failed:"qx.io.remote.Response",timeout:"qx.io.remote.Response"},statics:{__seqNum:0,methodAllowsRequestBody:function(a){return(a=="POST")||(a=="PUT")}},properties:{url:{check:"String",init:""},method:{check:["GET","POST","PUT","HEAD","DELETE"],apply:"_applyMethod",init:"GET"},asynchronous:{check:"Boolean",init:true},data:{check:"String",nullable:true},username:{check:"String",nullable:true},password:{check:"String",nullable:true},state:{check:["configured","queued","sending","receiving","completed","aborted","timeout","failed"],init:"configured",apply:"_applyState",event:"changeState"},responseType:{check:["text/plain","text/javascript","application/json","application/xml","text/html"],init:"text/plain",apply:"_applyResponseType"},timeout:{check:"Integer",nullable:true},prohibitCaching:{check:function(a){return typeof a=="boolean"||a==="no-url-params-on-post"},init:true,apply:"_applyProhibitCaching"},crossDomain:{check:"Boolean",init:false},fileUpload:{check:"Boolean",init:false},transport:{check:"qx.io.remote.Exchange",nullable:true},useBasicHttpAuth:{check:"Boolean",init:false},parseJson:{check:"Boolean",init:true}},members:{__requestHeaders:null,__urlParameters:null,__dataParameters:null,__formFields:null,__seqNum:null,send:function(){qx.io.remote.RequestQueue.getInstance().add(this)},abort:function(){qx.io.remote.RequestQueue.getInstance().abort(this)},reset:function(){switch(this.getState()){case"sending":case"receiving":this.error("Aborting already sent request!");case"queued":this.abort();break}},isConfigured:function(){return this.getState()==="configured"},isQueued:function(){return this.getState()==="queued"},isSending:function(){return this.getState()==="sending"},isReceiving:function(){return this.getState()==="receiving"},isCompleted:function(){return this.getState()==="completed"},isAborted:function(){return this.getState()==="aborted"},isTimeout:function(){return this.getState()==="timeout"},isFailed:function(){return this.getState()==="failed"},__forwardEvent:qx.event.GlobalError.observeMethod(function(b){var a=b.clone();a.setTarget(this);this.dispatchEvent(a)}),_onqueued:function(a){this.setState("queued");this.__forwardEvent(a)},_onsending:function(a){this.setState("sending");this.__forwardEvent(a)},_onreceiving:function(a){this.setState("receiving");this.__forwardEvent(a)},_oncompleted:function(a){this.setState("completed");this.__forwardEvent(a);this.dispose()},_onaborted:function(a){this.setState("aborted");this.__forwardEvent(a);this.dispose()},_ontimeout:function(a){this.setState("timeout");this.__forwardEvent(a);this.dispose()},_onfailed:function(a){this.setState("failed");this.__forwardEvent(a);this.dispose()},_applyState:function(b,a){if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebug")){this.debug("State: "+b)}}},_applyProhibitCaching:function(b,a){if(!b){this.removeParameter("nocache");this.removeRequestHeader("Pragma");this.removeRequestHeader("Cache-Control");return}if(b!=="no-url-params-on-post"||this.getMethod()!="POST"){this.setParameter("nocache",new Date().valueOf())}else{this.removeParameter("nocache")}this.setRequestHeader("Pragma","no-cache");this.setRequestHeader("Cache-Control","no-cache")},_applyMethod:function(c,a){if(qx.io.remote.Request.methodAllowsRequestBody(c)){this.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}else{this.removeRequestHeader("Content-Type")}var b=this.getProhibitCaching();this._applyProhibitCaching(b,b)},_applyResponseType:function(b,a){this.setRequestHeader("X-Qooxdoo-Response-Type",b)},setRequestHeader:function(a,b){this.__requestHeaders[a]=b},removeRequestHeader:function(a){delete this.__requestHeaders[a]},getRequestHeader:function(a){return this.__requestHeaders[a]||null},getRequestHeaders:function(){return this.__requestHeaders},setParameter:function(a,c,b){if(b){this.__dataParameters[a]=c}else{this.__urlParameters[a]=c}},removeParameter:function(a,b){if(b){delete this.__dataParameters[a]}else{delete this.__urlParameters[a]}},getParameter:function(a,b){if(b){return this.__dataParameters[a]||null}else{return this.__urlParameters[a]||null}},getParameters:function(a){return(a?this.__dataParameters:this.__urlParameters)},setFormField:function(a,b){this.__formFields[a]=b},removeFormField:function(a){delete this.__formFields[a]},getFormField:function(a){return this.__formFields[a]||null},getFormFields:function(){return this.__formFields},getSequenceNumber:function(){return this.__seqNum}},destruct:function(){this.setTransport(null);this.__requestHeaders=this.__urlParameters=this.__dataParameters=this.__formFields=null}});qx.Class.define("qx.io.remote.RequestQueue",{type:"singleton",extend:qx.core.Object,construct:function(){this.base(arguments);this.__queue=[];this.__active=[];this.__totalRequests=0;this.__timer=new qx.event.Timer(500);this.__timer.addListener("interval",this._oninterval,this)},properties:{enabled:{init:true,check:"Boolean",apply:"_applyEnabled"},maxTotalRequests:{check:"Integer",nullable:true},maxConcurrentRequests:{check:"Integer",init:qx.core.Environment.get("io.maxrequests")},defaultTimeout:{check:"Integer",init:5000}},members:{__queue:null,__active:null,__totalRequests:null,__timer:null,getRequestQueue:function(){return this.__queue},getActiveQueue:function(){return this.__active},_debug:function(){if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebug")){var a=this.__active.length+"/"+(this.__queue.length+this.__active.length);this.debug("Progress: "+a);window.status="Request-Queue Progress: "+a}}},_check:function(){this._debug();if(this.__active.length==0&&this.__queue.length==0){this.__timer.stop()}if(!this.getEnabled()){return}if(this.__queue.length==0||(this.__queue[0].isAsynchronous()&&this.__active.length>=this.getMaxConcurrentRequests())){return}if(this.getMaxTotalRequests()!=null&&this.__totalRequests>=this.getMaxTotalRequests()){return}var a=this.__queue.shift();var b=new qx.io.remote.Exchange(a);this.__totalRequests++;this.__active.push(b);this._debug();b.addListener("sending",this._onsending,this);b.addListener("receiving",this._onreceiving,this);b.addListener("completed",this._oncompleted,this);b.addListener("aborted",this._oncompleted,this);b.addListener("timeout",this._oncompleted,this);b.addListener("failed",this._oncompleted,this);b._start=(new Date).valueOf();b.send();if(this.__queue.length>0){this._check()}},_remove:function(a){qx.lang.Array.remove(this.__active,a);a.dispose();this._check()},__activeCount:0,_onsending:function(a){if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebug")){this.__activeCount++;a.getTarget()._counted=true;this.debug("ActiveCount: "+this.__activeCount)}}a.getTarget().getRequest()._onsending(a)},_onreceiving:function(a){a.getTarget().getRequest()._onreceiving(a)},_oncompleted:function(f){if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.ioRemoteDebug")){if(f.getTarget()._counted){this.__activeCount--;this.debug("ActiveCount: "+this.__activeCount)}}}var d=f.getTarget().getRequest();var a="_on"+f.getType();this._remove(f.getTarget());try{if(d[a]){d[a](f)}}catch(b){this.error("Request "+d+" handler "+a+" threw an error: ",b);try{if(d._onaborted){var c=qx.event.Registration.createEvent("aborted",qx.event.type.Event);d._onaborted(c)}}catch(b){}}},_oninterval:function(h){var f=this.__active;if(f.length==0){this.__timer.stop();return}var c=(new Date).valueOf();var j;var k;var b=this.getDefaultTimeout();var a;var d;for(var g=f.length-1;g>=0;g--){j=f[g];k=j.getRequest();if(k.isAsynchronous()){a=k.getTimeout();if(a==0){continue}if(a==null){a=b}d=c-j._start;if(d>a){this.warn("Timeout: transport "+j.toHashCode());this.warn(d+"ms > "+a+"ms");j.timeout()}}}},_applyEnabled:function(b,a){if(b){this._check()}this.__timer.setEnabled(b)},add:function(a){a.setState("queued");if(a.isAsynchronous()){this.__queue.push(a)}else{this.__queue.unshift(a)}this._check();if(this.getEnabled()){this.__timer.start()}},abort:function(a){var b=a.getTransport();if(b){b.abort()}else{if(qx.lang.Array.contains(this.__queue,a)){qx.lang.Array.remove(this.__queue,a)}}}},destruct:function(){this._disposeArray("__active");this._disposeObjects("__timer");this.__queue=null}});qx.Interface.define("qx.ui.form.renderer.IFormRenderer",{members:{addItems:function(c,d,e,b,a){},addButton:function(b,a){}}});qx.Class.define("qx.bom.Cookie",{statics:{get:function(c){var d=document.cookie.indexOf(c+"=");var a=d+c.length+1;if((!d)&&(c!=document.cookie.substring(0,c.length))){return null}if(d==-1){return null}var b=document.cookie.indexOf(";",a);if(b==-1){b=document.cookie.length}return unescape(document.cookie.substring(a,b))},set:function(d,f,a,h,e,g){var c=[d,"=",escape(f)];if(a){var b=new Date();b.setTime(b.getTime());c.push(";expires=",new Date(b.getTime()+(a*1000*60*60*24)).toGMTString())}if(h){c.push(";path=",h)}if(e){c.push(";domain=",e)}if(g){c.push(";secure")}document.cookie=c.join("")},del:function(b,d,c){if(!qx.bom.Cookie.get(b)){return}var a=[b,"="];if(d){a.push(";path=",d)}if(c){a.push(";domain=",c)}a.push(";expires=Thu, 01-Jan-1970 00:00:01 GMT");document.cookie=a.join("")}}});qx.Class.define("qx.ui.virtual.layer.HtmlCell",{extend:qx.ui.virtual.layer.Abstract,construct:function(a){this.base(arguments);this.setZIndex(2);if(qx.core.Environment.get("qx.debug")){this.assertInterface(a,qx.ui.virtual.core.IHtmlCellProvider)}this._cellProvider=a},members:{_getCellSizeStyle:function(d,a,e,c){var b="";if(qx.core.Environment.get("css.boxmodel")=="content"){d-=e;a-=c}b+="width:"+d+"px;";b+="height:"+a+"px;";return b},_fullUpdate:function(g,i,c,a){var h=[];var e=0;var k=0;var o=g;var f=i;for(var j=0;j<c.length;j++){var e=0;var f=i;var m=c[j];for(var l=0;l<a.length;l++){var b=a[l];var n=this._cellProvider.getCellProperties(o,f);var d=n.insets||[0,0];h.push("<div ","style='","left:",e,"px;","top:",k,"px;",this._getCellSizeStyle(b,m,d[0],d[1]),n.style||"","' ","class='",n.classes||"","' ",n.attributes||"",">",n.content||"","</div>");f++;e+=b}k+=m;o++}this.getContentElement().setAttribute("html",h.join(""))}},destruct:function(){this._cellProvider=null}});qx.Interface.define("qx.ui.virtual.core.IHtmlCellProvider",{members:{getCellProperties:function(b,a){}}});qx.Mixin.define("qx.ui.mobile.container.MIScroll",{construct:function(){this.__initScroll();this.__registerEventListeners()},members:{__scroll:null,__onDomSubtreeModified:null,_createScrollElement:function(){var a=qx.bom.Element.create("div");return a},_getScrollContentElement:function(){return this.getContainerElement().childNodes[0]},__initScroll:function(){if(!window.iScroll){var b=qx.util.ResourceManager.getInstance().toUri("qx/mobile/js/iscroll.js");if(qx.core.Environment.get("qx.debug")){b+="?"+new Date().getTime()}var a=new qx.io.ScriptLoader();a.load(b,this.__onScrollLoaded,this)}else{this._setScroll(this.__createScrollInstance())}},__createScrollInstance:function(){var b=qx.core.Environment.get("qx.mobile.emulatetouch");var a=new iScroll(this.getContentElement(),{desktopCompatibility:b});return a},__registerEventListeners:function(){qx.event.Registration.addListener(window,"orientationchange",this._refresh,this);qx.event.Registration.addListener(window,"resize",this._refresh,this);this.addListener("domupdated",this._refresh,this)},__unregisterEventListeners:function(){qx.event.Registration.removeListener(window,"orientationchange",this._refresh,this);qx.event.Registration.removeListener(window,"resize",this._refresh,this);this.removeListener("domupdated",this._refresh,this)},__onScrollLoaded:function(a){if(a=="success"){this._setScroll(this.__createScrollInstance())}else{if(qx.core.Environment.get("qx.debug")){this.error("Could not load iScroll")}}},_setScroll:function(a){this.__scroll=a},_refresh:function(){if(this.__scroll){this.__scroll.refresh()}}},destruct:function(){this.__unregisterEventListeners();if(this.__scroll){this.__scroll.destroy()}this.__scroll=this.__onDomSubtreeModified=null}});qx.Mixin.define("qx.ui.mobile.container.MNativeScroll",{members:{_createScrollElement:function(){return null},_getScrollContentElement:function(){return null}}});qx.Class.define("qx.ui.mobile.container.Scroll",{extend:qx.ui.mobile.core.Widget,include:[qx.ui.mobile.core.MChildrenHandling],properties:{defaultCssClass:{refine:true,init:"scroll"}},members:{_createContainerElement:function(){var a=this.base(arguments);var b=this._createScrollElement();if(b){a.appendChild(b)}return a},_getContentElement:function(){var b=this.base(arguments);var a=this._getScrollContentElement();return a||b}},defer:function(a){if(qx.core.Environment.get("qx.mobile.nativescroll")==false){qx.Class.include(a,qx.ui.mobile.container.MIScroll)}else{qx.Class.include(a,qx.ui.mobile.container.MNativeScroll)}}});qx.Class.define("qx.log.appender.RhinoConsole",{statics:{__OUT:null,__ERR:null,log:function(b,a){if(a=="error"){this.__ERR.println(b)}else{this.__OUT.println(b)}},debug:function(a){this.log(a,"debug")},info:function(a){this.log(a,"info")},warn:function(a){this.log(a,"warn")},error:function(a){this.log(a,"error")},process:function(c){var f=c.level||"info";for(var e in c){if(e=="items"){var a=c[e];for(var d in a){var b=a[d];this[f](b.text)}}}}},defer:function(){if(typeof(java)!=="undefined"){qx.log.appender.RhinoConsole.__OUT=java.lang.System.out;qx.log.appender.RhinoConsole.__ERR=java.lang.System.err}}});qx.Interface.define("qx.ui.tree.core.IVirtualTreeDelegate",{members:{configureItem:function(a){},createItem:function(){},bindLeaf:function(a,b,c){}}});qx.Class.define("qx.ui.mobile.core.Blocker",{extend:qx.ui.mobile.core.Widget,properties:{defaultCssClass:{refine:true,init:"blocker"}},members:{__count:0,show:function(){this.__count++;if(this.__count==0){this._updateSize();this.__registerEventListener();this.base(arguments)}},hide:function(){this.__count--;if(this.__count<=0){this.__count=0;this.exclude()}},forceHide:function(){this.__count=0;this.hide()},isShown:function(){return this.__count>0},_updateSize:function(){this._getElement().style.top=qx.bom.Viewport.getScrollTop()+"px";this._getElement().style.left=qx.bom.Viewport.getScrollLeft()+"px";this._getElement().style.width=qx.bom.Viewport.getWidth()+"px";this._getElement().style.height=qx.bom.Viewport.getHeight()+"px"},_onTouch:function(a){a.preventDefault()},_onScroll:function(a){this._updateSize()},__registerEventListener:function(){qx.event.Registration.addListener(window,"resize",this._updateSize,this);qx.event.Registration.addListener(window,"scroll",this._onScroll,this);qx.event.Registration.addListener(document,"touchstart",this._onTouch,this);qx.event.Registration.addListener(document,"touchmove",this._onTouch,this)},__unregisterEventListener:function(){qx.event.Registration.removeListener(window,"resize",this._updateSize,this);qx.event.Registration.removeListener(window,"scroll",this._onScroll,this);qx.event.Registration.removeListener(document,"touchstart",this._onTouch,this);qx.event.Registration.removeListener(document,"touchmove",this._onTouch,this)}},destruct:function(){this.__unregisterEventListener()}});qx.Class.define("qx.ui.table.cellrenderer.AbstractImage",{extend:qx.ui.table.cellrenderer.Abstract,type:"abstract",construct:function(){this.base(arguments);var a=this.self(arguments);if(!a.stylesheet){a.stylesheet=qx.bom.Stylesheet.createElement(".qooxdoo-table-cell-icon {  text-align:center;  padding-top:1px;}")}},members:{__defaultWidth:16,__defaultHeight:16,__imageData:null,_insetY:2,_identifyImage:function(a){throw new Error("_identifyImage is abstract")},_getImageInfos:function(a){var c=this._identifyImage(a);if(c==null||typeof c=="string"){c={url:c,tooltip:null}}if(!c.imageWidth||!c.imageHeight){var b=this.__getImageSize(c.url);c.imageWidth=b.width;c.imageHeight=b.height}c.width=c.imageWidth;c.height=c.imageHeight;return c},__getImageSize:function(e){var b=qx.util.ResourceManager.getInstance();var c=qx.io.ImageLoader;var d,a;if(b.has(e)){d=b.getImageWidth(e);a=b.getImageHeight(e)}else{if(c.isLoaded(e)){d=c.getWidth(e);a=c.getHeight(e)}else{d=this.__defaultWidth;a=this.__defaultHeight}}return{width:d,height:a}},createDataCellHtml:function(b,a){this.__imageData=this._getImageInfos(b);return this.base(arguments,b,a)},_getCellClass:function(a){return this.base(arguments)+" qooxdoo-table-cell-icon"},_getContentHtml:function(a){var b="<div></div>";if(this.__imageData.url){b=qx.bom.element.Decoration.create(this.__imageData.url,"no-repeat",{width:this.__imageData.width+"px",height:this.__imageData.height+"px",display:qx.core.Environment.get("engine.name")=="gecko"&&qx.core.Environment.get("engine.version")<1.9?"-moz-inline-box":"inline-block",verticalAlign:"top",position:"static"})}return b},_getCellAttributes:function(a){var b=this.__imageData.tooltip;if(b){return"title='"+b+"'"}else{return""}}},destruct:function(){this.__imageData=null}});qx.Class.define("qx.bom.GeoLocation",{extend:qx.core.Object,type:"singleton",construct:function(){this._geolocation=navigator.geolocation},events:{position:"qx.event.type.GeoPosition",error:"qx.event.type.Data"},members:{_watchId:null,_geolocation:null,getCurrentPosition:function(c,f,a){var d=qx.lang.Function.bind(this._successHandler,this);var b=qx.lang.Function.bind(this._errorHandler,this);var e=qx.bom.GeoLocation._createHandler(d);this._geolocation.getCurrentPosition(e,b,{enableHighAccuracy:c,timeout:f,maximumAge:a})},startWatchPosition:function(c,f,a){this.stopWatchPosition();var d=qx.lang.Function.bind(this._successHandler,this);var b=qx.lang.Function.bind(this._errorHandler,this);var e=this._createHandler(d);this._watchId=this._geolocation.watchPosition(e,b,{enableHighAccuracy:c,timeout:f,maximumAge:a})},stopWatchPosition:function(){if(this._watchId!=undefined){this._geolocation.clearWatch(this._watchId)}},_successHandler:function(a){this.fireDataEvent("position",a)},_errorHandler:function(a){this.fireDataEvent("error",a)},_createHandler:function(a){return function(b){var b=new qx.event.type.GeoPosition(b);a.call(null,b)}}},destruct:function(){this.stopWatchPosition()}});qx.Class.define("qx.event.type.GeoPosition",{extend:qx.core.Object,construct:function(a){this.base(arguments);this.setTimestamp(a.timestamp);this.setLatitude(a.coords.latitude);this.setLongitude(a.coords.longitude);this.setAltitude(a.coords.altitude);this.setAccuracy(a.coords.accuracy);this.setAltitudeAccuracy(a.coords.altitudeAccuracy);this.setHeading(a.coords.heading);this.setSpeed(a.coords.speed)},properties:{timestamp:{check:"Date"},latitude:{check:"Number"},longitude:{check:"Number"},altitude:{check:"Number",nullable:true},accuracy:{check:"Number"},altitudeAccuracy:{check:"Number",nullable:true},heading:{nullable:true},speed:{check:"Number",nullable:true}}});qx.Class.define("qx.ui.form.AbstractSelectBox",{extend:qx.ui.core.Widget,include:[qx.ui.core.MRemoteChildrenHandling,qx.ui.form.MForm],implement:[qx.ui.form.IForm],type:"abstract",construct:function(){this.base(arguments);var b=new qx.ui.layout.HBox();this._setLayout(b);b.setAlignY("middle");this.addListener("keypress",this._onKeyPress);this.addListener("blur",this._onBlur,this);var a=qx.core.Init.getApplication().getRoot();a.addListener("mousewheel",this._onMousewheel,this,true);this.addListener("resize",this._onResize,this)},properties:{focusable:{refine:true,init:true},width:{refine:true,init:120},maxListHeight:{check:"Number",apply:"_applyMaxListHeight",nullable:true,init:200},format:{check:"Function",init:function(a){return this._defaultFormat(a)},nullable:true}},members:{_createChildControlImpl:function(c,b){var a;switch(c){case"list":a=new qx.ui.form.List().set({focusable:false,keepFocus:true,height:null,width:null,maxHeight:this.getMaxListHeight(),selectionMode:"one",quickSelection:true});a.addListener("changeSelection",this._onListChangeSelection,this);a.addListener("mousedown",this._onListMouseDown,this);break;case"popup":a=new qx.ui.popup.Popup(new qx.ui.layout.VBox);a.setAutoHide(false);a.setKeepActive(true);a.addListener("mouseup",this.close,this);a.add(this.getChildControl("list"));a.addListener("changeVisibility",this._onPopupChangeVisibility,this);break}return a||this.base(arguments,c)},_applyMaxListHeight:function(b,a){this.getChildControl("list").setMaxHeight(b)},getChildrenContainer:function(){return this.getChildControl("list")},open:function(){var a=this.getChildControl("popup");a.placeToWidget(this,true);a.show()},close:function(){this.getChildControl("popup").hide()},toggle:function(){var a=this.getChildControl("popup").isVisible();if(a){this.close()}else{this.open()}},_defaultFormat:function(b){var c=b?b.getLabel():"";var a=b?b.getRich():false;if(a){c=c.replace(/<[^>]+?>/g,"");c=qx.bom.String.unescape(c)}return c},_onBlur:function(a){this.close()},_onKeyPress:function(c){var a=c.getKeyIdentifier();var b=this.getChildControl("popup");if(b.isHidden()&&(a=="PageDown"||a=="PageUp")){c.stopPropagation()}else{if(!b.isHidden()&&a=="Escape"){this.close();c.stop()}else{this.getChildControl("list").handleKeyPress(c)}}},_onMousewheel:function(c){var b=c.getTarget();var a=this.getChildControl("popup",true);if(a==null){return}if(qx.ui.core.Widget.contains(a,b)){c.preventDefault()}else{this.close()}},_onResize:function(a){this.getChildControl("popup").setMinWidth(a.getData().width)},_onListChangeSelection:function(a){throw new Error("Abstract method: _onListChangeSelection()")},_onListMouseDown:function(a){throw new Error("Abstract method: _onListMouseDown()")},_onPopupChangeVisibility:function(a){throw new Error("Abstract method: _onPopupChangeVisibility()")}},destruct:function(){var a=qx.core.Init.getApplication().getRoot();if(a){a.removeListener("mousewheel",this._onMousewheel,this,true)}}});qx.Class.define("qx.ui.form.ComboBox",{extend:qx.ui.form.AbstractSelectBox,implement:[qx.ui.form.IStringForm],construct:function(){this.base(arguments);var a=this._createChildControl("textfield");this._createChildControl("button");this.addListener("click",this._onClick);this.addListener("focusin",function(b){a.fireNonBubblingEvent("focusin",qx.event.type.Focus)},this);this.addListener("focusout",function(b){a.fireNonBubblingEvent("focusout",qx.event.type.Focus)},this)},properties:{appearance:{refine:true,init:"combobox"},placeholder:{check:"String",nullable:true,apply:"_applyPlaceholder"}},events:{changeValue:"qx.event.type.Data"},members:{__preSelectedItem:null,__onInputId:null,_applyPlaceholder:function(b,a){this.getChildControl("textfield").setPlaceholder(b)},_createChildControlImpl:function(c,b){var a;switch(c){case"textfield":a=new qx.ui.form.TextField();a.setFocusable(false);a.addState("inner");a.addListener("changeValue",this._onTextFieldChangeValue,this);a.addListener("blur",this.close,this);this._add(a,{flex:1});break;case"button":a=new qx.ui.form.Button();a.setFocusable(false);a.setKeepActive(true);a.addState("inner");this._add(a);break;case"list":a=this.base(arguments,c);a.setSelectionMode("single");break}return a||this.base(arguments,c)},_forwardStates:{focused:true,invalid:true},tabFocus:function(){var a=this.getChildControl("textfield");a.getFocusElement().focus();a.selectAllText()},focus:function(){this.base(arguments);this.getChildControl("textfield").getFocusElement().focus()},setValue:function(b){var a=this.getChildControl("textfield");if(a.getValue()==b){return}a.setValue(b)},getValue:function(){return this.getChildControl("textfield").getValue()},resetValue:function(){this.getChildControl("textfield").setValue(null)},_onKeyPress:function(c){var a=this.getChildControl("popup");var b=c.getKeyIdentifier();if(b=="Down"&&c.isAltPressed()){this.getChildControl("button").addState("selected");this.toggle();c.stopPropagation()}else{if(b=="Enter"){if(a.isVisible()){this._setPreselectedItem();this.resetAllTextSelection();this.close();c.stop()}}else{if(a.isVisible()){this.base(arguments,c)}}}},_onClick:function(b){var a=b.getTarget();if(a==this.getChildControl("button")){this.toggle()}else{this.close()}},_onListMouseDown:function(a){this._setPreselectedItem()},_setPreselectedItem:function(){if(this.__preSelectedItem){var a=this.__preSelectedItem.getLabel();if(this.getFormat()!=null){a=this.getFormat().call(this,this.__preSelectedItem)}if(a&&a.translate){a=a.translate()}this.setValue(a);this.__preSelectedItem=null}},_onListChangeSelection:function(f){var d=f.getData();if(d.length>0){var c=this.getChildControl("list");var a=c.getSelectionContext();if(a=="quick"||a=="key"){this.__preSelectedItem=d[0]}else{var b=d[0].getLabel();if(this.getFormat()!=null){b=this.getFormat().call(this,d[0])}if(b&&b.translate){b=b.translate()}this.setValue(b);this.__preSelectedItem=null}}},_onPopupChangeVisibility:function(f){var a=this.getChildControl("popup");if(a.isVisible()){var d=this.getChildControl("list");var c=this.getValue();var b=null;if(c){b=d.findItem(c)}if(b){d.setSelection([b])}else{d.resetSelection()}}else{if(f.getOldData()=="visible"){this.tabFocus()}}this.getChildControl("button").removeState("selected")},_onTextFieldChangeValue:function(d){var c=d.getData();var b=this.getChildControl("list");if(c!=null){var a=b.findItem(c,false);if(a){b.setSelection([a])}else{b.resetSelection()}}else{b.resetSelection()}this.fireDataEvent("changeValue",c,d.getOldData())},getTextSelection:function(){return this.getChildControl("textfield").getTextSelection()},getTextSelectionLength:function(){return this.getChildControl("textfield").getTextSelectionLength()},setTextSelection:function(b,a){this.getChildControl("textfield").setTextSelection(b,a)},clearTextSelection:function(){this.getChildControl("textfield").clearTextSelection()},selectAllText:function(){this.getChildControl("textfield").selectAllText()},resetAllTextSelection:function(){this.clearTextSelection();this.selectAllText()}}});qx.Class.define("qx.ui.core.selection.ScrollArea",{extend:qx.ui.core.selection.Widget,members:{_isSelectable:function(a){return this._isItemSelectable(a)&&a.getLayoutParent()===this._getWidget().getChildrenContainer()},_getDimension:function(){return this._getWidget().getPaneSize()},_getScroll:function(){var a=this._getWidget();return{left:a.getScrollX(),top:a.getScrollY()}},_scrollBy:function(a,c){var b=this._getWidget();b.scrollByX(a);b.scrollByY(c)},_getPage:function(l,h){var o=this.getSelectables();var e=o.length;var c=o.indexOf(l);if(c===-1){throw new Error("Invalid lead item: "+l)}var k=this._getWidget();var d=k.getScrollY();var b=k.getInnerSize().height;var n,a,q;if(h){var f=d;var g=c;while(1){for(;g>=0;g--){n=k.getItemTop(o[g]);if(n<f){q=g+1;break}}if(q==null){var j=this._getFirstSelectable();return j==l?null:j}if(q>=c){f-=b+d-k.getItemBottom(l);q=null;continue}return o[q]}}else{var m=b+d;var g=c;while(1){for(;g<e;g++){a=k.getItemBottom(o[g]);if(a>m){q=g-1;break}}if(q==null){var p=this._getLastSelectable();return p==l?null:p}if(q<=c){m+=k.getItemTop(l)-d;q=null;continue}return o[q]}}}}});qx.Mixin.define("qx.ui.core.MMultiSelectionHandling",{construct:function(){var a=this.SELECTION_MANAGER;var b=this.__manager=new a(this);this.addListener("mousedown",b.handleMouseDown,b);this.addListener("mouseup",b.handleMouseUp,b);this.addListener("mouseover",b.handleMouseOver,b);this.addListener("mousemove",b.handleMouseMove,b);this.addListener("losecapture",b.handleLoseCapture,b);this.addListener("keypress",b.handleKeyPress,b);this.addListener("addItem",b.handleAddItem,b);this.addListener("removeItem",b.handleRemoveItem,b);b.addListener("changeSelection",this._onSelectionChange,this)},events:{changeSelection:"qx.event.type.Data"},properties:{selectionMode:{check:["single","multi","additive","one"],init:"single",apply:"_applySelectionMode"},dragSelection:{check:"Boolean",init:false,apply:"_applyDragSelection"},quickSelection:{check:"Boolean",init:false,apply:"_applyQuickSelection"}},members:{__manager:null,selectAll:function(){this.__manager.selectAll()},isSelected:function(a){if(!qx.ui.core.Widget.contains(this,a)){throw new Error("Could not test if "+a+" is selected, because it is not a child element!")}return this.__manager.isItemSelected(a)},addToSelection:function(a){if(!qx.ui.core.Widget.contains(this,a)){throw new Error("Could not add + "+a+" to selection, because it is not a child element!")}this.__manager.addItem(a)},removeFromSelection:function(a){if(!qx.ui.core.Widget.contains(this,a)){throw new Error("Could not remove "+a+" from selection, because it is not a child element!")}this.__manager.removeItem(a)},selectRange:function(b,a){this.__manager.selectItemRange(b,a)},resetSelection:function(){this.__manager.clearSelection()},setSelection:function(a){for(var c=0;c<a.length;c++){if(!qx.ui.core.Widget.contains(this,a[c])){throw new Error("Could not select "+a[c]+", because it is not a child element!")}}if(a.length===0){this.resetSelection()}else{var b=this.getSelection();if(!qx.lang.Array.equals(b,a)){this.__manager.replaceSelection(a)}}},getSelection:function(){return this.__manager.getSelection()},getSortedSelection:function(){return this.__manager.getSortedSelection()},isSelectionEmpty:function(){return this.__manager.isSelectionEmpty()},getSelectionContext:function(){return this.__manager.getSelectionContext()},_getManager:function(){return this.__manager},getSelectables:function(a){return this.__manager.getSelectables(a)},invertSelection:function(){this.__manager.invertSelection()},_getLeadItem:function(){var a=this.__manager.getMode();if(a==="single"||a==="one"){return this.__manager.getSelectedItem()}else{return this.__manager.getLeadItem()}},_applySelectionMode:function(b,a){this.__manager.setMode(b)},_applyDragSelection:function(b,a){this.__manager.setDrag(b)},_applyQuickSelection:function(b,a){this.__manager.setQuick(b)},_onSelectionChange:function(a){this.fireDataEvent("changeSelection",a.getData())}},destruct:function(){this._disposeObjects("__manager")}});qx.Interface.define("qx.ui.core.IMultiSelection",{extend:qx.ui.core.ISingleSelection,members:{selectAll:function(){return true},addToSelection:function(a){return arguments.length==1},removeFromSelection:function(a){return arguments.length==1}}});qx.Class.define("qx.ui.form.List",{extend:qx.ui.core.scroll.AbstractScrollArea,implement:[qx.ui.core.IMultiSelection,qx.ui.form.IForm,qx.ui.form.IModelSelection],include:[qx.ui.core.MRemoteChildrenHandling,qx.ui.core.MMultiSelectionHandling,qx.ui.form.MForm,qx.ui.form.MModelSelection],construct:function(a){this.base(arguments);this.__content=this._createListItemContainer();this.__content.addListener("addChildWidget",this._onAddChild,this);this.__content.addListener("removeChildWidget",this._onRemoveChild,this);this.getChildControl("pane").add(this.__content);if(a){this.setOrientation("horizontal")}else{this.initOrientation()}this.addListener("keypress",this._onKeyPress);this.addListener("keyinput",this._onKeyInput);this.__pressedString=""},events:{addItem:"qx.event.type.Data",removeItem:"qx.event.type.Data"},properties:{appearance:{refine:true,init:"list"},focusable:{refine:true,init:true},orientation:{check:["horizontal","vertical"],init:"vertical",apply:"_applyOrientation"},spacing:{check:"Integer",init:0,apply:"_applySpacing",themeable:true},enableInlineFind:{check:"Boolean",init:true}},members:{__pressedString:null,__lastKeyPress:null,__content:null,SELECTION_MANAGER:qx.ui.core.selection.ScrollArea,getChildrenContainer:function(){return this.__content},_onAddChild:function(a){this.fireDataEvent("addItem",a.getData())},_onRemoveChild:function(a){this.fireDataEvent("removeItem",a.getData())},handleKeyPress:function(a){if(!this._onKeyPress(a)){this._getManager().handleKeyPress(a)}},_createListItemContainer:function(){return new qx.ui.container.Composite},_applyOrientation:function(e,b){var a=e==="horizontal";var d=a?new qx.ui.layout.HBox():new qx.ui.layout.VBox();var c=this.__content;c.setLayout(d);c.setAllowGrowX(!a);c.setAllowGrowY(a);this._applySpacing(this.getSpacing())},_applySpacing:function(b,a){this.__content.getLayout().setSpacing(b)},_onKeyPress:function(c){if(c.getKeyIdentifier()=="Enter"&&!c.isAltPressed()){var a=this.getSelection();for(var b=0;b<a.length;b++){a[b].fireEvent("action")}return true}return false},_onKeyInput:function(b){if(!this.getEnableInlineFind()){return}var c=this.getSelectionMode();if(!(c==="single"||c==="one")){return}if(((new Date).valueOf()-this.__lastKeyPress)>1000){this.__pressedString=""}this.__pressedString+=b.getChar();var a=this.findItemByLabelFuzzy(this.__pressedString);if(a){this.setSelection([a])}this.__lastKeyPress=(new Date).valueOf()},findItemByLabelFuzzy:function(e){e=e.toLowerCase();var c=this.getChildren();for(var d=0,b=c.length;d<b;d++){var a=c[d].getLabel();if(a&&a.toLowerCase().indexOf(e)==0){return c[d]}}return null},findItem:function(j,e){if(e!==false){j=j.toLowerCase()}var f=this.getChildren();var h;for(var c=0,a=f.length;c<a;c++){h=f[c];var g;if(h.isRich()){var b=h.getChildControl("label",true);if(b){var d=b.getContentElement().getDomElement();if(d){g=qx.bom.element.Attribute.get(d,"text")}}}else{g=h.getLabel()}if(g!=null){if(g.translate){g=g.translate()}if(e!==false){g=g.toLowerCase()}if(g.toString()==j.toString()){return h}}}return null}},destruct:function(){this._disposeObjects("__content")}});qx.Class.define("qx.ui.virtual.layer.CellSpanManager",{extend:qx.core.Object,construct:function(b,a){this.base(arguments);if(qx.core.Environment.get("qx.debug")){this.assertInstance(b,qx.ui.virtual.core.Axis);this.assertInstance(a,qx.ui.virtual.core.Axis)}this._cells={};this._invalidateSortCache();this._invalidatePositionCache();b.addListener("change",this._onRowConfigChange,this);a.addListener("change",this._onColumnConfigChange,this);this._rowConfig=b;this._columnConfig=a},members:{addCell:function(e,d,c,b,a){this._cells[e]={firstRow:d,lastRow:d+b-1,firstColumn:c,lastColumn:c+a-1,id:e};this._invalidateSortCache()},removeCell:function(a){delete (this._cells[a]);this._invalidateSortCache()},_invalidateSortCache:function(){this._sorted={}},_getSortedCells:function(b){if(this._sorted[b]){return this._sorted[b]}var a=this._sorted[b]=qx.lang.Object.getValues(this._cells);a.sort(function(d,c){return d[b]<c[b]?-1:1});return a},_findCellsInRange:function(e,c,d){var h=this._getSortedCells(e);if(h.length==0){return{}}var a=0;var b=h.length-1;while(true){var f=a+((b-a)>>1);var g=h[f];if(g[e]>=c&&(f==0||h[f-1][e]<c)){break}if(g[e]>=c){b=f-1}else{a=f+1}if(a>b){return{}}}var i={};var g=h[f];while(g&&g[e]>=c&&g[e]<=d){i[g.id]=g;g=h[f++]}return i},findCellsInWindow:function(h,g,c,f){var b={};if(c>0){var d=h+c-1;qx.lang.Object.merge(b,this._findCellsInRange("firstRow",h,d),this._findCellsInRange("lastRow",h,d))}var e={};if(f>0){var a=g+f-1;qx.lang.Object.merge(e,this._findCellsInRange("firstColumn",g,a),this._findCellsInRange("lastColumn",g,a))}return this.__intersectionAsArray(e,b)},__intersectionAsArray:function(a,d){var c=[];for(var b in a){if(d[b]){c.push(d[b])}}return c},_onRowConfigChange:function(a){this._rowPos=[]},_onColumnConfigChange:function(a){this._columnPos=[]},_invalidatePositionCache:function(){this._rowPos=[];this._columnPos=[]},_getRowPosition:function(a){var b=this._rowPos[a];if(b!==undefined){return b}b=this._rowPos[a]=this._rowConfig.getItemPosition(a);return b},_getColumnPosition:function(a){var b=this._columnPos[a];if(b!==undefined){return b}b=this._columnPos[a]=this._columnConfig.getItemPosition(a);return b},_getSingleCellBounds:function(a,d,b){var c={left:0,top:0,width:0,height:0};c.height=this._getRowPosition(a.lastRow)+this._rowConfig.getItemSize(a.lastRow)-this._getRowPosition(a.firstRow);c.top=this._getRowPosition(a.firstRow)-this._getRowPosition(d);c.width=this._getColumnPosition(a.lastColumn)+this._columnConfig.getItemSize(a.lastColumn)-this._getColumnPosition(a.firstColumn);c.left=this._getColumnPosition(a.firstColumn)-this._getColumnPosition(b);return c},getCellBounds:function(b,f,d){var e=[];for(var c=0,a=b.length;c<a;c++){e.push(this._getSingleCellBounds(b[c],f,d))}return e},computeCellSpanMap:function(d,a,s,h,q){var r=[];if(h<=0){return r}var n=a+h-1;for(var o=a;o<=n;o++){r[o]=[]}if(q<=0){return r}var g=s+q-1;for(var o=0,m=d.length;o<m;o++){var b=d[o];var e=Math.max(a,b.firstRow);var k=Math.min(n,b.lastRow);var f;for(var j=e;j<=k;j++){f=r[j];var c=Math.max(s,b.firstColumn);var t=Math.min(g,b.lastColumn);for(var p=c;p<=t;p++){f[p]=1}}}return r}},destruct:function(){this._rowConfig.removeListener("change",this._onRowConfigChange,this);this._columnConfig.removeListener("change",this._onColumnConfigChange,this);this._cells=this._sorted=this._rowPos=this._columnPos=this._rowConfig=this._columnConfig=null}});qx.Class.define("qx.ui.table.cellrenderer.Conditional",{extend:qx.ui.table.cellrenderer.Default,construct:function(d,a,b,c){this.base(arguments);this.numericAllowed=["==","!=",">","<",">=","<="];this.betweenAllowed=["between","!between"];this.conditions=[];this.__defaultTextAlign=d||"";this.__defaultColor=a||"";this.__defaultFontStyle=b||"";this.__defaultFontWeight=c||""},members:{__defaultTextAlign:null,__defaultColor:null,__defaultFontStyle:null,__defaultFontWeight:null,__applyFormatting:function(b,a){if(b[1]!=null){a["text-align"]=b[1]}if(b[2]!=null){a.color=b[2]}if(b[3]!=null){a["font-style"]=b[3]}if(b[4]!=null){a["font-weight"]=b[4]}},addNumericCondition:function(h,c,g,b,d,e,f){var a=null;if(qx.lang.Array.contains(this.numericAllowed,h)){if(c!=null){a=[h,g,b,d,e,c,f]}}if(a!=null){this.conditions.push(a)}else{throw new Error("Condition not recognized or value is null!")}},addBetweenCondition:function(b,h,g,e,c,a,d,f){if(qx.lang.Array.contains(this.betweenAllowed,b)){if(h!=null&&g!=null){var i=[b,e,c,a,d,h,g,f]}}if(i!=null){this.conditions.push(i)}else{throw new Error("Condition not recognized or value1/value2 is null!")}},addRegex:function(d,g,b,c,e,f){if(d!=null){var a=["regex",g,b,c,e,d,f]}if(a!=null){this.conditions.push(a)}else{throw new Error("regex cannot be null!")}},_getCellStyle:function(b){if(!this.conditions.length){return b.style||""}var g=b.table.getTableModel();var c;var d;var j;var a={"text-align":this.__defaultTextAlign,color:this.__defaultColor,"font-style":this.__defaultFontStyle,"font-weight":this.__defaultFontWeight};for(c in this.conditions){d=false;if(qx.lang.Array.contains(this.numericAllowed,this.conditions[c][0])){if(this.conditions[c][6]==null){j=b.value}else{j=g.getValueById(this.conditions[c][6],b.row)}switch(this.conditions[c][0]){case"==":if(j==this.conditions[c][5]){d=true}break;case"!=":if(j!=this.conditions[c][5]){d=true}break;case">":if(j>this.conditions[c][5]){d=true}break;case"<":if(j<this.conditions[c][5]){d=true}break;case">=":if(j>=this.conditions[c][5]){d=true}break;case"<=":if(j<=this.conditions[c][5]){d=true}break}}else{if(qx.lang.Array.contains(this.betweenAllowed,this.conditions[c][0])){if(this.conditions[c][7]==null){j=b.value}else{j=g.getValueById(this.conditions[c][7],b.row)}switch(this.conditions[c][0]){case"between":if(j>=this.conditions[c][5]&&j<=this.conditions[c][6]){d=true}break;case"!between":if(j<this.conditions[c][5]&&j>this.conditions[c][6]){d=true}break}}else{if(this.conditions[c][0]=="regex"){if(this.conditions[c][6]==null){j=b.value}else{j=g.getValueById(this.conditions[c][6],b.row)}var e=new RegExp(this.conditions[c][5],"g");d=e.test(j)}}}if(d==true){this.__applyFormatting(this.conditions[c],a)}}var h=[];for(var f in a){if(a[f]){h.push(f,":",a[f],";")}}return h.join("")}},destruct:function(){this.numericAllowed=this.betweenAllowed=this.conditions=null}});qx.Class.define("qx.ui.tree.selection.SelectionManager",{extend:qx.ui.core.selection.ScrollArea,members:{_getSelectableLocationY:function(b){var a=b.getBounds();if(a){var c=this._getWidget().getItemTop(b);return{top:c,bottom:c+a.height}}},_isSelectable:function(a){return this._isItemSelectable(a)&&a instanceof qx.ui.tree.core.AbstractTreeItem},_getSelectableFromMouseEvent:function(a){return this._getWidget().getTreeItem(a.getTarget())},getSelectables:function(d){var f=false;if(!d){f=this._userInteraction;this._userInteraction=true}var e=this._getWidget();var a=[];if(e.getRoot()!=null){var b=e.getRoot().getItems(true,!!d,e.getHideRoot());for(var c=0;c<b.length;c++){if(this._isSelectable(b[c])){a.push(b[c])}}}this._userInteraction=f;return a},_getSelectableRange:function(c,b){if(c===b){return[c]}var a=this.getSelectables();var e=a.indexOf(c);var d=a.indexOf(b);if(e<0||d<0){return[]}if(e<d){return a.slice(e,d+1)}else{return a.slice(d,e+1)}},_getFirstSelectable:function(){return this.getSelectables()[0]||null},_getLastSelectable:function(){var a=this.getSelectables();if(a.length>0){return a[a.length-1]}else{return null}},_getRelatedSelectable:function(b,a){var c=this._getWidget();var d=null;switch(a){case"above":d=c.getPreviousNodeOf(b,false);break;case"under":d=c.getNextNodeOf(b,false);break;case"left":case"right":break}if(!d){return null}if(this._isSelectable(d)){return d}else{return this._getRelatedSelectable(d,a)}}}});qx.Class.define("qx.ui.tree.core.AbstractTreeItem",{extend:qx.ui.tree.core.AbstractItem,type:"abstract",construct:function(a){this.base(arguments,a);this.__children=[]},properties:{parent:{check:"qx.ui.tree.core.AbstractTreeItem",nullable:true}},members:{__children:null,__childrenContainer:null,getTree:function(){var b=this;while(b.getParent()){b=b.getParent()}var a=b.getLayoutParent()?b.getLayoutParent().getLayoutParent():0;if(a&&a instanceof qx.ui.core.scroll.ScrollPane){return a.getLayoutParent()}return null},_applyOpen:function(b,a){if(this.hasChildren()){this.getChildrenContainer().setVisibility(b?"visible":"excluded")}this.base(arguments,b,a)},_shouldShowOpenSymbol:function(){var b=this.getChildControl("open",true);if(!b){return false}var a=this.getTree();if(!a.getRootOpenClose()){if(a.getHideRoot()){if(a.getRoot()==this.getParent()){return false}}else{if(a.getRoot()==this){return false}}}return this.isOpenable()},_updateIndent:function(){if(!this.getTree()){return}this.base(arguments)},getLevel:function(){var a=this.getTree();if(!a){return}var b=this;var c=-1;while(b){b=b.getParent();c+=1}if(a.getHideRoot()){c-=1}if(!a.getRootOpenClose()){c-=1}return c},addState:function(d){this.base(arguments,d);var c=this._getChildren();for(var b=0,a=c.length;b<a;b++){var e=c[b];if(e.addState){c[b].addState(d)}}},removeState:function(d){this.base(arguments,d);var c=this._getChildren();for(var b=0,a=c.length;b<a;b++){var e=c[b];if(e.removeState){c[b].removeState(d)}}},getChildrenContainer:function(){if(!this.__childrenContainer){this.__childrenContainer=new qx.ui.container.Composite(new qx.ui.layout.VBox()).set({visibility:this.isOpen()?"visible":"excluded"})}return this.__childrenContainer},hasChildrenContainer:function(){return this.__childrenContainer},getParentChildrenContainer:function(){if(this.getParent()){return this.getParent().getChildrenContainer()}else{if(this.getLayoutParent()){return this.getLayoutParent()}else{return null}}},getChildren:function(){return this.__children},hasChildren:function(){return this.__children?this.__children.length>0:false},getItems:function(d,h,g){if(g!==false){var c=[]}else{var c=[this]}var b=this.hasChildren()&&(h!==false||this.isOpen());if(b){var f=this.getChildren();if(d===false){c=c.concat(f)}else{for(var e=0,a=f.length;e<a;e++){c=c.concat(f[e].getItems(d,h,false))}}}return c},recursiveAddToWidgetQueue:function(){var c=this.getItems(true,true,false);for(var b=0,a=c.length;b<a;b++){qx.ui.core.queue.Widget.add(c[b])}},__addChildrenToParent:function(){if(this.getParentChildrenContainer()){this.getParentChildrenContainer()._addAfter(this.getChildrenContainer(),this)}},add:function(e){var d=this.getChildrenContainer();var a=this.getTree();for(var g=0,c=arguments.length;g<c;g++){var h=arguments[g];var f=h.getParent();if(f){f.remove(h)}h.setParent(this);var b=this.hasChildren();d.add(h);if(h.hasChildren()){d.add(h.getChildrenContainer())}this.__children.push(h);if(!b){this.__addChildrenToParent()}if(a){h.recursiveAddToWidgetQueue();a.fireNonBubblingEvent("addItem",qx.event.type.Data,[h])}}if(a){qx.ui.core.queue.Widget.add(this)}},addAt:function(f,d){if(qx.core.Environment.get("qx.debug")){this.assert(d<=this.__children.length&&d>=0,"Invalid child index: "+d)}if(d==this.__children.length){this.add(f);return}var e=f.getParent();if(e){e.remove(f)}var c=this.getChildrenContainer();f.setParent(this);var b=this.hasChildren();var a=this.__children[d];c.addBefore(f,a);if(f.hasChildren()){c.addAfter(f.getChildrenContainer(),f)}qx.lang.Array.insertAt(this.__children,f,d);if(!b){this.__addChildrenToParent()}if(this.getTree()){f.recursiveAddToWidgetQueue();qx.ui.core.queue.Widget.add(this)}},addBefore:function(c,b){if(qx.core.Environment.get("qx.debug")){this.assert(this.__children.indexOf(b)>=0)}var a=c.getParent();if(a){a.remove(c)}this.addAt(c,this.__children.indexOf(b))},addAfter:function(b,c){if(qx.core.Environment.get("qx.debug")){this.assert(this.__children.indexOf(c)>=0)}var a=b.getParent();if(a){a.remove(b)}this.addAt(b,this.__children.indexOf(c)+1)},addAtBegin:function(a){this.addAt(a,0)},remove:function(d){for(var e=0,c=arguments.length;e<c;e++){var f=arguments[e];if(this.__children.indexOf(f)==-1){this.warn("Cannot remove treeitem '"+f+"'. It is not a child of this tree item.");return}var b=this.getChildrenContainer();if(f.hasChildrenContainer()){var g=f.getChildrenContainer();if(b.getChildren().indexOf(g)>=0){b.remove(g)}}qx.lang.Array.remove(this.__children,f);f.setParent(null);b.remove(f)}var a=this.getTree();if(a){a.fireNonBubblingEvent("removeItem",qx.event.type.Data,[f])}qx.ui.core.queue.Widget.add(this)},removeAt:function(a){var b=this.__children[a];if(b){this.remove(b)}},removeAll:function(){var b=this.__children.concat();for(var a=this.__children.length-1;a>=0;a--){this.remove(this.__children[a])}return b}},destruct:function(){this._disposeArray("__children");this._disposeObjects("__childrenContainer")}});qx.Class.define("qx.ui.core.Command",{extend:qx.core.Object,construct:function(a){this.base(arguments);this._shortcut=new qx.bom.Shortcut(a);this._shortcut.addListener("execute",this.execute,this)},events:{execute:"qx.event.type.Data"},properties:{enabled:{init:true,check:"Boolean",event:"changeEnabled",apply:"_applyEnabled"},shortcut:{check:"String",apply:"_applyShortcut",nullable:true},label:{check:"String",nullable:true,event:"changeLabel"},icon:{check:"String",nullable:true,event:"changeIcon"},toolTipText:{check:"String",nullable:true,event:"changeToolTipText"},value:{nullable:true,event:"changeValue"},menu:{check:"qx.ui.menu.Menu",nullable:true,event:"changeMenu"}},members:{_shortcut:null,_applyEnabled:function(a){this._shortcut.setEnabled(a)},_applyShortcut:function(a){this._shortcut.setShortcut(a)},execute:function(a){this.fireDataEvent("execute",a)},toString:function(){return this._shortcut.toString()}},destruct:function(){this._disposeObjects("_shortcut");this.removeListener("execute",this.execute,this)}});qx.Class.define("qx.bom.Shortcut",{extend:qx.core.Object,construct:function(a){this.base(arguments);this.__modifier={};this.__key=null;if(a!=null){this.setShortcut(a)}this.initEnabled()},events:{execute:"qx.event.type.Data"},properties:{enabled:{init:true,check:"Boolean",event:"changeEnabled",apply:"_applyEnabled"},shortcut:{check:"String",apply:"_applyShortcut",nullable:true},autoRepeat:{check:"Boolean",init:false}},members:{__modifier:"",__key:"",execute:function(a){this.fireDataEvent("execute",a)},__onKeyDown:function(a){if(this.getEnabled()&&this.__matchesKeyEvent(a)){if(!this.isAutoRepeat()){this.execute(a.getTarget())}a.stop()}},__onKeyPress:function(a){if(this.getEnabled()&&this.__matchesKeyEvent(a)){if(this.isAutoRepeat()){this.execute(a.getTarget())}a.stop()}},_applyEnabled:function(b,a){if(b){qx.event.Registration.addListener(document.documentElement,"keydown",this.__onKeyDown,this);qx.event.Registration.addListener(document.documentElement,"keypress",this.__onKeyPress,this)}else{qx.event.Registration.removeListener(document.documentElement,"keydown",this.__onKeyDown,this);qx.event.Registration.removeListener(document.documentElement,"keypress",this.__onKeyPress,this)}},_applyShortcut:function(g,c){if(g){if(g.search(/[\s]+/)!=-1){var j="Whitespaces are not allowed within shortcuts";this.error(j);throw new Error(j)}this.__modifier={Control:false,Shift:false,Meta:false,Alt:false};this.__key=null;var e;var b=[];while(g.length>0&&e!=-1){e=g.search(/[-+]+/);b.push((g.length==1||e==-1)?g:g.substring(0,e));g=g.substring(e+1)}var h=b.length;for(var f=0;f<h;f++){var d=this.__normalizeKeyIdentifier(b[f]);switch(d){case"Control":case"Shift":case"Meta":case"Alt":this.__modifier[d]=true;break;case"Unidentified":var j="Not a valid key name for a shortcut: "+b[f];this.error(j);throw j;default:if(this.__key){var j="You can only specify one non modifier key!";this.error(j);throw j}this.__key=d}}}return true},__matchesKeyEvent:function(b){var a=this.__key;if(!a){return}if((!this.__modifier.Shift&&b.isShiftPressed())||(this.__modifier.Shift&&!b.isShiftPressed())||(!this.__modifier.Control&&b.isCtrlPressed())||(this.__modifier.Control&&!b.isCtrlPressed())||(!this.__modifier.Meta&&b.isMetaPressed())||(this.__modifier.Meta&&!b.isMetaPressed())||(!this.__modifier.Alt&&b.isAltPressed())||(this.__modifier.Alt&&!b.isAltPressed())){return false}if(a==b.getKeyIdentifier()){return true}return false},__oldKeyNameToKeyIdentifierMap:{esc:"Escape",ctrl:"Control",print:"PrintScreen",del:"Delete",pageup:"PageUp",pagedown:"PageDown",numlock:"NumLock",numpad_0:"0",numpad_1:"1",numpad_2:"2",numpad_3:"3",numpad_4:"4",numpad_5:"5",numpad_6:"6",numpad_7:"7",numpad_8:"8",numpad_9:"9",numpad_divide:"/",numpad_multiply:"*",numpad_minus:"-",numpad_plus:"+"},__normalizeKeyIdentifier:function(b){var a=qx.event.handler.Keyboard;var c="Unidentified";if(a.isValidKeyIdentifier(b)){return b}if(b.length==1&&b>="a"&&b<="z"){return b.toUpperCase()}b=b.toLowerCase();var c=this.__oldKeyNameToKeyIdentifierMap[b]||qx.lang.String.firstUp(b);if(a.isValidKeyIdentifier(c)){return c}else{return"Unidentified"}},toString:function(){var b=this.__key;var c=[];for(var a in this.__modifier){if(this.__modifier[a]){c.push(qx.locale.Key.getKeyName("short",a))}}if(b){c.push(qx.locale.Key.getKeyName("short",b))}return c.join("+")}},destruct:function(){this.setEnabled(false);this.__modifier=this.__key=null}});qx.Class.define("qx.locale.Key",{statics:{getKeyName:function(c,e,a){if(qx.core.Environment.get("qx.debug")){qx.core.Assert.assertInArray(c,["short","full"])}var b="key_"+c+"_"+e;if(qx.core.Environment.get("os.name")=="osx"&&e=="Control"){b+="_Mac"}var d=qx.locale.Manager.getInstance().translate(b,[],a);if(d==b){return qx.locale.Key._keyNames[b]||e}else{return d}}},defer:function(c){var b={};var a=qx.locale.Manager;b[a.marktr("key_short_Backspace")]="Backspace";b[a.marktr("key_short_Tab")]="Tab";b[a.marktr("key_short_Space")]="Space";b[a.marktr("key_short_Enter")]="Enter";b[a.marktr("key_short_Shift")]="Shift";b[a.marktr("key_short_Control")]="Ctrl";b[a.marktr("key_short_Control_Mac")]="Ctrl";b[a.marktr("key_short_Alt")]="Alt";b[a.marktr("key_short_CapsLock")]="Caps";b[a.marktr("key_short_Meta")]="Meta";b[a.marktr("key_short_Escape")]="Esc";b[a.marktr("key_short_Left")]="Left";b[a.marktr("key_short_Up")]="Up";b[a.marktr("key_short_Right")]="Right";b[a.marktr("key_short_Down")]="Down";b[a.marktr("key_short_PageUp")]="PgUp";b[a.marktr("key_short_PageDown")]="PgDn";b[a.marktr("key_short_End")]="End";b[a.marktr("key_short_Home")]="Home";b[a.marktr("key_short_Insert")]="Ins";b[a.marktr("key_short_Delete")]="Del";b[a.marktr("key_short_NumLock")]="Num";b[a.marktr("key_short_PrintScreen")]="Print";b[a.marktr("key_short_Scroll")]="Scroll";b[a.marktr("key_short_Pause")]="Pause";b[a.marktr("key_short_Win")]="Win";b[a.marktr("key_short_Apps")]="Apps";b[a.marktr("key_full_Backspace")]="Backspace";b[a.marktr("key_full_Tab")]="Tabulator";b[a.marktr("key_full_Space")]="Space";b[a.marktr("key_full_Enter")]="Enter";b[a.marktr("key_full_Shift")]="Shift";b[a.marktr("key_full_Control")]="Control";b[a.marktr("key_full_Control_Mac")]="Control";b[a.marktr("key_full_Alt")]="Alt";b[a.marktr("key_full_CapsLock")]="CapsLock";b[a.marktr("key_full_Meta")]="Meta";b[a.marktr("key_full_Escape")]="Escape";b[a.marktr("key_full_Left")]="Left";b[a.marktr("key_full_Up")]="Up";b[a.marktr("key_full_Right")]="Right";b[a.marktr("key_full_Down")]="Down";b[a.marktr("key_full_PageUp")]="PageUp";b[a.marktr("key_full_PageDown")]="PageDown";b[a.marktr("key_full_End")]="End";b[a.marktr("key_full_Home")]="Home";b[a.marktr("key_full_Insert")]="Insert";b[a.marktr("key_full_Delete")]="Delete";b[a.marktr("key_full_NumLock")]="NumLock";b[a.marktr("key_full_PrintScreen")]="PrintScreen";b[a.marktr("key_full_Scroll")]="Scroll";b[a.marktr("key_full_Pause")]="Pause";b[a.marktr("key_full_Win")]="Win";b[a.marktr("key_full_Apps")]="Apps";c._keyNames=b}});qx.Class.define("qx.ui.form.Resetter",{extend:qx.core.Object,construct:function(){this.base(arguments);this.__items=[]},members:{__items:null,add:function(a){if(this._supportsValue(a)){var b=a.getValue()}else{if(this.__supportsSingleSelection(a)){var b=a.getSelection()}else{throw new Error("Item "+a+" not supported for reseting.")}}this.__items.push({item:a,init:b})},reset:function(){for(var a=0;a<this.__items.length;a++){var b=this.__items[a];this.__setItem(b.item,b.init)}},resetItem:function(b){var d;for(var a=0;a<this.__items.length;a++){var c=this.__items[a];if(c.item===b){d=c.init;break}}if(d===undefined){throw new Error("The given item has not been added.")}this.__setItem(b,d)},__setItem:function(a,b){if(this._supportsValue(a)){a.setValue(b)}else{if(this.__supportsSingleSelection(a)){a.setSelection(b)}}},redefine:function(){for(var a=0;a<this.__items.length;a++){var b=this.__items[a].item;this.__items[a].init=this.__getCurrentValue(b)}},redefineItem:function(b){var c;for(var a=0;a<this.__items.length;a++){if(this.__items[a].item===b){c=this.__items[a];break}}if(c===undefined){throw new Error("The given item has not been added.")}c.init=this.__getCurrentValue(c.item)},__getCurrentValue:function(a){if(this._supportsValue(a)){return a.getValue()}else{if(this.__supportsSingleSelection(a)){return a.getSelection()}}},__supportsSingleSelection:function(b){var a=b.constructor;return qx.Class.hasInterface(a,qx.ui.core.ISingleSelection)},_supportsValue:function(b){var a=b.constructor;return(qx.Class.hasInterface(a,qx.ui.form.IBooleanForm)||qx.Class.hasInterface(a,qx.ui.form.IColorForm)||qx.Class.hasInterface(a,qx.ui.form.IDateForm)||qx.Class.hasInterface(a,qx.ui.form.INumberForm)||qx.Class.hasInterface(a,qx.ui.form.IStringForm))}},destruct:function(){this.__items=null}});qx.Class.define("qx.ui.mobile.form.Slider",{extend:qx.ui.mobile.core.Widget,construct:function(){this.base(arguments);this._registerEventListener()},properties:{defaultCssClass:{refine:true,init:"slider"},value:{check:"Integer",init:0,apply:"_updateKnobPosition",event:"changeValue"},minimum:{check:"Integer",init:0,apply:"_updateKnobPosition"},maximum:{check:"Integer",init:100,apply:"_updateKnobPosition"},step:{check:"Integer",init:1}},members:{_isMovingKnob:false,_knobElement:null,_knobWidth:null,_containerElementWidth:null,_containerElementLeft:null,nextValue:function(){this.setValue(this.getValue()+this.getStep())},previousValue:function(){this.setValue(this.getValue()-this.getStep())},_createContainerElement:function(){var a=this.base(arguments);a.appendChild(this._createKnobElement());return a},_createKnobElement:function(){return qx.bom.Element.create("div")},_registerEventListener:function(){this.addListener("touchstart",this._onTouchStart,this);this.addListener("touchmove",this._onTouchMove,this);qx.bom.Element.addListener(this._getKnobElement(),"touchstart",this._onTouchStart,this)},_unregisterEventListener:function(){this.removeListener("touchstart",this._onTouchStart,this);this.removeListener("touchmove",this._onTouchMove,this);qx.bom.Element.removeListener(this._getKnobElement(),"touchstart",this._onTouchStart,this)},_onTouchStart:function(b){this._isMovingKnob=false;this._lastPosition=0;if(!b.isMultiTouch()){var c=this._getKnobElement();var d=this.getContainerElement();this._containerElementWidth=qx.bom.element.Dimension.getWidth(d);this._containerElementLeft=qx.bom.element.Location.getLeft(d);this._knobWidth=qx.bom.element.Dimension.getWidth(c);var a=this._lastPosition=this._getPosition(b.getDocumentLeft());if(b.getTarget()==c){this._isMovingKnob=true;b.stopPropagation()}else{this.setValue(this._positionToValue(a))}}},_onTouchMove:function(b){if(this._isMovingKnob){var a=this._getPosition(b.getDocumentLeft());var c=this._pixelPerStep(this._containerElementWidth);if(Math.abs(this._lastPosition-a)>c/2){this._lastPosition=a;this.setValue(this._positionToValue(a))}b.stopPropagation();b.preventDefault()}},_getPosition:function(a){return a-this._containerElementLeft},_getKnobElement:function(){if(!this._knobElement){var a=this.getContainerElement();if(a){this._knobElement=a.childNodes[0]}}return this._knobElement},_updateKnobPosition:function(){this._setKnobPosition(this._valueToPercent(this.getValue()))},_setKnobPosition:function(d){var b=this._getKnobElement();if(b){var c=this._containerElementWidth;var a=this._percentToPosition(c,d);var e=this._knobWidth/2;if(a>c-this._knobWidth){e=this._knobWidth}else{if(a<this._knobWidth){e=0}}qx.bom.element.Style.set(b,"left",d+"%");qx.bom.element.Style.set(b,"margin-left","-"+e+"px")}},_valueToPercent:function(b){var a=this.getMinimum();var b=this._limitValue(b);return((b-a)*100)/this._getRange()},_positionToValue:function(a){var b=this._containerElementWidth;var c=this._pixelPerStep(b);if(a<=4){return this.getMinimum()}else{if(a>=b-4){return this.getMaximum()}}var d=this.getMinimum()+(Math.round(a/c)*this.getStep());return this._limitValue(d)},_percentToPosition:function(a,b){return a*(b/100)},_limitValue:function(a){a=Math.min(a,this.getMaximum());a=Math.max(a,this.getMinimum());return a},_pixelPerStep:function(a){return a/this._getOverallSteps()},_getOverallSteps:function(){return(this._getRange()/this.getStep())},_getRange:function(){return this.getMaximum()-this.getMinimum()}},destruct:function(){this._knobElement=null;this._unregisterEventListener()}});qx.Class.define("qx.ui.embed.HtmlArea",{extend:qx.ui.core.Widget,construct:function(c,a,b){this.__postPonedProperties={};this.base(arguments);this._setLayout(new qx.ui.layout.Grow);this.__addAppearListener();this.__initValues={content:c,styleInfo:a,source:b};qx.event.Registration.addListener(document.body,"mousedown",this.block,this,true);qx.event.Registration.addListener(document.body,"mouseup",this.release,this,true);qx.event.Registration.addListener(document.body,"losecapture",this.release,this,true)},events:{loadingError:"qx.event.type.Data",messengerContent:"qx.event.type.Data",cursorContext:"qx.event.type.Data",ready:"qx.event.type.Event",readyAfterInvalid:"qx.event.type.Event",focused:"qx.event.type.Event",focusOut:"qx.event.type.Event",contextmenu:"qx.event.type.Data",undoRedoState:"qx.event.type.Data"},statics:{isBlockNode:function(c){var b=qx.ui.embed.HtmlArea.isBlockNode;var a="Please use the method 'qx.dom.Node.isBlockNode' instead.";qx.log.Logger.deprecatedMethodWarning(b,a);return qx.dom.Node.isBlockNode(c)},isParagraphParent:function(a){return qx.bom.htmlarea.HtmlArea.isParagraphParent(a)}},properties:{contentType:{check:"String",init:"xhtml",apply:"_applyContentType"},messengerMode:{check:"Boolean",init:false,apply:"_applyMessengerMode"},insertParagraphOnLinebreak:{check:"Boolean",init:true,apply:"_applyInsertParagraphOnLinebreak"},insertLinebreakOnCtrlEnter:{check:"Boolean",init:true,apply:"_applyInsertLinebreakOnCtrlEnter"},postProcess:{check:"Function",nullable:true,init:null,apply:"_applyPostProcess"},useUndoRedo:{check:"Boolean",init:true,apply:"_applyUseUndoRedo"},appearance:{refine:true,init:"htmlarea"},defaultFontFamily:{check:"String",init:"Verdana",apply:"_applyDefaultFontFamily"},defaultFontSize:{check:"Integer",init:4,apply:"_applyDefaultFontSize"},focusable:{refine:true,init:true}},members:{__editorComponent:null,__postPonedProperties:null,__blockerElement:null,__initValues:null,_initBlockerElement:function(){if(!this.__blockerElement){this.__blockerElement=this._createBlockerElement()}},_applyContentType:function(b,a){if(this.__editorComponent!=null){this.__editorComponent.setContentType(b)}else{this.__postPonedProperties.ContentType=b}},_applyMessengerMode:function(b,a){if(this.__editorComponent!=null){this.__editorComponent.setMessengerMode(b)}else{this.__postPonedProperties.MessengerMode=b}},_applyInsertParagraphOnLinebreak:function(b,a){if(this.__editorComponent!=null){this.__editorComponent.setInsertParagraphOnLinebreak(b)}else{this.__postPonedProperties.InsertParagraphOnLinebreak=b}},_applyInsertLinebreakOnCtrlEnter:function(b,a){if(this.__editorComponent!=null){this.__editorComponent.setInsertLinebreakOnCtrlEnter(b)}else{this.__postPonedProperties.InsertLinebreakOnCtrlEnter=b}},_applyPostProcess:function(b,a){if(this.__editorComponent!=null){this.__editorComponent.setPostProcess(b)}else{this.__postPonedProperties.PostProcess=b}},_applyUseUndoRedo:function(b,a){if(this.__editorComponent!=null){this.__editorComponent.setUseUndoRedo(b)}else{this.__postPonedProperties.UseUndoRedo=b}},_applyDefaultFontFamily:function(b,a){if(this.__editorComponent!=null){this.__editorComponent.setDefaultFontFamily(b)}else{this.__postPonedProperties.DefaultFontFamily=b}},_applyDefaultFontSize:function(b,a){if(this.__editorComponent!=null){this.__editorComponent.setDefaultFontSize(b)}else{this.__postPonedProperties.DefaultFontSize=b}},_applyNativeContextMenu:function(b,a){if(this.__editorComponent!=null){this.__editorComponent.setNativeContextMenu(b)}else{this.__postPonedProperties.NativeContextMenu=b}},_createBlockerElement:function(){var a=new qx.html.Element("div");a.setStyles({zIndex:20,position:"absolute",display:"none"});if((qx.core.Environment.get("engine.name")=="mshtml")){a.setStyles({backgroundImage:"url("+qx.util.ResourceManager.getInstance().toUri("qx/static/blank.gif")+")",backgroundRepeat:"repeat"})}return a},__addAppearListener:function(){this.addListenerOnce("appear",this.__setupEditorComponent)},__setupEditorComponent:function(){var a=this.getContentElement().getDomElement();this.__editorComponent=new qx.bom.htmlarea.HtmlArea(a,this.__initValues.content,this.__initValues.styleInfo,this.__initValues.source);this.__applyPostPonedProperties();this.__setupDelegateListeners();if((qx.core.Environment.get("engine.name")=="gecko")){this.__setupInvalidateListener()}this.addListener("appear",this.forceEditable)},__applyPostPonedProperties:function(){for(var a in this.__postPonedProperties){this.__editorComponent["set"+a](this.__postPonedProperties[a])}},__setupDelegateListeners:function(){this.__editorComponent.addListener("ready",this.__delegateEvent,this);this.__editorComponent.addListener("readyAfterInvalid",this.__delegateEvent,this);this.__editorComponent.addListener("focused",this.__delegateEvent,this);this.__editorComponent.addListener("focusOut",this.__delegateEvent,this);this.__editorComponent.addListener("loadingError",this.__delegateDataEvent,this);this.__editorComponent.addListener("cursorContext",this.__delegateDataEvent,this);this.__editorComponent.addListener("contextmenu",this.__delegateDataEvent,this);this.__editorComponent.addListener("undoRedoState",this.__delegateDataEvent,this);this.__editorComponent.addListener("messengerContent",this.__delegateDataEvent,this)},__delegateEvent:function(a){var b=a.clone();this.fireEvent(b.getType())},__delegateDataEvent:function(a){var b=a.clone();this.fireDataEvent(b.getType(),a.getData())},__setupInvalidateListener:function(){var b=this.getContainerElement().getDomElement();var a=function(d){this.__editorComponent.invalidateEditor()};var c=qx.lang.Function.bind(a,this);qx.bom.Event.addNativeListener(b,"DOMNodeRemoved",qx.event.GlobalError.observeMethod(c))},renderLayout:function(f,e,d,a){this.base(arguments,f,e,d,a);var c="px";var b=this.getInsets();if(!this.__blockerElement){this._initBlockerElement()}this.__blockerElement.setStyles({left:b.left+c,top:b.top+c,width:(d-b.left-b.right)+c,height:(a-b.top-b.bottom)+c})},getIframeObject:function(){return this.__editorComponent!=null?this.__editorComponent.getIframeObject():null},getCommandManager:function(){return this.__editorComponent!=null?this.__editorComponent.getCommandManager():null},setValue:function(a){if(this.__editorComponent!=null){this.__editorComponent.setValue(a)}else{this.__initValues.content=a}},getValue:function(){if(this.__editorComponent!=null){return this.__editorComponent.getValue()}else{return this.__initValues.content}},getComputedValue:function(a){return this.__editorComponent!=null?this.__editorComponent.getHtml(a):null},getCompleteHtml:function(){return this.__editorComponent!=null?this.__editorComponent.getCompleteHtml():null},getContentDocument:function(){return this.__editorComponent!=null?this.__editorComponent.getContentDocument():null},getContentBody:function(){return this.__editorComponent!=null?this.__editorComponent.getContentBody():null},getContentWindow:function(){return this.__editorComponent!=null?this.__editorComponent.getContentWindow():null},getWords:function(a){return this.__editorComponent!=null?this.__editorComponent.getWords(a):null},getWordsWithElement:function(){return this.__editorComponent!=null?this.__editorComponent.getWordsWithElement():null},getTextNodes:function(){return this.__editorComponent!=null?this.__editorComponent.getTextNodes():null},isReady:function(){return this.__editorComponent!=null?this.__editorComponent.isReady():false},forceEditable:function(){if(this.__editorComponent!=null){this.__editorComponent.forceEditable()}},isLoaded:function(){return this.__editorComponent!=null?this.__editorComponent.isLoaded():false},setEditable:function(a){if(this.__editorComponent!=null){this.__editorComponent.setEditable(a)}},getEditable:function(){return this.__editorComponent!=null?this.__editorComponent.getEditable():false},isEditable:function(){return this.__editorComponent!=null?this.__editorComponent.isEditable():false},insertHtml:function(a){return this.__editorComponent!=null?this.__editorComponent.insertHtml(a):false},removeFormat:function(){return this.__editorComponent!=null?this.__editorComponent.removeFormat():false},setBold:function(){return this.__editorComponent!=null?this.__editorComponent.setBold():false},setItalic:function(){return this.__editorComponent!=null?this.__editorComponent.setItalic():false},setUnderline:function(){return this.__editorComponent!=null?this.__editorComponent.setUnderline():false},setStrikeThrough:function(){return this.__editorComponent!=null?this.__editorComponent.setStrikeThrough():false},setFontSize:function(a){return this.__editorComponent!=null?this.__editorComponent.setFontSize(a):false},setFontFamily:function(a){return this.__editorComponent!=null?this.__editorComponent.setFontFamily(a):false},setTextColor:function(a){return this.__editorComponent!=null?this.__editorComponent.setTextColor(a):false},setTextBackgroundColor:function(a){return this.__editorComponent!=null?this.__editorComponent.setTextBackgroundColor(a):false},setJustifyLeft:function(){return this.__editorComponent!=null?this.__editorComponent.setJustifyLeft():false},setJustifyCenter:function(){return this.__editorComponent!=null?this.__editorComponent.setJustifyCenter():false},setJustifyRight:function(){return this.__editorComponent!=null?this.__editorComponent.setJustifyRight():false},setJustifyFull:function(){return this.__editorComponent!=null?this.__editorComponent.setJustifyFull():false},insertIndent:function(){return this.__editorComponent!=null?this.__editorComponent.insertIndent():false},insertOutdent:function(){return this.__editorComponent!=null?this.__editorComponent.insertOutdent():false},insertOrderedList:function(){return this.__editorComponent!=null?this.__editorComponent.insertOrderedList():false},insertUnorderedList:function(){return this.__editorComponent!=null?this.__editorComponent.insertUnorderedList():false},insertHorizontalRuler:function(){return this.__editorComponent!=null?this.__editorComponent.insertHorizontalRuler():false},insertImage:function(a){return this.__editorComponent!=null?this.__editorComponent.insertImage(a):false},insertHyperLink:function(a){return this.__editorComponent!=null?this.__editorComponent.insertHyperLink(a):false},removeBackgroundColor:function(){return this.__editorComponent!=null?this.__editorComponent.removeBackgroundColor():false},setBackgroundColor:function(a){return this.__editorComponent!=null?this.__editorComponent.setBackgroundColor(a):false},removeBackgroundImage:function(){return this.__editorComponent!=null?this.__editorComponent.removeBackgroundImage():false},setBackgroundImage:function(b,c,a){return this.__editorComponent!=null?this.__editorComponent.setBackgroundImage(b,c,a):false},selectAll:function(){return this.__editorComponent!=null?this.__editorComponent.selectAll():false},undo:function(){return this.__editorComponent!=null?this.__editorComponent.undo():false},redo:function(){return this.__editorComponent!=null?this.__editorComponent.redo():false},resetHtml:function(){if(this.__editorComponent!=null){this.__editorComponent.resetHtml()}},getHtml:function(a){return this.__editorComponent!=null?this.__editorComponent.getHtml(a):null},containsOnlyPlaceholder:function(){return this.__editorComponent!=null?this.__editorComponent.containsOnlyPlaceHolder():false},getContextInformation:function(){return this.__editorComponent!=null?this.__editorComponent.getContextInformation():null},getSelection:function(){return this.__editorComponent!=null?this.__editorComponent.getSelection():null},getSelectedText:function(){return this.__editorComponent!=null?this.__editorComponent.getSelectedText():null},getSelectedHtml:function(){return this.__editorComponent!=null?this.__editorComponent.getSelectedHtml():null},clearSelection:function(){if(this.__editorComponent!=null){this.__editorComponent.clearSelection()}},getRange:function(){return this.__editorComponent.getRange()},saveRange:function(){this.__editorComponent.saveRange()},getSavedRange:function(){return this.__editorComponent.getSavedRange()},resetSavedRange:function(){this.__editorComponent.resetSavedRange()},getFocusNode:function(){return this.__editorComponent!=null?this.__editorComponent.getFocusNode():null},block:function(){if(!this.__blockerElement){this._initBlockerElement()}if(!this.getContainerElement().hasChild(this.__blockerElement)){this.getContainerElement().add(this.__blockerElement)}this.__blockerElement.setStyle("display","block")},release:function(){if(this.__blockerElement){this.__blockerElement.setStyle("display","none")}},focus:function(){this.base(arguments);this.__focusContent()},tabFocus:function(){this.base(arguments);this.__focusContent()},__focusContent:function(){if(this.__editorComponent!=null){qx.event.Timer.once(function(){this.__editorComponent.focusContent()},this,0)}}},destruct:function(){this.__postPonedProperties=this.__initValues=null;qx.event.Registration.removeListener(document.body,"mousedown",this.block,this,true);qx.event.Registration.removeListener(document.body,"mouseup",this.release,this,true);qx.event.Registration.removeListener(document.body,"losecapture",this.release,this,true);this._disposeObjects("__blockerElement","__editorComponent")}});qx.Class.define("qx.bom.htmlarea.HtmlArea",{extend:qx.core.Object,construct:function(d,g,c,f){this.base(arguments);var e=f||qx.util.ResourceManager.getInstance().toUri("qx/static/blank.html");this.__connectToDomElement(d);this.__initDocumentSkeletonParts();this._createAndAddIframe(e);this._addIframeLoadListener();this.__styleInformation=qx.bom.htmlarea.HtmlArea.__formatStyleInformation(c);if(qx.lang.Type.isString(g)){this.__value=g}if((qx.core.Environment.get("engine.name")=="opera")){var b=qx.dom.Node.getWindow(d);var a=qx.event.Registration.getManager(b).getHandler(qx.event.handler.Keyboard);a._keyCodeToIdentifierMap[35]="#";a._keyCodeToIdentifierMap[45]="-";a._keyCodeToIdentifierMap[112]="P";a._keyCodeToIdentifierMap[115]="S";a._keyCodeToIdentifierMap[120]="X"}this.__commandManager=this.__createStackCommandManager()},events:{load:"qx.event.type.Event",loadingError:"qx.event.type.Data",messengerContent:"qx.event.type.Data",cursorContext:"qx.event.type.Data",ready:"qx.event.type.Event",readyAfterInvalid:"qx.event.type.Event",focused:"qx.event.type.Event",focusOut:"qx.event.type.Event",contextmenu:"qx.event.type.Data",undoRedoState:"qx.event.type.Data"},statics:{simpleLinebreak:"<br>",EMPTY_DIV:"<div></div>",GetWordsRegExp:/([^\u0000-\u0040\u005b-\u005f\u007b-\u007f]|['])+/g,CleanupWordsRegExp:/[\u0000-\u0040]/gi,hotkeyInfo:{bold:{method:"setBold"},italic:{method:"setItalic"},underline:{method:"setUnderline"},undo:{method:"undo"},redo:{method:"redo"}},__formatStyleInformation:function(a){if(a==null||a==""){return""}else{if(typeof a=="object"){var c="";for(var b in a){c+=b+" { "+a[b]+" }"}return c}else{return a}}},__parseStyle:function(j){var h={};var b=j.split(";");var e;for(e=0;e<b.length;e++){var f=b[e],d=f.indexOf(":");if(d===-1){continue}var c=qx.lang.String.trim(f.substring(0,d));var g=qx.lang.String.trim(f.substring(d+1,f.length));if(c&&g){h[c]=g}}return h},__getHtml:function(m,c,d,e){var j=[];switch(m.nodeType){case 1:case 11:var h;var r=m.tagName.toLowerCase();var g={};var q={};var l=(!(m.hasChildNodes()||qx.bom.htmlarea.HtmlArea.__needsClosingTag(m)));if(c){if((qx.core.Environment.get("engine.name")=="mshtml")){if(r=="div"&&m.className&&m.className=="placeholder"){for(h=m.firstChild;h;h=h.nextSibling){j.push(qx.bom.htmlarea.HtmlArea.__getHtml(h,true,d,e))}return j.join("")}}var p=m.attributes;var k=p.length;var n;if((qx.core.Environment.get("engine.name")=="gecko")){if(r=="span"&&k==1&&p[0].name=="_moz_dirty"&&m.childNodes.length==0){return""}}for(h=0;h<k;h++){n=p[h];if(!n.specified){continue}var b=qx.dom.Node.getName(n);var o=n.nodeValue;if(/(_moz|contenteditable)/.test(b)){continue}if(b!="style"){if(qx.core.Environment.get("engine.name")=="mshtml"){if(b=="id"&&m.getAttribute("old_id")){o=m.getAttribute("old_id")}else{if(!isNaN(o)){o=m.getAttribute(b)}else{o=n.nodeValue}}}else{o=n.nodeValue}}else{o=m.style.cssText}if(/(_moz|^$)/.test(o)){continue}if(b=="old_id"){continue}if(!o){continue}if(b=="id"&&o=="__elementToFocus__"){continue}if(b.charAt(0)==="$"){continue}g[b]=o}if(g.style!==undefined){q=qx.bom.htmlarea.HtmlArea.__parseStyle(g.style);delete g.style}if(e){var f={domElement:m,tag:r,attributes:g,styles:q};e(f);f.domElement=null;r=f.tag}if(r){j.push("<",r);for(var b in g){var o=g[b];j.push(" ",b,'="',o.toString().replace(new RegExp('"',"g"),"'"),'"')}if(!qx.lang.Object.isEmpty(q)){j.push(' style="');for(var b in q){var o=q[b];j.push(b,":",o.toString().replace(new RegExp('"',"g"),"'"),";")}j.push('"')}j.push(l?" />":">")}}for(h=m.firstChild;h;h=h.nextSibling){j.push(qx.bom.htmlarea.HtmlArea.__getHtml(h,true,d,e))}if(c&&!l&&r){j.push("</",r,">")}break;case 3:j.push(d?m.data:qx.bom.htmlarea.HtmlArea.__htmlEncode(m.data));break;case 8:j.push("<!--",m.data,"-->");break}return j.join("")},closingTags:" SCRIPT STYLE DIV SPAN TR TD TBODY TABLE EM STRONG FONT A P B I U STRIKE H1 H2 H3 H4 H5 H6 ",__needsClosingTag:function(a){return(qx.bom.htmlarea.HtmlArea.closingTags.indexOf(" "+a.tagName+" ")!=-1)},__htmlEncode:function(a){a=a.replace(/&/ig,"&amp;");a=a.replace(/</ig,"&lt;");a=a.replace(/>/ig,"&gt;");a=a.replace(/\x22/ig,"&quot;");a=a.replace(/\xA9/ig,"&copy;");return a},isBlockNode:function(c){var b=qx.bom.htmlarea.HtmlArea.isBlockNode;var a="Please use the method 'qx.dom.Node.isBlockNode' instead.";qx.log.Logger.deprecatedMethodWarning(b,a);return qx.dom.Node.isBlockNode(c)},isParagraphParent:function(a){if(!qx.dom.Node.isElement(a)){return false}a=qx.dom.Node.getName(a);return/^(body|td|th|caption|fieldset|div)$/.test(a)},isHeadlineNode:function(a){if(!qx.dom.Node.isElement(a)){return false}var b=qx.dom.Node.getName(a);return/^h[1-6]$/.test(b)}},properties:{contentType:{check:"String",init:"xhtml"},messengerMode:{check:"Boolean",init:false},insertParagraphOnLinebreak:{check:"Boolean",init:true},insertLinebreakOnCtrlEnter:{check:"Boolean",init:true},postProcess:{check:"Function",nullable:true,init:null},useUndoRedo:{check:"Boolean",init:true},nativeContextMenu:{check:"Boolean",init:false},defaultFontFamily:{check:"String",init:"Verdana"},defaultFontSize:{check:"Integer",init:4}},members:{__widget:null,__isReady:false,__isInvalid:false,__isLoaded:false,__isEditable:false,__isFirstLineSelected:false,__commandManager:null,__stackCommandManager:null,__currentEvent:null,__storedSelectedHtml:null,__iframe:null,__styleInformation:null,__documentSkeletonParts:null,__savedRange:null,__fireCursorContextOnNextInput:false,__mouseUpOnBody:false,__connectToDomElement:function(a){if(qx.dom.Node.isElement(a)&&qx.dom.Node.isNodeName(a,"div")){this.__widget=a}},_createAndAddIframe:function(a){this.__iframe=qx.bom.Iframe.create();qx.bom.Iframe.setSource(this.__iframe,a);if((qx.core.Environment.get("engine.name")=="mshtml")){qx.bom.element.Attribute.set(this.__iframe,"hideFocus","true")}else{qx.bom.element.Style.set(this.__iframe,"outline","none")}qx.bom.element.Style.setStyles(this.__iframe,{width:"100%",height:"100%"});qx.dom.Element.insertBegin(this.__iframe,this.__widget)},_getIframeDocument:function(){return qx.bom.Iframe.getDocument(this.__iframe)},_getIframeWindow:function(){return qx.bom.Iframe.getWindow(this.__iframe)},_addIframeLoadListener:function(){qx.event.Registration.addListener(this.__iframe,"load",this._loaded,this)},__initDocumentSkeletonParts:function(){this.__documentSkeletonParts={xhtml:{doctype:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">',html:'<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">',meta:'<title></title><meta http-equiv="Content-type" content="text/html; charset=UTF-8" />',style:qx.core.Environment.select("engine.name",{mshtml:"html { margin:0px; padding:0px; } body { font-size: 100.01%; font-family:Verdana, Geneva, Arial, Helvetica, sans-serif; width:100%; height:100%; background-color:transparent; overflow:auto; background-image:none; margin:0px; padding:5px; } ","default":"html { width:100%; height:100%; margin:0px; padding:0px; overflow-y:auto; overflow-x:auto; } body { font-size:100.01%; font-family:Verdana, Geneva, Arial, Helvetica, sans-serif; background-color:transparent; overflow:visible; background-image:none; margin:0px; padding:5px; } "}),contentStyle:"p { margin:0px; padding:0px; }",body:"<body>",footer:"</body></html>"}}},__value:"",getIframeObject:function(){return this.__iframe},getCommandManager:function(){return this.__commandManager},setValue:function(a){if(qx.lang.Type.isString(a)){this.__value=a;var b=this._getIframeDocument();if(b&&b.body){b.body.innerHTML=this.__generateDefaultContent(a)}}},__generateDefaultContent:function(e){var a="";if((qx.core.Environment.get("engine.name")=="gecko")){if(qx.core.Environment.get("browser.version")<=2){a+='<br _moz_editor_bogus_node="TRUE" _moz_dirty=""/>'}}var c=e.length==0?"\ufeff":"";var d=qx.core.Environment.get("engine.name")=="gecko"||qx.core.Environment.get("engine.name")=="webkit"?'id="__elementToFocus__"':"";var b='<p><span style="font-family:'+this.getDefaultFontFamily()+'"><font '+d+' size="'+this.getDefaultFontSize()+'">'+a+e+c+"</font></span></p>";return b},getValue:function(){return this.__value},getComputedValue:function(a){return this.getHtml(a)},getCompleteHtml:function(){var a=this.__documentSkeletonParts[this.getContentType()];var b=a.html+"<head>"+a.meta+'<style type="text/css">'+a.contentStyle+"</style></head>";b+="<body style='"+this.__getBodyStyleToExport()+"'>";b+=this.getHtml()+"</body></html>";return b},__getBodyStyleToExport:function(){var a=["backgroundColor","backgroundImage","backgroundRepeat","backgroundPosition","fontFamily","fontSize","marginTop","marginBottom","marginLeft","marginRight","paddingTop","paddingBottom","paddingLeft","paddingRight"];var h=qx.bom.element.Style;var e=this.getContentBody();var f={};var g,k;var c=qx.core.Environment.get("engine.name")=="mshtml"?2:1;for(var d=0,b=a.length;d<b;d++){g=a[d];k=h.get(e,g,c);if(k!==undefined&&k!=""){f[g]=k}}return qx.bom.element.Style.compile(f)},getContentDocument:function(){if(this.__isReady){return this._getIframeDocument()}},getContentBody:function(){if(this.__isReady){return this._getIframeDocument().body}},getContentWindow:function(){if(this.__isReady){return this._getIframeWindow()}},getWords:function(b){if(!b){b=this.getContentBody()}if(!b){return[]}var a=b.cloneNode(true);var e=a.innerHTML;e=e.replace(/>/gi,"> ");e=e.replace(/\n/gi," ");e=e.replace(/<!--.*-->/gi,"");a.innerHTML=e;var d=qx.core.Environment.get("engine.name")=="mshtml"||qx.core.Environment.get("engine.name")=="opera"?a.innerText:a.textContent;var c=d.match(qx.bom.htmlarea.HtmlArea.GetWordsRegExp);return !c?[]:c},getWordsWithElement:function(){var g=this.getTextNodes();var k={};var e,c,h,f,a;for(var e=0,d=g.length;e<d;++e){f=g[e];h=f.nodeValue.split(" ");for(var c=0,b=h.length;c<b;++c){a=this._cleanupWord(h[c]);if(a!=null&&a.length>1){if(!k[a]){k[a]=[]}k[a].push(f)}}}return k},_cleanupWord:function(a){if(!a){return null}return a.replace(qx.bom.htmlarea.HtmlArea.CleanupWordsRegExp,"")},getTextNodes:function(){return this._fetchTextNodes(this.getContentBody())},_fetchTextNodes:function(d){var a=[];var c;if(d.hasChildNodes){for(var b=0;b<d.childNodes.length;b++){c=this._fetchTextNodes(d.childNodes[b]);qx.lang.Array.append(a,c)}}if(d.nodeType==3){if(d.nodeValue.length>1){a.push(d)}}return a},__loadCounter:0,__waitForDocumentReady:function(){var a=this._getIframeDocument();if(!a){this.__loadCounter++;if(this.__loadCounter>5){this.error("cant load HtmlArea. Document is not available. "+a);this.fireDataEvent("loadingError")}else{if(qx.core.Environment.get("qx.debug")){this.error("document not available, try again...")}qx.event.Timer.once(function(){this.__waitForDocumentReady()},this,0)}}else{this.__loadCounter=0;this._onDocumentIsReady()}},_loaded:function(a){if(this.__isLoaded){return}if(this.__isInvalid){this.__resetEditorToValidState();return}if((qx.core.Environment.get("engine.name")=="mshtml")){this.__waitForDocumentReady()}else{this._onDocumentIsReady()}},isReady:function(){return this.__isReady},_onDocumentIsReady:function(){var a=new qx.bom.htmlarea.manager.Command(this);if(this.getUseUndoRedo()){a=new qx.bom.htmlarea.manager.UndoRedo(a,this)}this.__isLoaded=true;if((qx.core.Environment.get("engine.name")=="mshtml")){this.setEditable(true)}this.__renderContent();if(!(qx.core.Environment.get("engine.name")=="opera")){this.__addListeners()}if(!(qx.core.Environment.get("engine.name")=="mshtml")){this.setEditable(true)}this.__isReady=true;this.__commandManager=a;a.setContentDocument(this._getIframeDocument());this.__processStackedCommands();if((qx.core.Environment.get("engine.name")=="opera")){this.__addListeners()}this.fireEvent("ready")},forceEditable:qx.core.Environment.select("engine.name",{gecko:function(){var a=this._getIframeDocument();if(a){if(parseFloat(qx.core.Environment.get("engine.version"))>="1.9"){a.designMode="Off";a.body.contentEditable=false;a.body.contentEditable=true}else{a.body.contentEditable=true;this.__setDesignMode(true)}}},"default":qx.lang.Function.empty}),invalidateEditor:qx.core.Environment.select("engine.name",{gecko:function(){this.__isLoaded=false;this.__isReady=false;this.__isInvalid=true},"default":function(){}}),__resetEditorToValidState:qx.core.Environment.select("engine.name",{gecko:function(){this.__renderContent();this.__addListeners();this.__commandManager.setContentDocument(this._getIframeDocument());this.setEditable(true);this.forceEditable();this.__isLoaded=true;this.__isReady=true;this.__isInvalid=false;this.fireEvent("readyAfterInvalid")},"default":function(){}}),__getElementStyleAsString:function(d){var b="";if(!d){return b}try{var c=d.getAttribute("style");if(!c){return b}if((qx.core.Environment.get("engine.name")=="mshtml")){b=c.cssText}else{b=c}}catch(a){this.error("can't extract style from elem. ")}return b},__generateDocumentSkeleton:function(d){var e=qx.core.Environment.get("engine.name")=="gecko"?" html, body {overflow-x: visible; } ":"";var c=this.__documentSkeletonParts[this.getContentType()];var a="<head>"+c.meta+'<style type="text/css">'+e+c.style+c.contentStyle+this.__styleInformation+"</style></head>";var b=c.body+d;return c.html+a+b+c.footer},__renderContent:function(){var a=this.__generateDefaultContent(this.getValue());if(qx.lang.Type.isString(a)){var c=this._getIframeDocument();try{c.open("text/html",true);c.write(this.__generateDocumentSkeleton(a));c.close()}catch(b){this.error("cant open document on source '"+qx.bom.Iframe.queryCurrentUrl(this.__iframe)+"'",b);this.fireDataEvent("loadingError",b)}}},__addListeners:function(){this.__addKeyListeners();this.__addMouseListeners();this.__addFocusListeners()},__addKeyListeners:function(){var a=qx.event.Registration;var b=this._getIframeDocument();a.addListener(b.body,"keypress",this._handleKeyPress,this);a.addListener(b.body,"keyup",this._handleKeyUp,this);a.addListener(b.body,"keydown",this._handleKeyDown,this)},__addFocusListeners:function(){var b=qx.event.Registration;var c=this._getIframeDocument();var a=qx.core.Environment.get("engine.name")=="webkit"?this._getIframeWindow():c.body;b.addListener(a,"focus",this._handleFocusEvent,this);b.addListener(a,"blur",this._handleBlurEvent,this);b.addListener(c,"focusout",this._handleFocusOutEvent,this)},__addMouseListeners:function(){var a=qx.event.Registration;var c=this._getIframeDocument();var b=qx.core.Environment.get("engine.name")=="mshtml"?"click":"mouseup";a.addListener(c.body,b,this._handleMouseUpOnBody,this);a.addListener(c.documentElement,b,this._handleMouseUpOnDocument,this);a.addListener(c.documentElement,"contextmenu",this._handleContextMenuEvent,this)},__createStackCommandManager:function(){if(this.__stackCommandManager==null){this.__stackCommandManager={execute:function(b,a){this.stackedCommands=true;this.commandStack.push({command:b,value:a})},commandStack:[],stackedCommands:false}}this.__stackCommandManager.stackedCommands=false;return this.__stackCommandManager},__processStackedCommands:function(){var c=this.__stackCommandManager;if(c!=null&&c.stackedCommands){var d=c.commandStack;if(d!=null){for(var b=0,a=d.length;b<a;b++){this.__commandManager.execute(d[b].command,d[b].value)}}}},__setDesignMode:function(a){var c=this._getIframeDocument();if(this.__isLoaded&&c){try{if((qx.core.Environment.get("engine.name")=="gecko")){c.designMode=(a!==false)?"Off":"On"}c.designMode=(a!==false)?"On":"Off"}catch(b){}}},setEditable:function(b){if(this.__isLoaded){this.__setDesignMode(true);if((qx.core.Environment.get("engine.name")=="gecko")){try{var c=this._getIframeDocument();c.execCommand("styleWithCSS",false,true)}catch(a){try{var c=this._getIframeDocument();c.execCommand("useCSS",false,false)}catch(a){if(!this.__isReady){this.error("Failed to enable rich edit functionality");this.fireDataEvent("loadingError",a)}else{throw new Error("Failed to enable rich edit functionality")}}}}this.__isEditable=b}},getEditable:function(){return this.__isEditable},isEditable:function(){return this.__isEditable},__controlPressed:false,_handleKeyUp:function(c){var b=c.getKeyIdentifier().toLowerCase();this.__currentEvent=c;if((qx.core.Environment.get("qx.debug"))&&qx.core.Environment.get("qx.bom.htmlarea.HtmlArea.debug")){this.debug(c.getType()+" | "+b)}if(qx.core.Environment.get("engine.name")=="mshtml"||qx.core.Environment.get("engine.name")=="webkit"){if(this.__controlPressed){switch(b){case"enter":if(this.getInsertLinebreakOnCtrlEnter()){if((qx.core.Environment.get("engine.name")=="webkit")){this.__insertWebkitLineBreak();c.preventDefault();c.stopPropagation()}else{var a=this.__createRange(this.getSelection());if(a){a.collapse(true);a.pasteHTML('<br/><div class="placeholder"></div>')}}this.__startExamineCursorContext()}break;case"control":this.__controlPressed=false;return;break}}}else{if((qx.core.Environment.get("engine.name")=="gecko")){switch(b){case"left":case"right":case"up":case"down":case"pageup":case"pagedown":case"delete":case"end":case"backspace":this.__isFirstLineSelected=(this.getFocusNode()==this.getContentBody().firstChild);break}}}},__insertWebkitLineBreak:function(){var b=this.getSelection();var a="";if(b&&(b.focusNode.textContent==""||b.focusNode.parentElement.tagName=="LI")){a="<br class='webkit-block-placeholder' />"}this.__commandManager.execute("inserthtml",a+qx.bom.htmlarea.HtmlArea.simpleLinebreak)},_handleKeyDown:qx.core.Environment.select("engine.name",{"mshtml|webkit":function(b){var a=b.getKeyIdentifier().toLowerCase();if((qx.core.Environment.get("qx.debug"))&&qx.core.Environment.get("qx.bom.htmlarea.HtmlArea.debug")){}if(this.__controlPressed&&(a=="z"||a=="y"||a=="b"||a=="u"||a=="i"||a=="k")){b.preventDefault();b.stopPropagation()}if(a=="control"){this.__controlPressed=true}},"default":function(a){}}),_handleKeyPress:function(j){var m=this.getContentDocument();var i=j.getKeyIdentifier().toLowerCase();var h=j.isCtrlPressed();var f=j.isShiftPressed();this.__currentEvent=j;if((qx.core.Environment.get("qx.debug"))&&qx.core.Environment.get("qx.bom.htmlarea.HtmlArea.debug")){this.debug(j.getType()+" | "+i)}if(this.__fireCursorContextOnNextInput){var n=!((qx.core.Environment.get("engine.name")=="mshtml")&&i=="enter")||!((qx.core.Environment.get("engine.name")=="gecko")&&i=="enter");if(n){this.__startExamineCursorContext();this.__fireCursorContextOnNextInput=false}}switch(i){case"enter":if(!f&&!h&&this.getMessengerMode()){j.preventDefault();j.stopPropagation();var d=new qx.event.type.Data("messengerContent",this.getComputedValue());this.dispatchEvent(d,true);this.resetHtml()}if(h){if(!this.getInsertLinebreakOnCtrlEnter()){return}j.preventDefault();j.stopPropagation();if((qx.core.Environment.get("engine.name")=="gecko")){if(this.__isSelectionWithinWordBoundary()){this.insertHtml("<br />");this.__startExamineCursorContext();return}this.insertHtml("<br /><div id='placeholder'></div>")}else{if((qx.core.Environment.get("engine.name")=="opera")){var c=this.getSelection();var b=this.__createRange(c);if(c&&b){var k=m.createElement("br");b.collapse(true);b.insertNode(k);b.collapse(true);b.selectNode(k);c.addRange(b);b.collapse(true)}}}this.__startExamineCursorContext()}if((qx.core.Environment.get("engine.name")=="mshtml")){if(!this.getInsertParagraphOnLinebreak()){if(this.__commandManager.execute("inserthtml",qx.bom.htmlarea.HtmlArea.simpleLinebreak)){this.__startExamineCursorContext();j.preventDefault();j.stopPropagation()}}}else{if((qx.core.Environment.get("engine.name")=="gecko")){if(this.getInsertParagraphOnLinebreak()&&!f&&!h){var c=this.getSelection();if(c){var g=c.focusNode;if(this.__isSelectionWithinWordBoundary()){this.__startExamineCursorContext();return}if(this.__isFocusNodeAnElement()){this.__startExamineCursorContext();return}while(!qx.dom.Node.isNodeName(g,"body")){if(qx.dom.Node.isNodeName(g,"li")){this.__startExamineCursorContext();return}g=g.parentNode}}this.__commandManager.insertParagraphOnLinebreak();j.preventDefault();j.stopPropagation();this.__startExamineCursorContext();this.__fireCursorContextOnNextInput=true}}else{if((qx.core.Environment.get("engine.name")=="webkit")){if(this.getInsertParagraphOnLinebreak()&&f){this.__insertWebkitLineBreak();j.preventDefault();j.stopPropagation();this.__startExamineCursorContext()}}}}break;case"up":if(qx.core.Environment.get("engine.name")=="gecko"&&qx.core.Environment.get("engine.version")<1.9&&f){var c=this.getSelection();if(c&&c.focusNode==m.body.firstChild){if(this.__isFirstLineSelected){if(c.focusOffset!=0){c.extend(c.focusNode,0)}}}}this.__startExamineCursorContext();break;case"home":if(qx.core.Environment.get("engine.name")=="gecko"&&qx.core.Environment.get("engine.version")<1.9){if(h){var c=this.getSelection();if(f){if(c&&(c.focusOffset!=0)||(c.focusNode!=m.body.firstChild)){c.extend(m.body.firstChild,0)}}else{var a=null;var l;if(m){a=m.evaluate("//text()[string-length(normalize-space(.))>0]",m.body,null,XPathResult.ANY_TYPE,null)}if(a&&c){while(l=a.iterateNext()){if(l&&l.parentNode&&l.parentNode.tagName!="STYLE"){try{c.extend(l,0);if(!this.isSelectionCollapsed()){c.collapseToStart()}}catch(j){}break}}}}}}this.__startExamineCursorContext();break;case"left":case"right":case"down":case"pageup":case"pagedown":case"delete":case"end":case"backspace":this.__startExamineCursorContext();break;case"b":if(h){this.__executeHotkey("bold",true)}break;case"i":case"k":if(h){this.__executeHotkey("italic",true)}break;case"u":if(h){this.__executeHotkey("underline",true)}break;case"z":if(h&&!f){this.__executeHotkey("undo",true)}else{if(h&&f){this.__executeHotkey("redo",true)}}break;case"y":if(h){this.__executeHotkey("redo",true)}break;case"a":if(h){this.selectAll()}break}this.__currentEvent=null},__executeHotkey:function(b,a){var d=null;var c=qx.bom.htmlarea.HtmlArea.hotkeyInfo;if(c[b]){d=c[b].method}if(d!=null&&this[d]){this[d]();if(a){this.__currentEvent.preventDefault();this.__currentEvent.stopPropagation()}if(this.isSelectionCollapsed()){this.__fireCursorContextOnNextInput=true}this.__startExamineCursorContext()}},_handleFocusEvent:function(b){this.__storedSelectedHtml=null;if(qx.core.Environment.get("engine.name")=="gecko"||qx.core.Environment.get("engine.name")=="webkit"){var a=this.getContentDocument().getElementById("__elementToFocus__");if(a){qx.bom.element.Attribute.reset(a,"id")}}this.fireEvent("focused")},_handleBlurEvent:function(a){this.__value=this.getComputedValue()},_handleFocusOutEvent:function(a){this.__controlPressed=false;if(this.__storedSelectedHtml==null){this.__storedSelectedHtml=this.getSelectedHtml()}this.fireEvent("focusOut")},_handleMouseUpOnBody:function(a){if((qx.core.Environment.get("qx.debug"))&&qx.core.Environment.get("qx.bom.htmlarea.HtmlArea.debug")){this.debug("handleMouse "+a.getType())}this.__mouseUpOnBody=true;this.__startExamineCursorContext()},_handleMouseUpOnDocument:qx.core.Environment.select("engine.name",{mshtml:qx.lang.Function.empty,"default":function(a){if(!this.__mouseUpOnBody){qx.bom.Element.activate(this.getContentBody())}this.__mouseUpOnBody=false}}),_handleContextMenuEvent:function(g){if(!this.getNativeContextMenu()){var f=g.getViewportLeft();var c=g.getViewportTop();var d=qx.bom.element.Location.getLeft(this.__widget)+f;var b=qx.bom.element.Location.getTop(this.__widget)+c;var a={x:d,y:b,relX:f,relY:c,target:g.getTarget()};g.preventDefault();g.stopPropagation();qx.event.Timer.once(function(){this.fireDataEvent("contextmenu",a)},this,0)}},isLoaded:function(){return this.__isLoaded},insertHtml:function(a){return this.__commandManager.execute("inserthtml",a)},removeFormat:function(){var a=this.__commandManager.execute("removeformat");this.__commandManager.execute("fontsize",this.getDefaultFontSize());this.__commandManager.execute("fontfamily",this.getDefaultFontFamily());return a},setBold:function(){return this.__commandManager.execute("bold")},setItalic:function(){return this.__commandManager.execute("italic")},setUnderline:function(){return this.__commandManager.execute("underline")},setStrikeThrough:function(){return this.__commandManager.execute("strikethrough")},setFontSize:function(a){return this.__commandManager.execute("fontsize",a)},setFontFamily:function(a){return this.__commandManager.execute("fontfamily",a)},setTextColor:function(a){return this.__commandManager.execute("textcolor",a)},setTextBackgroundColor:function(a){return this.__commandManager.execute("textbackgroundcolor",a)},setJustifyLeft:function(){return this.__commandManager.execute("justifyleft")},setJustifyCenter:function(){return this.__commandManager.execute("justifycenter")},setJustifyRight:function(){return this.__commandManager.execute("justifyright")},setJustifyFull:function(){return this.__commandManager.execute("justifyfull")},insertIndent:function(){return this.__commandManager.execute("indent")},insertOutdent:function(){return this.__commandManager.execute("outdent")},insertOrderedList:function(){return this.__commandManager.execute("insertorderedlist")},insertUnorderedList:function(){return this.__commandManager.execute("insertunorderedlist")},insertHorizontalRuler:function(){return this.__commandManager.execute("inserthorizontalrule")},insertImage:function(a){return this.__commandManager.execute("insertimage",a)},insertHyperLink:function(a){return this.__commandManager.execute("inserthyperlink",a)},removeBackgroundColor:function(){this.__commandManager.execute("backgroundcolor","transparent")},setBackgroundColor:function(a){this.__commandManager.execute("backgroundcolor",a)},removeBackgroundImage:function(){this.__commandManager.execute("backgroundimage")},setBackgroundImage:function(b,c,a){return this.__commandManager.execute("backgroundimage",[b,c,a])},selectAll:function(){return this.__commandManager.execute("selectall")},undo:function(){if(this.getUseUndoRedo()){return this.__commandManager.execute("undo")}else{return true}},redo:function(){if(this.getUseUndoRedo()){return this.__commandManager.execute("redo")}else{return true}},resetHtml:function(){var c=this._getIframeDocument();while(c.body.firstChild){c.body.removeChild(c.body.firstChild)}if(qx.core.Environment.get("engine.name")=="gecko"){c.body.innerHTML="<p>&nbsp;</p>"}else{if(qx.core.Environment.get("engine.name")=="webkit"){var b=this.getSelection();var a=c.createRange();if(a&&b){b.addRange(a)}}}},getHtml:function(a){var b=this._getIframeDocument();if(b==null){return null}return qx.bom.htmlarea.HtmlArea.__getHtml(b.body,false,a,this.getPostProcess())},containsOnlyPlaceholder:qx.core.Environment.select("engine.name",{mshtml:function(){var a=this._getIframeDocument();return(a.body.innerHTML=="<P>&nbsp;</P>")},"default":qx.lang.Function.returnFalse}),_selectElement:function(b){var c=this.getContentWindow().getSelection();var a=this.getContentDocument().createRange();a.setStart(b,0);c.removeAllRanges();c.addRange(a)},focusContent:qx.core.Environment.select("engine.name",{gecko:function(){var a=this.getContentDocument();var b=a.getElementById("__elementToFocus__");this.getContentWindow().focus();qx.bom.Element.focus(this.getContentBody());if(b){this._selectElement(b)}else{this.__checkForContentAndSetDefaultContent()}},webkit:function(){qx.bom.Element.focus(this.getContentWindow());qx.bom.Element.focus(this.getContentBody());var a=this.getContentDocument().getElementById("__elementToFocus__");if(a){qx.bom.element.Attribute.reset(a,"id")}this.__checkForContentAndSetDefaultContent()},opera:function(){qx.bom.Element.focus(this.getContentWindow());qx.bom.Element.focus(this.getContentBody());this.__checkForContentAndSetDefaultContent()},"default":function(){qx.bom.Element.focus(this.getContentBody());this.__checkForContentAndSetDefaultContent()}}),__checkForContentAndSetDefaultContent:function(){if(!this.__isContentAvailable()){this.__resetToDefaultContentAndSelect()}},__isContentAvailable:qx.core.Environment.select("engine.name",{gecko:function(){var a=this.getContentBody().childNodes;if(a.length==0){return false}else{if(a.length==1){return !(a[0]&&qx.dom.Node.isNodeName(a[0],"br")&&qx.bom.element.Attribute.get(a[0],"_moz_dirty")!=null)}else{return true}}},webkit:function(){var a=this.getContentBody().childNodes;if(a.length==0){return false}else{if(a.length==1){return !(a[0]&&qx.dom.Node.isNodeName(a[0],"br"))}else{return true}}},"default":function(){var a=this.getContentBody().childNodes;if(a.length==0){return false}else{if(a.length==1){return !(a[0]&&qx.dom.Node.isNodeName(a[0],"p")&&a[0].firstChild==null)}else{return true}}}}),__resetToDefaultContentAndSelect:qx.core.Environment.select("engine.name",{"gecko|webkit":function(){this.getContentDocument().body.innerHTML=this.__generateDefaultContent("");var a=this.getContentDocument().getElementById("__elementToFocus__");qx.bom.element.Attribute.reset(a,"id");this._selectElement(a)},"default":function(){var a=qx.dom.Hierarchy.getFirstDescendant(this.getContentBody());if(qx.dom.Node.isNodeName(a,"p")){qx.bom.element.Style.set(a,"font-family",this.getDefaultFontFamily());qx.bom.element.Style.set(a,"font-size",this.getDefaultFontSize())}}}),getContextInformation:function(){return this.__examineCursorContext()},__startExamineCursorContext:function(){qx.event.Timer.once(function(b){var a=this.__examineCursorContext();this.fireDataEvent("cursorContext",a)},this,200)},__examineCursorContext:function(){if(this._processingExamineCursorContext||this.getEditable()==false){return}this._processingExamineCursorContext=true;if(!this.__isContentAvailable()){this.__resetToDefaultContentAndSelect()}var e=this.getFocusNode();if(e==null){return}if(qx.dom.Node.isText(e)){e=e.parentNode}var s=this._getIframeDocument();var m=(qx.core.Environment.get("engine.name")=="mshtml")?e.currentStyle:s.defaultView.getComputedStyle(e,null);var k=false;var l=false;var b=false;var r=false;var f=false;var n=false;var c=false;var d=false;var p=false;var g=false;var a=null;var i=null;var q=null;if(m!=null){if((qx.core.Environment.get("engine.name")=="mshtml")){l=m.fontStyle=="italic";b=m.textDecoration.indexOf("underline")!==-1;r=m.textDecoration.indexOf("line-through")!==-1;a=m.fontSize;q=m.fontFamily;c=m.textAlign=="left";d=m.textAlign=="center";p=m.textAlign=="right";g=m.textAlign=="justify"}else{l=m.getPropertyValue("font-style")=="italic";b=m.getPropertyValue("text-decoration").indexOf("underline")!==-1;r=m.getPropertyValue("text-decoration").indexOf("line-through")!==-1;a=m.getPropertyValue("font-size");q=m.getPropertyValue("font-family");c=m.getPropertyValue("text-align")=="left";d=m.getPropertyValue("text-align")=="center";p=m.getPropertyValue("text-align")=="right";g=m.getPropertyValue("text-align")=="justify"}if(qx.core.Environment.get("engine.name")=="mshtml"||qx.core.Environment.get("engine.name")=="opera"){k=m.fontWeight==700}else{k=m.getPropertyValue("font-weight")=="bold"||qx.dom.Node.isNodeName(e,"b")}}var j=e;if(j!=null&&j.parentNode!=null&&!qx.dom.Node.isDocument(j.parentNode)){while(j!=null&&!qx.dom.Node.isNodeName(j,"body")){var o=qx.dom.Node.getName(j);if(o=="ol"){n=true;break}else{if(o=="ul"){f=true;break}}if(i==null||i==""){i=qx.bom.element.Attribute.get(j,"size")}j=j.parentNode}}var h={bold:k?1:0,italic:l?1:0,underline:b?1:0,strikethrough:r?1:0,fontSize:(i==null)?a:i,fontFamily:q,insertUnorderedList:f?1:0,insertOrderedList:n?1:0,justifyLeft:c?1:0,justifyCenter:d?1:0,justifyRight:p?1:0,justifyFull:g?1:0};this._processingExamineCursorContext=false;return h},getSelection:qx.core.Environment.select("engine.name",{mshtml:function(){return this._getIframeDocument()?this._getIframeDocument().selection:null},"default":function(){return this._getIframeWindow()?this._getIframeWindow().getSelection():null}}),isSelectionCollapsed:qx.core.Environment.select("engine.name",{mshtml:function(){return this.getSelection()&&this.getSelection().type=="None"},"default":function(){return this.getSelection()&&this.getSelection().isCollapsed}}),getSelectedText:qx.core.Environment.select("engine.name",{mshtml:function(){return this.getRange()?this.getRange().text:""},"default":function(){return this.getRange()?this.getRange().toString():""}}),getSelectedHtml:function(){if(this.__storedSelectedHtml!=null){return this.__storedSelectedHtml}var a=this.getRange();if(!a){return""}else{return this.__getRangeContents(a)}},__getRangeContents:qx.core.Environment.select("engine.name",{mshtml:function(a){if(!a){return""}return a.item?a.item(0).outerHTML:a.htmlText},"default":function(b){var c=this._getIframeDocument();if(c&&b){try{var d=c.createElement("body");d.appendChild(b.cloneContents());return d.innerHTML}catch(a){}return b+""}return""}}),clearSelection:qx.core.Environment.select("engine.name",{mshtml:function(){var a=this.getSelection();if(a){a.empty()}},"default":function(){var a=this.getSelection();if(a){a.collapseToStart()}}}),__isSelectionWithinWordBoundary:qx.core.Environment.select("engine.name",{gecko:function(){var a=this.getSelection();var b=this.getFocusNode();return a&&this.isSelectionCollapsed()&&b!=null&&qx.dom.Node.isText(b)&&a.anchorOffset<b.length},"default":function(){return false}}),__isFocusNodeAnElement:qx.core.Environment.select("engine.name",{gecko:function(){return qx.dom.Node.isElement(this.getFocusNode())},"default":function(){return false}}),getRange:function(){return this.__createRange(this.getSelection())},__createRange:qx.core.Environment.select("engine.name",{mshtml:function(b){var c=this._getIframeDocument();if(b){try{return b.createRange()}catch(a){return c?c.body.createTextRange():null}}else{return c?c.body.createTextRange():null}},"default":function(b){var c=this._getIframeDocument();if(b){try{return b.getRangeAt(0)}catch(a){return c?c.createRange():null}}else{return c?c.createRange():null}}}),saveRange:qx.core.Environment.select("engine.name",{mshtml:function(){this.__savedRange=this.getRange()},"default":function(){}}),getSavedRange:qx.core.Environment.select("engine.name",{mshtml:function(){return this.__savedRange},"default":function(){}}),resetSavedRange:qx.core.Environment.select("engine.name",{mshtml:function(){this.__savedRange=null},"default":function(){}}),getFocusNode:qx.core.Environment.select("engine.name",{mshtml:function(){var c=this.getSelection();var a;switch(c.type){case"Text":case"None":a=this.__createRange(c);if(a){a.collapse(false);return a.parentElement()}else{return null}break;case"Control":a=this.__createRange(c);if(a){try{a.collapse(false)}catch(b){}return a.item(0)}else{return null}break;default:return this._getIframeDocument().body}},"default":function(){var a=this.getSelection();if(a&&a.focusNode){return a.focusNode}return this._getIframeDocument().body}})},environment:{"qx.bom.htmlarea.HtmlArea.debug":false},destruct:function(){try{var e=this._getIframeDocument();var b=qx.event.Registration;b.removeListener(e.body,"keypress",this._handleKeyPress,this);b.removeListener(e.body,"keyup",this._handleKeyUp,this);b.removeListener(e.body,"keydown",this._handleKeyDown,this);var a=qx.core.Environment.get("engine.name")=="webkit"?this._getIframeWindow():e.body;b.removeListener(a,"focus",this._handleFocusEvent);b.removeListener(a,"blur",this._handleBlurEvent);b.removeListener(e,"focusout",this._handleFocusOutEvent);var d=qx.core.Environment.get("engine.name")=="mshtml"?"click":"mouseup";b.removeListener(e.body,d,this._handleMouseUpOnBody,this);b.removeListener(e.documentElement,d,this._handleMouseUpOnDocument,this);b.removeListener(e.documentElement,"contextmenu",this._handleContextMenuEvent,this);if((qx.core.Environment.get("engine.name")=="mshtml")){qx.bom.Iframe.setSource(this.__iframe,"about:blank")}}catch(c){}if(this.__commandManager instanceof qx.core.Object){this._disposeObjects("__commandManager")}else{this.__commandManager=null}this.__documentSkeletonParts=this.__iframe=this.__widget=this.__stackCommandManager=null}});qx.Class.define("qx.bom.htmlarea.manager.Command",{extend:qx.core.Object,construct:function(a){this.base(arguments);this.__editorInstance=a;this.__doc=null;this._commands=null;this.__populateCommandList();this.__invalidFocusCommands={Bold:true,Italic:true,Underline:true,StrikeThrough:true};this.__fontSizeNames=[10,12,16,18,24,32,48];this.__hyperLinkId=0},statics:{__backgroundPosition:"|top|bottom|center|left|right|right top|left top|left bottom|right bottom|",__backgroundRepeat:"repeat repeat-x repeat-y no-repeat"},members:{__doc:null,__editorInstance:null,__startTyping:false,__invalidFocusCommands:null,__fontSizeNames:null,__hyperLinkId:null,setContentDocument:function(a){this.__doc=a},getCommandObject:function(a){if(this._commands[a]){return this._commands[a]}else{return null}},__populateCommandList:function(){this._commands={bold:{useBuiltin:false,identifier:"Bold",method:"__setBold"},italic:{useBuiltin:false,identifier:"Italic",method:"__setItalic"},underline:{useBuiltin:false,identifier:"Underline",method:"__setUnderline"},strikethrough:{useBuiltin:false,identifier:"StrikeThrough",method:"__setStrikeThrough"},fontfamily:{useBuiltin:true,identifier:"FontName",method:null},fontsize:{useBuiltin:false,identifier:"FontSize",method:"__setFontSize"},textcolor:{useBuiltin:true,identifier:"ForeColor",method:null},textbackgroundcolor:{useBuiltin:false,identifier:null,method:"__setTextBackgroundColor"},backgroundcolor:{useBuiltin:false,identifier:null,method:"__setBackgroundColor"},backgroundimage:{useBuiltin:false,identifier:null,method:"__setBackgroundImage"},justifyleft:{useBuiltin:false,identifier:"JustifyLeft",method:"__setTextAlign"},justifyright:{useBuiltin:false,identifier:"JustifyRight",method:"__setTextAlign"},justifycenter:{useBuiltin:false,identifier:"JustifyCenter",method:"__setTextAlign"},justifyfull:{useBuiltin:false,identifier:"JustifyFull",method:"__setTextAlign"},indent:{useBuiltin:true,identifier:"Indent",method:null},outdent:{useBuiltin:true,identifier:"Outdent",method:null},copy:{useBuiltin:true,identifier:"Copy",method:null},cut:{useBuiltin:true,identifier:"Cut",method:null},paste:{useBuiltin:true,identifier:"Paste",method:null},insertorderedlist:{useBuiltin:false,identifier:"InsertOrderedList",method:"__insertList"},insertunorderedlist:{useBuiltin:false,identifier:"InsertUnorderedList",method:"__insertList"},inserthorizontalrule:{useBuiltin:false,identifier:"InsertHtml",method:"__insertHr"},insertimage:{useBuiltin:false,identifier:"InsertImage",method:"__insertImage"},inserthyperlink:{useBuiltin:false,identifier:"CreateLink",method:"__insertHyperLink"},selectall:{useBuiltin:false,identifier:"SelectAll",method:"__selectAll"},selectedtext:{useBuiltin:false,identifier:null,method:"__getSelectedText"},selectedhtml:{useBuiltin:false,identifier:null,method:"__getSelectedHtml"},inserthtml:{useBuiltin:false,identifier:"InsertHtml",method:"__insertHtml"},resethtml:{useBuiltin:false,identifier:null,method:"__resetHtml"},gethtml:{useBuiltin:false,identifier:null,method:"__getHtml"},removeformat:{useBuiltin:true,identifier:"RemoveFormat",method:null}}},execute:function(d,c){if(!this.__editorInstance.isReady()){this.error("editor not ready! '"+d+"':'"+c+"'");return false}d=d.toLowerCase();c=c!=null?c:null;if(this._commands[d]){var a;var b=this._commands[d];if(!((qx.core.Environment.get("engine.name")=="webkit")&&(d=="indent"||d=="outdent"))){if(this.__paragraphMissing()){this.__insertHelperParagraph()}}if(b.useBuiltin){a=this.__executeCommand(b.identifier,false,c)}else{if(b.method!=null&&this[b.method]){a=this[b.method].call(this,c,b)}else{this.error("The method '"+b.method+"' you calling to execute the command '"+d+"' is not available!")}}this.__editorInstance.resetSavedRange();return a}else{this.error("Command "+d+" is currently not supported!")}},__paragraphMissing:function(){var d=qx.dom.Node;var g=this.__editorInstance.getFocusNode();var f=false;var a=false;if(g){if(d.isText(g)){var c=qx.dom.Hierarchy.getAncestors(g);for(var e=0,b=c.length;e<b;e++){if(d.isNodeName(c[e],"p")||qx.bom.htmlarea.HtmlArea.isHeadlineNode(c[e])){f=true;break}}}else{if(d.isNodeName(g,"body")){a=true}}}return a||!f},__insertHelperParagraph:function(){this.__executeCommand("formatBlock",false,"p")},__executeCommand:function(h,f,e){try{var g=this.__doc;var d=false;var b=this.__editorInstance.getRange();this.__doc.body.focus();if((qx.core.Environment.get("engine.name")=="mshtml")){if(h!="selectall"){b.select();if(((b.text)&&(b.text.length>0))||((b.length==1)&&(b.item(0))&&(b.item(0).tagName=="IMG"))){g=b}else{g=this.__doc}}if(((qx.core.Environment.get("engine.name")=="mshtml"))&&(this.__invalidFocusCommands[h])){if(b.text==""){d=true}}}var a=g.execCommand(h,f,e);if(d&&b.text!=""){b.collapse()}if((qx.core.Environment.get("qx.debug"))&&qx.core.Environment.get("qx.bom.htmlarea.HtmlArea.debug")){this.debug("execCommand "+h+" with value "+e+" succeded")}this.__startTyping=false}catch(c){if((qx.core.Environment.get("qx.debug"))&&qx.core.Environment.get("qx.bom.htmlarea.HtmlArea.debug")){this.debug("execCommand "+h+" with value "+e+" failed")}return false}return a},__getTargetRange:qx.core.Environment.select("engine.name",{mshtml:function(){var b=this.__editorInstance;var a=b.getSavedRange()!=null?b.getSavedRange():b.getRange();return a},"default":function(){return this.__editorInstance.getRange()}}),__insertHtml:qx.core.Environment.select("engine.name",{mshtml:function(f,c){var a;if(f==qx.bom.htmlarea.HtmlArea.simpleLinebreak){return this.__insertBrOnLinebreak()}else{this.__doc.body.focus();var d=this.__editorInstance.getSelection();var b=this.__getTargetRange();if(b&&d&&d.type!="Control"){try{b.pasteHTML(f);b.collapse(false);b.select();a=true}catch(g){}}else{a=false}this.__editorInstance.resetSavedRange();return a}},"default":function(b,a){this.__doc.body.focus();return this.__doc.execCommand(a.identifier,false,b)}}),insertParagraphOnLinebreak:qx.core.Environment.select("engine.name",{gecko:function(){var l=this.__getCurrentStylesGrouped();var b=this.__generateParagraphStyle(l);var f=this.__generateHelperString(l);var c="__placeholder__"+Date.parse(new Date());var e="__paragraph__"+Date.parse(new Date());var d="";var j='<span id="'+c+'"></span>';d+=j;d+='<p id="'+e+'" '+b+">";d+=f+"</p>";this.__editorInstance.getCommandManager().addUndoStep("inserthtml","insertParagraph",this.getCommandObject("inserthtml"));this.execute("inserthtml",d);this.__hideSuperfluousParagraph();qx.bom.element.Attribute.reset(this.__doc.getElementById(c),"id");var a=this.__doc.getElementById(e);if(a.previousSibling.innerHTML==j){var h=this.__generateHelperNodes();var i=this.__doc.createElement("br");var k=this.__doc.createAttribute("_moz_dirty");k.nodeValue="";i.setAttributeNode(k);var g=this.__doc.createAttribute("type");g.nodeValue="_moz";i.setAttributeNode(g);a.previousSibling.appendChild(h);a.previousSibling.appendChild(i)}qx.bom.element.Attribute.reset(a,"id");return true},webkit:function(){var d=this.getCurrentStyles();var c="";var a={"background-color":true,"text-align":true};for(var b in d){if(a[b]){c+=b+":"+d[b]+";"}}this.__editorInstance.insertHtml("<p style='"+c+"'><br class='webkit-block-placeholder' />")},"default":qx.lang.Function.empty}),__generateParagraphStyle:qx.core.Environment.select("engine.name",{gecko:function(b){var d='style="';var c=b.child;if(c["text-align"]){d+="text-align:"+c["text-align"]+";";delete b.child["text-align"]}if(c["font-family"]){d+="font-family:"+c["font-family"]+";";delete b.child["font-family"]}var f={"padding-top":true,"padding-bottom":true,"padding-left":true,"padding-right":true};var a={"margin-top":true,"margin-bottom":true,"margin-left":true,"margin-right":true};for(var e in c){if(f[e]||a[e]){d+=e+":"+c[e]+";";delete b.child[e]}}d+='"';return d},"default":function(){return""}}),__hideSuperfluousParagraph:qx.core.Environment.select("engine.name",{gecko:function(){var b=this.__editorInstance.getSelection();if(!b||!b.focusNode){return}var c=b.focusNode;var h=b.focusNode;while(!qx.dom.Node.isNodeName(h,"p")){h=h.parentNode}var f=h.previousSibling.id;var e=h.nextSibling?h.nextSibling.id:null;if(qx.lang.String.startsWith(f,"__paragraph__")&&f==e){var g=h.nextSibling;var a=this.__editorInstance.getRange();a.selectNode(g);b.addRange(a);var d=qx.bom.htmlarea.HtmlArea.EMPTY_DIV;this.__editorInstance.getCommandManager().addUndoStep("inserthtml",d,this.getCommandObject("inserthtml"));this.execute("inserthtml",d);var i=this.__editorInstance.getRange();if(c){while(c&&c.firstChild&&qx.dom.Node.isElement(c.firstChild)){c=c.firstChild}}i.selectNode(c);b.addRange(i);i.collapse(true)}},"default":qx.lang.Function.empty}),__insertBrOnLinebreak:qx.core.Environment.select("engine.name",{mshtml:function(){var a=this.__editorInstance.getRange();if(a&&!qx.dom.Node.isNodeName(a.parentElement(),"li")){a.pasteHTML(qx.bom.htmlarea.HtmlArea.simpleLinebreak);a.collapse(false);a.select();return true}return false},"default":function(){return false}}),__setTextAlign:function(b,a){var c=(qx.core.Environment.get("engine.name")=="mshtml")?this.__editorInstance.getRange():this.__doc;return c.execCommand(a.identifier,false,b)},__insertList:function(c,a){if((qx.core.Environment.get("engine.name")=="mshtml")){var d=this.__editorInstance.getFocusNode();this.__manualOutdent(d)}this.__doc.body.focus();var b=this.__doc.execCommand(a.identifier,false,c);if((qx.core.Environment.get("engine.name")=="webkit")){var d=this.__editorInstance.getFocusNode();this.__manualOutdent(d.parentNode)}return b},__manualOutdent:function(a){var c=[];var b=a.parentNode;while(qx.dom.Node.isNodeName(b,"blockquote")){c.push(b);b=b.parentNode}if(c.length>0){b.appendChild(a);b.removeChild(c[c.length-1])}},__insertImage:qx.core.Environment.select("engine.name",{gecko:function(g,i){if(g.src){this.__doc.execCommand(i.identifier,false,g.src);delete g.src;var c=this.__editorInstance.getSelection();if(c){var o=c.anchorNode;var f=c.anchorOffset;var j=o.childNodes[f-1];var n;for(var d in g){n=this.__doc.createAttribute(d);n.nodeValue=g[d];j.setAttributeNode(n)}var p={font:true,span:true};var b=null;var m=true;if(qx.dom.Node.isElement(j.previousSibling)&&p[qx.dom.Node.getName(j.previousSibling)]){b=j.previousSibling}else{if(p[qx.dom.Node.getName(j.parentNode)]){b=j.parentNode;m=false}}var e=this.__doc.createDocumentFragment();var l;if(m&&b!=null){var p=this.__generateImageFormatElements(b);e.appendChild(p.root);l=p.inline}else{l=this.__doc.createElement("span");e.appendChild(l)}var k=this.__doc.createTextNode("");l.appendChild(k);var h=j.parentNode;if(j==h.lastChild){h.appendChild(e)}else{h.insertBefore(e,j.nextSibling)}var a=this.__editorInstance.getRange();a.selectNodeContents(l)}return true}else{return false}},mshtml:function(c,d){var a=false;var b="<img ";for(var f in c){b+=f+"='"+c[f]+"' "}b+="/>";var g=this.__editorInstance.getSelection();var i=this.__getTargetRange();if(g&&g.type!="Control"){try{i.select();i.pasteHTML(b);a=true}catch(h){}}this.__editorInstance.resetSavedRange();return a},"default":function(b,c){if(b.src){var a="<img ";for(var d in b){a+=d+"='"+b[d]+"' "}a+="/>";return this.__doc.execCommand("InsertHtml",false,a)}else{return false}}}),__generateImageFormatElements:function(c){while(c.firstChild&&c.firstChild.nodeType==1){c=c.firstChild}var f=this.__getCurrentStylesGrouped(c);var h,b,g;var j="";var i=null;var e=null;var a=f.child;while(a){e=this.__doc.createElement(a["legacy-font-size"]?"font":"span");b=this.__doc.createAttribute("style");e.setAttributeNode(b);for(var d in a){if(d!="child"&&d!="legacy-font-size"){j+=d+":"+a[d]+";"}else{if(d=="legacy-font-size"){g=this.__doc.createAttribute("size");g.nodeValue=a[d];e.setAttributeNode(g)}}}b.nodeValue=j;if(i!=null){i.appendChild(e)}else{h=e}i=e;a=a.child;j=""}return{root:h,inline:e}},__insertHyperLink:qx.core.Environment.select("engine.name",{"gecko|opera":function(b,f){var d=this.__editorInstance.getSelection();var a=this.__editorInstance.getRange();if(d.isCollapsed){var i="qx_link"+(++this.__hyperLinkId);var h=this.__doc.createElement("a");var c=this.__doc.createAttribute("href");var g=this.__doc.createAttribute("id");var e=this.__doc.createTextNode(b);g.nodeValue=i;h.setAttributeNode(g);c.nodeValue=b;h.setAttributeNode(c);h.appendChild(e);a.insertNode(h);a.selectNode(h);d.collapseToEnd();return true}else{return this.__doc.execCommand(f.identifier,false,b)}},mshtml:function(d,c){try{var a;var b=this.__getTargetRange();var f=this.__editorInstance;var b=f.getSavedRange()!=null?f.getSavedRange():f.getRange();if(b!=null&&b.text!=""){a=b.execCommand(c.identifier,false,d)}else{a=this.__insertHtml(' <a href="'+d+'">'+d+"</a> ",c)}this.__editorInstance.resetSavedRange();return a}catch(g){if(qx.core.Environment.get("qx.debug")){this.error("inserthyperlink failed!")}return false}},"default":function(b,a){return this.__doc.execCommand(a.identifier,false,b)}}),__insertHr:function(b,a){var c="<hr />";if((qx.core.Environment.get("engine.name")=="gecko")){c+=this.__generateHelperString()}return this.__insertHtml(c,a)},__generateHelperString:function(c){var e="";var l='<span style="';var h=[];var d=typeof c!=="undefined"?c:this.__getCurrentStylesGrouped();var b=d.child;var k=false;if(qx.lang.Object.isEmpty(b)){return""}while(b){k=b["legacy-font-size"]!=null;e+=k?'<font style="':l;for(var a in b){e+=(a!="child"&&a!="legacy-font-size")?a+":"+b[a]+";":""}e+=k?'" size="'+b["legacy-font-size"]+'">':'">';h.unshift(k?"</font>":"</span>");b=b.child}if(h.length==1&&h[0]=="</font>"){e+="<span></span>"}for(var g=0,f=h.length;g<f;g++){e+=h[g]}return e},__generateHelperNodes:function(){var d=this.__doc.createDocumentFragment();var b=this.__getCurrentStylesGrouped();var g=d;var h=b.child;var e;var c=false;while(h){c=h["legacy-font-size"]!=null;e=this.__doc.createElement(c?"font":"span");g.appendChild(e);for(var f in h){if(f!="child"&&f!="legacy-font-size"){qx.bom.element.Style.set(e,f,h[f])}}if(c){var a=this.__doc.createAttribute("size");a.nodeValue=h["legacy-font-size"];e.setAttributeNode(a)}g=e;h=h.child}return d},__getCurrentStylesGrouped:function(f){var d={};var h=null;var g=this.getCurrentStyles(f);h=d.child={};for(var e in g){if(e!="text-decoration"){h[e]=g[e]}}if(g["text-decoration"]){var a=g["text-decoration"];for(var c=0,b=a.length;c<b;c++){if(h==null){h=d.child={}}else{h=h.child={}}h.color=a[c]["color"];h["text-decoration"]=a[c]["text-decoration"]}}if(g.color&&g["text-decoration"]){h=h.child={};h.color=g.color}return d},getCurrentStyles:function(c){if(c==null){var e=this.__editorInstance.getSelection();if(!e||e.focusNode==null){return{}}c=(e.focusNode.nodeType==3)?e.focusNode.parentNode:e.focusNode}var b=qx.dom.Hierarchy.getAncestors(c);var d=qx.lang.Array.insertBefore(b,c,b[0]);var f=this.__collectStylesOfElementCollection(d);var a=this.__processCollectedStyles(f,d);return a},__collectStylesOfElementCollection:function(f){var g={};var h,e;for(var d=0,c=f.length;d<c;d++){e=f[d];for(var b=0,a=e.style.length;b<a;b++){h=e.style[b];if(h.length>0&&typeof g[h]==="undefined"){g[h]=e.style.getPropertyValue(h)}}if(e.tagName.toUpperCase()=="FONT"&&e.size&&g["legacy-font-size"]===undefined){g["legacy-font-size"]=e.size}}if(g["legacy-font-size"]&&g["font-size"]){delete g["font-size"]}return g},__processCollectedStyles:function(g,e){var c=e[0];var f=this.__editorInstance.getContentWindow().getComputedStyle(c,null);var a;var b={};for(var d in g){if(d!="legacy-font-size"){a=f.getPropertyValue(d)}else{a=g[d]}if(d=="background-color"&&a=="transparent"){b[d]=this.__getBackgroundColor(e)}else{if(d=="text-decoration"){b[d]=this.__getTextDecorations(e)}else{b[d]=a}}}return b},__getTextDecorations:function(d){var h,c,b;var g=[];var f=this.__editorInstance.getContentWindow();for(var e=0,a=d.length;e<a;e++){b=f.getComputedStyle(d[e],null);h=b.getPropertyValue("text-decoration");c=b.getPropertyValue("color");if(h!="none"){g.push({"text-decoration":h,color:c})}}return g},__getBackgroundColor:function(c){var e,b,a;for(var d=0;d<c.length;d++){e=c[d];b=this.__editorInstance.getContentWindow().getComputedStyle(e,null);a=b.getPropertyValue("background-color");if(a!="transparent"){return a}}},__setFontSize:function(q,h){var b=this.__editorInstance.getSelection();var a=((qx.core.Environment.get("engine.name")=="mshtml"))?this.__editorInstance.getRange():a=b.getRangeAt(0);var s=[];var m;var c=["OL","UL"];var g,f,d,e;e=((qx.core.Environment.get("engine.name")=="mshtml"))?a.parentElement():a.commonAncestorContainer;if(e.tagName=="BODY"){for(var f=0;f<c.length;f++){g=e.getElementsByTagName(c[f]);for(var d=0;d<g.length;d++){if(g[d]){s.push(g[d])}}}}else{if(qx.lang.Array.contains(c,e.tagName)){s.push(e)}}if(s.length>0){for(var f=0;f<s.length;f++){var p=s[f];m=((qx.core.Environment.get("engine.name")=="mshtml"))?((p==e)||(e.tagName=="BODY")):b.containsNode(p,false);for(d=0;d<p.childNodes.length;d++){var l=p.childNodes[d];if(m||(b.focusNode.nodeValue&&qx.dom.Hierarchy.contains(l,b.focusNode)&&(b.focusOffset==b.focusNode.nodeValue.length))||(qx.dom.Hierarchy.contains(l,b.anchorNode)&&(b.anchorOffset==0))||(b.containsNode(l,false))){l.style.fontSize=(this.__fontSizeNames[q]||q)+"px"}}}}else{var r=((qx.core.Environment.get("engine.name")=="mshtml"))?e:b.focusNode;var n=qx.dom.Hierarchy.getAncestors(r);for(f=0;f<n.length;f++){if(n[f].tagName=="LI"){if((((qx.core.Environment.get("engine.name")=="gecko"))&&((b.anchorOffset==0)&&(b.focusNode.nodeValue&&(b.focusOffset==b.focusNode.nodeValue.length))&&qx.dom.Hierarchy.contains(n[f].firstChild,b.anchorNode)&&qx.dom.Hierarchy.contains(n[f].lastChild,b.focusNode)))||(((qx.core.Environment.get("engine.name")=="mshtml"))&&(a.htmlText==n[f].innerHTML))){n[f].style.fontSize=(this.__fontSizeNames[q]||q)+"px"}break}}}if((qx.core.Environment.get("engine.name")=="mshtml")){this.__doc.body.focus();this.__editorInstance.getRange().select();return this.__doc.execCommand("FontSize",false,q)}else{if((qx.core.Environment.get("engine.name")=="gecko")){var o=a.commonAncestorContainer;if(o.nodeType===1){var k=o.getElementsByTagName("span");for(f=0;f<k.length;f++){if(k[f].style.fontSize){k[f].style.fontSize=null}}}}}return this.__doc.execCommand("FontSize",false,q)},__setTextBackgroundColor:qx.core.Environment.select("engine.name",{mshtml:function(b,a){this.__doc.body.focus();return this.__doc.execCommand("BackColor",false,b)},"gecko|opera":function(b,a){this.__doc.body.focus();return this.__doc.execCommand("HiliteColor",false,b)},webkit:function(f,c){var e=this.__editorInstance.getSelection();var a=this.__editorInstance.getRange();if(!e||!e.isCollapsed){this.__doc.body.focus();this.__doc.execCommand("BackColor",false,f);if(e){e.collapseToEnd()}return true}else{var d=e.anchorOffset;var g=e.anchorOffset;var a=e.getRangeAt(0);var b=e.anchorNode;while(g>0){if(b.nodeValue.charCodeAt(g)==160||b.nodeValue.charCodeAt(g)==32){break}else{g--}}while(d<b.nodeValue.length){if(b.nodeValue.charCodeAt(d)==160||b.nodeValue.charCodeAt(d)==32){break}else{d++}}a.setStart(e.anchorNode,e.anchorNode.nodeValue.charAt(g)==" "?g+1:g);a.setEnd(e.anchorNode,d);e.addRange(a);this.__doc.body.focus();this.__doc.execCommand("BackColor",false,f);e.collapseToEnd();return true}}}),__setBackgroundColor:function(b,a){b=b!=null&&typeof b=="string"?b:"transparent";qx.bom.element.Style.set(this.__doc.body,"backgroundColor",b);return true},__setBackgroundImage:function(f,c){var b,e,a;var d=qx.bom.htmlarea.manager.Command;if(f==null){b=null}else{b=f[0];e=f[1];a=f[2]}if(b==null||typeof b!="string"){qx.bom.element.Style.set(this.__doc.body,"backgroundImage","");qx.bom.element.Style.set(this.__doc.body,"backgroundRepeat","");qx.bom.element.Style.set(this.__doc.body,"backgroundPosition","");return true}else{if(b.search(/^url.*\(/)==-1){b="url("+b+")"}}if(e!=null&&!qx.lang.String.contains(d.__backgroundRepeat,e)){if(qx.core.Environment.get("qx.debug")){this.error("The value '"+e+"' is not allowed for parameter 'repeat'. Possible values are '"+d.__backgroundRepeat+"'")}return false}else{e="no-repeat"}if(a!=null){if(qx.lang.Type.isString(a)&&!qx.lang.String.contains(d.__backgroundPosition,"|"+a+"|")){if(qx.core.Environment.get("qx.debug")){this.error("The value '"+a+"' is not allowed for parameter 'position'. Possible values are '"+d.__backgroundPosition+"'")}return false}else{if(qx.lang.Type.isArray(a)&&a.length==2){a=a[0]+" "+a[1]}else{if(qx.core.Environment.get("qx.debug")){this.error("If an array is provided for parameter 'position' it has to define two elements!")}return false}}}else{a="top"}qx.bom.element.Style.set(this.__doc.body,"backgroundImage",b);qx.bom.element.Style.set(this.__doc.body,"backgroundRepeat",e);qx.bom.element.Style.set(this.__doc.body,"backgroundPosition",a);return true},__selectAll:qx.core.Environment.select("engine.name",{mshtml:function(c,b){var a=this.__doc.body.createTextRange();a.select();return true},"default":function(b,a){return this.__executeCommand(a.identifier,false,b)}}),__getSelectedText:function(){return this.__editorInstance.getSelectedText()},__getSelectedHtml:function(){return this.__editorInstance.getSelectedHtml()},__syncFormattingAtBeginOfLine:function(e,f){var g=this.__editorInstance.getFocusNode();if(g.textContent==""){var d=qx.dom.Hierarchy.getAncestors(g);d.unshift(g);var c=qx.dom.Node;var a=qx.bom.element.Style;var b=d.shift();while(d.length>0){if(c.getName(b)=="p"||c.getName(b)=="body"){break}if(a.get(b,e,a.LOCAL_MODE)==f){a.reset(b,e);return true}b=d.shift()}}return false},__setBold:qx.core.Environment.select("engine.name",{gecko:function(b,a){if(this.__syncFormattingAtBeginOfLine("fontWeight","bold")){return true}else{return this.__executeCommand(a.identifier,false,b)}},"default":function(b,a){return this.__executeCommand(a.identifier,false,b)}}),__setItalic:qx.core.Environment.select("engine.name",{gecko:function(b,a){if(this.__syncFormattingAtBeginOfLine("fontStyle","italic")){return true}else{return this.__executeCommand(a.identifier,false,b)}},"default":function(b,a){return this.__executeCommand(a.identifier,false,b)}}),__setUnderline:qx.core.Environment.select("engine.name",{gecko:function(b,a){if(this.__syncFormattingAtBeginOfLine("textDecoration","underline")){return true}else{return this.__executeCommand(a.identifier,false,b)}},webkit:function(d,a){var e=this.__editorInstance.getContextInformation();var f=this.__editorInstance.getFocusNode();if(e.underline){f.style.textDecoration="none"}else{if(e.strikethrough){var b=this.__doc.createElement("span");qx.bom.element.Style.set(b,"textDecoration","underline");f.appendChild(b);var c=this.__editorInstance.getSelection();if(c){c.extend(b,0);if(!c.isCollapsed){c.collapseToEnd()}}}else{f.style.textDecoration="underline"}}return true},"default":function(b,a){return this.__executeCommand(a.identifier,false,b)}}),__setStrikeThrough:qx.core.Environment.select("engine.name",{gecko:function(b,a){if(this.__syncFormattingAtBeginOfLine("textDecoration","line-through")){return true}else{return this.__executeCommand(a.identifier,false,b)}},webkit:function(d,a){var e=this.__editorInstance.getFocusNode();var b=this.__doc.createElement("span");qx.bom.element.Style.set(b,"textDecoration","line-through");e.appendChild(b);var c=this.__editorInstance.getSelection();if(c){c.extend(b,0);if(!c.isCollapsed){c.collapseToEnd()}}return true},"default":function(b,a){return this.__executeCommand(a.identifier,false,b)}})},destruct:function(){this.__doc=this.__editorInstance=this._commands=null;this.__invalidFocusCommands=this.__fontSizeNames=null}});qx.Class.define("qx.bom.htmlarea.manager.UndoRedo",{extend:qx.core.Object,construct:function(b,a){this.base(arguments);this.__commandManager=b;this.__editorInstance=a;this.__undoStack=[];this.__redoStack=[];this._commands=null;this.__doc=null;this.__registeredHandler={};this.__knownActionTypes={command:true,content:true,custom:true};this.__populateCommandList();this.__handleKeyPress=qx.lang.Function.bind(this._handleKeyPress,this);this.__handleMouseUp=qx.lang.Function.bind(this._handleMouseUp,this);if((qx.core.Environment.get("engine.name")=="mshtml")){this.__handleMouseDown=qx.lang.Function.bind(this._handleMouseDown,this)}},members:{__redoPossible:false,__undoPossible:false,__contentChange:false,__knownActionTypes:null,__registeredHandler:null,__commandManager:null,__doc:null,__undoStack:null,__redoStack:null,__editorInstance:null,__handleKeyPress:null,__handleMouseUp:null,__handleMouseDown:null,__currentContent:null,setContentDocument:function(a){this.__doc=a;this.__commandManager.setContentDocument(a);qx.event.Registration.addListener(a.body,"keypress",this.__handleKeyPress,this);qx.event.Registration.addListener(a.body,"mouseup",this.__handleMouseUp,this);if((qx.core.Environment.get("engine.name")=="mshtml")){qx.event.Registration.addListener(a.body,"mousedown",this.__handleMouseDown,this,true)}},insertParagraphOnLinebreak:function(){return this.__commandManager.insertParagraphOnLinebreak()},execute:function(c,b){var a;c=c.toLowerCase();if(this._commands[c]){if(this._commands[c].passthrough){a=this.__commandManager.execute(c,b)}else{a=this[c].call(this)}}else{if((qx.core.Environment.get("engine.name")=="mshtml")||(qx.core.Environment.get("engine.name")=="webkit")){this.__collectUndoInfo(c,b,this.__commandManager.getCommandObject(c));a=this.__commandManager.execute(c,b);if(!a){this.__undoStack.pop()}}else{a=this.__commandManager.execute(c,b);if(a){this.__collectUndoInfo(c,b,this.__commandManager.getCommandObject(c))}}if(c=="undo"&&this.__undoStack.length==0){this.__undoPossible=false;this.__fireUndoRedoStateEvent()}else{if(c=="redo"&&this.__redoStack.length==0){this.__redoPossible=false;this.__fireUndoRedoStateEvent()}}}this.__contentChange=false;return a},addUndoStep:function(c,b,a){this.__collectUndoInfo(c,b,a)},registerHandler:function(b,d,a,c){this.__registeredHandler[b]={undo:d,redo:a,context:c}},isUndoPossible:function(){return this.__undoPossible},undo:function(){var a;if(this.__contentChange){this.__addAdditionalContentUndoStep()}if(this.__undoStack.length>0){var b=this.__undoStack.pop();if(this.__knownActionTypes[b.actionType.toLowerCase()]){switch(b.actionType){case"Command":a=this.__undoCommand(b);break;case"Content":a=this.__undoContent(b);break;case"Internal":a=this.__undoInternal(b);break;case"Custom":a=this.__undoCustom(b);break}}else{if(this.__registeredHandler[b.actionType]){var c=this.__registeredHandler[b.actionType];a=c.undo.call(c.context?c.context:this,b);this.__addToRedoStack(b)}else{this.error("actionType "+b.actionType+" is not managed! Please provide a handler method!")}}this.__redoPossible=true;this.__fireUndoRedoStateEvent();return a}},__undoCustom:qx.core.Environment.select("engine.name",{"mshtml|webkit":function(a){var c=this.__doc.body.innerHTML;var b=a.content;this.__doc.body.innerHTML=b;var d=a;d.content=c;this.__addToRedoStack(d);return true},"default":function(b){var d=b;var a=qx.bom.element.Style;switch(b.command){case"backgroundcolor":d.parameter=[a.get(this.__doc.body,"backgroundColor")];break;case"backgroundimage":d.parameter=[a.get(this.__doc.body,"backgroundImage"),a.get(this.__doc.body,"backgroundRepeat"),a.get(this.__doc.body,"backgroundPosition")];break}this.__addToRedoStack(d);if(b.command=="inserthyperlink"){if((qx.core.Environment.get("engine.name")=="gecko")){var e="qx_link"+this.__commandManager.__hyperLinkId;var c=this.__doc.getElementById(e);if(c){c.parentNode.removeChild(c);return true}else{return false}}}else{return this.__commandManager.execute(b.command,b.value)}}}),__undoCommand:qx.core.Environment.select("engine.name",{"mshtml|webkit":function(a){},"default":function(a){this.__addToRedoStack(a);if((qx.core.Environment.get("engine.name")=="gecko")){if(a.command=="inserthtml"&&a.value==qx.bom.htmlarea.HtmlArea.EMPTY_DIV&&this.__checkForNextUndoStep("inserthtml","insertParagraph")){this.__executeExtraUndoStep()}}return this.__performUndo()}}),__checkForNextUndoStep:function(c,a){if(this.__undoStack.length>0){var b=this.__undoStack[this.__undoStack.length-1];return(b.command==c&&b.value==a)}return false},__executeExtraUndoStep:function(){this.__performUndo();if(this.__undoStack.length>0){var a=this.__undoStack.pop();this.__addToRedoStack(a)}},__undoInternal:function(a){this.__addToRedoStack(a);return this.__performUndo()},__undoContent:qx.core.Environment.select("engine.name",{gecko:function(b){this.__addToRedoStack(b);try{return this.__performUndo()}catch(a){if(qx.core.Environment.get("qx.debug")){this.error("execCommand failed! Details: "+a)}}},"mshtml|webkit":function(a){},"default":function(a){this.__addToRedoStack(a);return this.__performUndo()}}),__performUndo:function(){try{return this.__doc.execCommand("Undo",false,null)}catch(a){return false}},isRedoPossible:function(){return this.__redoPossible},redo:function(){if(this.__redoPossible){var a;if(this.__redoStack.length>0){var c=this.__redoStack.pop();if(this.__knownActionTypes[c.actionType.toLowerCase()]){switch(c.actionType){case"Command":a=this.__redoCommand(c);break;case"Content":a=this.__redoContent(c);break;case"Internal":a=this.__redoInternal(c);break;case"Custom":a=this.__redoCustom(c);break}}else{if(this.__registeredHandler[c.actionType]){var b=this.__registeredHandler[c.actionType];a=b.redo.call(b.context?b.context:this,c);this.__addToUndoStack(c)}else{this.error("actionType "+c.actionType+" is not managed! Please provide a handler method!")}}this.__undoPossible=true;this.__fireUndoRedoStateEvent()}return a}},__redoCustom:qx.core.Environment.select("engine.name",{"mshtml|webkit":function(b){var d=this.__doc.body.innerHTML;var a=b.content;this.__doc.body.innerHTML=a;var c=b;c.content=d;this.__addToUndoStack(c);return true},"default":function(a){this.__addToUndoStack(a);return this.__performRedo()}}),__redoCommand:qx.core.Environment.select("engine.name",{"mshtml|webkit":function(a){},"default":function(b){this.__addToUndoStack(b);var a=this.__performRedo();if((qx.core.Environment.get("engine.name")=="gecko")){if(this.__checkForNextRedoStep("inserthtml",qx.bom.htmlarea.HtmlArea.EMPTY_DIV)){var c=this.__getFocusedParagraph();this.__executeExtraRedoStep();if(c!=null){this.__correctCaretPositionAfterRedo(c)}}}return a}}),__checkForNextRedoStep:function(c,b){if(this.__redoStack.length>0){var a=this.__redoStack[this.__redoStack.length-1];return(a.command==c&&a.value==b)}return false},__getFocusedParagraph:function(){if(this.__editorInstance==null){return null}var b=this.__editorInstance.getSelection();var c=b?b.focusNode:null;if(c==null){return null}try{while(c.nodeName.toLowerCase()!="p"){c=c.parentNode;if(!c||qx.dom.Node.isNodeName(c,"body")){return null}}}catch(a){return null}if(c!=null&&qx.dom.Node.isNodeName(c,"p")){return c}else{return null}},__executeExtraRedoStep:function(){var a=this.__redoStack.pop();this.__addToUndoStack(a);this.__performRedo()},__correctCaretPositionAfterRedo:qx.core.Environment.select("engine.name",{gecko:function(a){if(a==this.__editorInstance.getContentBody().lastChild){return}var c=a.firstChild;while(c.firstChild){c=c.firstChild}var d=this.__editorInstance.getSelection();var b=this.__editorInstance.getRange();if(d&&b){b.selectNode(c);d.addRange(b);b.collapse(true)}},"default":qx.lang.Function.empty}),__redoInternal:function(a){this.__addToUndoStack(a);return this.__performRedo()},__redoContent:qx.core.Environment.select("engine.name",{"mshtml|webkit":function(a){},"default":function(a){this.__addToUndoStack(a);return this.__performRedo()}}),__performRedo:function(){try{return this.__doc.execCommand("Redo",false,null)}catch(a){return false}},__populateCommandList:function(){this._commands={undo:{passthrough:false},redo:{passthrough:false}};this.__commandManager.getCommandObject("backgroundcolor").customUndo=true;this.__commandManager.getCommandObject("backgroundimage").customUndo=true;if((qx.core.Environment.get("engine.name")=="gecko")){}},__collectUndoInfo:qx.core.Environment.select("engine.name",{"mshtml|webkit":function(d,c,b){var a=this.getUndoRedoObject();a.commandObject=b;a.command=d;a.value=c;a.actionType="Custom";a.content=this.__doc.body.innerHTML;this.__updateUndoStack(a)},"default":function(f,e,b){if(this.__editorInstance==null){return}var a=this.getUndoRedoObject();a.commandObject=b;a.command=f;a.value=e;a.actionType="Custom";var d=this.__editorInstance.getSelection();if(b.customUndo){var c=[];switch(f){case"backgroundcolor":c.push(qx.bom.element.Style.get(this.__doc.body,"backgroundColor"));break;case"backgroundimage":c.push(qx.bom.element.Style.get(this.__doc.body,"backgroundImage"),qx.bom.element.Style.get(this.__doc.body,"backgroundRepeat"),qx.bom.element.Style.get(this.__doc.body,"backgroundPosition"));break;case"inserthyperlink":if(d&&!d.isCollapsed){a.actionType="Command"}break}a.parameter=c}else{if((qx.core.Environment.get("engine.name")=="gecko")){if(d&&d.isCollapsed){switch(f){case"insertorderedlist":case"insertunorderedlist":case"justifyright":case"inserthtml":case"insertimage":a.actionType="Command";break;default:return}}else{a.actionType="Command"}}else{a.actionType="Command"}}this.__updateUndoStack(a)}}),__updateUndoStack:function(a){if(this.__contentChange){this.__addAdditionalContentUndoStep()}this.__addToUndoStack(a);this.__redoPossible=false;this.__redoStack=[];this.__fireUndoRedoStateEvent()},__addAdditionalContentUndoStep:function(){var b=this.__undoStack[this.__undoStack.length-1];if(b==null||b.actionType!="Content"){var a=this.getUndoRedoObject();a.actionType="Content";if((qx.core.Environment.get("engine.name")=="mshtml")||(qx.core.Environment.get("engine.name")=="webkit")){a.content=this.__currentContent;a.actionType="Custom";this.__currentContent=null}this.__addToUndoStack(a);this.__contentChange=false}},getUndoRedoObject:function(){return{actionType:null,commandObject:null,command:null,value:null,parameter:null,range:null,marker:null,content:null}},__addToUndoStack:function(a){if((qx.core.Environment.get("qx.debug"))&&qx.core.Environment.get("qx.bom.htmlarea.HtmlArea.debug")){this.debug("ADD TO UNDO STACK");this.debug(a.actionType+" "+a.command+" "+a.value)}this.__undoStack.push(a)},__addToRedoStack:function(a){if((qx.core.Environment.get("qx.debug"))&&qx.core.Environment.get("qx.bom.htmlarea.HtmlArea.debug")){this.debug("ADD TO REDO STACK");this.debug(a.actionType+" "+a.command+" "+a.value)}this.__redoStack.push(a)},_handleKeyPress:function(b){var a=b.getKeyIdentifier().toLowerCase();var c=b.isCtrlPressed();switch(a){case"control":case"shift":case"left":case"right":case"up":case"down":case"pageup":case"pagedown":case"home":case"end":case"enter":break;case"a":case"b":case"i":case"u":case"k":case"y":case"z":if(!c){this.__markContentChange()}break;default:this.__redoPossible=false;this.__redoStack=[];this.__markContentChange()}},__markContentChange:function(){if(!this.__contentChange){this.__contentChange=true;this.__undoPossible=true;if((qx.core.Environment.get("engine.name")=="mshtml")||(qx.core.Environment.get("engine.name")=="webkit")){this.__currentContent=this.__doc.body.innerHTML}this.__fireUndoRedoStateEvent()}},__selectedNode:null,_handleMouseDown:qx.core.Environment.select("engine.name",{mshtml:function(b){var a=b.getOriginalTarget();if(qx.dom.Node.isElement(a)&&(qx.dom.Node.isNodeName(a,"img")||qx.dom.Node.isNodeName(a,"table"))){this.__selectedNode={node:a,content:a.outerHTML}}else{this.__selectedNode=null}},"default":function(a){return true}}),_handleMouseUp:qx.core.Environment.select("engine.name",{gecko:function(f){if(this.__editorInstance==null){return}var d=this.__editorInstance.getSelection();if(!d){this.__selectedNode=null;return}var b=d.anchorNode;var a=b.childNodes[d.anchorOffset];if(qx.dom.Node.isNodeName(a,"img")){if(this.__selectedNode==null){this.__selectedNode=a.cloneNode(true)}else{if(this.__selectedNode.style.width!=a.style.width||this.__selectedNode.style.height!=a.style.height){this.__addInternalUndoStep();this.__selectedNode=a.cloneNode(true)}}}else{if(qx.dom.Node.isNodeName(b,"td")||qx.dom.Node.isNodeName(b.parentNode,"td")){var c=b.parentNode;while(qx.dom.Node.isNodeName(c,"table")){c=c.parentNode}if(this.__selectedNode==null){this.__selectedNode=c.cloneNode(true)}else{qx.event.Timer.once(function(){if(c.style.width!=this.__selectedNode.style.width||c.style.height!=this.__selectedNode.style.height||c.innerHTML!=this.__selectedNode.innerHTML){this.__addInternalUndoStep();this.__selectedNode=c.cloneNode(true)}},this,0)}}else{this.__selectedNode=null}}},"default":function(d){var a=qx.bom.Event.getTarget(d);if(this.__selectedNode!=null){if(a.nodeType==1){if(a==this.__selectedNode.node){if(a.outerHTML!=this.__selectedNode.content){this.__selectedNode.content=a.outerHTML;this.__addInternalUndoStep()}}else{for(var c=0,b=a.childNodes.length;c<b;c++){if(a.childNodes[c]==this.__selectedNode.node){if(a.childNodes[c].outerHTML!=this.__selectedNode.content){this.__selectedNode.content=a.childNodes[c].outerHTML;this.__addInternalUndoStep()}}}}}else{this.__selectedNode=null}}}}),__addInternalUndoStep:qx.core.Environment.select("engine.name",{"mshtml|webkit":function(){this.__collectUndoInfo("Internal",null,null)},"default":function(){var a=this.getUndoRedoObject();a.actionType="Internal";this.__addToUndoStack(a)}}),__fireUndoRedoStateEvent:function(){qx.event.Timer.once(function(b){if(this.__editorInstance!=null){var a={undo:this.isUndoPossible()?0:-1,redo:this.isRedoPossible()?0:-1};this.__editorInstance.fireDataEvent("undoRedoState",a)}},this,200)}},destruct:function(){try{qx.event.Registration.removeListener(this.__doc.body,"keypress",this.__handleKeyPress);qx.event.Registration.removeListener(this.__doc,"mouseup",this.__handleMouseUp);if((qx.core.Environment.get("engine.name")=="mshtml")){qx.event.Registration.removeListener(this.__doc,"mousedown",this.__handleMouseDown)}}catch(a){}this._disposeObjects("__commandManager");this.__editorInstance=this.__undoStack=this.__redoStack=this._commands=this.__doc=null;this.__knownActionTypes=this.__registeredHandler=null}});qx.Class.define("qx.event.handler.ElementResize",{extend:qx.core.Object,implement:qx.event.IEventHandler,construct:function(a){this.base(arguments);this.__manager=a;this.__elements={};this.__timer=new qx.event.Timer(200);this.__timer.addListener("interval",this._onInterval,this)},statics:{PRIORITY:qx.event.Registration.PRIORITY_NORMAL,SUPPORTED_TYPES:{resize:true},TARGET_CHECK:qx.event.IEventHandler.TARGET_DOMNODE,IGNORE_CAN_HANDLE:false},members:{__elements:null,__manager:null,__timer:null,canHandleEvent:function(b,a){return b.tagName.toLowerCase()!=="body"},registerEvent:function(e,b,a){var d=qx.core.ObjectRegistry.toHashCode(e);var c=this.__elements;if(!c[d]){c[d]={element:e,width:qx.bom.element.Dimension.getWidth(e),height:qx.bom.element.Dimension.getHeight(e)};this.__timer.start()}},unregisterEvent:function(e,b,a){var d=qx.core.ObjectRegistry.toHashCode(e);var c=this.__elements;if(c[d]){delete c[d];if(qx.lang.Object.isEmpty(c)){this.__timer.stop()}}},_onInterval:function(h){var g=this.__elements;for(var b in g){var f=g[b];var d=f.element;var c=qx.bom.element.Dimension.getWidth(d);var a=qx.bom.element.Dimension.getHeight(d);if(f.height!==a||f.width!==c){qx.event.Registration.fireNonBubblingEvent(d,"resize",qx.event.type.Data,[{width:c,oldWidth:f.width,height:a,oldHeight:f.height}]);f.width=c;f.height=a}}}},destruct:function(){this.__manager=this.__elements=null;this._disposeObjects("__timer")},defer:function(a){qx.event.Registration.addHandler(a)}});qx.Mixin.define("qx.ui.core.MNativeOverflow",{properties:{overflowX:{check:["hidden","visible","scroll","auto"],nullable:true,apply:"_applyOverflowX"},overflowY:{check:["hidden","visible","scroll","auto"],nullable:true,apply:"_applyOverflowY"},overflow:{group:["overflowX","overflowY"]}},members:{_applyOverflowX:function(a){this.getContentElement().setStyle("overflowX",a)},_applyOverflowY:function(a){this.getContentElement().setStyle("overflowY",a)}}});qx.Class.define("qx.type.Array",{extend:qx.type.BaseArray,members:{clone:qx.type.BaseArray.prototype.concat,insertAt:function(b,a){this.splice(a,0,b);return this},insertBefore:function(c,b){var a=this.indexOf(b);if(a==-1){this.push(c)}else{this.splice(a,0,c)}return this},insertAfter:function(c,b){var a=this.indexOf(b);if(a==-1||a==(this.length-1)){this.push(c)}else{this.splice(a+1,0,c)}return this},removeAt:function(a){return this.splice(a,1)[0]},removeAll:function(){this.length=0;return this},append:function(b){if(qx.core.Environment.get("qx.debug")){qx.core.Assert.assertArray(b,"The parameter must be an array.")}var a=b;if(b instanceof qx.type.Array){a=[];for(var c=0;c<b.length;c++){a[c]=b[c]}}Array.prototype.push.apply(this,a);return this},remove:function(b){var a=this.indexOf(b);if(a!=-1){this.splice(a,1);return b}},contains:function(a){return this.indexOf(a)!==-1}}});qx.Class.define("qx.ui.table.headerrenderer.Icon",{extend:qx.ui.table.headerrenderer.Default,construct:function(a,b){this.base(arguments);if(a==null){a=""}this.setIconUrl(a);if(b){this.setToolTip(b)}},properties:{iconUrl:{check:"String",init:""}},members:{updateHeaderCell:function(a,b){this.base(arguments,a,b);b.setIcon(this.getIconUrl())}}});qx.Class.define("qx.ui.form.validation.Manager",{extend:qx.core.Object,construct:function(){this.base(arguments);this.__formItems=[];this.__asyncResults={};this.setRequiredFieldMessage(qx.locale.Manager.tr("This field is required"))},events:{changeValid:"qx.event.type.Data",complete:"qx.event.type.Event"},properties:{validator:{check:"value instanceof Function || qx.Class.isSubClassOf(value.constructor, qx.ui.form.validation.AsyncValidator)",init:null,nullable:true},invalidMessage:{check:"String",init:""},requiredFieldMessage:{check:"String",init:""},context:{nullable:true}},members:{__formItems:null,__valid:null,__asyncResults:null,__syncValid:null,add:function(d,b,a){if(!this.__supportsInvalid(d)){throw new Error("Added widget not supported.")}if(this.__supportsSingleSelection(d)){if(b!=null){throw new Error("Widgets supporting selection can only be validated in the form validator")}}var c={item:d,validator:b,valid:null,context:a};this.__formItems.push(c)},remove:function(d){var b=this.__formItems;for(var c=0,a=b.length;c<a;c++){if(d===b[c].item){b.splice(c,1);return d}}return null},getItems:function(){var a=[];for(var b=0;b<this.__formItems.length;b++){a.push(this.__formItems[b].item)}return a},validate:function(){var f=true;this.__syncValid=true;var b=[];for(var d=0;d<this.__formItems.length;d++){var g=this.__formItems[d].item;var c=this.__formItems[d].validator;b.push(g);if(c==null){var a=this.__validateRequired(g);f=f&&a;this.__syncValid=a&&this.__syncValid;continue}var a=this.__validateItem(this.__formItems[d],g.getValue());f=a&&f;if(a!=null){this.__syncValid=a&&this.__syncValid}}var e=this.__validateForm(b);if(qx.lang.Type.isBoolean(e)){this.__syncValid=e&&this.__syncValid}f=e&&f;this.__setValid(f);if(qx.lang.Object.isEmpty(this.__asyncResults)){this.fireEvent("complete")}return f},__validateRequired:function(d){if(d.getRequired()){if(this.__supportsSingleSelection(d)){var a=!!d.getSelection()[0]}else{var a=!!d.getValue()}d.setValid(a);var b=d.getRequiredInvalidMessage();var c=b?b:this.getRequiredFieldMessage();d.setInvalidMessage(c);return a}return true},__validateItem:function(g,f){var d=g.item;var c=g.context;var b=g.validator;if(this.__isAsyncValidator(b)){this.__asyncResults[d.toHashCode()]=null;b.validate(d,d.getValue(),this,c);return null}var a=null;try{var a=b.call(c||this,f,d);if(a===undefined){a=true}}catch(i){if(i instanceof qx.core.ValidationError){a=false;if(i.message&&i.message!=qx.type.BaseError.DEFAULTMESSAGE){var h=i.message}else{var h=i.getComment()}d.setInvalidMessage(h)}else{throw i}}d.setValid(a);g.valid=a;return a},__validateForm:function(a){var g=this.getValidator();var b=this.getContext()||this;if(g==null){return true}this.setInvalidMessage("");if(this.__isAsyncValidator(g)){this.__asyncResults[this.toHashCode()]=null;g.validateForm(a,this,b);return null}try{var c=g.call(b,a,this);if(c===undefined){c=true}}catch(f){if(f instanceof qx.core.ValidationError){c=false;if(f.message&&f.message!=qx.type.BaseError.DEFAULTMESSAGE){var d=f.message}else{var d=f.getComment()}this.setInvalidMessage(d)}else{throw f}}return c},__isAsyncValidator:function(a){var b=false;if(!qx.lang.Type.isFunction(a)){b=qx.Class.isSubClassOf(a.constructor,qx.ui.form.validation.AsyncValidator)}return b},__supportsInvalid:function(b){var a=b.constructor;return qx.Class.hasInterface(a,qx.ui.form.IForm)},__supportsSingleSelection:function(b){var a=b.constructor;return qx.Class.hasInterface(a,qx.ui.core.ISingleSelection)},__setValid:function(b){var a=this.__valid;this.__valid=b;if(a!=b){this.fireDataEvent("changeValid",b,a)}},getValid:function(){return this.__valid},isValid:function(){return this.getValid()},getInvalidMessages:function(){var b=[];for(var a=0;a<this.__formItems.length;a++){var c=this.__formItems[a].item;if(!c.getValid()){b.push(c.getInvalidMessage())}}if(this.getInvalidMessage()!=""){b.push(this.getInvalidMessage())}return b},reset:function(){for(var a=0;a<this.__formItems.length;a++){var b=this.__formItems[a];b.item.setValid(true)}this.__valid=null},setItemValid:function(b,a){this.__asyncResults[b.toHashCode()]=a;b.setValid(a);this.__checkValidationComplete()},setFormValid:function(a){this.__asyncResults[this.toHashCode()]=a;this.__checkValidationComplete()},__checkValidationComplete:function(){var b=this.__syncValid;for(var c in this.__asyncResults){var a=this.__asyncResults[c];b=a&&b;if(a==null){return}}this.__setValid(b);this.__asyncResults={};this.fireEvent("complete")}},destruct:function(){this.__formItems=null}});qx.Class.define("qx.ui.form.validation.AsyncValidator",{extend:qx.core.Object,construct:function(a){this.base(arguments);this.__validatorFunction=a},members:{__validatorFunction:null,__item:null,__manager:null,__usedForForm:null,validate:function(c,d,b,a){this.__usedForForm=false;this.__item=c;this.__manager=b;this.__validatorFunction.call(a||this,this,d)},validateForm:function(a,c,b){this.__usedForForm=true;this.__manager=c;this.__validatorFunction.call(b,a,this)},setValid:function(b,a){if(this.__usedForForm){if(a!==undefined){this.__manager.setInvalidMessage(a)}this.__manager.setFormValid(b)}else{if(a!==undefined){this.__item.setInvalidMessage(a)}this.__manager.setItemValid(this.__item,b)}}},destruct:function(){this.__manager=this.__item=null}});qx.Class.define("qx.log.appender.Element",{extend:qx.core.Object,construct:function(a){this.base(arguments);var b=[".qxappender .level-debug{background:white}",".qxappender .level-info{background:#DEEDFA}",".qxappender .level-warn{background:#FFF7D5}",".qxappender .level-error{background:#FFE2D5}",".qxappender .level-user{background:#E3EFE9}",".qxappender .type-string{color:black;font-weight:normal;}",".qxappender .type-number{color:#155791;font-weight:normal;}",".qxappender .type-boolean{color:#15BC91;font-weight:normal;}",".qxappender .type-array{color:#CC3E8A;font-weight:bold;}",".qxappender .type-map{color:#CC3E8A;font-weight:bold;}",".qxappender .type-key{color:#565656;font-style:italic}",".qxappender .type-class{color:#5F3E8A;font-weight:bold}",".qxappender .type-instance{color:#565656;font-weight:bold}",".qxappender .type-stringify{color:#565656;font-weight:bold}"];qx.bom.Stylesheet.createElement(b.join(""));qx.log.Logger.register(this)},members:{__element:null,setElement:function(a){this.clear();if(a){qx.bom.element.Class.add(a,"qxappender")}this.__element=a},clear:function(){var a=this.__element;if(a){a.innerHTML=""}},process:function(b){var a=this.__element;if(!a){return}a.appendChild(qx.log.appender.Util.toHtml(b));a.scrollTop=a.scrollHeight}},destruct:function(){this.__element=null}});qx.Class.define("qx.ui.mobile.layout.HBox",{extend:qx.ui.mobile.layout.AbstractBox,members:{getCssClass:function(){return"hbox"}}});qx.Interface.define("qx.ui.form.IRadioItem",{events:{changeValue:"qx.event.type.Data"},members:{setValue:function(a){},getValue:function(){},setGroup:function(a){this.assertInstance(a,qx.ui.form.RadioGroup)},getGroup:function(){}}});qx.Class.define("qx.ui.menu.RadioButton",{extend:qx.ui.menu.AbstractButton,include:[qx.ui.form.MModelProperty],implement:[qx.ui.form.IRadioItem,qx.ui.form.IBooleanForm,qx.ui.form.IModel],construct:function(a,b){this.base(arguments);if(a!=null){this.setLabel(a)}if(b!=null){this.setMenu(b)}this.addListener("execute",this._onExecute,this)},properties:{appearance:{refine:true,init:"menu-radiobutton"},value:{check:"Boolean",nullable:true,event:"changeValue",apply:"_applyValue",init:false},group:{check:"qx.ui.form.RadioGroup",nullable:true,apply:"_applyGroup"}},members:{_applyValue:function(b,a){b?this.addState("checked"):this.removeState("checked")},_applyGroup:function(b,a){if(a){a.remove(this)}if(b){b.add(this)}},_onExecute:function(a){this.setValue(true)},_onMouseUp:function(a){if(a.isLeftPressed()){this.execute()}else{if(this.getContextMenu()){return}}qx.ui.menu.Manager.getInstance().hideAll()},_onKeyPress:function(a){this.execute()}}});qx.Class.define("qx.ui.tabview.TabView",{extend:qx.ui.core.Widget,implement:qx.ui.core.ISingleSelection,include:[qx.ui.core.MContentPadding],construct:function(b){this.base(arguments);this.__barPositionToState={top:"barTop",right:"barRight",bottom:"barBottom",left:"barLeft"};this._createChildControl("bar");this._createChildControl("pane");var a=this.__radioGroup=new qx.ui.form.RadioGroup;a.setWrap(false);a.addListener("changeSelection",this._onChangeSelection,this);if(b!=null){this.setBarPosition(b)}else{this.initBarPosition()}},events:{changeSelection:"qx.event.type.Data"},properties:{appearance:{refine:true,init:"tabview"},barPosition:{check:["left","right","top","bottom"],init:"top",apply:"_applyBarPosition"}},members:{__radioGroup:null,_createChildControlImpl:function(c,b){var a;switch(c){case"bar":a=new qx.ui.container.SlideBar();a.setZIndex(10);this._add(a);break;case"pane":a=new qx.ui.container.Stack;a.setZIndex(5);this._add(a,{flex:1});break}return a||this.base(arguments,c)},_getContentPaddingTarget:function(){return this.getChildControl("pane")},add:function(d){if(qx.core.Environment.get("qx.debug")){if(!(d instanceof qx.ui.tabview.Page)){throw new Error("Incompatible child for TabView: "+d)}}var b=d.getButton();var c=this.getChildControl("bar");var e=this.getChildControl("pane");d.exclude();c.add(b);e.add(d);this.__radioGroup.add(b);d.addState(this.__barPositionToState[this.getBarPosition()]);d.addState("lastTab");var a=this.getChildren();if(a[0]==d){d.addState("firstTab")}else{a[a.length-2].removeState("lastTab")}d.addListener("close",this._onPageClose,this)},remove:function(e){var f=this.getChildControl("pane");var d=this.getChildControl("bar");var c=e.getButton();var b=f.getChildren();if(this.getSelection()[0]==e){var a=b.indexOf(e);if(a==0){if(b[1]){this.setSelection([b[1]])}else{this.resetSelection()}}else{this.setSelection([b[a-1]])}}d.remove(c);f.remove(e);this.__radioGroup.remove(c);e.removeState(this.__barPositionToState[this.getBarPosition()]);if(e.hasState("firstTab")){e.removeState("firstTab");if(b[0]){b[0].addState("firstTab")}}if(e.hasState("lastTab")){e.removeState("lastTab");if(b.length>0){b[b.length-1].addState("lastTab")}}e.removeListener("close",this._onPageClose,this)},getChildren:function(){return this.getChildControl("pane").getChildren()},indexOf:function(a){return this.getChildControl("pane").indexOf(a)},__barPositionToState:null,_applyBarPosition:function(n,d){var m=this.getChildControl("bar");var b=n=="left"||n=="right";var j=n=="right"||n=="bottom";var a=b?qx.ui.layout.HBox:qx.ui.layout.VBox;var k=this._getLayout();if(k&&k instanceof a){}else{this._setLayout(k=new a)}k.setReversed(j);m.setOrientation(b?"vertical":"horizontal");var c=this.getChildren();if(d){var f=this.__barPositionToState[d];m.removeState(f);for(var h=0,e=c.length;h<e;h++){c[h].removeState(f)}}if(n){var g=this.__barPositionToState[n];m.addState(g);for(var h=0,e=c.length;h<e;h++){c[h].addState(g)}}},getSelection:function(){var c=this.__radioGroup.getSelection();var a=[];for(var b=0;b<c.length;b++){a.push(c[b].getUserData("page"))}return a},setSelection:function(a){var c=[];for(var b=0;b<a.length;b++){c.push(a[b].getChildControl("button"))}this.__radioGroup.setSelection(c)},resetSelection:function(){this.__radioGroup.resetSelection()},isSelected:function(b){var a=b.getChildControl("button");return this.__radioGroup.isSelected(a)},isSelectionEmpty:function(){return this.__radioGroup.isSelectionEmpty()},getSelectables:function(c){var d=this.__radioGroup.getSelectables(c);var a=[];for(var b=0;b<d.length;b++){a.push(d[b].getUserData("page"))}return a},_onChangeSelection:function(f){var g=this.getChildControl("pane");var c=f.getData()[0];var b=f.getOldData()[0];var d=[];var a=[];if(c){d=[c.getUserData("page")];g.setSelection(d);c.focus();this.scrollChildIntoView(c,null,null,false)}else{g.resetSelection()}if(b){a=[b.getUserData("page")]}this.fireDataEvent("changeSelection",d,a)},_onBeforeChangeSelection:function(a){if(!this.fireNonBubblingEvent("beforeChangeSelection",qx.event.type.Event,[false,true])){a.preventDefault()}},_onRadioChangeSelection:function(b){var a=b.getData()[0];if(a){this.setSelection([a.getUserData("page")])}else{this.resetSelection()}},_onPageClose:function(c){var b=c.getTarget();var a=b.getButton().getChildControl("close-button");a.reset();this.remove(b)}},destruct:function(){this._disposeObjects("__radioGroup");this.__barPositionToState=null}});qx.Class.define("qx.ui.container.Stack",{extend:qx.ui.core.Widget,implement:qx.ui.core.ISingleSelection,include:[qx.ui.core.MSingleSelectionHandling,qx.ui.core.MChildrenHandling],construct:function(){this.base(arguments);this._setLayout(new qx.ui.layout.Grow);this.addListener("changeSelection",this.__onChangeSelection,this)},properties:{dynamic:{check:"Boolean",init:false,apply:"_applyDynamic"}},members:{_applyDynamic:function(e){var c=this._getChildren();var d=this.getSelection()[0];var f;for(var b=0,a=c.length;b<a;b++){f=c[b];if(f!=d){if(e){c[b].exclude()}else{c[b].hide()}}}},_getItems:function(){return this.getChildren()},_isAllowEmptySelection:function(){return true},_isItemSelectable:function(a){return true},__onChangeSelection:function(c){var a=c.getOldData()[0];var b=c.getData()[0];if(a){if(this.isDynamic()){a.exclude()}else{a.hide()}}if(b){b.show()}},_afterAddChild:function(b){var a=this.getSelection()[0];if(!a){this.setSelection([b])}else{if(a!==b){if(this.isDynamic()){b.exclude()}else{b.hide()}}}},_afterRemoveChild:function(b){if(this.getSelection()[0]===b){var a=this._getChildren()[0];if(a){this.setSelection([a])}else{this.resetSelection()}}},previous:function(){var b=this.getSelection()[0];var d=this._indexOf(b)-1;var a=this._getChildren();if(d<0){d=a.length-1}var c=a[d];this.setSelection([c])},next:function(){var c=this.getSelection()[0];var d=this._indexOf(c)+1;var a=this._getChildren();var b=a[d]||a[0];this.setSelection([b])}}});qx.Class.define("qx.ui.tabview.Page",{extend:qx.ui.container.Composite,construct:function(a,b){this.base(arguments);this._createChildControl("button");if(a!=null){this.setLabel(a)}if(b!=null){this.setIcon(b)}},events:{close:"qx.event.type.Event"},properties:{appearance:{refine:true,init:"tabview-page"},label:{check:"String",init:"",apply:"_applyLabel"},icon:{check:"String",init:"",apply:"_applyIcon"},showCloseButton:{check:"Boolean",init:false,apply:"_applyShowCloseButton"}},members:{_forwardStates:{barTop:1,barRight:1,barBottom:1,barLeft:1,firstTab:1,lastTab:1},_applyIcon:function(b,a){this.getChildControl("button").setIcon(b)},_applyLabel:function(b,a){this.getChildControl("button").setLabel(b)},_applyEnabled:function(c,a){this.base(arguments,c,a);var b=this.getChildControl("button");c==null?b.resetEnabled():b.setEnabled(c)},_createChildControlImpl:function(c,b){var a;switch(c){case"button":a=new qx.ui.tabview.TabButton;a.setAllowGrowX(true);a.setAllowGrowY(true);a.setUserData("page",this);a.addListener("close",this._onButtonClose,this);break}return a||this.base(arguments,c)},_applyShowCloseButton:function(b,a){this.getChildControl("button").setShowCloseButton(b)},_onButtonClose:function(){this.fireEvent("close")},getButton:function(){return this.getChildControl("button")}}});qx.Class.define("qx.ui.form.RadioButton",{extend:qx.ui.form.Button,include:[qx.ui.form.MForm,qx.ui.form.MModelProperty],implement:[qx.ui.form.IRadioItem,qx.ui.form.IForm,qx.ui.form.IBooleanForm,qx.ui.form.IModel],construct:function(a){if(qx.core.Environment.get("qx.debug")){this.assertArgumentsCount(arguments,0,1)}this.base(arguments,a);this.addListener("execute",this._onExecute);this.addListener("keypress",this._onKeyPress)},properties:{group:{check:"qx.ui.form.RadioGroup",nullable:true,apply:"_applyGroup"},value:{check:"Boolean",nullable:true,event:"changeValue",apply:"_applyValue",init:false},appearance:{refine:true,init:"radiobutton"},allowGrowX:{refine:true,init:false}},members:{_forwardStates:{checked:true,focused:true,invalid:true,hovered:true},_applyValue:function(b,a){b?this.addState("checked"):this.removeState("checked");if(b&&this.getFocusable()){this.focus()}},_applyGroup:function(b,a){if(a){a.remove(this)}if(b){b.add(this)}},_onExecute:function(a){this.setValue(true)},_onKeyPress:function(b){var a=this.getGroup();if(!a){return}switch(b.getKeyIdentifier()){case"Left":case"Up":a.selectPrevious();break;case"Right":case"Down":a.selectNext();break}}}});qx.Class.define("qx.ui.tabview.TabButton",{extend:qx.ui.form.RadioButton,implement:qx.ui.form.IRadioItem,construct:function(){this.base(arguments);var a=new qx.ui.layout.Grid(2,0);a.setRowAlign(0,"left","middle");a.setColumnAlign(0,"right","middle");this._getLayout().dispose();this._setLayout(a);this.initShowCloseButton()},events:{close:"qx.event.type.Data"},properties:{showCloseButton:{check:"Boolean",init:false,apply:"_applyShowCloseButton"}},members:{_forwardStates:{focused:true,checked:true},_applyIconPosition:function(c,a){var b={icon:this.getChildControl("icon"),label:this.getChildControl("label"),closeButton:this.getShowCloseButton()?this.getChildControl("close-button"):null};for(var d in b){if(b[d]){this._remove(b[d])}}switch(c){case"top":this._add(b.label,{row:3,column:2});this._add(b.icon,{row:1,column:2});if(b.closeButton){this._add(b.closeButton,{row:0,column:4})}break;case"bottom":this._add(b.label,{row:1,column:2});this._add(b.icon,{row:3,column:2});if(b.closeButton){this._add(b.closeButton,{row:0,column:4})}break;case"left":this._add(b.label,{row:0,column:2});this._add(b.icon,{row:0,column:0});if(b.closeButton){this._add(b.closeButton,{row:0,column:4})}break;case"right":this._add(b.label,{row:0,column:0});this._add(b.icon,{row:0,column:2});if(b.closeButton){this._add(b.closeButton,{row:0,column:4})}break}},_createChildControlImpl:function(c,b){var a;switch(c){case"label":var a=new qx.ui.basic.Label(this.getLabel());a.setAnonymous(true);this._add(a,{row:0,column:2});this._getLayout().setColumnFlex(2,1);break;case"icon":a=new qx.ui.basic.Image(this.getIcon());a.setAnonymous(true);this._add(a,{row:0,column:0});break;case"close-button":a=new qx.ui.form.Button();a.addListener("click",this._onCloseButtonClick,this);this._add(a,{row:0,column:4});if(!this.getShowCloseButton()){a.exclude()}break}return a||this.base(arguments,c)},_onCloseButtonClick:function(){this.fireDataEvent("close",this)},_applyShowCloseButton:function(b,a){if(b){this._showChildControl("close-button")}else{this._excludeChildControl("close-button")}},_applyCenter:function(b){var a=this._getLayout();if(b){a.setColumnAlign(2,"center","middle")}else{a.setColumnAlign(2,"left","middle")}}}});qx.Class.define("qx.ui.form.renderer.AbstractRenderer",{type:"abstract",extend:qx.ui.core.Widget,implement:qx.ui.form.renderer.IFormRenderer,construct:function(d){this.base(arguments);this._visibilityBindingIds=[];if(qx.core.Environment.get("qx.dynlocale")){qx.locale.Manager.getInstance().addListener("changeLocale",this._onChangeLocale,this);this._names=[]}var a=d.getGroups();for(var b=0;b<a.length;b++){var e=a[b];this.addItems(e.items,e.labels,e.title,e.options,e.headerOptions)}var c=d.getButtons();var f=d.getButtonOptions();for(var b=0;b<c.length;b++){this.addButton(c[b],f[b])}},members:{_names:null,_visibilityBindingIds:null,_connectVisibility:function(b,a){var c=b.bind("visibility",a,"visibility");this._visibilityBindingIds.push({id:c,item:b})},_onChangeLocale:qx.core.Environment.select("qx.dynlocale",{"true":function(d){for(var a=0;a<this._names.length;a++){var b=this._names[a];if(b.name&&b.name.translate){b.name=b.name.translate()}var c=this._createLabelText(b.name,b.item);b.label.setValue(c)}},"false":null}),_createLabelText:function(a,c){var d="";if(c.getRequired()){d=" <span style='color:red'>*</span> "}var b=a.length>0||c.getRequired()?" :":"";return a+d+b},addItems:function(a,b,c){throw new Error("Abstract method call")},addButton:function(a){throw new Error("Abstract method call")}},destruct:function(){if(qx.core.Environment.get("qx.dynlocale")){qx.locale.Manager.getInstance().removeListener("changeLocale",this._onChangeLocale,this)}this._names=null;for(var a=0;a<this._visibilityBindingIds.length;a++){var b=this._visibilityBindingIds[a];b.item.removeBinding(b.id)}}});qx.Class.define("qx.ui.form.renderer.Single",{extend:qx.ui.form.renderer.AbstractRenderer,construct:function(b){var a=new qx.ui.layout.Grid();a.setSpacing(6);a.setColumnFlex(0,1);a.setColumnAlign(0,"right","top");this._setLayout(a);this.base(arguments,b)},members:{_row:0,_buttonRow:null,addItems:function(a,e,f){if(f!=null){this._add(this._createHeader(f),{row:this._row,column:0,colSpan:2});this._row++}for(var c=0;c<a.length;c++){var b=this._createLabel(e[c],a[c]);this._add(b,{row:this._row,column:0});var d=a[c];b.setBuddy(d);this._add(d,{row:this._row,column:1});this._row++;this._connectVisibility(d,b);if(qx.core.Environment.get("qx.dynlocale")){this._names.push({name:e[c],label:b,item:a[c]})}}},addButton:function(b){if(this._buttonRow==null){this._buttonRow=new qx.ui.container.Composite();this._buttonRow.setMarginTop(5);var a=new qx.ui.layout.HBox();a.setAlignX("right");a.setSpacing(5);this._buttonRow.setLayout(a);this._add(this._buttonRow,{row:this._row,column:0,colSpan:2});this._row++}this._buttonRow.add(b)},getLayout:function(){return this._getLayout()},_createLabel:function(b,c){var a=new qx.ui.basic.Label(this._createLabelText(b,c));a.setRich(true);return a},_createHeader:function(a){var b=new qx.ui.basic.Label(a);b.setFont("bold");if(this._row!=0){b.setMarginTop(10)}b.setAlignX("left");return b}},destruct:function(){if(this._buttonRow){this._buttonRow.removeAll();this._disposeObjects("_buttonRow")}}});qx.Class.define("qx.ui.form.renderer.SinglePlaceholder",{extend:qx.ui.form.renderer.Single,implement:qx.ui.form.renderer.IFormRenderer,members:{addItems:function(a,c,d){if(d!=null){this._add(this._createHeader(d),{row:this._row,column:0,colSpan:2});this._row++}for(var b=0;b<a.length;b++){if(a[b].setPlaceholder===undefined){throw new Error("Only widgets with placeholders supported.")}a[b].setPlaceholder(c[b]);this._add(a[b],{row:this._row,column:0});this._row++}}}});qx.Interface.define("qx.ui.tree.provider.IVirtualTreeProvider",{members:{createLayer:function(){},createRenderer:function(){},setChildProperty:function(a){this.assertArgumentsCount(arguments,1,1);this.assertString(a)},setLabelPath:function(a){this.assertArgumentsCount(arguments,1,1);this.assertString(a)},styleSelectabled:function(a){this.assertArgumentsCount(arguments,1,1);this.assertInteger(a)},styleUnselectabled:function(a){this.assertArgumentsCount(arguments,1,1);this.assertInteger(a)},isSelectable:function(a){this.assertArgumentsCount(arguments,1,1);this.assertInteger(a)}}});qx.Class.define("qx.ui.decoration.BoxDiv",{extend:qx.ui.decoration.Abstract,construct:function(c,a,b){this.base(arguments);this._setOrientation(b);if(c!=null){this.setBaseImage(c)}if(a!=null){this.setInsets(a)}},properties:{baseImage:{check:"String",nullable:true,apply:"_applyBaseImage"}},members:{__markup:null,__images:null,__edges:null,_getDefaultInsets:function(){return{top:0,right:0,bottom:0,left:0}},_isInitialized:function(){return !!this.__markup},_setOrientation:function(a){this._isHorizontal=a=="horizontal"},getMarkup:function(){if(this.__markup){return this.__markup}var d=qx.bom.element.Decoration;var a=this.__images;var b=this.__edges;var c=[];c.push('<div style="position:absolute;top:0;left:0;overflow:hidden;font-size:0;line-height:0;">');if(this._isHorizontal){c.push(d.create(a.l,"no-repeat",{top:0,left:0}));c.push(d.create(a.c,"repeat-x",{top:0,left:b.left+"px"}));c.push(d.create(a.r,"no-repeat",{top:0,right:0}))}else{c.push(d.create(a.t,"no-repeat",{top:0,left:0}));c.push(d.create(a.c,"repeat-y",{top:b.top+"px",left:b.left+"px"}));c.push(d.create(a.b,"no-repeat",{bottom:0,left:0}))}c.push("</div>");return this.__markup=c.join("")},resize:function(d,e,b){d.style.width=e+"px";d.style.height=b+"px";var c=this.__edges;if(this._isHorizontal){var a=e-c.left-c.right;a=a<0?0:a;d.childNodes[1].style.width=a+"px"}else{var f=b-c.top-c.bottom;f=f<0?0:f;d.childNodes[1].style.height=f+"px"}if((qx.core.Environment.get("engine.name")=="mshtml")){if(parseFloat(qx.core.Environment.get("engine.version"))<7||(qx.core.Environment.get("browser.quirksmode")&&parseFloat(qx.core.Environment.get("engine.version"))<8)){if(this._isHorizontal){d.childNodes[2].style.marginRight=(e%2==1)?"-1px":"0"}else{d.childNodes[2].style.marginBottom=(b%2==1)?"-1px":"0"}}}},tint:function(b,a){},_applyBaseImage:function(i,d){if(qx.core.Environment.get("qx.debug")){if(this.__markup){throw new Error("This decorator is already in-use. Modification is not possible anymore!")}}var c=qx.util.ResourceManager.getInstance();if(i){var e=qx.util.AliasManager.getInstance();var a=e.resolve(i);var h=/(.*)(\.[a-z]+)$/.exec(a);var f=h[1];var b=h[2];var g=this.__images={t:f+"-t"+b,b:f+"-b"+b,c:f+"-c"+b,l:f+"-l"+b,r:f+"-r"+b};this.__edges={top:c.getImageHeight(g.t),bottom:c.getImageHeight(g.b),left:c.getImageWidth(g.l),right:c.getImageWidth(g.r)}}}},destruct:function(){this.__markup=this.__images=this.__edges=null}});qx.Interface.define("qx.ui.tree.core.IVirtualTree",{members:{getLookupTable:function(){},isNode:function(a){this.assertArgumentsCount(arguments,1,1);this.assertInterface(a,qx.core.Object)},isNodeOpen:function(a){this.assertArgumentsCount(arguments,1,1);this.assertInterface(a,qx.core.Object)},getLevel:function(a){this.assertArgumentsCount(arguments,1,1);this.assertInteger(a)},hasChildren:function(a){this.assertArgumentsCount(arguments,1,1);this.assertInterface(a,qx.core.Object)},openNode:function(a){this.assertArgumentsCount(arguments,1,1);this.assertInterface(a,qx.core.Object)},closeNode:function(a){this.assertArgumentsCount(arguments,1,1);this.assertInterface(a,qx.core.Object)},getSelection:function(){}}});qx.Mixin.define("qx.ui.tree.selection.MSelectionHandling",{properties:{selection:{check:"qx.data.Array",event:"changeSelection",apply:"_applySelection",nullable:false,deferredInit:true}},members:{_manager:null,__ignoreChangeSelection:false,__ignoreManagerChangeSelection:false,_initSelection:function(){this._initSelectionManager();this.initSelection(new qx.data.Array())},_initSelectionManager:function(){var a=this;var b={isItemSelectable:function(c){return a._provider.isSelectable(c)},styleSelectable:function(e,c,d){if(c!="selected"){return}if(d){a._provider.styleSelectabled(e)}else{a._provider.styleUnselectabled(e)}}};this._manager=new qx.ui.virtual.selection.Row(this.getPane(),b);this._manager.attachMouseEvents(this.getPane());this._manager.attachKeyEvents(this);this._manager.addListener("changeSelection",this._onManagerChangeSelection,this);this._manager._applyDefaultSelection()},_applySelection:function(b,a){b.addListener("change",this._onChangeSelection,this);if(a!=null){a.removeListener("change",this._onChangeSelection,this)}this._onChangeSelection()},_onChangeSelection:function(f){if(this.__ignoreManagerChangeSelection==true){return}this.__ignoreChangeSelection=true;var c=this.getSelection();var a=[];for(var b=0;b<c.getLength();b++){var d=c.getItem(b);var g=this.getLookupTable().indexOf(d);if(qx.core.Environment.get("qx.debug")){if(g<0){this.warn("Couldn't select item '"+d+"': Not visible or not an item of the model!")}}if(g>=0){a.push(g)}}try{this._manager.replaceSelection(a)}catch(f){this._manager.selectItem(a[a.length-1])}this.__synchronizeSelection();this.__ignoreChangeSelection=false},_onManagerChangeSelection:function(c){if(this.__ignoreChangeSelection==true){return}var b=this.getSelection();var a=c.getData();this.__ignoreManagerChangeSelection=true;this.__synchronizeSelection();if(b.getLength()>0){var d=b.getLength()-1;b.splice(d,1,this.getLookupTable().getItem(a[d]))}else{b.removeAll()}this.__ignoreManagerChangeSelection=false},__synchronizeSelection:function(){var b=this.getSelection();var a=b.toArray();var c=this._manager.getSelection();qx.lang.Array.removeAll(a);for(var d=0;d<c.length;d++){a.push(this.getLookupTable().getItem(c[d]))}b.length=a.length},_applyDefaultSelection:function(){if(this._manager!=null){this._manager._applyDefaultSelection()}}},destruct:function(){this._manager.dispose();this._manager=null}});qx.Class.define("qx.ui.tree.VirtualTree",{extend:qx.ui.virtual.core.Scroller,implement:qx.ui.tree.core.IVirtualTree,include:qx.ui.tree.selection.MSelectionHandling,construct:function(a,b,c){this.base(arguments,0,1,20,100);this._init();if(b!=null){this.setLabelPath(b)}if(c!=null){this.setChildProperty(c)}if(a!=null){this.initModel(a)}this.initItemHeight();this.initOpenMode();this.addListener("keypress",this._onKeyPress,this)},properties:{appearance:{refine:true,init:"virtual-tree"},focusable:{refine:true,init:true},width:{refine:true,init:100},height:{refine:true,init:200},itemHeight:{check:"Integer",init:25,apply:"_applyRowHeight",themeable:true},openMode:{check:["click","dblclick","none"],init:"dblclick",apply:"_applyOpenMode",event:"changeOpenMode",themeable:true},hideRoot:{check:"Boolean",init:false,apply:"_applyHideRoot"},showLeafs:{check:"Boolean",init:true,apply:"_applyShowLeafs"},childProperty:{check:"String",apply:"_applyChildProperty",nullable:true},labelPath:{check:"String",apply:"_applyLabelPath",nullable:true},iconPath:{check:"String",apply:"_applyIconPath",nullable:true},labelOptions:{apply:"_applyLabelOptions",nullable:true},iconOptions:{apply:"_applyIconOptions",nullable:true},model:{check:"qx.core.Object",apply:"_applyModel",event:"changeModel",nullable:true,deferredInit:true},delegate:{event:"changeDelegate",apply:"_applyDelegate",init:null,nullable:true}},members:{_provider:null,_layer:null,__lookupTable:null,__openNodes:null,__nestingLevel:null,__deferredCall:null,__itemWidth:0,syncWidget:function(){var e=this._layer.getFirstRow();var b=this._layer.getRowSizes().length;for(var d=e;d<e+b;d++){var c=this._layer.getRenderedCellWidget(d,0);this.__itemWidth=Math.max(this.__itemWidth,c.getSizeHint().width)}var a=this.getPane().getBounds().width;this.getPane().getColumnConfig().setItemSize(0,Math.max(this.__itemWidth,a))},openNode:function(a){this.__openNode(a);this.buildLookupTable()},openNodeAndParents:function(a){this.__openNodeAndAllParents(this.getModel(),a);this.buildLookupTable()},closeNode:function(a){if(qx.lang.Array.contains(this.__openNodes,a)){qx.lang.Array.remove(this.__openNodes,a);this.buildLookupTable()}},isNodeOpen:function(a){return qx.lang.Array.contains(this.__openNodes,a)},_init:function(){this.__lookupTable=new qx.data.Array();this.__openNodes=[];this.__nestingLevel=[];this._initLayer();this._initSelection()},_initLayer:function(){this._provider=new qx.ui.tree.provider.WidgetProvider(this);this._layer=this._provider.createLayer();this._layer.addListener("updated",this._onUpdated,this);this.getPane().addLayer(this._layer)},getLookupTable:function(){return this.__lookupTable},getOpenNodes:function(){return this.__openNodes},isNode:function(a){return qx.Class.hasProperty(a.constructor,this.getChildProperty())},getLevel:function(a){return this.__nestingLevel[a]},hasChildren:function(c){var b=c.get(this.getChildProperty());if(this.isShowLeafs()){return b.length>0}else{for(var a=0;a<b.getLength();a++){var d=b.getItem(a);if(this.isNode(d)){return true}}}return false},_applyRowHeight:function(b,a){this.getPane().getRowConfig().setDefaultItemSize(b)},_applyOpenMode:function(b,a){var c=this.getPane();if(b==="dblclick"){c.addListener("cellDblclick",this._onOpen,this)}else{if(b==="click"){c.addListener("cellClick",this._onOpen,this)}}if(a==="dblclick"){c.removeListener("cellDblclick",this._onOpen,this)}else{if(a==="click"){c.removeListener("cellClick",this._onOpen,this)}}},_applyHideRoot:function(b,a){this.buildLookupTable()},_applyShowLeafs:function(b,a){this.buildLookupTable()},_applyChildProperty:function(b,a){this._provider.setChildProperty(b)},_applyLabelPath:function(b,a){this._provider.setLabelPath(b)},_applyIconPath:function(b,a){this._provider.setIconPath(b)},_applyLabelOptions:function(b,a){this._provider.setLabelOptions(b)},_applyIconOptions:function(b,a){this._provider.setIconOptions(b)},_applyModel:function(b,a){this.__openNodes=[];if(b!=null){if(qx.core.Environment.get("qx.debug")){if(!qx.Class.hasMixin(b.constructor,qx.data.marshal.MEventBubbling)){this.warn("The model item doesn't support the Mixin 'qx.data.marshal.MEventBubbling'. Therefore the tree can not update the view automatically on model changes.")}}b.addListener("changeBubble",this._onChangeBubble,this);this.__openNode(b)}if(a!=null){a.removeListener("changeBubble",this._onChangeBubble,this)}this.buildLookupTable()},_applyDelegate:function(b,a){this._provider.setDelegate(b);this.getPane().fullUpdate()},_onChangeBubble:function(c){var a=c.getData().name;var b=a.lastIndexOf(".");if(b!=-1){a=a.substr(b+1,a.length)}if(qx.lang.String.startsWith(a,this.getChildProperty())){this.buildLookupTable()}},_onUpdated:function(a){if(this.__deferredCall==null){this.__deferredCall=new qx.util.DeferredCall(function(){qx.ui.core.queue.Widget.add(this)},this)}this.__deferredCall.schedule()},_onOpen:function(b){var c=b.getRow();var a=this.__lookupTable.getItem(c);if(this.isNode(a)){if(this.isNodeOpen(a)){this.closeNode(a)}else{this.openNode(a)}}},_onKeyPress:function(g){var c=this.getSelection();if(c.getLength()>0){var d=c.getItem(0);var f=this.isNode(d);switch(g.getKeyIdentifier()){case"Left":if(f&&this.isNodeOpen(d)){this.closeNode(d)}else{var b=this.__getParent(d);if(b!=null){c.splice(0,1,b)}}break;case"Right":if(f&&!this.isNodeOpen(d)){this.openNode(d)}else{if(f){var a=d.get(this.getChildProperty());if(a.getLength()>0){c.splice(0,1,a.getItem(0))}}}break;case"Enter":case"Space":if(!f){return}if(this.isNodeOpen(d)){this.closeNode(d)}else{this.openNode(d)}break}}this.getPane().fullUpdate()},buildLookupTable:function(){if(this.getModel()!=null&&(this.getChildProperty()==null||this.getLabelPath()==null)){throw new Error("Could not build tree, because 'childProperty' and/or 'labelPath' is 'null'!")}this.__itemWidth=0;var d=[];this.__nestingLevel=[];var b=-1;var a=this.getModel();if(a!=null){if(!this.isHideRoot()){b++;d.push(a);this.__nestingLevel.push(b)}if(this.isNodeOpen(a)){var c=this.__getVisibleChildrenFrom(a,b);d=d.concat(c)}}this._provider.removeBindings();this.__lookupTable.removeAll();this.__lookupTable.append(d);this.__updateSelection();this.__updateRowCount()},__getVisibleChildrenFrom:function(e,a){var f=[];a++;if(!this.isNode(e)){return f}var c=e.get(this.getChildProperty());for(var b=0;b<c.getLength();b++){var g=c.getItem(b);if(this.isNode(g)){this.__nestingLevel.push(a);f.push(g);if(this.isNodeOpen(g)){var d=this.__getVisibleChildrenFrom(g,a);f=f.concat(d)}}else{if(this.isShowLeafs()){this.__nestingLevel.push(a);f.push(g)}}}return f},__openNode:function(a){if(!qx.lang.Array.contains(this.__openNodes,a)){this.__openNodes.push(a)}},__openNodeAndAllParents:function(b,e){if(b===e){this.__openNode(e);return true}if(!this.isNode(b)){return false}var d=b.get(this.getChildProperty());if(d==null){return false}for(var c=0;c<d.getLength();c++){var f=d.getItem(c);var a=this.__openNodeAndAllParents(f,e);if(a===true){this.__openNode(f);return true}}return false},__updateSelection:function(){var a=this.getSelection();if(a.getLength()>0){var b=a.getItem(0);if(!this.__lookupTable.contains(b)){a.remove(b)}}},__updateRowCount:function(){this.getPane().getRowConfig().setItemCount(this.__lookupTable.getLength());this.getPane().fullUpdate()},__getParent:function(c){var b=this.__lookupTable.indexOf(c);if(b<0){return null}var d=this.__nestingLevel[b];while(b>0){b--;var a=this.__nestingLevel[b];if(a<d){return this.__lookupTable.getItem(b)}}return null}},destruct:function(){var a=this.getPane();if(a!=null){if(a.hasListener("cellDblclick")){a.addListener("cellDblclick",this._onOpen,this)}else{if(a.hasListener("cellClick")){a.removeListener("cellClick",this._onOpen,this)}}}this._layer.removeListener("updated",this._onUpdated,this);this._layer.destroy();this._provider.dispose();this.__lookupTable.dispose();this._layer=this._provider=this.__lookupTable=this.__openNodes=null}});qx.Mixin.define("qx.ui.tree.core.MWidgetController",{construct:function(){this.__boundItems=[]},properties:{labelPath:{check:"String",nullable:true},iconPath:{check:"String",nullable:true},labelOptions:{nullable:true},iconOptions:{nullable:true},childProperty:{check:"String",nullable:true},delegate:{event:"changeDelegate",init:null,nullable:true}},members:{__boundItems:null,bindDefaultProperties:function(c,a){this.bindProperty("","model",null,c,a);this.bindProperty(this.getLabelPath(),"label",this.getLabelOptions(),c,a);try{this.bindProperty(this.getChildProperty()+".length","appearance",{converter:function(){return"virtual-tree-folder"}},c,a)}catch(b){c.setAppearance("virtual-tree-file")}if(this.getIconPath()!=null){this.bindProperty(this.getIconPath(),"icon",this.getIconOptions(),c,a)}},bindProperty:function(f,a,d,e,c){var g=this.__getBindPath(c,f);var b=this._tree.getLookupTable();var h=b.bind(g,e,a,d);this.__addBinding(e,h)},bindPropertyReverse:function(h,a,e,d,c){var f=this.__getBindPath(c,h);var b=this._tree.getLookupTable();var g=d.bind(a,b,f,e);this.__addBinding(d,g)},removeBindings:function(){while(this.__boundItems.length>0){var a=this.__boundItems.pop();this._removeBindingsFrom(a)}},_bindItem:function(b,a){var c=qx.util.Delegate.getMethod(this.getDelegate(),"bindItem");if(c!=null){c(this,b,a)}else{this.bindDefaultProperties(b,a)}},_removeBindingsFrom:function(a){var d=this.__getBindings(a);while(d.length>0){var c=d.pop();try{this._tree.getLookupTable().removeBinding(c)}catch(b){a.removeBinding(c)}}if(qx.lang.Array.contains(this.__boundItems,a)){qx.lang.Array.remove(this.__boundItems,a)}},__getBindPath:function(a,b){var c="["+a+"]";if(b!=null&&b!=""){c+="."+b}return c},__addBinding:function(a,c){var b=this.__getBindings(a);if(!qx.lang.Array.contains(b,c)){b.push(c)}if(!qx.lang.Array.contains(this.__boundItems,a)){this.__boundItems.push(a)}},__getBindings:function(a){var b=a.getUserData("BindingIds");if(b==null){b=[];a.setUserData("BindingIds",b)}return b}},destruct:function(){this.__boundItems=null}});qx.Class.define("qx.ui.tree.provider.WidgetProvider",{extend:qx.core.Object,implement:[qx.ui.virtual.core.IWidgetCellProvider,qx.ui.tree.provider.IVirtualTreeProvider],include:[qx.ui.tree.core.MWidgetController],construct:function(a){this.base(arguments);this._tree=a;this.addListener("changeDelegate",this._onChangeDelegate,this);this._onChangeDelegate()},members:{_tree:null,_renderer:null,getCellWidget:function(e,b){var c=this._tree.getLookupTable().getItem(e);var a=false;if(this._tree.isNode(c)){a=this._tree.hasChildren(c)}var d=this._renderer.getCellWidget();d.setOpen(a&&this._tree.isNodeOpen(c));d.setUserData("cell.children",a);d.addListener("changeOpen",this.__onOpenChanged,this);this._bindItem(d,e);if(this._tree.getSelection().contains(c)){this._styleSelectabled(d)}else{this._styleUnselectabled(d)}d.setUserData("cell.level",this._tree.getLevel(e));qx.ui.core.queue.Widget.add(d);return d},poolCellWidget:function(a){a.removeListener("changeOpen",this.__onOpenChanged,this);this._removeBindingsFrom(a);this._renderer.pool(a)},createLayer:function(){return new qx.ui.virtual.layer.WidgetCell(this)},createRenderer:function(){var b=qx.util.Delegate.getMethod(this.getDelegate(),"createItem");if(b==null){b=function(){return new qx.ui.tree.VirtualTreeItem()}}var a=new qx.ui.virtual.cell.WidgetCell();a.setDelegate({createWidget:b});return a},styleSelectabled:function(b){var a=this._tree._layer.getRenderedCellWidget(b,0);this._styleSelectabled(a)},styleUnselectabled:function(b){var a=this._tree._layer.getRenderedCellWidget(b,0);this._styleUnselectabled(a)},isSelectable:function(b){var a=this._tree._layer.getRenderedCellWidget(b,0);if(a!=null){return a.isEnabled()}else{return true}},_styleSelectabled:function(a){if(a==null){return}this._renderer.updateStates(a,{selected:1})},_styleUnselectabled:function(a){if(a==null){return}this._renderer.updateStates(a,{})},_onItemCreated:function(c){var b=qx.util.Delegate.getMethod(this.getDelegate(),"configureItem");if(b!=null){var a=c.getData();b(a)}},_onChangeDelegate:function(a){if(this._renderer!=null){this._renderer.dispose();this.removeBindings()}this._renderer=this.createRenderer();this._renderer.addListener("created",this._onItemCreated,this)},__onOpenChanged:function(b){var c=b.getTarget();var d=c.getUserData("cell.row");var a=this._tree.getLookupTable().getItem(d);if(b.getData()){this._tree.openNode(a)}else{this._tree.closeNode(a)}}},destruct:function(){this.removeBindings();this._renderer.dispose();this._tree=this._renderer=null}});qx.Class.define("qx.ui.layout.LineSizeIterator",{extend:Object,construct:function(a,b){this.__children=a;this.__spacing=b;this.__hasMoreLines=a.length>0;this.__childIndex=0},members:{__children:null,__spacing:null,__hasMoreLines:null,__childIndex:null,computeNextLine:function(g){var g=g||Infinity;if(!this.__hasMoreLines){throw new Error("No more lines to compute")}var c=this.__children;var k=0;var j=0;var a=[];var h=[];for(var f=this.__childIndex;f<c.length;f++){var b=c[f];var n=b.getSizeHint();var l=this.__computeGapBeforeChild(f);var m=n.width+l;var e=f==this.__childIndex;if(!e&&j+m>g){this.__childIndex=f;break}var d=n.height+b.getMarginTop()+b.getMarginBottom();a.push(b);h.push(l);j+=m;k=Math.max(k,d);if(b.getLayoutProperties().lineBreak){this.__childIndex=f+1;break}}if(f>=c.length){this.__hasMoreLines=false}return{height:k,width:j,children:a,gapsBefore:h}},__computeGapBeforeChild:function(b){var a=b==this.__childIndex;if(a){return this.__children[b].getMarginLeft()}else{return Math.max(this.__children[b-1].getMarginRight(),this.__children[b].getMarginLeft(),this.__spacing)}},hasMoreLines:function(){return this.__hasMoreLines}}});qx.Class.define("qx.ui.mobile.page.NavigationPage",{extend:qx.ui.mobile.page.Page,events:{action:"qx.event.type.Event"},properties:{title:{check:"String",init:"",apply:"_applyTitle"},backButtonText:{check:"String",init:"",apply:"_applyBackButtonText"},buttonText:{check:"String",init:"",apply:"_applyButtonText"},showBackButton:{check:"Boolean",init:false,apply:"_applyShowBackButton"},showButton:{check:"Boolean",init:false,apply:"_applyShowButton"},contentCssClass:{check:"String",init:"content",nullable:true,apply:"_applyContentCssClass"}},members:{__navigationBar:null,__title:null,__backButton:null,__button:null,__content:null,__scrollContainer:null,getContent:function(){return this.__content},_getTitle:function(){return this.__title},_getNavigationBar:function(){return this.__navigationBar()},_getBackButton:function(){return this.__backButton},_getButton:function(){return this.__button},_getScrollContainer:function(){return this.__scrollContainer},_applyTitle:function(b,a){if(this.__title){this.__title.setValue(b)}},_applyBackButtonText:function(b,a){if(this.__backButton){this.__backButton.setValue(b)}},_applyButtonText:function(b,a){if(this.__button){this.__button.setValue(b)}},_applyShowBackButton:function(b,a){this._showBackButton()},_applyShowButton:function(b,a){this._showButton()},_applyContentCssClass:function(b,a){if(this.__content){this.__content.setDefaultCssClass(b)}},_showBackButton:function(){if(this.__backButton){if(this.getShowBackButton()){this.__backButton.show()}else{this.__backButton.hide()}}},_showButton:function(){if(this.__button){if(this.getShowButton()){this.__button.show()}else{this.__button.hide()}}},_initialize:function(){this.base(arguments);this.__navigationBar=this._createNavigationBar();if(this.__navigationBar){this.add(this.__navigationBar)}this.__scrollContainer=this._createScrollContainer();this.__content=this._createContent();if(this.__content){this.__scrollContainer.add(this.__content)}if(this.__scrollContainer){this.add(this.__scrollContainer,{flex:1})}},_createScrollContainer:function(){return new qx.ui.mobile.container.Scroll()},_createContent:function(){var a=new qx.ui.mobile.container.Composite();a.setDefaultCssClass(this.getContentCssClass());return a},_createNavigationBar:function(){var a=new qx.ui.mobile.navigationbar.NavigationBar();this.__backButton=this._createBackButton();if(this.__backButton){this.__backButton.addListener("tap",this._onBackButtonTap,this);this.__backButton.setValue(this.getBackButtonText());this._showBackButton();a.add(this.__backButton)}this.__title=this._createTitle();if(this.__title){a.add(this.__title,{flex:1})}this.__button=this._createButton();if(this.__button){this.__button.addListener("tap",this._onButtonTap,this);this.__button.setValue(this.getButtonText());this._showButton();a.add(this.__button)}return a},_createTitle:function(){return new qx.ui.mobile.navigationbar.Title(this.getTitle())},_createBackButton:function(){return new qx.ui.mobile.navigationbar.BackButton()},_createButton:function(){return new qx.ui.mobile.navigationbar.Button()},_onBackButtonTap:function(a){this.back()},_onButtonTap:function(a){this.fireEvent("action")}},destruct:function(){this.__navigationBar=this.__title=this.__backButton=this.__button=this.__content=this.__scrollContainer=null}});qx.Class.define("qx.ui.mobile.navigationbar.NavigationBar",{extend:qx.ui.mobile.container.Composite,construct:function(a){this.base(arguments,a);if(!a){this.setLayout(new qx.ui.mobile.layout.HBox().set({alignY:"middle"}))}},properties:{defaultCssClass:{refine:true,init:"navigationbar"}}});qx.Class.define("qx.ui.mobile.basic.Label",{extend:qx.ui.mobile.core.Widget,construct:function(a){this.base(arguments);if(a){this.setValue(a)}},properties:{defaultCssClass:{refine:true,init:"label"},value:{nullable:true,init:null,apply:"_applyValue",event:"changeValue"},anonymous:{refine:true,init:true},preventPhoneNumber:{check:"Boolean",init:false,apply:"_applyAttribute"}},members:{_applyValue:function(b,a){if(this.getPreventPhoneNumber()){b=this._preventPhoneNumberAutoDetection(b)}this._setHtml(b)},_preventPhoneNumberAutoDetection:function(b){if(b==null){return}b=""+b;b=b.replace(/\r\n/g,"\n");var a="";for(var d=0;d<b.length;d++){var c=b.charAt(d);if(c=="0"){a+="\uFEFF\u0030"}else{if(c=="1"){a+="\uFEFF\u0031"}else{if(c=="2"){a+="\uFEFF\u0032"}else{if(c=="3"){a+="\uFEFF\u0033"}else{if(c=="4"){a+="\uFEFF\u0034"}else{if(c=="5"){a+="\uFEFF\u0035"}else{if(c=="6"){a+="\uFEFF\u0036"}else{if(c=="7"){a+="\uFEFF\u0037"}else{if(c=="8"){a+="\uFEFF\u0038"}else{if(c=="9"){a+="\uFEFF\u0039"}else{a+=c}}}}}}}}}}}return a}},defer:function(){qx.ui.mobile.core.Widget.addAttributeMapping("preventPhoneNumber",{attribute:"data-preventPhoneNumber",values:{"true":"true","false":null}})}});qx.Class.define("qx.ui.mobile.navigationbar.Title",{extend:qx.ui.mobile.basic.Label,members:{_getTagName:function(){return"h1"}}});qx.Class.define("qx.ui.mobile.form.Button",{extend:qx.ui.mobile.core.Widget,construct:function(a){this.base(arguments);if(a){this.setValue(a)}},properties:{defaultCssClass:{refine:true,init:"button"},value:{check:"String",nullable:true,init:null,apply:"_applyValue"}},members:{_applyValue:function(b,a){this._setHtml(b)}}});qx.Class.define("qx.ui.mobile.navigationbar.Button",{extend:qx.ui.mobile.form.Button,properties:{defaultCssClass:{refine:true,init:"navigationbar-button"}}});qx.Class.define("qx.ui.mobile.navigationbar.BackButton",{extend:qx.ui.mobile.navigationbar.Button,properties:{defaultCssClass:{refine:true,init:"navigationbar-backbutton"}}});qx.Class.define("qx.ui.form.SelectBox",{extend:qx.ui.form.AbstractSelectBox,implement:[qx.ui.core.ISingleSelection,qx.ui.form.IModelSelection],include:[qx.ui.core.MSingleSelectionHandling,qx.ui.form.MModelSelection],construct:function(){this.base(arguments);this._createChildControl("atom");this._createChildControl("spacer");this._createChildControl("arrow");this.addListener("mouseover",this._onMouseOver,this);this.addListener("mouseout",this._onMouseOut,this);this.addListener("click",this._onClick,this);this.addListener("mousewheel",this._onMouseWheel,this);this.addListener("keyinput",this._onKeyInput,this);this.addListener("changeSelection",this.__onChangeSelection,this)},properties:{appearance:{refine:true,init:"selectbox"}},members:{__preSelectedItem:null,_createChildControlImpl:function(c,b){var a;switch(c){case"spacer":a=new qx.ui.core.Spacer();this._add(a,{flex:1});break;case"atom":a=new qx.ui.basic.Atom(" ");a.setCenter(false);a.setAnonymous(true);this._add(a,{flex:1});break;case"arrow":a=new qx.ui.basic.Image();a.setAnonymous(true);this._add(a);break}return a||this.base(arguments,c)},_forwardStates:{focused:true},_getItems:function(){return this.getChildrenContainer().getChildren()},_isAllowEmptySelection:function(){return this.getChildrenContainer().getSelectionMode()!=="one"},__onChangeSelection:function(c){var a=c.getData()[0];var b=this.getChildControl("list");if(b.getSelection()[0]!=a){if(a){b.setSelection([a])}else{b.resetSelection()}}this.__updateIcon();this.__updateLabel()},__updateIcon:function(){var c=this.getChildControl("list").getSelection()[0];var b=this.getChildControl("atom");var a=c?c.getIcon():"";a==null?b.resetIcon():b.setIcon(a)},__updateLabel:function(){var c=this.getChildControl("list").getSelection()[0];var b=this.getChildControl("atom");var a=c?c.getLabel():"";var d=this.getFormat();if(d!=null){a=d.call(this,c)}if(a&&a.translate){a=a.translate()}a==null?b.resetLabel():b.setLabel(a)},_onMouseOver:function(a){if(!this.isEnabled()||a.getTarget()!==this){return}if(this.hasState("abandoned")){this.removeState("abandoned");this.addState("pressed")}this.addState("hovered")},_onMouseOut:function(a){if(!this.isEnabled()||a.getTarget()!==this){return}this.removeState("hovered");if(this.hasState("pressed")){this.removeState("pressed");this.addState("abandoned")}},_onClick:function(a){this.toggle()},_onMouseWheel:function(g){if(this.getChildControl("popup").isVisible()){return}var f=g.getWheelDelta()>0?1:-1;var c=this.getSelectables();var d=this.getSelection()[0];if(!d){d=c[0]}var b=c.indexOf(d)+f;var a=c.length-1;if(b<0){b=0}else{if(b>=a){b=a}}this.setSelection([c[b]]);g.stopPropagation();g.preventDefault()},_onKeyPress:function(b){var a=b.getKeyIdentifier();if(a=="Enter"||a=="Space"){if(this.__preSelectedItem){this.setSelection([this.__preSelectedItem]);this.__preSelectedItem=null}this.toggle()}else{this.base(arguments,b)}},_onKeyInput:function(a){var b=a.clone();b.setTarget(this._list);b.setBubbles(false);this.getChildControl("list").dispatchEvent(b)},_onListMouseDown:function(a){if(this.__preSelectedItem){this.setSelection([this.__preSelectedItem]);this.__preSelectedItem=null}},_onListChangeSelection:function(g){var f=g.getData();var b=g.getOldData();if(b&&b.length>0){b[0].removeListener("changeIcon",this.__updateIcon,this);b[0].removeListener("changeLabel",this.__updateLabel,this)}if(f.length>0){var a=this.getChildControl("popup");var d=this.getChildControl("list");var c=d.getSelectionContext();if(a.isVisible()&&(c=="quick"||c=="key")){this.__preSelectedItem=f[0]}else{this.setSelection([f[0]]);this.__preSelectedItem=null}f[0].addListener("changeIcon",this.__updateIcon,this);f[0].addListener("changeLabel",this.__updateLabel,this)}else{this.resetSelection()}},_onPopupChangeVisibility:function(g){var b=this.getChildControl("popup");if(!b.isVisible()){var h=this.getChildControl("list");if(h.hasChildren()){h.setSelection(this.getSelection())}}else{var a=b.getLayoutLocation(this);var c=qx.bom.Viewport.getHeight();var j=a.top;var d=c-a.bottom;var f=j>d?j:d;var i=this.getMaxListHeight();var h=this.getChildControl("list");if(i==null||i>f){h.setMaxHeight(f)}else{if(i<f){h.setMaxHeight(i)}}}}},destruct:function(){this.__preSelectedItem=null}});qx.Class.define("qx.bom.Window",{statics:{__blocker:null,__blockerWindow:null,__timer:null,__modalOptions:{top:"dialogTop",left:"dialogLeft",width:"dialogWidth",height:"dialogHeight",scrollbars:"scroll",resizable:"resizable"},__modelessOptions:{top:1,left:1,width:1,height:1,dependent:1,resizable:1,status:1,location:1,menubar:1,scrollbars:1,toolbar:1},__isCapableToOpenModalWindows:function(){return window.showModalDialog!=null},open:function(a,b,k,g,j,d,i){var f=null;if(a==null){a="javascript:/"}if(b==null){b="qxNativeWindow"+new Date().getTime()}if(j==null){j=true}var h=this.__generateConfigurationString(k,g&&j);if(g){if(this.__isCapableToOpenModalWindows()&&j){f=window.showModalDialog(a,[window.self],h)}else{this.getBlocker().block();if(this.__timer==null){this.__timer=new qx.event.Timer(500);this.__timer.addListener("interval",this.__checkForUnblocking,this)}this.__blockerWindow=window.open(a,b,h);this.__timer.restart();f=this.__blockerWindow}}else{f=window.open(a,b,h)}if(f&&d&&(d instanceof Function)){var c=i||f;var e=qx.lang.Function.bind(d,c);qx.bom.Event.addNativeListener(f,"load",function(){e();qx.bom.Event.removeNativeListener(f,"load",arguments.callee)})}return f},__generateConfigurationString:function(c,a){var b;var e;var g=[];if(a&&this.__isCapableToOpenModalWindows()){for(var d in c){if(qx.bom.Window.__modalOptions[d]){var f="";if(d!="scrollbars"&&d!="resizable"){f="px"}e=qx.bom.Window.__modalOptions[d]+":"+c[d]+f;g.push(e)}else{qx.log.Logger.warn("Option '"+d+"' is not supported for modal windows.")}}b=g.join(";")}else{for(var d in c){if(qx.bom.Window.__modelessOptions[d]){if(qx.lang.Type.isBoolean(c[d])){e=d+"="+(c[d]?"yes":"no")}else{e=d+"="+c[d]}g.push(e)}else{qx.log.Logger.warn("Option '"+d+"' is not supported for native windows.")}}b=g.join(",")}return b},__checkForUnblocking:function(){if(this.isClosed(this.__blockerWindow)){this.getBlocker().unblock();this.__timer.stop()}},getBlocker:function(){if(this.__blocker==null){this.__blocker=new qx.bom.Blocker}return this.__blocker},close:function(a){if(a){return a.close()}},isClosed:function(c){var a=true;if(c){try{a=c.closed}catch(b){}}return a},moveTo:function(d,c,b){if(!qx.bom.Window.isClosed(d)){try{d.moveTo(b,c)}catch(a){qx.log.Logger.error("Cross-Domain Scripting problem: Could not move window!",a)}}},resizeTo:function(d,c,a){if(!qx.bom.Window.isClosed(d)){try{d.resizeTo(c,a)}catch(b){qx.log.Logger.error("Cross-Domain Scripting problem: Could not resize window!",b)}}}}});qx.Class.define("qx.bom.Blocker",{extend:qx.core.Object,construct:function(){this.base(arguments);this.__init()},members:{__iframeElement:null,__blockerElement:null,__blockedElement:null,__isActive:false,__defaultZIndex:10000,__defaultBlockerOpacity:0,__defaultBlockerColor:"transparent",block:function(a){if(!this.__isActive){this.__blockedElement=a;var b=this.__calculateStyles();this.__styleAndInsertBlocker(b);this.__isActive=true}},unblock:function(){if(this.__isActive){this.__removeBlocker();this.__isActive=false}},isBlocked:function(){return this.__isActive},getBlockerElement:function(){return this.__blockerElement},setBlockerColor:function(a){qx.bom.element.Style.set(this.__blockerElement,"backgroundColor",a)},getBlockerColor:function(){return qx.bom.element.Style.get(this.__blockerElement,"backgroundColor")},setBlockerOpacity:function(a){qx.bom.element.Opacity.set(this.__blockerElement,a)},getBlockerOpacity:function(){return qx.bom.element.Opacity.get(this.__blockerElement)},setBlockerZIndex:function(a){qx.bom.element.Style.set(this.__blockerElement,"zIndex",a)},getBlockerZIndex:function(){return qx.bom.element.Style.get(this.__blockerElement,"zIndex")},__init:function(){this.__setupBlockerElement();if((qx.core.Environment.get("engine.name")=="mshtml")){this.__setupIframeElement()}qx.event.Registration.addListener(window,"resize",this.__onResize,this)},__setupBlockerElement:function(){this.__blockerElement=qx.bom.Element.create("div");qx.bom.element.Style.setStyles(this.__blockerElement,{display:"block",opacity:this.__defaultBlockerOpacity,backgroundColor:this.__defaultBlockerColor});this.setBlockerZIndex(this.__defaultZIndex)},__setupIframeElement:function(){this.__iframeElement=qx.bom.Iframe.create();qx.bom.element.Attribute.set(this.__iframeElement,"allowTransparency",false);qx.bom.element.Attribute.set(this.__iframeElement,"src","javascript:false;");qx.bom.element.Style.setStyles(this.__iframeElement,{display:"block",opacity:this.__defaultBlockerOpacity})},__calculateStyles:function(){var a={position:"absolute"};if(this.__isWholeDocumentBlockTarget()){a.left="0px";a.top="0px";a.right=null;a.bottom=null;a.width=qx.bom.Document.getWidth()+"px";a.height=qx.bom.Document.getHeight()+"px"}else{a.width=qx.bom.element.Dimension.getWidth(this.__blockedElement)+"px";a.height=qx.bom.element.Dimension.getHeight(this.__blockedElement)+"px";a.left=qx.bom.element.Location.getLeft(this.__blockedElement)+"px";a.top=qx.bom.element.Location.getTop(this.__blockedElement)+"px"}return a},__styleAndInsertBlocker:function(a){var b=document.body;qx.bom.element.Style.setStyles(this.__blockerElement,a);qx.dom.Element.insertEnd(this.__blockerElement,b);if((qx.core.Environment.get("engine.name")=="mshtml")){a.zIndex=this.getBlockerZIndex()-1;qx.bom.element.Style.setStyles(this.__iframeElement,a);qx.dom.Element.insertEnd(this.__iframeElement,document.body)}},__removeBlocker:function(){qx.dom.Element.remove(this.__blockerElement);if((qx.core.Environment.get("engine.name")=="mshtml")){qx.dom.Element.remove(this.__iframeElement)}},__onResize:function(a){if(this.__isWholeDocumentBlockTarget()){this.__resizeBlocker({width:"0px",height:"0px"});qx.event.Timer.once(function(){var b={width:qx.bom.Document.getWidth()+"px",height:qx.bom.Document.getHeight()+"px"};this.__resizeBlocker(b)},this,0)}},__resizeBlocker:function(a){qx.bom.element.Style.setStyles(this.__blockerElement,a);if((qx.core.Environment.get("engine.name")=="mshtml")){qx.bom.element.Style.setStyles(this.__iframeElement,a)}},__isWholeDocumentBlockTarget:function(){return(this.__blockedElement==null||qx.dom.Node.isWindow(this.__blockedElement)||qx.dom.Node.isDocument(this.__blockedElement))}},destruct:function(){qx.event.Registration.removeListener(window,"resize",this.__onResize,this);this.__iframeElement=this.__blockerElement=this.__blockedElement=null}});qx.Class.define("qx.ui.embed.Canvas",{extend:qx.ui.core.Widget,construct:function(a,b){this.base(arguments);this.__deferredDraw=new qx.util.DeferredCall(this.__redraw,this);this.addListener("resize",this._onResize,this);if(a!==undefined){this.setCanvasWidth(a)}if(b!==undefined){this.setCanvasHeight(b)}},events:{redraw:"qx.event.type.Data"},properties:{syncDimension:{check:"Boolean",init:false},canvasWidth:{check:"Integer",init:300,apply:"_applyCanvasWidth"},canvasHeight:{check:"Integer",init:150,apply:"_applyCanvasHeight"}},members:{__deferredDraw:null,_createContentElement:function(){return new qx.html.Canvas()},__redraw:function(){var b=this.getContentElement();var a=b.getHeight();var d=b.getWidth();var c=b.getContext2d();this._draw(d,a,c);this.fireNonBubblingEvent("redraw",qx.event.type.Data,[{width:d,height:a,context:c}])},_applyCanvasWidth:function(b,a){this.getContentElement().setWidth(b);this.__deferredDraw.schedule()},_applyCanvasHeight:function(b,a){this.getContentElement().setHeight(b);this.__deferredDraw.schedule()},update:function(){this.__deferredDraw.schedule()},_onResize:function(b){var a=b.getData();if(this.getSyncDimension()){this.setCanvasHeight(a.height);this.setCanvasWidth(a.width)}},getContext2d:function(){return this.getContentElement().getContext2d()},_draw:function(c,a,b){}},destruct:function(){this._disposeObjects("__deferredDraw")}});qx.Class.define("qx.html.Canvas",{extend:qx.html.Element,construct:function(b,a){this.base(arguments,"canvas",b,a);this.__canvas=document.createElement("canvas")},members:{__canvas:null,_createDomElement:function(){return this.__canvas},getCanvas:function(){return this.__canvas},setWidth:function(a){this.__canvas.width=a},getWidth:function(){return this.__canvas.width},setHeight:function(a){this.__canvas.height=a},getHeight:function(){return this.__canvas.height},getContext2d:function(){return this.__canvas.getContext("2d")}},destruct:function(){this.__canvas=null}});qx.Class.define("qx.ui.mobile.core.Root",{extend:qx.ui.mobile.core.Widget,include:[qx.ui.mobile.core.MChildrenHandling],properties:{defaultCssClass:{refine:true,init:"root"},showScrollbarY:{check:"Boolean",init:true,apply:"_applyShowScrollbarY"}},members:{_createContainerElement:function(){return document.body},_applyShowScrollbarY:function(b,a){this._setStyle("overflow-y",b?"auto":"hidden")}},defer:function(b,a){qx.ui.mobile.core.MChildrenHandling.remap(a)}});qx.Class.define("qx.bom.WebWorker",{extend:qx.core.Object,construct:function(a){this.base(arguments);this._worker=new window.Worker(a);this._handleMessageBound=qx.lang.Function.bind(this._handleMessage,this);this._handleErrorBound=qx.lang.Function.bind(this._handleError,this);qx.bom.Event.addNativeListener(this._worker,"message",this._handleMessageBound);qx.bom.Event.addNativeListener(this._worker,"error",this._handleErrorBound)},events:{message:"qx.event.type.Data",error:"qx.event.type.Data"},members:{_worker:null,_handleErrorBound:null,_handleMessageBound:null,postMessage:function(a){this._worker.postMessage(a)},_handleMessage:function(a){this.fireDataEvent("message",a.data)},_handleError:function(a){this.fireDataEvent("error",a.message)}},destruct:function(){qx.bom.Event.removeNativeListener(this._worker,"message",this._handleMessageBound);qx.bom.Event.removeNativeListener(this._worker,"error",this._handleErrorBound);if(this._worker){this._worker.terminate();this._worker=null}}});qx.Class.define("qx.fx.effect.core.Consecutive",{extend:qx.fx.Base,construct:function(a){this.base(arguments);this.__effects=arguments},members:{__effects:null},destruct:function(){this._disposeArray("_effects")}});qx.Class.define("qx.bom.client.Platform",{statics:{NAME:"",WIN:false,MAC:false,UNIX:false,UNKNOWN_PLATFORM:false,__init:function(){var a=navigator.platform;if(a==null||a===""){a=navigator.userAgent}if(a.indexOf("Windows")!=-1||a.indexOf("Win32")!=-1||a.indexOf("Win64")!=-1){this.WIN=true;this.NAME="win"}else{if(a.indexOf("Macintosh")!=-1||a.indexOf("MacPPC")!=-1||a.indexOf("MacIntel")!=-1||a.indexOf("iPod")!=-1||a.indexOf("iPhone")!=-1||a.indexOf("iPad")!=-1){this.MAC=true;this.NAME="mac"}else{if(a.indexOf("X11")!=-1||a.indexOf("Linux")!=-1||a.indexOf("BSD")!=-1){this.UNIX=true;this.NAME="unix"}else{this.UNKNOWN_PLATFORM=true;this.WIN=true;this.NAME="win"}}}}},defer:function(d){d.__init();if(qx.Bootstrap.DEBUG){var c=["NAME","WIN","MAC","UNIX","UNKNOWN_PLATFORM"];for(var a=0;a<c.length;a++){if(d.__defineGetter__){var b=d[c[a]];d.__defineGetter__(c[a],qx.Bootstrap.bind(function(e,g){var f="The constant '"+e+"' of '"+d.classname+"'is deprecated: Please check the API documentation of qx.core.Environment.";if(qx.dev&&qx.dev.StackTrace){f+="\nTrace:"+qx.dev.StackTrace.getStackTrace().join("\n")}qx.Bootstrap.warn(f);return g},d,c[a],b))}}}}});qx.Bootstrap.define("qx.bom.client.System",{statics:{NAME:"",SP1:false,SP2:false,WIN95:false,WIN98:false,WINME:false,WINNT4:false,WIN2000:false,WINXP:false,WIN2003:false,WINVISTA:false,WIN7:false,WINCE:false,LINUX:false,SUNOS:false,FREEBSD:false,NETBSD:false,OPENBSD:false,OSX:false,OS9:false,IPHONE:false,IPAD:false,SYMBIAN:false,NINTENDODS:false,PSP:false,UNKNOWN_SYSTEM:false,__ids:{"Windows NT 6.1":"win7","Windows NT 6.0":"winvista","Windows NT 5.2":"win2003","Windows NT 5.1":"winxp","Windows NT 5.0":"win2000","Windows 2000":"win2000","Windows NT 4.0":"winnt4","Win 9x 4.90":"winme","Windows CE":"wince","Windows 98":"win98",Win98:"win98","Windows 95":"win95",Win95:"win95",Linux:"linux",FreeBSD:"freebsd",NetBSD:"netbsd",OpenBSD:"openbsd",SunOS:"sunos","Symbian System":"symbian",Nitro:"nintendods",PSP:"sonypsp","Mac OS X 10_6":"osx6","Mac OS X 10.6":"osx6","Mac OS X 10_5":"osx5","Mac OS X 10.5":"osx5","Mac OS X 10_4":"osx4","Mac OS X 10.4":"osx4","Mac OS X 10_3":"osx3","Mac OS X 10.3":"osx3","Mac OS X 10_2":"osx2","Mac OS X 10.2":"osx2","Mac OS X 10_1":"osx1","Mac OS X 10.1":"osx1","Mac OS X 10_0":"osx0","Mac OS X 10.0":"osx0","Mac OS X":"osx","Mac OS 9":"os9"},__init:function(){var d=navigator.userAgent;var e=[];for(var b in this.__ids){e.push(b)}var c=new RegExp("("+e.join("|").replace(/\./g,".")+")","g");var a=c.exec(d);if(!a){this.UNKNOWN_SYSTEM=true;if(!qx.bom.client.OperatingSystem.getName()==""){if(qx.bom.client.OperatingSystem.getName()=="unix"){this.NAME="linux";this.LINUX=true}else{if(qx.bom.client.OperatingSystem.getName()=="osx"){this.NAME="osx5";this.OSX=true}else{this.NAME="winxp";this.WINXP=true}}}else{this.NAME="winxp";this.WINXP=true}return}if(qx.bom.client.Engine.getName()=="webkit"&&RegExp(" Mobile/").test(d)){if(RegExp("iPad").test(navigator.userAgent)){this.IPAD=true;this.NAME="ipad"}else{this.IPHONE=true;this.NAME="iphone"}}else{this.NAME=this.__ids[a[1]];this[this.NAME.toUpperCase()]=true;if(qx.bom.client.OperatingSystem.getName()=="win"){if(d.indexOf("Windows NT 5.01")!==-1){this.SP1=true}else{if(qx.bom.client.Engine.getName()=="mshtml"&&d.indexOf("SV1")!==-1){this.SP2=true}}}}}},defer:function(d){d.__init();if(qx.Bootstrap.DEBUG){var c=["NAME","SP1","SP2","WIN95","WIN98","WINME","WINNT4","WIN2000","WINXP","WIN2003","WINVISTA","WIN7","WINCE","LINUX","SUNOS","FREEBSD","NETBSD","OPENBSD","OSX","OS9","IPHONE","IPAD","SYMBIAN","NINTENDODS","PSP","UNKNOWN_SYSTEM"];for(var a=0;a<c.length;a++){if(d.__defineGetter__){var b=d[c[a]];d.__defineGetter__(c[a],qx.Bootstrap.bind(function(e,g){var f="The constant '"+e+"' of '"+d.classname+"'is deprecated: Please check the API documentation of qx.core.Environment.";if(qx.dev&&qx.dev.StackTrace){f+="\nTrace:"+qx.dev.StackTrace.getStackTrace().join("\n")}qx.Bootstrap.warn(f);return g},d,c[a],b))}}}}});qx.Class.define("qx.bom.History",{extend:qx.core.Object,type:"abstract",construct:function(){this.base(arguments);this._baseUrl=window.location.href.split("#")[0]+"#";this.__titles={};this._setInitialState()},events:{request:"qx.event.type.Data"},statics:{SUPPORTS_HASH_CHANGE_EVENT:(qx.core.Environment.get("engine.name")=="mshtml"&&document.documentMode>=8)||(!(qx.core.Environment.get("engine.name")=="mshtml")&&document.documentMode&&"onhashchange" in window),getInstance:function(){if(!this.$$instance){if(this.SUPPORTS_HASH_CHANGE_EVENT){this.$$instance=new qx.bom.NativeHistory()}else{if((qx.core.Environment.get("engine.name")=="mshtml")){this.$$instance=new qx.bom.IframeHistory()}else{this.$$instance=new qx.bom.NativeHistory()}}}return this.$$instance}},properties:{title:{check:"String",event:"changeTitle",nullable:true,apply:"_applyTitle"},state:{check:"String",event:"changeState",nullable:true,apply:"_applyState"}},members:{__titles:null,_applyState:function(b,a){this._writeState(b)},_setInitialState:function(){this.setState(this._readState())},_encode:function(a){if(qx.lang.Type.isString(a)){return encodeURIComponent(a)}return""},_decode:function(a){if(qx.lang.Type.isString(a)){return decodeURIComponent(a)}return""},_applyTitle:function(a){if(a!=null){document.title=a||""}},addToHistory:function(a,b){if(!qx.lang.Type.isString(a)){a=a+""}if(qx.lang.Type.isString(b)){this.setTitle(b);this.__titles[a]=b}if(this.getState()!==a){this._writeState(a)}},navigateBack:function(){qx.event.Timer.once(function(){history.back()},0)},navigateForward:function(){qx.event.Timer.once(function(){history.forward()},0)},_onHistoryLoad:function(a){this.setState(a);this.fireDataEvent("request",a);if(this.__titles[a]!=null){this.setTitle(this.__titles[a])}},_readState:function(){throw new Error("Abstract method call")},_writeState:function(){throw new Error("Abstract method call")},_setHash:function(b){var a=this._baseUrl+(b||"");var c=window.location;if(a!=c.href){c.href=a}},_getHash:function(){var a=/#(.*)$/.exec(window.location.href);return a&&a[1]?a[1]:""}},destruct:function(){this.__titles=null}});qx.Class.define("qx.bom.NativeHistory",{extend:qx.bom.History,construct:function(){this.base(arguments);this.__attachListeners()},members:{__checkOnHashChange:null,__attachListeners:function(){if(qx.bom.History.SUPPORTS_HASH_CHANGE_EVENT){this.__checkOnHashChange=qx.lang.Function.bind(this.__onHashChange,this);qx.bom.Event.addNativeListener(window,"hashchange",this.__checkOnHashChange)}else{qx.event.Idle.getInstance().addListener("interval",this.__onHashChange,this)}},__detatchListeners:function(){if(qx.bom.History.SUPPORTS_HASH_CHANGE_EVENT){qx.bom.Event.removeNativeListener(window,"hashchange",this.__checkOnHashChange)}else{qx.event.Idle.getInstance().removeListener("interval",this.__onHashChange,this)}},__onHashChange:function(){var a=this._readState();if(qx.lang.Type.isString(a)&&a!=this.getState()){this._onHistoryLoad(a)}},_readState:function(){return this._decode(this._getHash())},_writeState:qx.core.Environment.select("engine.name",{opera:function(a){qx.event.Timer.once(function(){this._setHash(this._encode(a))},this,0)},"default":function(a){this._setHash(this._encode(a))}})},destruct:function(){this.__detatchListeners()}});if((qx.core.Environment.get("engine.name")=="mshtml")){qx.Class.define("qx.bom.IframeHistory",{extend:qx.bom.History,construct:function(){this.base(arguments);this.__initTimer()},members:{__iframe:null,__iframeReady:false,__locationState:null,_setInitialState:function(){this.base(arguments);this.__locationState=this._getHash()},_setHash:function(a){this.base(arguments,a);this.__locationState=this._encode(a)},_readState:function(){if(!this.__iframeReady){return this._decode(this._getHash())}var b=this.__iframe.contentWindow.document;var a=b.getElementById("state");return a?this._decode(a.innerText):""},_writeState:function(b){var b=this._encode(b);this._setHash(b);this.__locationState=b;try{var c=this.__iframe.contentWindow.document;c.open();c.write('<html><body><div id="state">'+b+"</div></body></html>");c.close()}catch(a){}},__initTimer:function(){this.__initIframe(function(){qx.event.Idle.getInstance().addListener("interval",this.__onHashChange,this)})},__onHashChange:function(b){var a=null;var c=this._getHash();if(!this.__isCurrentLocationState(c)){a=this.__storeLocationState(c)}else{a=this._readState()}if(qx.lang.Type.isString(a)&&a!=this.getState()){this._onHistoryLoad(a)}},__storeLocationState:function(a){a=this._decode(a);this._writeState(a);return a},__isCurrentLocationState:function(a){return qx.lang.Type.isString(a)&&a==this.__locationState},__initIframe:function(a){this.__iframe=this.__createIframe();document.body.appendChild(this.__iframe);this.__waitForIFrame(function(){this._writeState(this.getState());if(a){a.call(this)}},this)},__createIframe:function(){var a=qx.bom.Iframe.create({src:qx.util.ResourceManager.getInstance().toUri("qx/static/blank.html")});a.style.visibility="hidden";a.style.position="absolute";a.style.left="-1000px";a.style.top="-1000px";return a},__waitForIFrame:function(c,b,a){if(typeof a==="undefined"){a=0}if(!this.__iframe.contentWindow||!this.__iframe.contentWindow.document){if(a>20){throw new Error("can't initialize iframe")}qx.event.Timer.once(function(){this.__waitForIFrame(c,b,++a)},this,10);return}this.__iframeReady=true;c.call(b||window)}},destruct:function(){this.__iframe=null;qx.event.Idle.getInstance().addListener("interval",this.__onHashChange,this)}})}qx.Class.define("qx.fx.effect.combination.Pulsate",{extend:qx.fx.Base,construct:function(d){this.base(arguments,d);var e=this.getDuration()/6;var b=0;this.__fadeEffects=[new qx.fx.effect.core.Fade(d),new qx.fx.effect.core.Fade(d),new qx.fx.effect.core.Fade(d),new qx.fx.effect.core.Fade(d),new qx.fx.effect.core.Fade(d),new qx.fx.effect.core.Fade(d)];for(var c=0,a=this.__fadeEffects.length;c<a;c++){this.__fadeEffects[c].set({duration:e,to:((b%2)!=0)?1:0,from:((b%2)!=0)?0:1,transition:"sinodial",modifyDisplay:false});b++}},properties:{duration:{init:2,refine:true}},members:{__oldValue:null,__fadeEffects:null,__notRunEffects:null,beforeSetup:function(){this.__oldValue=qx.bom.element.Style.get(this._getElement(),"opacity")},start:function(){if(!this.base(arguments)){return}this.__notRunEffects=[];var b=0;var c=this;for(var d=0,a=this.__fadeEffects.length;d<a;d++){this.__fadeEffects[d].id=b;this.__notRunEffects.push(this.__fadeEffects[d]);if(b<5){this.__fadeEffects[d].afterFinishInternal=function(){qx.lang.Array.remove(c.__notRunEffects,this);c.__fadeEffects[this.id+1].start()}}b++}this.__fadeEffects[0].start()},afterFinish:function(){qx.bom.element.Style.set(this._getElement(),"opacity",this.__oldValue)},_applyDuration:function(d,b){var e=d/6;for(var c=0,a=this.__fadeEffects.length;c<a;c++){this.__fadeEffects[c].set({duration:e})}},cancel:function(){for(var b=0,a=this.__notRunEffects.length;b<a;b++){this.__notRunEffects[b].cancel()}this.base(arguments)}},destruct:function(){this._disposeArray("__fadeEffects");this._disposeArray("__notRunEffects")}});qx.Class.define("qx.fx.effect.core.Fade",{extend:qx.fx.Base,properties:{modifyDisplay:{init:true,check:"Boolean"},from:{init:1,refine:true},to:{init:0,refine:true}},members:{update:function(a){this.base(arguments);if(qx.core.Environment.get("engine.name")=="mshtml"&&a==1){qx.bom.element.Opacity.reset(this._getElement())}else{qx.bom.element.Opacity.set(this._getElement(),a)}},beforeSetup:function(){this.base(arguments);var a=this._getElement();if((this.getModifyDisplay())&&(this.getTo()>0)){qx.bom.element.Style.set(a,"display","block")}qx.bom.element.Opacity.set(a,this.getFrom())},afterFinishInternal:function(){if((this.getModifyDisplay())&&(this.getTo()==0)){qx.bom.element.Style.set(this._getElement(),"display","none")}}}});qx.Class.define("qx.ui.progressive.renderer.table.cell.Abstract",{type:"abstract",extend:qx.core.Object,members:{_getCellStyle:function(a){return""},_getCellExtras:function(a){return""},_getContentHtml:function(a){return a.cellData||""},render:function(a){var b=[];var c=this._getCellStyle(a);b.push("<div ","class='",a.stylesheet,"' ");if(c){b.push("style='",c,"'")}b.push(this._getCellExtras(a),">",this._getContentHtml(a),"</div>");return b.join("")}}});qx.Class.define("qx.ui.progressive.renderer.table.cell.Icon",{type:"abstract",extend:qx.ui.progressive.renderer.table.cell.Abstract,construct:function(){this.base(arguments);var c=qx.util.AliasManager.getInstance();var b=qx.util.ResourceManager.getInstance();var a=c.resolve("qx/static/blank.gif");this.__imageBlank=b.toUri(a)},members:{__imageBlank:null,getBlankImage:function(){return this.__imageBlank},_identifyImage:function(a){throw new Error("_identifyImage() is abstract")},_getCellStyle:function(b){var a=this.base(arguments,b)+"text-align:center;vertical-align:middle;";return a},_getContentHtml:function(a){var b=[];var c=this.__getImageData(a);b.push("<img ");if((qx.core.Environment.get("engine.name")=="mshtml")&&/\.png$/i.test(c.url)){b.push('src="',this.__imageBlank,'" style="filter:',"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='",c.url,"',sizingMethod='scale')",'" ')}else{b.push('src="',c.url,'" ')}if(c.imageWidth){b.push(" width='",c.imageWidth,"px'")}if(c.imageHeight){b.push(" height='",c.imageHeight,"px'")}b.push(" style='padding-top:2px;'");if(c.tooltip){b.push(" title='",c.tooltip,"'")}if(c.extras){b.push(c.extras)}b.push(">");return b.join("")},__getImageData:function(a){var b=this._identifyImage(a);if(b==null||typeof b=="string"){b={url:b,tooltip:null}}if(b.url==null){b.url=this.__imageBlank}return b}}});qx.Class.define("qx.ui.progressive.renderer.table.cell.Image",{extend:qx.ui.progressive.renderer.table.cell.Icon,construct:function(b,a){this.base(arguments);if(b===undefined){this.__imageWidth=b}else{this.__imageWidth=16}if(a===undefined){this.__imageHeight=a}else{this.__imageHeight=16}},members:{__imageWidth:null,__imageHeight:null,_identifyImage:function(c){var f={imageWidth:this.__imageWidth,imageHeight:this.__imageHeight};var a;if(typeof(c.cellData)=="string"){f.url=c.cellData}else{f.url=c.cellData.url;f.tooltip=c.cellData.tooltip;a=c.cellData.height}if(f.url==""){f.url=this._imageBlank}else{var e=qx.util.AliasManager.getInstance();var d=qx.util.ResourceManager.getInstance();var b=e.resolve(f.url);f.url=d.toUri(b)}if(a){c.height=a}return f}}});qx.Mixin.define("qx.core.MBindTo",{members:{bindTo:function(b,a){return qx.lang.Function.create(b,{self:this,args:(arguments.length>1?qx.lang.Array.fromArguments(arguments,1):null)})}}});qx.Mixin.define("qx.data.controller.MSelection",{construct:function(){if(!qx.Class.hasProperty(this.constructor,"target")){throw new Error("Target property is needed.")}if(this.getSelection()==null){this.setSelection(new qx.data.Array())}},properties:{selection:{check:"qx.data.Array",event:"changeSelection",apply:"_applySelection",init:null}},members:{_modifingSelection:0,__selectionListenerId:null,__selectionArrayListenerId:null,_applySelection:function(b,a){if(this.__selectionArrayListenerId!=undefined&&a!=undefined){a.removeListenerById(this.__selectionArrayListenerId)}this.__selectionArrayListenerId=b.addListener("change",this.__changeSelectionArray,this);this._updateSelection()},__changeSelectionArray:function(){this._updateSelection()},_changeTargetSelection:function(){if(this.getTarget()==null){return}if(!this.__targetSupportsMultiSelection()&&!this.__targetSupportsSingleSelection()){return}if(this._inSelectionModification()){return}var d=this.getTarget().getSelection();var b=this.getSelection();if(b==null){b=new qx.data.Array();this.setSelection(b)}if(d.length>0){b.toArray().splice(0,b.getLength())}else{b.splice(0,this.getSelection().getLength()).dispose()}for(var a=0;a<d.length;a++){var c=d[a].getModel();if(a+1==d.length){b.push(c)}else{b.toArray().push(c)}}this.fireDataEvent("changeSelection",this.getSelection())},_addChangeTargetListener:function(b,a){if(this.__selectionListenerId!=undefined&&a!=undefined){a.removeListenerById(this.__selectionListenerId)}if(b!=null){if(this.__targetSupportsMultiSelection()||this.__targetSupportsSingleSelection()){this.__selectionListenerId=b.addListener("changeSelection",this._changeTargetSelection,this)}}},_updateSelection:function(){if(!this.getTarget()){return}this._startSelectionModification();if(this.__targetSupportsMultiSelection()){var f=[];for(var d=0;d<this.getSelection().length;d++){var c=this.getSelection().getItem(d);var b=this.__getSelectableForModel(c);if(b!=null){f.push(b)}}this.getTarget().setSelection(f);f=this.getTarget().getSelection();var a=[];for(var d=0;d<f.length;d++){a[d]=f[d].getModel()}for(var d=this.getSelection().length-1;d>=0;d--){if(!qx.lang.Array.contains(a,this.getSelection().getItem(d))){this.getSelection().splice(d,1).dispose()}}}else{if(this.__targetSupportsSingleSelection()){var e=this.getSelection().getItem(this.getSelection().length-1);if(e){this.__selectItem(e);this.getSelection().splice(0,this.getSelection().getLength()-1).dispose()}else{this.getTarget().resetSelection()}}}this._endSelectionModification()},__targetSupportsMultiSelection:function(){var a=this.getTarget().constructor;return qx.Class.implementsInterface(a,qx.ui.core.IMultiSelection)},__targetSupportsSingleSelection:function(){var a=this.getTarget().constructor;return qx.Class.implementsInterface(a,qx.ui.core.ISingleSelection)},__selectItem:function(b){var a=this.__getSelectableForModel(b);if(a==null){return}if(this.__targetSupportsMultiSelection()){this.getTarget().addToSelection(a)}else{if(this.__targetSupportsSingleSelection()){this.getTarget().setSelection([a])}}},__getSelectableForModel:function(a){var c=this.getTarget().getSelectables(true);for(var b=0;b<c.length;b++){if(c[b].getModel()==a){return c[b]}}return null},_startSelectionModification:function(){this._modifingSelection++},_endSelectionModification:function(){this._modifingSelection>0?this._modifingSelection--:null},_inSelectionModification:function(){return this._modifingSelection>0}}});qx.Class.define("qx.data.controller.List",{extend:qx.core.Object,include:qx.data.controller.MSelection,construct:function(a,c,b){this.base(arguments);this.__lookupTable=[];this.__boundProperties=[];this.__boundPropertiesReverse=[];this.__onUpdate={};if(b!=null){this.setLabelPath(b)}if(a!=null){this.setModel(a)}if(c!=null){this.setTarget(c)}},properties:{model:{check:"qx.data.IListData",apply:"_applyModel",event:"changeModel",nullable:true,dereference:true},target:{apply:"_applyTarget",event:"changeTarget",nullable:true,init:null,dereference:true},labelPath:{check:"String",apply:"_applyLabelPath",nullable:true},iconPath:{check:"String",apply:"_applyIconPath",nullable:true},labelOptions:{apply:"_applyLabelOptions",nullable:true},iconOptions:{apply:"_applyIconOptions",nullable:true},delegate:{apply:"_applyDelegate",event:"changeDelegate",init:null,nullable:true}},members:{__changeModelLengthListenerId:null,__changeModelListenerId:null,__lookupTable:null,__onUpdate:null,__boundProperties:null,__boundPropertiesReverse:null,__syncTagetSelection:null,__syncModelSelection:null,update:function(){this.__changeModelLength();this.__renewBindings();this._updateSelection()},_applyDelegate:function(b,a){this._setConfigureItem(b,a);this._setFilter(b,a);this._setCreateItem(b,a);this._setBindItem(b,a)},_applyIconOptions:function(b,a){this.__renewBindings()},_applyLabelOptions:function(b,a){this.__renewBindings()},_applyIconPath:function(b,a){this.__renewBindings()},_applyLabelPath:function(b,a){this.__renewBindings()},_applyModel:function(d,a){if(a!=undefined){if(this.__changeModelLengthListenerId!=undefined){a.removeListenerById(this.__changeModelLengthListenerId)}if(this.__changeModelListenerId!=undefined){a.removeListenerById(this.__changeModelListenerId)}}if(this.getSelection()!=undefined&&this.getSelection().length>0){this.getSelection().splice(0,this.getSelection().length)}if(d!=null){this.__changeModelLengthListenerId=d.addListener("changeLength",this.__changeModelLength,this);this.__changeModelListenerId=d.addListener("change",this.__changeModel,this);this.__buildUpLookupTable();this.__changeModelLength();if(a==null){this._changeTargetSelection()}else{this.__syncTagetSelection=true;qx.ui.core.queue.Widget.add(this)}}else{var e=this.getTarget();if(e!=null){var c=e.getChildren().length;for(var b=0;b<c;b++){this.__removeItem()}}}},_applyTarget:function(c,a){this._addChangeTargetListener(c,a);if(a!=undefined){a.removeAll();this.removeAllBindings()}if(c!=null){if(this.getModel()!=null){for(var b=0;b<this.__lookupTable.length;b++){this.__addItem(this.__lookup(b))}}}},__changeModel:function(){this.__syncModelSelection=true;qx.ui.core.queue.Widget.add(this);if(this.__lookupTable.length!=this.getModel().getLength()){this.update()}},syncWidget:function(){if(this.__syncTagetSelection){this._changeTargetSelection()}if(this.__syncModelSelection){this._updateSelection()}this.__syncModelSelection=this.__syncTagetSelection=null},__changeModelLength:function(){if(this.getTarget()==null){return}this.__buildUpLookupTable();var c=this.__lookupTable.length;var b=this.getTarget().getChildren().length;if(c>b){for(var a=b;a<c;a++){this.__addItem(this.__lookup(a))}}else{if(c<b){for(var a=b;a>c;a--){this.__removeItem()}}}},__moveChangeListenerAtTheEnd:function(){var a=this.getModel();if(a!=null){a.removeListenerById(this.__changeModelListenerId);this.__changeModelListenerId=a.addListener("change",this.__changeModel,this)}},_createItem:function(){var a=this.getDelegate();if(a!=null&&a.createItem!=null){var b=a.createItem()}else{var b=new qx.ui.form.ListItem()}if(a!=null&&a.configureItem!=null){a.configureItem(b)}return b},__addItem:function(a){var b=this._createItem();this._bindListItem(b,a);this.getTarget().add(b)},__removeItem:function(){this._startSelectionModification();var b=this.getTarget().getChildren();var a=b.length-1;var c=b[a];this._removeBindingsFrom(c);this.getTarget().removeAt(a);c.destroy();this._endSelectionModification()},getVisibleModels:function(){var a=[];var d=this.getTarget();if(d!=null){var b=d.getChildren();for(var c=0;c<b.length;c++){a.push(b[c].getModel())}}return new qx.data.Array(a)},_bindListItem:function(c,a){var b=this.getDelegate();if(b!=null&&b.bindItem!=null){b.bindItem(this,c,a)}else{this.bindDefaultProperties(c,a)}},bindDefaultProperties:function(b,a){this.bindProperty("","model",null,b,a);this.bindProperty(this.getLabelPath(),"label",this.getLabelOptions(),b,a);if(this.getIconPath()!=null){this.bindProperty(this.getIconPath(),"icon",this.getIconOptions(),b,a)}},bindProperty:function(e,a,c,d,b){if(c!=null){var c=qx.lang.Object.clone(c);this.__onUpdate[a]=c.onUpdate;delete c.onUpdate}else{c={};this.__onUpdate[a]=null}c.onUpdate=qx.lang.Function.bind(this._onBindingSet,this,b);var f="model["+b+"]";if(e!=null&&e!=""){f+="."+e}var g=this.bind(f,d,a,c);d.setUserData(a+"BindingId",g);if(!qx.lang.Array.contains(this.__boundProperties,a)){this.__boundProperties.push(a)}},bindPropertyReverse:function(g,e,c,b,a){var d="model["+a+"]";if(g!=null&&g!=""){d+="."+g}var f=b.bind(e,this,d,c);b.setUserData(g+"ReverseBindingId",f);if(!qx.lang.Array.contains(this.__boundPropertiesReverse,g)){this.__boundPropertiesReverse.push(g)}},_onBindingSet:function(b,d,a){if(this.getModel()==null||this._inSelectionModification()){return}for(var c=0;c<this.__boundProperties.length;c++){if(this.__onUpdate[this.__boundProperties[c]]!=null){this.__onUpdate[this.__boundProperties[c]]()}}},_removeBindingsFrom:function(b){for(var a=0;a<this.__boundProperties.length;a++){var c=b.getUserData(this.__boundProperties[a]+"BindingId");if(c!=null){this.removeBinding(c)}}for(var a=0;a<this.__boundPropertiesReverse.length;a++){var c=b.getUserData(this.__boundPropertiesReverse[a]+"ReverseBindingId");if(c!=null){b.removeBinding(c)}}},__renewBindings:function(){if(this.getTarget()==null||this.getModel()==null){return}var a=this.getTarget().getChildren();for(var b=0;b<a.length;b++){this._removeBindingsFrom(a[b]);this._bindListItem(a[b],this.__lookup(b))}this.__moveChangeListenerAtTheEnd()},_setConfigureItem:function(d,a){if(d!=null&&d.configureItem!=null&&this.getTarget()!=null){var c=this.getTarget().getChildren();for(var b=0;b<c.length;b++){d.configureItem(c[b])}}},_setBindItem:function(b,a){if(b!=null&&b.bindItem!=null){if(a!=null&&a.bindItem!=null&&b.bindItem==a.bindItem){return}this.__renewBindings()}},_setCreateItem:function(e,b){if(this.getTarget()==null||this.getModel()==null||e==null||e.createItem==null){return}this._startSelectionModification();var d=this.getTarget().getChildren();for(var c=0,a=d.length;c<a;c++){this._removeBindingsFrom(d[c])}this.getTarget().removeAll();this.update();this._endSelectionModification();this._updateSelection()},_setFilter:function(h,c){if((h==null||h.filter==null)&&(c!=null&&c.filter!=null)){this.__removeFilter()}if(this.getTarget()==null||this.getModel()==null||h==null||h.filter==null){return}this._startSelectionModification();var a=this.getTarget().getChildren();for(var g=0,e=a.length;g<e;g++){this._removeBindingsFrom(a[g])}var b=this.__lookupTable;this.__buildUpLookupTable();if(b.length>this.__lookupTable.length){for(var f=b.length;f>this.__lookupTable.length;f--){this.getTarget().removeAt(f-1)}}else{if(b.length<this.__lookupTable.length){for(var f=b.length;f<this.__lookupTable.length;f++){var k=this._createItem();this.getTarget().add(k)}}}var d=this.getTarget().getChildren();for(var g=0;g<d.length;g++){this._bindListItem(d[g],this.__lookup(g))}this.__moveChangeListenerAtTheEnd();this._endSelectionModification();this._updateSelection()},__removeFilter:function(){this.__buildUpLookupTable();this.__changeModelLength();this.__renewBindings();this.__syncModelSelection=true;qx.ui.core.queue.Widget.add(this)},__buildUpLookupTable:function(){var a=this.getModel();if(a==null){return}var d=this.getDelegate();if(d!=null){var c=d.filter}this.__lookupTable=[];for(var b=0;b<a.getLength();b++){if(c==null||c(a.getItem(b))){this.__lookupTable.push(b)}}},__lookup:function(a){return this.__lookupTable[a]}},destruct:function(){this.__lookupTable=this.__onUpdate=this.__boundProperties=null;this.__boundPropertiesReverse=null;qx.ui.core.queue.Widget.remove(this)}});qx.Class.define("qx.ui.mobile.navigation.Manager",{extend:qx.core.Object,type:"singleton",construct:function(){this.base(arguments);this.__routes={},this.__routesIdCount=0;this.__operationToIdMapping={};this.__history=[];this.__currentGetPath=null;this.__navigationHandler=new qx.ui.mobile.navigation.Handler(qx.ui.mobile.navigation.Manager.DEFAULT_PATH);this.__navigationHandler.addListener("changeHash",this.__onChangeHash,this);this.__navigationHandler.setHash(this.__navigationHandler.getLocationHash())},statics:{DEFAULT_PATH:"/"},members:{__navigationHandler:null,__routes:null,__routesIdCount:null,__operationToIdMapping:null,__currentGetPath:null,__history:null,getCurrentGetPath:function(){return this.__currentGetPath},onGet:function(a,c,b){return this._addRoute("get",a,c,b)},onPost:function(a,c,b){return this._addRoute("post",a,c,b)},onPut:function(a,c,b){return this._addRoute("put",a,c,b)},onDelete:function(a,c,b){return this._addRoute("delete",a,c,b)},onAny:function(a,c,b){return this._addRoute("any",a,c,b)},_addRoute:function(e,f,h,i){var g=this.__routes[e]=this.__routes[e]||{};var a=this.__routesIdCount++;var d=[];var c=null;if(qx.lang.Type.isString(f)){var b=/:([\w\d]+)/g;while((c=b.exec(f))!==null){d.push(c[1])}f=new RegExp("^"+f.replace(b,"([^/]+)")+"$")}g[a]={regExp:f,params:d,handler:h,scope:i};this.__operationToIdMapping[a]=e;this._executeRoute(e,this.__currentGetPath,g[a]);return a},remove:function(c){var b=this.__operationToIdMapping[c];var a=this.__routes[b];delete a[c];delete this.__operationToIdMapping[c]},__onChangeHash:function(a){var b=a.getData();if(b!=this.__currentGetPath){this.executeGet(b,null)}},executeGet:function(b,c){this.__currentGetPath=b;var a=this.__getFromHistory(b);if(a){this.debug("Path from history: "+b);if(!c){c=a.customData||{};c.fromHistory=true}}else{this.__addToHistory(b,c)}this.__navigationHandler.setHash(b);this._execute("get",b,null,c)},executePost:function(a,b,c){this._execute("post",a,b,c)},executePut:function(a,b,c){this._execute("put",a,b,c)},executeDelete:function(a,b,c){this._execute("delete",a,b,c)},__addToHistory:function(a,b){this.debug("Add path "+a+" to history");this.__history.unshift({path:a,customData:b})},__getFromHistory:function(e){var d=this.__history;var c=d.length;var b=null;for(var a=0;a<c;a++){if(d[a].path==e){b=d[a];d.splice(0,a);break}}return b},_execute:function(c,e,f,g){this.debug("Execute "+c+" for path "+e);var d=false;var b=this.__routes.any;d=this._executeRoutes(c,e,b,f,g);var a=false;var b=this.__routes[c];a=this._executeRoutes(c,e,b,f,g);if(!a&&!d){this.info("No route found for "+e)}},_executeRoutes:function(d,e,b,f,h){if(!b||qx.lang.Object.isEmpty(b)){return true}var a=false;for(var g in b){var c=b[g];a=this._executeRoute(d,e,c,f,h)}return a},_executeRoute:function(c,j,g,b,h){var e=g.regExp.exec(j);if(e){var b=b||{};var a=null;var f=null;e.shift();for(var d=0;d<e.length;d++){f=this._decode(e[d]);a=g.params[d];if(a){b[a]=f}else{b[d]=f}}this.debug("Execute "+c+" handler for path "+j+" and route "+g.regExp.toString());g.handler.call(g.scope,{path:j,params:b,customData:h})}return e},_encode:function(a){return encodeURIComponent(a)},_decode:function(a){return decodeURIComponent(a)},_getRoutes:function(){return this.__routes}},destruct:function(){this.__navigationHandler.removeListener("changeHash",this.__onChangeHash,this);this.__history=this.__routes=this.__operationToIdMapping=null;this._disposeObjects("__navigationHandler")}});qx.Class.define("qx.ui.mobile.navigation.Handler",{extend:qx.core.Object,construct:function(a){this.base(arguments);this.__hashChangeHandler=qx.lang.Function.bind(this.__onHashChange,this);this.__registerListeners();if(a){this.setDefaultHash(a)}},properties:{defaultHash:{check:"String",init:""},hash:{check:"String",event:"changeHash",init:null,apply:"_applyHash"}},members:{__hashChangeHandler:null,__previousHash:null,__registerListeners:function(){qx.bom.Event.addNativeListener(window,"hashchange",this.__hashChangeHandler)},__unregisterListeners:function(){qx.bom.Event.removeNativeListener(window,"hashchange",this.__hashChangeHandler)},__onHashChange:function(a){this.setHash(this.getLocationHash())},getLocationHash:function(){var a=this.getDefaultHash();if(window.location.hash){a=location.hash.substring(1)}return a},_applyHash:function(b,a){if(qx.core.Environment.get("qx.debug")){this.debug("Hash changed "+b)}if((a!=null)||(a==null&&b!=this.getDefaultHash())){window.location.hash=b}},removeFromHistory:function(){var a=window.location.href;a=a.substring(0,a.indexOf("#"));window.location.replace(a+"#"+this.getHash())}},destruct:function(){this.__unregisterListeners()}});qx.Class.define("qx.ui.virtual.form.List",{extend:qx.ui.virtual.core.Scroller,construct:function(){this.base(arguments,0,1,20,100);qx.ui.core.queue.Widget.add(this);this.getPane().addListener("resize",this._onResize,this);this._initSelectionManager();this.initRowHeight();this.initDelegate()},properties:{appearance:{refine:true,init:"virtual-list"},rowCount:{check:"Integer",event:"changeRowCount",init:0,apply:"_applyRowCount"},rowHeight:{check:"Integer",event:"changeRowHeight",init:20,apply:"_applyRowHeight",themeable:true},showGridLines:{check:"Boolean",event:"changeShowGridLines",init:false,apply:"_applyShowGridLines",themeable:true},useWidgetCells:{check:"Boolean",init:false,apply:"_applyUseWidgetCells",themeable:true},cellRenderer:{event:"changeCellRenderer",apply:"_applyCellRenderer",themeable:true},delegate:{check:"Object",event:"changeDelegate",init:null,nullable:true,apply:"_applyDelegate"}},members:{__defaultCellRenderer:null,__manager:null,__cellLayer:null,__useWidgetCells:null,_initWidgetLayer:function(){var a=this;var b={getCellWidget:function(h,e){var g=a._getCellData(h);if(!g){return null}var d={};if(a.__manager.isItemSelected(h)){d.selected=true}var c=a._getCellRenderer(h);var f=c.getCellWidget(g,d);f.setUserData("cell.row",h);f.setUserData("cell.renderer",c);return f},poolCellWidget:function(c){var d=c.getUserData("cell.renderer");d.pool(c)}};this._showChildControl("row-layer");this.__cellLayer=new qx.ui.virtual.layer.WidgetCell(b);this.getPane().addLayer(this.__cellLayer);if(!this.__defaultCellRenderer){this.setCellRenderer(qx.ui.virtual.form.ListItemCell.getInstance())}},_initHtmlLayer:function(){var b=this;var a={getCellProperties:function(e,d){var c={};if(b.__manager.isItemSelected(e)){c.selected=true}return b._getCellRenderer(e).getCellProperties(b._getCellData(e),c)}};this._showChildControl("row-layer");this.__cellLayer=new qx.ui.virtual.layer.HtmlCell(a);this.getPane().addLayer(this.__cellLayer);if(!this.__defaultCellRenderer){this.setCellRenderer(new qx.ui.virtual.cell.Cell())}},_initSelectionManager:function(){var a=this;var b={isItemSelectable:function(c){return a._delegate.isRowSelectable?a._delegate.isRowSelectable(c):true},styleSelectable:function(d,c,e){if(a.__useWidgetCells){a._styleWidgetSelectable(d,c,e)}else{a._styleHtmlSelectable(d,c,e)}}};this.__manager=new qx.ui.virtual.selection.Row(this.getPane(),b);this.__manager.attachMouseEvents(this.getPane());this.__manager.attachKeyEvents(this)},getSelectionManager:function(){return this.__manager},_createChildControlImpl:function(c,b){var a;switch(c){case"row-layer":a=new qx.ui.virtual.layer.Row(null,null);this.getPane().addLayer(a);break;case"grid-lines":a=new qx.ui.virtual.layer.GridLines("horizontal");this.getPane().addLayer(a);break}return a||this.base(arguments,c)},update:function(){if(this.__cellLayer){this.__cellLayer.updateLayerData()}},_applyRowCount:function(b,a){this.getPane().getRowConfig().setItemCount(b)},_applyRowHeight:function(b,a){this.getPane().getRowConfig().setDefaultItemSize(b)},_applyShowGridLines:function(b,a){if(b){this._showChildControl("grid-lines")}else{this._excludeChildControl("grid-lines")}},_applyDelegate:function(b,a){this._delegate=b||{}},_applyUseWidgetCells:function(b,a){if(this.__useWidgetCells!==null){throw new Error("The property 'useWidgetCells' cannot be set after the list has been rendered.")}},_applyCellRenderer:function(b,a){this.__defaultCellRenderer=b;if(this.__cellLayer){this.__cellLayer.fullUpdate()}},_getCellData:function(a){return this._delegate.getCellData?this._delegate.getCellData(a):null},_getCellRenderer:function(a){return this._delegate.getCellRenderer?this._delegate.getCellRenderer(a):this.__defaultCellRenderer},_styleHtmlSelectable:function(c,b,d){if(b!=="selected"){return}var a=this.getChildControl("row-layer");if(d){a.setBackground(c,"selected")}else{a.setBackground(c,null)}this.__cellLayer.updateLayerData()},_styleWidgetSelectable:function(f,e,h){if(e!=="selected"){return}var d=this.__cellLayer.getChildren();for(var c=0;c<d.length;c++){var g=d[c];var b=g.getUserData("cell.row");if(f!==b){continue}if(this.getPane().isUpdatePending()){continue}var a=this._getCellRenderer(f);if(h){a.updateStates(g,{selected:1})}else{a.updateStates(g,{})}}},syncWidget:function(){if(this.__useWidgetCells!==null){return}this.__useWidgetCells=this.getUseWidgetCells();if(this.__useWidgetCells){this._initWidgetLayer()}else{this._initHtmlLayer()}},_onResize:function(a){this.getPane().getColumnConfig().setItemSize(0,a.getData().width)}},destruct:function(){this._delegate=this.__defaultCellRenderer=null;this._disposeObjects("__manager","__cellLayer")}});qx.Class.define("qx.ui.virtual.form.ListItemCell",{extend:qx.ui.virtual.cell.AbstractWidget,type:"singleton",members:{_createWidget:function(){return new qx.ui.form.ListItem()},updateData:function(b,a){b.setLabel(a)}}});qx.Class.define("qx.ui.virtual.layer.GridLines",{extend:qx.ui.virtual.layer.Abstract,construct:function(a,c,b){this.base(arguments);this.setZIndex(1);if(c){this.setDefaultLineColor(c)}if(b!==undefined){this.setDefaultLineSize(b)}this.__lineColors=[];this.__lineSizes=[];this._isHorizontal=(a||"horizontal")=="horizontal"},properties:{defaultLineColor:{init:"gray",check:"Color",themeable:true},defaultLineSize:{init:1,check:"PositiveInteger",themeable:true}},members:{__lineColors:null,__lineSizes:null,isHorizontal:function(){return this._isHorizontal},setLineColor:function(b,a){if(qx.core.Environment.get("qx.debug")){qx.core.Assert.assertPositiveNumber(b);qx.core.Assert.assertString(a)}this.__lineColors[b]=a;if(this.__isLineRendered(b)){this.updateLayerData()}},setLineSize:function(a,b){if(qx.core.Environment.get("qx.debug")){qx.core.Assert.assertPositiveInteger(a);qx.core.Assert.assertPositiveInteger(b)}this.__lineSizes[a]=b;if(this.__isLineRendered(a)){this.updateLayerData()}},__isLineRendered:function(b){if(this._isHorizontal){var d=this.getFirstColumn();var a=d+this.getColumnSizes().length-1;return b>=d&&b<=a}else{var e=this.getFirstRow();var c=e+this.getRowSizes().length-1;return b>=e&&b<=c}},getLineSize:function(a){return this.__lineSizes[a]||this.getDefaultLineSize()},getLineColor:function(a){return this.__lineColors[a]||this.getDefaultLineColor()},__renderHorizontalLines:function(b,f,d){var e=0;var c,a;for(var g=0;g<d.length-1;g++){c=this.getLineColor(f+g);a=this.getLineSize(f+g);e+=d[g];b.push("<div style='","position: absolute;","height: "+a+"px;","width: 100%;","top:",e-((a>1)?Math.floor(a/2):1),"px;","background-color:",c,"'>","</div>")}},__renderVerticalLines:function(b,g,f){var e=0;var c,d;for(var a=0;a<f.length-1;a++){c=this.getLineColor(g+a);d=this.getLineSize(g+a);e+=f[a];b.push("<div style='","position: absolute;","width: "+d+"px;","height: 100%;","top: 0px;","left:",e-((d>1)?Math.floor(d/2):1),"px;","background-color:",c,"'>","</div>")}},_fullUpdate:function(e,d,a,c){var b=[];if(this._isHorizontal){this.__renderHorizontalLines(b,e,a)}else{this.__renderVerticalLines(b,d,c)}this.getContentElement().setAttribute("html",b.join(""))},_updateLayerWindow:function(f,e,b,d){var a=f!==this.getFirstRow()||b.length!==this.getRowSizes().length;var c=e!==this.getFirstColumn()||d.length!==this.getColumnSizes().length;if((this._isHorizontal&&a)||(!this._isHorizontal&&c)){this._fullUpdate(f,e,b,d)}}},destruct:function(){this.__lineColors=this.__lineSizes=null}});qx.Class.define("qx.fx.effect.combination.Shrink",{extend:qx.fx.Base,construct:function(a){this.base(arguments,a);this.__moveEffect=new qx.fx.effect.core.Move(a);this.__scaleEffect=new qx.fx.effect.core.Scale(a);this.__mainEffect=new qx.fx.effect.core.Parallel(this.__moveEffect,this.__scaleEffect)},properties:{direction:{init:"center",check:["top-left","top-right","bottom-left","bottom-right","center"]},moveTransition:{init:"sinodial",check:["linear","easeInQuad","easeOutQuad","sinodial","reverse","flicker","wobble","pulse","spring","none","full"]},scaleTransition:{init:"sinodial",check:["linear","easeInQuad","easeOutQuad","sinodial","reverse","flicker","wobble","pulse","spring","none","full"]},modifyDisplay:{init:true,check:"Boolean"}},members:{__oldStyle:null,__moveEffect:null,__scaleEffect:null,__mainEffect:null,setup:function(){this.base(arguments);qx.bom.element.Style.set(this._getElement(),"overflow","hidden")},afterFinishInternal:function(){this.base(arguments);var a=this._getElement();qx.bom.element.Style.set(a,"overflow","visible");var c;for(var b in this.__oldStyle){c=this.__oldStyle[b];if(b!="overflow"){c+="px"}qx.bom.element.Style.set(a,b,c)}if(this.getModifyDisplay()){qx.bom.element.Style.set(a,"display","none")}},start:function(){if(!this.base(arguments)){return}var a=this._getElement();var c,b;this.__oldStyle={top:qx.bom.element.Location.getTop(a,"scroll"),left:qx.bom.element.Location.getLeft(a,"scroll"),width:qx.bom.element.Dimension.getContentWidth(a),height:qx.bom.element.Dimension.getContentHeight(a),opacity:qx.bom.element.Style.get(a,"opacity")};switch(this.getDirection()){case"top-left":c=b=0;break;case"top-right":c=this.__oldStyle.width;b=0;break;case"bottom-left":c=0;b=this.__oldStyle.height;break;case"bottom-right":c=this.__oldStyle.width;b=this.__oldStyle.height;break;case"center":c=this.__oldStyle.width/2;b=this.__oldStyle.height/2;break}this.__moveEffect.set({x:c,y:b,sync:true,transition:this.getMoveTransition()});this.__scaleEffect.set({scaleTo:0,sync:true,transition:this.getScaleTransition(),restoreAfterFinish:true});this.__mainEffect.start()}},destruct:function(){this._disposeObjects("__moveEffect","__scaleEffect","__mainEffect")}});qx.Class.define("qx.fx.effect.combination.Shake",{extend:qx.fx.Base,construct:function(a){this.base(arguments,a);this.__effects=[new qx.fx.effect.core.Move(a),new qx.fx.effect.core.Move(a),new qx.fx.effect.core.Move(a),new qx.fx.effect.core.Move(a),new qx.fx.effect.core.Move(a),new qx.fx.effect.core.Move(a)]},properties:{direction:{init:"horizontal",check:["horizontal","vertical"]},duration:{init:0.5,refine:true},distance:{init:20,check:"Number"}},members:{__effects:null,start:function(){if(!this.base(arguments)){return}var e=parseFloat(this.getDistance());var c=parseFloat(this.getDuration())/10;if(this.getDirection()=="horizontal"){this.__effects[0].set({x:e,y:0,duration:c});this.__effects[1].set({x:-e*2,y:0,duration:c*2});this.__effects[2].set({x:e*2,y:0,duration:c*2});this.__effects[3].set({x:-e*2,y:0,duration:c*2});this.__effects[4].set({x:e*2,y:0,duration:c*2});this.__effects[5].set({x:-e,y:0,duration:c*2})}else{if(this.getDirection()=="vertical"){this.__effects[0].set({y:e,x:0,duration:c});this.__effects[1].set({y:-e*2,x:0,duration:c*2});this.__effects[2].set({y:e*2,x:0,duration:c*2});this.__effects[3].set({y:-e*2,x:0,duration:c*2});this.__effects[4].set({y:e*2,x:0,duration:c*2});this.__effects[5].set({y:-e,x:0,duration:c*2})}}var d=this.__effects;for(var b=0,a=this.__effects.length;b<a;b++){this.__effects[b].id=b;if(b<5){this.__effects[b].afterFinishInternal=function(){d[this.id+1].start()}}}this.__effects[0].start()}},destruct:function(){this._disposeArray("__effects")}});qx.Mixin.define("qx.ui.treevirtual.MNode",{members:{nodeGet:function(a){if(typeof(a)=="object"){return a}else{if(typeof(a)=="number"){return this.getTableModel().getData()[a]}else{throw new Error("Expected node object or node id")}}},nodeToggleOpened:function(b){var a;var c;if(typeof(b)=="object"){a=b;c=a.nodeId}else{if(typeof(b)=="number"){c=b;a=this.getTableModel().getData()[c]}else{throw new Error("Expected node object or node id")}}this.getTableModel().setState(c,{bOpened:!a.bOpened})},nodeSetState:function(b,a){var c;if(typeof(b)=="object"){c=b.nodeId}else{if(typeof(b)=="number"){c=b}else{throw new Error("Expected node object or node id")}}this.getTableModel().setState(c,a)},nodeSetLabel:function(b,a){this.nodeSetState(b,{label:a})},nodeGetLabel:function(b){var a=this.nodeGet(b);return a.label},nodeSetSelected:function(c,a){this.nodeSetState(c,{bSelected:a})},nodeGetSelected:function(b){var a=this.nodeGet(b);return a.bSelected},nodeSetOpened:function(d,a){var c;if(typeof(d)=="object"){c=d}else{if(typeof(d)=="number"){c=this.getTableModel().getData()[d]}else{throw new Error("Expected node object or node id")}}if(a!=c.bOpened){this.nodeToggleOpened(c)}},nodeGetOpened:function(b){var a=this.nodeGet(b);return a.bOpened},nodeSetHideOpenClose:function(c,a){this.nodeSetState(c,{bHideOpenClose:a})},nodeGetHideOpenClose:function(b){var a=this.nodeGet(b);return a.bHideOpenClose},nodeSetIcon:function(a,b){this.nodeSetState(a,{icon:b})},nodeGetIcon:function(b){var a=this.nodeGet(b);return a.icon},nodeSetSelectedIcon:function(a,b){this.nodeSetState(a,{iconSelected:b})},nodeGetSelectedIcon:function(b){var a=this.nodeGet(b);return a.iconSelected},nodeSetCellStyle:function(b,a){this.nodeSetState(b,{cellStyle:a})},nodeGetCellStyle:function(b){var a=this.nodeGet(b);return a.cellStyle},nodeSetLabelStyle:function(b,a){this.nodeSetState(b,{labelStyle:a})},nodeGetLabelStyle:function(b){var a=this.nodeGet(b);return a.cellStyle}}});qx.Mixin.define("qx.ui.treevirtual.MFamily",{members:{familyGetFirstChild:function(b){var a;if(typeof(b)=="object"){a=b}else{if(typeof(b)=="number"){a=this.getTableModel().getData()[b]}else{throw new Error("Expected node object or node id")}}if(a.children.length>0){return a.children[0]}return null},familyGetLastChild:function(b){var a;if(typeof(b)=="object"){a=b}else{if(typeof(b)=="number"){a=this.getTableModel().getData()[b]}else{throw new Error("Expected node object or node id")}}if(a.children.length>0){return a.children[a.children.length-1]}return null},familyGetNextSibling:function(f){var e;var g;var c=this.getTableModel().getData();if(typeof(f)=="object"){e=f}else{if(typeof(f)=="number"){g=f;e=c[g]}else{throw new Error("Expected node object or node id")}}var a=e.nodeId;var b=c[e.parentNodeId].children;for(var d=0;d<b.length;d++){if(b[d]==a){if(d<b.length-1){return b[d+1]}return null}}},familyGetPrevSibling:function(f){var e;var g;var c=this.getTableModel().getData();if(typeof(f)=="object"){e=f}else{if(typeof(f)=="number"){g=f;e=c[g]}else{throw new Error("Expected node object or node id")}}var a=e.nodeId;var b=c[e.parentNodeId].children;for(var d=0;d<b.length;d++){if(b[d]==a){if(d>0){return b[d-1]}return null}}}}});qx.Class.define("qx.dev.unit.TestResult",{extend:qx.core.Object,events:{startTest:"qx.event.type.Data",endTest:"qx.event.type.Data",error:"qx.event.type.Data",failure:"qx.event.type.Data",wait:"qx.event.type.Data",skip:"qx.event.type.Data"},statics:{run:function(a,c,b){a.run(c,b)}},members:{_timeout:null,run:function(h,l,m,c){if(!this._timeout){this._timeout={}}var b=h.getTestClass();if(!b.hasListener("assertionFailed")){b.addListener("assertionFailed",function(o){var n=[{exception:o.getData(),test:h}];this.fireDataEvent("error",n)},this)}if(c&&!this._timeout[h.getFullName()]){this._timeout[h.getFullName()]="failed";var d=new qx.type.BaseError("Error in asynchronous test","resume() called before wait()");this._createError("failure",[d],h);return}this.fireDataEvent("startTest",h);if(this._timeout[h.getFullName()]){if(this._timeout[h.getFullName()]!=="failed"){this._timeout[h.getFullName()].stop()}delete this._timeout[h.getFullName()]}else{try{h.setUp()}catch(i){try{this.tearDown(h)}catch(k){}if(i.classname=="qx.dev.unit.RequirementError"){this._createError("skip",[i],h)}else{var d=new qx.type.BaseError("Error setting up test: "+i.name,i.message);this._createError("error",[d],h)}return}}try{l.call(m||window)}catch(i){var j=true;if(i instanceof qx.dev.unit.AsyncWrapper){if(this._timeout[h.getFullName()]){return}if(i.getDelay()){var g=this;var f=function(){throw new qx.core.AssertionError("Asynchronous Test Error","Timeout reached before resume() was called.")};var e=(i.getDeferredFunction()?i.getDeferredFunction():f);var a=(i.getContext()?i.getContext():window);this._timeout[h.getFullName()]=qx.event.Timer.once(function(){this.run(h,e,a)},g,i.getDelay());this.fireDataEvent("wait",h)}}else{if(i.classname=="qx.core.AssertionError"){try{this.tearDown(h)}catch(k){}this._createError("failure",[i],h)}else{if(i.classname=="qx.dev.unit.RequirementError"){this._createError("skip",[i],h)}else{try{this.tearDown(h)}catch(k){}this._createError("error",[i],h)}}}}if(!j){try{this.tearDown(h);this.fireDataEvent("endTest",h)}catch(i){var d=new qx.type.BaseError("Error tearing down test: "+i.name,i.message);this._createError("error",[d],h)}}},_createError:function(b,d,f){var e=[];for(var c=0,a=d.length;c<a;c++){e.push({exception:d[c],test:f})}this.fireDataEvent(b,e);this.fireDataEvent("endTest",f)},__wrapAddListener:function(a){a._addedListeners=[];if(!qx.event.Registration.addListenerOriginal){qx.event.Registration.addListenerOriginal=qx.event.Registration.addListener;qx.event.Registration.addListener=function(h,f,g,d,c){var e=qx.event.Registration.addListenerOriginal(h,f,g,d,c);var b=true;if((h.classname&&h.classname.indexOf("testrunner.unit")==0)||(d&&d.classname&&d.classname.indexOf("testrunner.unit")==0)){b=false}if(b){a._addedListeners.push([h,e])}return e}}},__removeListeners:function(d){if(d._addedListeners){var e=d._addedListeners;for(var c=0,a=e.length;c<a;c++){var f=e[c][0];var g=e[c][1];try{qx.event.Registration.removeListenerById(f,g)}catch(b){}}}},tearDown:function(c){c.tearDown();var b=c.getTestClass();var a="tearDown"+qx.lang.String.firstUp(c.getName());if(b[a]){b[a]()}}},destruct:function(){this._timeout=null}});qx.Class.define("qx.ui.layout.Basic",{extend:qx.ui.layout.Abstract,members:{verifyLayoutProperty:qx.core.Environment.select("qx.debug",{"true":function(b,a,c){this.assert(a=="left"||a=="top","The property '"+a+"' is not supported by the Basic layout!");this.assertInteger(c)},"false":null}),renderLayout:function(f,j){var b=this._getLayoutChildren();var a,k,g,c,h;for(var e=0,d=b.length;e<d;e++){a=b[e];k=a.getSizeHint();g=a.getLayoutProperties();c=(g.left||0)+a.getMarginLeft();h=(g.top||0)+a.getMarginTop();a.renderLayout(c,h,k.width,k.height)}},_computeSizeHint:function(){var b=this._getLayoutChildren();var a,k,g;var h=0,j=0;var c,e;for(var f=0,d=b.length;f<d;f++){a=b[f];k=a.getSizeHint();g=a.getLayoutProperties();c=k.width+(g.left||0)+a.getMarginLeft()+a.getMarginRight();e=k.height+(g.top||0)+a.getMarginTop()+a.getMarginBottom();if(c>h){h=c}if(e>j){j=e}}return{width:h,height:j}}}});qx.Class.define("qx.ui.virtual.cell.Number",{extend:qx.ui.virtual.cell.Cell,construct:function(a){this.base(arguments);if(a){this.setNumberFormat(a)}},properties:{numberFormat:{check:"qx.util.format.NumberFormat",init:new qx.util.format.NumberFormat()},appearance:{refine:true,init:"cell-number"}},members:{getContent:function(b,a){return b!==null?this.getNumberFormat().format(b):""}}});qx.Class.define("qx.ui.container.Scroll",{extend:qx.ui.core.scroll.AbstractScrollArea,include:[qx.ui.core.MContentPadding],construct:function(a){this.base(arguments);if(a){this.add(a)}},members:{add:function(a){this.getChildControl("pane").add(a)},remove:function(a){this.getChildControl("pane").remove(a)},getChildren:function(){return this.getChildControl("pane").getChildren()},_getContentPaddingTarget:function(){return this.getChildControl("pane")}}});qx.Class.define("qx.xml.Element",{statics:{XML_SERIALIZER:false,serialize:function(a){if(qx.dom.Node.isDocument(a)){a=a.documentElement}if(this.XML_SERIALIZER){return(new XMLSerializer()).serializeToString(a)}else{return a.xml||a.outerHTML}},selectSingleNode:qx.core.Environment.select("engine.name",{mshtml:function(b,e,d){if(d){var a="";for(var c in d){a+="xmlns:"+c+"='"+d[c]+"' "}if(b.ownerDocument){b.ownerDocument.setProperty("SelectionNamespaces",a)}else{b.setProperty("SelectionNamespaces",a)}}return b.selectSingleNode(e)},"default":function(a,e,d){if(!this.__xpe){this.__xpe=new XPathEvaluator()}var b=this.__xpe;var f;if(d){f=function(g){return d[g]||null}}else{f=b.createNSResolver(a)}try{return b.evaluate(e,a,f,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}catch(c){throw new Error("selectSingleNode: query: "+e+", element: "+a+", error: "+c)}}}),selectNodes:qx.core.Environment.select("engine.name",{mshtml:function(b,e,d){if(d){var a="";for(var c in d){a+="xmlns:"+c+"='"+d[c]+"' "}if(b.ownerDocument){b.ownerDocument.setProperty("SelectionNamespaces",a)}else{b.setProperty("SelectionNamespaces",a)}}return b.selectNodes(e)},"default":function(f,g,b){var h=this.__xpe;if(!h){this.__xpe=h=new XPathEvaluator()}var c;if(b){c=function(i){return b[i]||null}}else{c=h.createNSResolver(f)}try{var j=h.evaluate(g,f,c,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null)}catch(d){throw new Error("selectNodes: query: "+g+", element: "+f+", error: "+d)}var a=[];for(var e=0;e<j.snapshotLength;e++){a[e]=j.snapshotItem(e)}return a}}),getElementsByTagNameNS:qx.core.Environment.select("engine.name",{mshtml:function(b,a,c){var d=b.ownerDocument||b;d.setProperty("SelectionLanguage","XPath");d.setProperty("SelectionNamespaces","xmlns:ns='"+a+"'");return qx.xml.Element.selectNodes(b,"descendant-or-self::ns:"+c)},"default":function(b,a,c){return b.getElementsByTagNameNS(a,c)}}),getSingleNodeText:function(a,c){var b=this.selectSingleNode(a,c);return qx.dom.Node.getText(b)},setAttributeNS:qx.core.Environment.select("engine.name",{mshtml:function(b,e,c,d,f){var a=b.createNode(2,d,c);a.nodeValue=f;e.setAttributeNode(a)},"default":function(a,d,b,c,e){d.setAttributeNS(b,c,e)}}),getAttributeNS:qx.core.Environment.select("engine.name",{mshtml:function(d,b,c){var a=d.attributes;var f=null;if(a){var e=a.getQualifiedItem(c,b);if(e){f=e.nodeValue}}return f===null?"":f},"default":function(c,a,b){var d=c.getAttributeNS(a,b);return d===null?"":d}}),createSubElementNS:qx.core.Environment.select("engine.name",{mshtml:function(a,d,c,b){var e=a.createNode(1,c,b);d.appendChild(e);return e},"default":function(a,d,c,b){var e=a.createElementNS(b,"x:"+c);d.appendChild(e);return e}})},defer:function(a){a.XML_SERIALIZER=(window.XMLSerializer&&!(qx.core.Environment.get("engine.name")=="mshtml"&&qx.core.Environment.get("engine.version")>=9))}});qx.Interface.define("qx.ui.virtual.form.IListDelegate",{members:{getCellData:function(a){},getCellRenderer:function(a){},isRowSelectable:function(a){}}});qx.Class.define("qx.fx.effect.combination.Switch",{extend:qx.fx.Base,construct:function(a){this.base(arguments,a);this.setTransition("flicker");var b=this.__scaleEffect=new qx.fx.effect.core.Scale(a);this.__scaleEffect.beforeSetup=function(){qx.bom.element.Style.set(a,"overflow","hidden")};this.__appearEffect=new qx.fx.effect.core.Fade(a);this.__appearEffect.afterFinishInternal=function(){b.start()}},properties:{duration:{init:0.5,refine:true},from:{init:0,refine:true},to:{init:1,refine:true},modifyDisplay:{init:true,check:"Boolean"},mode:{init:"off",check:["off"]}},members:{__scaleEffect:null,__appearEffect:null,setup:function(){this.base(arguments);var b=this._getElement();var a=qx.bom.element.Style.get(b,"overflow");this.__scaleEffect.afterFinishInternal=function(){qx.bom.element.Style.set(b,"overflow",a)}},afterFinish:function(){if(this.getModifyDisplay()&&(this.getMode()=="off")){qx.bom.element.Style.set(this._getElement(),"display","none")}},start:function(){if(!this.base(arguments)){return}if(this.getMode()=="off"){this.__scaleEffect.set({scaleTo:1,duration:this.getDuration()/2,scaleFromCenter:true,scaleX:false,scaleContent:false,restoreAfterFinish:true});this.__appearEffect.set({duration:this.getDuration()/2,from:this.getFrom(),to:1})}else{}this.__appearEffect.start()},_applyDuration:function(b,a){this.__scaleEffect.setDuration(b/2);this.__appearEffect.setDuration(b/2)}},destruct:function(){this._disposeObjects("__appearEffect","__scaleEffect")}});qx.Class.define("qx.bom.Html",{statics:{__fixNonDirectlyClosableHelper:function(b,c,a){return a.match(/^(abbr|br|col|img|input|link|meta|param|hr|area|embed)$/i)?b:c+"></"+a+">"},__convertMap:{opt:[1,"<select multiple='multiple'>","</select>"],leg:[1,"<fieldset>","</fieldset>"],table:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],def:qx.core.Environment.select("engine.name",{mshtml:[1,"div<div>","</div>"],"default":null})},__convertHtmlString:function(i,e){var a=e.createElement("div");i=i.replace(/(<(\w+)[^>]*?)\/>/g,this.__fixNonDirectlyClosableHelper);var k=i.replace(/^\s+/,"").substring(0,5).toLowerCase();var d,b=this.__convertMap;if(!k.indexOf("<opt")){d=b.opt}else{if(!k.indexOf("<leg")){d=b.leg}else{if(k.match(/^<(thead|tbody|tfoot|colg|cap)/)){d=b.table}else{if(!k.indexOf("<tr")){d=b.tr}else{if(!k.indexOf("<td")||!k.indexOf("<th")){d=b.td}else{if(!k.indexOf("<col")){d=b.col}else{d=b.def}}}}}}if(d){a.innerHTML=d[1]+i+d[2];var h=d[0];while(h--){a=a.lastChild}}else{a.innerHTML=i}if((qx.core.Environment.get("engine.name")=="mshtml")){var c=/<tbody/i.test(i);var g=!k.indexOf("<table")&&!c?a.firstChild&&a.firstChild.childNodes:d[1]=="<table>"&&!c?a.childNodes:[];for(var f=g.length-1;f>=0;--f){if(g[f].tagName.toLowerCase()==="tbody"&&!g[f].childNodes.length){g[f].parentNode.removeChild(g[f])}}if(/^\s/.test(i)){a.insertBefore(e.createTextNode(i.match(/^\s*/)[0]),a.firstChild)}}return qx.lang.Array.fromCollection(a.childNodes)},clean:function(g,a,j){a=a||document;if(typeof a.createElement==="undefined"){a=a.ownerDocument||a[0]&&a[0].ownerDocument||document}if(!j&&g.length===1&&typeof g[0]==="string"){var h=/^<(\w+)\s*\/?>$/.exec(g[0]);if(h){return[a.createElement(h[1])]}}var e,k=[];for(var f=0,c=g.length;f<c;f++){e=g[f];if(typeof e==="string"){e=this.__convertHtmlString(e,a)}if(e.nodeType){k.push(e)}else{if(e instanceof qx.type.BaseArray){k.push.apply(k,Array.prototype.slice.call(e,0))}else{if(e.toElement){k.push(e.toElement())}else{k.push.apply(k,e)}}}}if(j){var d=[],m=qx.lang.Array,b,n;for(var f=0;k[f];f++){b=k[f];if(b.nodeType==1&&b.tagName.toLowerCase()==="script"&&(!b.type||b.type.toLowerCase()==="text/javascript")){if(b.parentNode){b.parentNode.removeChild(k[f])}d.push(b)}else{if(b.nodeType===1){n=m.fromCollection(b.getElementsByTagName("script"));k.splice.apply(k,[f+1,0].concat(n))}j.appendChild(b)}}return d}return k}}});qx.Class.define("qx.application.Mobile",{extend:qx.core.Object,implement:[qx.application.IApplication],include:qx.locale.MTranslation,construct:function(){this.base(arguments)},members:{__root:null,main:function(){this.__root=this._createRootWidget();if(qx.core.Environment.get("qx.mobile.nativescroll")==false){this.__root.setShowScrollbarY(false)}},getRoot:function(){return this.__root},_createRootWidget:function(){return new qx.ui.mobile.core.Root()},finalize:function(){},close:function(){},terminate:function(){}},destruct:function(){this.__root=null}});qx.Class.define("qx.ui.table.cellrenderer.Html",{extend:qx.ui.table.cellrenderer.Conditional,members:{_getContentHtml:function(a){return(a.value||"")},_getCellClass:function(a){return"qooxdoo-table-cell"}}});qx.Interface.define("qx.ui.virtual.cell.IWidgetCellDelegate",{members:{createWidget:function(){}}});qx.Class.define("qx.ui.progressive.renderer.Abstract",{type:"abstract",extend:qx.core.Object,members:{render:function(b,a){throw new Error("render() is abstract")},join:function(b,a){}}});qx.Class.define("qx.dev.unit.TestLoader",{extend:qx.application.Standalone,properties:{suite:{check:"qx.dev.unit.TestSuite",nullable:true}},members:{main:function(){this.base(arguments);qx.log.appender.Console;this.setTestNamespace(this.__getClassNameFromUrl());if(window.top.jsUnitTestSuite){this.runJsUnit();return}if(window==window.top){this.runStandAlone();return}},__getClassNameFromUrl:function(){var b=window.location.search;var a=b.match(/[\?&]testclass=([A-Za-z0-9_\.]+)/);if(a){a=a[1]}else{a="__unknown_class__"}return a},setTestNamespace:function(b){var a=new qx.dev.unit.TestSuite();a.add(b);this.setSuite(a)},runJsUnit:function(){var a=new qx.dev.unit.JsUnitTestResult();this.getSuite().run(a);a.exportToJsUnit()},runStandAlone:function(){this.warn(this.getTestDescriptions());var a=new qx.dev.unit.TestResult();a.addListener("failure",function(c){var b=c.getData().exception;var d=c.getData().test;this.error("Test '"+d.getFullName()+"' failed: "+b.message+" - "+b.getComment());if(b.getStackTrace){this.error("Stack trace: "+b.getStackTrace().join("\n"))}});a.addListener("error",function(c){var b=c.getData().exception;this.error("The test '"+c.getData().test.getFullName()+"' had an error: "+b,b)});this.getSuite().run(a)},getTestDescriptions:function(){var g=[];var f=this.getSuite().getTestClasses();for(var e=0;e<f.length;e++){var b=f[e];var a={};a.classname=b.getName();a.tests=[];var c=b.getTestMethods();for(var d=0;d<c.length;d++){a.tests.push(c[d].getName())}g.push(a)}return qx.lang.Json.stringify(g)},runTests:function(a,g,c){var f=this.getSuite().getTestClasses();for(var e=0;e<f.length;e++){if(g==f[e].getName()){var b=f[e].getTestMethods();for(var d=0;d<b.length;d++){if(c&&b[d].getName()!=c){continue}b[d].run(a)}return}}},runTestsFromNamespace:function(a,b){var d=this.getSuite().getTestClasses();for(var c=0;c<d.length;c++){if(d[c].getName().indexOf(b)==0){d[c].run(a)}}}}});qx.Class.define("qx.dev.unit.TestSuite",{extend:qx.dev.unit.AbstractTestSuite,construct:function(a){this.base(arguments);this._tests=[];if(a){this.add(a)}},members:{add:function(testClassOrNamespace){if(qx.lang.Type.isString(testClassOrNamespace)){var evalTestClassOrNamespace=eval(testClassOrNamespace);if(!evalTestClassOrNamespace){this.addFail(testClassOrNamespace,"The class/namespace '"+testClassOrNamespace+"' is undefined!")}testClassOrNamespace=evalTestClassOrNamespace}if(qx.lang.Type.isFunction(testClassOrNamespace)){this.addTestClass(testClassOrNamespace)}else{if(qx.lang.Type.isObject(testClassOrNamespace)){this.addTestNamespace(testClassOrNamespace)}else{this.addFail("existsCheck","Unknown test class '"+testClassOrNamespace+"'!");return}}},addTestNamespace:function(b){if(qx.lang.Type.isFunction(b)&&b.classname){if(qx.Class.isSubClassOf(b,qx.dev.unit.TestCase)){if(b.$$classtype!=="abstract"){this.addTestClass(b)}return}}else{if(qx.lang.Type.isObject(b)&&!(b instanceof Array)){for(var a in b){this.addTestNamespace(b[a])}}}},addTestClass:function(a){this._tests.push(new qx.dev.unit.TestClass(a))},getTestClasses:function(){var b=[];for(var a=0;a<this._tests.length;a++){var c=this._tests[a];if(c instanceof qx.dev.unit.TestClass){b.push(c)}}return b}}});qx.Class.define("qx.dev.unit.JsUnitTestResult",{extend:qx.dev.unit.TestResult,construct:function(){this.base(arguments);this.__testFunctionNames=[]},members:{__testFunctionNames:null,run:function(c,b){var a="$test_"+c.getFullName().replace(/\W/g,"_");this.__testFunctionNames.push(a);window[a]=b},exportToJsUnit:function(){var a=this;window.exposeTestFunctionNames=function(){return a.__testFunctionNames};window.isTestPageLoaded=true}}});qx.Class.define("qx.io.request.Xhr",{extend:qx.core.Object,construct:function(){this.base(arguments);var a=this.__transport=this._createTransport();this.__onReadyStateChangeBound=qx.lang.Function.bind(this.__onReadyStateChange,this);this.__onLoadBound=qx.lang.Function.bind(this.__onLoad,this);this.__onLoadEndBound=qx.lang.Function.bind(this.__onLoadEnd,this);this.__onErrorBound=qx.lang.Function.bind(this.__onError,this);a.onreadystatechange=this.__onReadyStateChangeBound;a.onload=this.__onLoadBound;a.onloadend=this.__onLoadEndBound;a.onerror=this.__onErrorBound},events:{readystatechange:"qx.event.type.Event",success:"qx.event.type.Event",load:"qx.event.type.Event",loadend:"qx.event.type.Event",error:"qx.event.type.Event"},properties:{method:{check:["GET","POST"],init:"GET"},url:{check:"String"},async:{check:"Boolean",init:true},username:{check:"String",nullable:true},password:{check:"String",nullable:true},requestHeaders:{check:"Map",nullable:true},data:{check:function(a){return qx.lang.Type.isString(a)||qx.Class.isSubClassOf(a.constructor,qx.core.Object)||qx.lang.Type.isObject(a)},nullable:true}},statics:{appendDataToUrl:function(a,b){return a+=/\?/.test(a)?"&"+b:"?"+b}},members:{__transport:null,__onReadyStateChangeBound:null,__onLoadBound:null,__onLoadEndBound:null,__onErrorBound:null,send:function(){var h=this.__transport,g=this.getMethod(),b=this.getUrl(),d=this.getAsync(),f=this.getUsername(),a=this.getPassword(),e=this.getData();var c=this.__serializeData(e);if(/\#/.test(b)){b=b.replace(/\#.*/,"")}if(g==="GET"){if(c){b=qx.io.request.Xhr.appendDataToUrl(b,c)}c=null}h.open(g,b,d,f,a);this.__setRequestHeaders();if(g==="POST"){h.setRequestHeader("Content-type","application/x-www-form-urlencoded")}h.send(c)},abort:function(){this.__transport.abort()},getReadyState:function(){return this.__transport.readyState},getStatus:function(){return this.__transport.status},getStatusText:function(){return this.__transport.statusText},getResponseText:function(){return this.__transport.responseText},getAllResponseHeaders:function(){return this.__transport.getAllResponseHeaders()},getResponseHeader:function(a){return this.__transport.getResponseHeader(a)},isDone:function(){return this.getReadyState()===4},isSuccessful:function(){var a=this.getStatus();return(a>=200&&a<300||a===304)},__onReadyStateChange:function(){this.fireEvent("readystatechange");if(this.isDone()&&this.isSuccessful()){this.fireEvent("success")}},__onLoad:function(){this.fireEvent("load")},__onLoadEnd:function(){this.fireEvent("loadend")},__onError:function(){this.fireEvent("error")},_createTransport:function(){return new qx.bom.request.Xhr()},__serializeData:function(b){var a=this.getMethod()=="POST";if(!b){return}if(qx.lang.Type.isString(b)){return b}if(qx.Class.isSubClassOf(b.constructor,qx.core.Object)){return qx.util.Serializer.toUriParameter(b)}if(qx.lang.Type.isObject(b)){return qx.lang.Object.toUriParameter(b,a)}},__setRequestHeaders:function(){var b=this.getRequestHeaders();for(var a in b){if(b.hasOwnProperty(a)){this.__transport.setRequestHeader(a,b[a])}}}},destruct:function(){if(this.__transport){this.__transport.dispose()}}});qx.Bootstrap.define("qx.bom.request.Xhr",{construct:function(){this.__onNativeReadyStateChangeBound=qx.Bootstrap.bind(this.__onNativeReadyStateChange,this);this.__initNativeXhr();if(window.attachEvent){this.__onUnloadBound=qx.Bootstrap.bind(this.__onUnload,this);window.attachEvent("onunload",this.__onUnloadBound)}},statics:{UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},members:{readyState:0,responseText:"",responseXML:null,status:0,statusText:"",open:function(f,c,d,a,b){if(this.__disposed){return}this.__send=false;this.__abort=false;if(typeof d=="undefined"){d=true}this.__async=d;if(!this.__supportsManyRequests()&&this.readyState>qx.bom.request.Xhr.UNSENT){this.abort();this.dispose();this.__initNativeXhr()}this.__nativeXhr.onreadystatechange=this.__onNativeReadyStateChangeBound;try{this.__nativeXhr.open(f,c,d,a,b)}catch(e){if(window.XDomainRequest){this.readyState=4;this.__nativeXhr=new XDomainRequest();this.__nativeXhr.onerror=qx.Bootstrap.bind(function(){this.onreadystatechange();this.onerror();this.onloadend()},this);this.__nativeXhr.open(f,c,d,a,b);return}window.setTimeout(qx.Bootstrap.bind(function(){this.readyState=4;this.onreadystatechange();this.onerror();this.onloadend()},this))}if(qx.core.Environment.get("engine.name")==="gecko"&&parseInt(qx.core.Environment.get("engine.version"),10)<2&&!this.__async){this.readyState=qx.bom.request.Xhr.OPENED;this.onreadystatechange()}},setRequestHeader:function(b,a){if(this.__disposed){return}this.__nativeXhr.setRequestHeader(b,a)},send:function(a){if(this.__disposed){return}a=typeof a=="undefined"?null:a;if(this.__async){try{this.__nativeXhr.send(a);this.__onNativeReadyStateChange()}catch(b){}}else{this.__nativeXhr.send(a)}if(qx.core.Environment.get("engine.name")==="gecko"&&!this.__async){this.__onNativeReadyStateChange()}this.__send=true},abort:function(){if(this.__disposed){return}this.__abort=true;this.__nativeXhr.abort();if(this.__nativeXhr){this.readyState=this.__nativeXhr.readyState}},onreadystatechange:function(){},onload:function(){},onloadend:function(){},onerror:function(){},getResponseHeader:function(a){if(this.__disposed){return}return this.__nativeXhr.getResponseHeader(a)},getAllResponseHeaders:function(){if(this.__disposed){return}return this.__nativeXhr.getAllResponseHeaders()},dispose:function(){if(this.__disposed){return false}if(window.detachEvent){window.detachEvent("onunload",this.__onUnloadBound)}try{this.__nativeXhr.onreadystatechange}catch(b){return}var a=function(){};this.__nativeXhr.onreadystatechange=a;this.__nativeXhr.onload=a;this.__nativeXhr.onerror=a;this.abort();this.__nativeXhr=null;this.__disposed=true;return true},_getNativeXhr:function(){return this.__nativeXhr},_createNativeXhr:function(){var a=qx.core.Environment.get("io.xhr");if(a==="xhr"){return new XMLHttpRequest()}if(a=="activex"){return new window.ActiveXObject("Microsoft.XMLHTTP")}qx.log.Logger.error(this,"No XHR support available.")},_getProtocol:function(){return window.location.protocol},__nativeXhr:null,__async:null,__onNativeReadyStateChangeBound:null,__onUnloadBound:null,__send:null,__abort:null,__disposed:null,__initNativeXhr:function(){this.__nativeXhr=this._createNativeXhr();this.__nativeXhr.onreadystatechange=this.__onNativeReadyStateChangeBound;this.__disposed=this.__send=this.__abort=false},__onNativeReadyStateChange:function(){var c=this.__nativeXhr,a=true;if(this.readyState==c.readyState){return}this.readyState=c.readyState;if(this.readyState===qx.bom.request.Xhr.DONE&&this.__abort&&!this.__send){return}if(!this.__async&&(c.readyState==2||c.readyState==3)){return}this.status=0;this.statusText=this.responseText="";this.responseXML=null;if(this.readyState>qx.bom.request.Xhr.OPENED){try{this.status=c.status;this.statusText=c.statusText;this.responseText=c.responseText;this.responseXML=c.responseXML}catch(b){a=false}if(a){this.__normalizeStatus();this.__normalizeResponseXML()}}this.onreadystatechange();if(this.readyState===qx.bom.request.Xhr.DONE){this.statusText?this.onload():this.onerror();this.onloadend()}if(this.readyState==qx.bom.request.Xhr.DONE){if(c){c.onreadystatechange=function(){}}}},__normalizeStatus:function(){var a=this.__nativeXhr;if(this._getProtocol()==="file:"&&this.status===0){this.status=200}if(this.status===1223){this.status=204}if(a.readyState===qx.bom.request.Xhr.DONE&&this.status==0){this.status=304}},__normalizeResponseXML:function(){if(qx.core.Environment.get("engine.name")=="mshtml"&&(this.getResponseHeader("Content-Type")||"").match(/[^\/]+\/[^\+]+\+xml/)&&!this.responseXML.documentElement){var a=new window.ActiveXObject("Microsoft.XMLDOM");a.async=false;a.validateOnParse=false;a.loadXML(this.responseText);this.responseXML=a}},__onUnload:function(){try{if(this){this.dispose()}}catch(a){}},__supportsManyRequests:function(){var b=qx.core.Environment.get("engine.name");var a=qx.core.Environment.get("engine.version");return !(b=="mshtml"&&a<9||b=="gecko"&&a<3.5)}}});qx.Class.define("qx.util.Serializer",{statics:{toUriParameter:function(c,e,b){var k="";var f=qx.util.PropertyUtil.getProperties(c.constructor);for(var a in f){var j=c["get"+qx.lang.String.firstUp(a)]();if(qx.lang.Type.isArray(j)){var h=j instanceof qx.data.Array;for(var d=0;d<j.length;d++){var g=h?j.getItem(d):j[d];k+=this.__toUriParameter(a,g,e)}}else{if(qx.lang.Type.isDate(j)&&b!=null){k+=this.__toUriParameter(a,b.format(j),e)}else{k+=this.__toUriParameter(a,j,e)}}}return k.substring(0,k.length-1)},__toUriParameter:function(b,c,d){if(c instanceof qx.core.Object&&d!=null){var a=encodeURIComponent(d(c));if(a===undefined){var a=encodeURIComponent(c)}}else{var a=encodeURIComponent(c)}return encodeURIComponent(b)+"="+a+"&"},toNativeObject:function(d,e,c){var k;if(d==null){return null}if(qx.Class.hasInterface(d.constructor,qx.data.IListData)){k=[];for(var f=0;f<d.getLength();f++){k.push(qx.util.Serializer.toNativeObject(d.getItem(f),e,c))}return k}if(qx.lang.Type.isArray(d)){k=[];for(var f=0;f<d.length;f++){k.push(qx.util.Serializer.toNativeObject(d[f],e,c))}return k}if(d instanceof qx.core.Object){if(e!=null){var a=e(d);if(a!=undefined){return a}}k={};var g=qx.util.PropertyUtil.getAllProperties(d.constructor);for(var b in g){if(g[b].group!=undefined){continue}var h=d["get"+qx.lang.String.firstUp(b)]();k[b]=qx.util.Serializer.toNativeObject(h,e,c)}return k}if(qx.lang.Type.isDate(d)&&c!=null){return c.format(d)}if(d instanceof qx.locale.LocalizedString){return d.toString()}if(qx.lang.Type.isObject(d)){k={};for(var j in d){k[j]=qx.util.Serializer.toNativeObject(d[j],e,c)}return k}return d},toJson:function(d,e,c){var k="";if(d==null){return"null"}if(qx.Class.hasInterface(d.constructor,qx.data.IListData)){k+="[";for(var f=0;f<d.getLength();f++){k+=qx.util.Serializer.toJson(d.getItem(f),e,c)+","}if(k!="["){k=k.substring(0,k.length-1)}return k+"]"}if(qx.lang.Type.isArray(d)){k+="[";for(var f=0;f<d.length;f++){k+=qx.util.Serializer.toJson(d[f],e,c)+","}if(k!="["){k=k.substring(0,k.length-1)}return k+"]"}if(d instanceof qx.core.Object){if(e!=null){var a=e(d);if(a!=undefined){return'"'+a+'"'}}k+="{";var g=qx.util.PropertyUtil.getProperties(d.constructor);for(var b in g){if(g[b].group!=undefined){continue}var h=d["get"+qx.lang.String.firstUp(b)]();k+='"'+b+'":'+qx.util.Serializer.toJson(h,e,c)+","}if(k!="{"){k=k.substring(0,k.length-1)}return k+"}"}if(d instanceof qx.locale.LocalizedString){d=d.toString()}if(qx.lang.Type.isDate(d)&&c!=null){return'"'+c.format(d)+'"'}if(qx.lang.Type.isObject(d)){k+="{";for(var j in d){k+='"'+j+'":'+qx.util.Serializer.toJson(d[j],e,c)+","}if(k!="{"){k=k.substring(0,k.length-1)}return k+"}"}if(qx.lang.Type.isString(d)){d=d.replace(/([\\])/g,"\\\\");d=d.replace(/(["])/g,'\\"');d=d.replace(/([\r])/g,"\\r");d=d.replace(/([\f])/g,"\\f");d=d.replace(/([\n])/g,"\\n");d=d.replace(/([\t])/g,"\\t");d=d.replace(/([\b])/g,"\\b");return'"'+d+'"'}if(qx.lang.Type.isDate(d)||qx.lang.Type.isRegExp(d)){return'"'+d+'"'}return d+""}}});qx.Class.define("qx.ui.virtual.cell.Html",{extend:qx.ui.virtual.cell.Cell,properties:{appearance:{refine:true,init:"cell-html"}},members:{getContent:function(b,a){return b}}});qx.Class.define("qx.ui.virtual.cell.AbstractImage",{extend:qx.ui.virtual.cell.Cell,type:"abstract",construct:function(){this.base(arguments);this._aliasManager=qx.util.AliasManager.getInstance()},members:{__defaultWidth:16,__defaultHeight:16,_aliasManager:null,__getImageSize:function(e){var b=qx.util.ResourceManager.getInstance();var c=qx.io.ImageLoader;var d,a;if(b.has(e)){d=b.getImageWidth(e),a=b.getImageHeight(e)}else{if(c.isLoaded(e)){d=c.getWidth(e);a=c.getHeight(e)}else{d=this.__defaultWidth;a=this.__defaultHeight}}return{width:d,height:a}},__createImage:function(c){if(typeof(c)=="string"){c={url:c}}var a=this._aliasManager.resolve(c.url||null);var b;if(c.width&&c.height){b={width:c.width,height:c.height}}else{b=this.__getImageSize(a)}return{width:b.width,height:b.height,url:a,tooltip:c.tooltip}},_identifyImage:function(a){throw new Error("_identifyImage is abstract")},getContent:function(f,h){if(f===null){return""}var e="";var a=this.__createImage(this._identifyImage(f));var b=qx.core.Environment.get("engine.name")=="gecko"&&qx.core.Environment.get("engine.version")<1.9;var i=a.tooltip?'title="'+a.tooltip+'"':"";var g={width:a.width+"px",height:a.height+"px",display:b?"-moz-inline-box":"inline-block",verticalAlign:"top",position:"static"};var j=qx.bom.element.Decoration.getTagName("no-repeat",a.url);var d=qx.bom.element.Decoration.getAttributes(a.url,"no-repeat",g);var c=qx.bom.element.Style.compile(d.style);if(j==="img"){e='<img src="'+d.src+'" style="'+c+'" ';e+=i+"/>"}else{e='<div style="'+c+'" ';e+=i+"></div>"}return e}}});qx.Class.define("qx.ui.virtual.cell.Boolean",{extend:qx.ui.virtual.cell.AbstractImage,construct:function(){this.base(arguments);this.__aliasManager=qx.util.AliasManager.getInstance()},properties:{appearance:{refine:true,init:"cell-boolean"},iconTrue:{check:"String",themeable:true,apply:"_applyIconTrue"},iconFalse:{check:"String",themeable:true,apply:"_applyIconFalse"}},members:{__imageTrue:null,__imageFalse:null,__aliasManager:null,_applyIconTrue:function(a){this.__imageTrue=this.__aliasManager.resolve(a)},_applyIconFalse:function(a){this.__imageFalse=this.__aliasManager.resolve(a)},_identifyImage:function(a){return a==true?this.__imageTrue:this.__imageFalse}}});qx.Class.define("qx.ui.progressive.headfoot.Abstract",{type:"abstract",extend:qx.ui.container.Composite,construct:function(){this.base(arguments,new qx.ui.layout.HBox())},members:{__progressive:null,join:function(a){this.__progressive=a}},destruct:function(){this.__progressive=null}});qx.Class.define("qx.ui.progressive.headfoot.TableHeading",{extend:qx.ui.progressive.headfoot.Abstract,construct:function(c,f){this.base(arguments);this.__columnWidths=c;var e=c.getData();this.__labels=[];for(var d=0;d<e.length;d++){var b=new qx.ui.basic.Atom(f[d]);b.setAppearance("progressive-table-header-cell");this.add(b);this.__labels[d]=b}var a=new qx.ui.core.Widget();a.set({height:16,appearance:"progressive-table-header-cell",minWidth:0,width:0});this.add(a,{flex:1});this.addListener("resize",this._resizeColumns,this);this.__layout=new qx.ui.layout.HBox();this.__layout.connectToWidget(this)},properties:{appearance:{refine:true,init:"progressive-table-header"}},members:{__columnWidths:null,__bCalculateWidths:null,__labels:null,__layout:null,join:function(a){this.base(arguments,a)},getLayoutChildren:function(){if(this.__bCalculateWidths){return this.__columnWidths.getData()}else{return this.base(arguments)}},_resizeColumns:function(d){var b=this.getBounds().width-qx.bom.element.Overflow.getScrollbarWidth();this.__bCalculateWidths=true;this.__layout.renderLayout(b,100);this.__bCalculateWidths=false;var c=this.__columnWidths.getData();for(var a=0;a<c.length;a++){this.__labels[a].setWidth(c[a].getComputedWidth())}}},destruct:function(){this.__columnWidths=this.__labels=null;this._disposeObjects("_layout")}});qx.Class.define("qx.ui.progressive.model.Abstract",{type:"abstract",extend:qx.core.Object,events:{dataAvailable:"qx.event.type.Data"},members:{getElementCount:function(){throw new Error("getElementCount() is abstract")},getNextElement:function(){throw new Error("getNextElement() is abstract")}}});qx.Class.define("qx.ui.root.Page",{extend:qx.ui.root.Abstract,construct:function(a){this.__doc=a;this.base(arguments);this._setLayout(new qx.ui.layout.Basic());this.setZIndex(10000);qx.ui.core.queue.Layout.add(this);this.addListener("resize",this.__onResize,this);qx.ui.core.FocusHandler.getInstance().connectTo(this);if((qx.core.Environment.get("engine.name")=="mshtml")){this.setKeepFocus(true)}},members:{__timer:null,__doc:null,_createContainerElement:function(){var b=this.__doc.createElement("div");this.__doc.body.appendChild(b);var a=new qx.html.Root(b);a.setStyles({position:"absolute",textAlign:"left"});a.setAttribute("$$widget",this.toHashCode());if((qx.core.Environment.get("engine.name")=="gecko")){a.setAttribute("qxIsRootPage",1)}return a},_createContentElement:function(){return new qx.html.Element("div")},_computeSizeHint:function(){var b=qx.bom.Document.getWidth(this._window);var a=qx.bom.Document.getHeight(this._window);return{minWidth:b,width:b,maxWidth:b,minHeight:a,height:a,maxHeight:a}},__onResize:function(a){this.getContainerElement().setStyles({width:0,height:0});this.getContentElement().setStyles({width:0,height:0})},supportsMaximize:function(){return false},_applyPadding:function(c,a,b){if(c&&(b=="paddingTop"||b=="paddingLeft")){throw new Error("The root widget does not support 'left', or 'top' paddings!")}this.base(arguments,c,a,b)},_applyDecorator:function(c,b){this.base(arguments,c,b);if(!c){return}var a=this.getDecoratorElement().getInsets();if(a.left||a.top){throw new Error("The root widget does not support decorators with 'left', or 'top' insets!")}}},destruct:function(){this.__doc=null}});qx.Class.define("qx.fx.effect.combination.Drop",{extend:qx.fx.Base,construct:function(a){this.base(arguments,a);this.__moveEffect=new qx.fx.effect.core.Move(a);this.__fadeEffect=new qx.fx.effect.core.Fade(a);this.__mainEffect=new qx.fx.effect.core.Parallel(this.__moveEffect,this.__fadeEffect)},properties:{direction:{init:"south",check:["south","west","east","north","south-west","south-east","north-east","north-west"]},xAmount:{init:100,check:"Number"},yAmount:{init:100,check:"Number"},mode:{init:"out",check:["in","out"]},modifyDisplay:{init:true,check:"Boolean"}},members:{__fadeEffect:null,__moveEffect:null,__mainEffect:null,start:function(){this.base(arguments);var d=this._getElement();qx.bom.element.Style.set(d,"display","block");var a=this.getXAmount();var c=this.getYAmount();var b={top:qx.bom.element.Location.getTop(d),left:qx.bom.element.Location.getLeft(d)};var e={x:a,y:c,sync:true};switch(this.getDirection()){case"south":e.x=0;e.y=c;break;case"north":e.x=0;e.y=-c;break;case"west":e.x=-a;e.y=0;break;case"east":e.x=a;e.y=0;break;case"south-west":e.x=-a;e.y=c;break;case"south-east":e.x=a;e.y=c;break;case"north-east":e.x=a;e.y=-c;break;case"north-west":e.x=-a;e.y=-c;break}if(this.getMode()=="in"){qx.bom.element.Style.set(d,"top",(b.top-e.y)+"px");qx.bom.element.Style.set(d,"left",(b.left-e.x)+"px")}this.__moveEffect.set(e);this.__fadeEffect.afterFinishInternal=function(){for(var f in b){qx.bom.element.Style.set(d,f,b[f]+"px")}};this.__fadeEffect.set({duration:0.5,sync:true,from:(this.getMode()=="out")?1:0,to:(this.getMode()=="out")?0:1,modifyDisplay:true});this.__mainEffect.start()}},destruct:function(){this._disposeObjects("__moveEffect","__fadeEffect","__mainEffect")}});qx.Class.define("qx.dev.unit.RequirementError",{extend:Error,construct:function(b,a){this.__message=a||"Requirement not met";this.__requirement=b;Error.call(this,this.__message)},members:{__message:null,__requirement:null,getRequirement:function(){return this.__requirement},toString:function(){return this.__message+": "+this.__requirement}}});qx.Mixin.define("qx.ui.table.MTableContextMenu",{construct:function(){this.addListener("cellContextmenu",function(g){var d=this.getContextMenu();if(d&&!d.isDisposed()){d.hide();this.setContextMenu(null);this.getApplicationRoot().remove(d);d.dispose();d=null}var b=g.getColumn();var a=this.getContextMenuHandler(b);if(typeof a!=="function"){return}var c=this.__contextMenuHandlerContext[b];var h=this.getTableModel();d=new qx.ui.menu.Menu();d.addListener("contextmenu",function(i){i.preventDefault()});d.addListenerOnce("disappear",function(){this.setContextMenu(null)},this);var f=a.call(c,b,g.getRow(),this,h,d);if(!f){d.dispose();return}this.setContextMenu(d)},this);this.__contextMenuHandler=[];this.__contextMenuHandlerContext=[]},members:{__contextMenuHandler:null,__contextMenuHandlerContext:null,setContextMenuHandler:function(a,c,b){this.__contextMenuHandler[a]=c;this.__contextMenuHandlerContext[a]=b||this},getContextMenuHandler:function(a){return this.__contextMenuHandler[a]}},destruct:function(){this.__contextMenuHandler=null;this.__contextMenuHandlerContext=null}});qx.Interface.define("qx.data.marshal.IMarshalerDelegate",{members:{getModelClass:function(a){},getModelSuperClass:function(a){},getModelMixins:function(a){},getValidationRule:function(b,a){}}});qx.Interface.define("qx.data.store.IStoreDelegate",{extend:qx.data.marshal.IMarshalerDelegate,members:{manipulateData:function(a){},configureRequest:function(a){}}});qx.Class.define("qx.ui.embed.Flash",{extend:qx.ui.core.Widget,construct:function(a,b){this.base(arguments);if(qx.core.Environment.get("qx.debug")){qx.core.Assert.assertString(a,"Invalid parameter 'source'.");if(b){qx.core.Assert.assertString(b,"Invalid parameter 'id'.")}}this.setSource(a);if(b){this.setId(b)}else{this.setId("flash"+this.toHashCode())}this.initQuality();this.initWmode();this.initAllowScriptAccess();this.initLiveConnect();this.addListenerOnce("appear",function(){this._checkLoading();this.getContentElement().createFlash()},this)},events:{loading:"qx.event.type.Event",loaded:"qx.event.type.Event",timeout:"qx.event.type.Event"},properties:{source:{check:"String",apply:"_applySource"},id:{check:"String",apply:"_applyId"},quality:{check:["low","autolow","autohigh","medium","high","best"],init:"best",nullable:true,apply:"_applyQuality"},scale:{check:["showall","noborder","excactfit","noscale"],nullable:true,apply:"_applyScale"},wmode:{check:["window","opaque","transparent"],init:"opaque",nullable:true,apply:"_applyWmode"},play:{check:"Boolean",nullable:true,apply:"_applyPlay"},loop:{check:"Boolean",nullable:true,apply:"_applyLoop"},mayScript:{check:"Boolean",nullable:false,apply:"_applyMayScript"},menu:{check:"Boolean",nullable:true,apply:"_applyMenu"},allowScriptAccess:{check:["sameDomain","always","never"],init:"sameDomain",nullable:true,apply:"_applyAllowScriptAccess"},liveConnect:{check:"Boolean",init:true,nullable:true,apply:"_applyLiveConnect"},variables:{init:{},check:"Map",apply:"_applyVariables"},loadTimeout:{check:"Integer",init:10000}},members:{__time:null,getFlashElement:function(){var a=this.getContentElement();if(a){return a.getFlashElement()}else{return null}},isLoaded:function(){return this.getPercentLoaded()===100},getPercentLoaded:function(){var b=this.getFlashElement();if(typeof(b)!="undefined"&&b!=null){try{return b.PercentLoaded()}catch(a){return 0}}else{return 0}},_createContentElement:function(){return new qx.html.Flash()},_checkLoading:function(){var a=this.getSource();if(a!=""&&a!=null&&a!="undefined"){if(!this.isLoaded()){if(!this.__time){this.__time=new Date().getTime()}var c=new Date().getTime()-this.__time;if(this.getLoadTimeout()>c){var b=qx.util.TimerManager.getInstance();b.start(this._checkLoading,0,this,null,10);this.fireEvent("loading")}else{if(qx.core.Environment.get("qx.debug")){this.debug("Timeout after: "+c)}this.fireEvent("timeout");this.__time=null}}else{this.fireEvent("loaded");this.__time=null}}},_applySource:function(c,a){var b=qx.util.ResourceManager.getInstance().toUri(c);this.getContentElement().setSource(b);qx.ui.core.queue.Layout.add(this)},_applyId:function(b,a){this.getContentElement().setId(b);qx.ui.core.queue.Layout.add(this)},_applyVariables:function(b,a){this.getContentElement().setVariables(b);qx.ui.core.queue.Layout.add(this)},_applyMayScript:function(b,a){this.getContentElement().setAttribute("mayscript",b?"":false);qx.ui.core.queue.Layout.add(this)},_applyQuality:function(b,a){this.__flashParamHelper("quality",b)},_applyScale:function(b,a){this.__flashParamHelper("scale",b)},_applyWmode:function(b,a){this.__flashParamHelper("wmode",b)},_applyPlay:function(b,a){this.__flashParamHelper("play",b)},_applyLoop:function(b,a){this.__flashParamHelper("loop",b)},_applyMenu:function(b,a){this.__flashParamHelper("menu",b)},_applyAllowScriptAccess:function(b,a){this.__flashParamHelper("allowScriptAccess",b)},_applyLiveConnect:function(b,a){this.__flashParamHelper("swLiveConnect",b)},__flashParamHelper:function(a,b){this.getContentElement().setParam(a,b);qx.ui.core.queue.Layout.add(this)}}});qx.Class.define("qx.html.Flash",{extend:qx.html.Element,construct:function(b,a){this.base(arguments,"div",b,a);this.__params={};this.__variables={};this.__attributes={}},members:{__params:null,__attributes:null,__variables:null,__flash:null,_createDomElement:function(){return qx.bom.Element.create("div")},createFlash:function(){this.__flash=qx.bom.Flash.create(this.getDomElement(),this.getAttributes(),this.__variables,this.__params)},setSource:function(a){if(qx.core.Environment.get("qx.debug")){qx.core.Assert.assertString(a,"Invalid attribute 'value'.")}if(this.__flash){throw new Error("The source cannot be modified after initial creation")}this.setAttribute("movie",a)},setId:function(a){if(qx.core.Environment.get("qx.debug")){qx.core.Assert.assertString(a,"Invalid attribute 'value'.")}if(this.__flash){throw new Error("The id cannot be modified after initial creation")}this.setAttribute("id",a)},getVariables:function(){return this.__variables},setVariables:function(a){if(qx.core.Environment.get("qx.debug")){qx.core.Assert.assertMap(a,"Invalid attribute 'value'.")}if(this.__flash){throw new Error("The variables cannot be modified after initial creation")}this.__variables=a},getAttributes:function(){return this.__attributes},setAttribute:function(a,b){if(qx.core.Environment.get("qx.debug")){qx.core.Assert.assertString(a,"Invalid attribute 'key'.");if(arguments.length>1&&b!==null){if(!qx.lang.Type.isBoolean(b)&&!qx.lang.Type.isString(b)){throw new Error("Invalid attribute 'value' expected String, Boolean or null.")}}}if(this.__flash){throw new Error("The attributes cannot be modified after initial creation")}if(b===null||b===undefined){delete this.__attributes[a]}else{this.__attributes[a]=b}},getParams:function(){return this.__params},setParam:function(a,b){if(qx.core.Environment.get("qx.debug")){qx.core.Assert.assertString(a,"Invalid attribute 'key'.");if(arguments.length>1&&b!==null){if(!qx.lang.Type.isBoolean(b)&&!qx.lang.Type.isString(b)){throw new Error("Invalid attribute 'value' expected String, Boolean or null.")}}}if(this.__flash){throw new Error("The params cannot be modified after initial creation")}if(b===null||b===undefined){delete this.__params[a]}else{this.__params[a]=b}},getFlashElement:function(){return this.__flash}},destruct:function(){if(this.__flash){qx.bom.Flash.destroy(this.__flash)}this.__params=this.__variables=this.__attributes=null}});qx.Class.define("qx.bom.Flash",{statics:{_flashObjects:{},create:function(d,a,g,f,e){if(!e){e=window}if(qx.core.Environment.get("qx.debug")){qx.core.Assert.assertElement(d,"Invalid parameter 'element'.");qx.core.Assert.assertMap(a,"Invalid parameter 'attributes'.");qx.core.Assert.assertString(a.movie,"Invalid attribute 'movie'.");qx.core.Assert.assertString(a.id,"Invalid attribute 'id'.");if(!qx.dom.Element.isInDom(d,e)){qx.log.Logger.warn(this,"The parent DOM element isn't in DOM! The External Interface doesn't work in IE!")}}if(!a.width){a.width="100%"}if(!a.height){a.height="100%"}f=f?qx.lang.Object.clone(f):{};if(!f.movie){f.movie=a.movie}a.data=a.movie;delete a.movie;if(g){for(var c in g){if(typeof f.flashvars!="undefined"){f.flashvars+="&"+c+"="+g[c]}else{f.flashvars=c+"="+g[c]}}}var b=this.__createSwf(d,a,f,e);this._flashObjects[a.id]=b;return b},destroy:qx.core.Environment.select("engine.name",{mshtml:function(a,b){a=this.__getFlashObject(a);if(a.readyState==4){this.__destroyObjectInIE(a)}else{if(!b){b=window}qx.bom.Event.addNativeListener(b,"load",function(){qx.bom.Flash.__destroyObjectInIE(a)})}},"default":function(a,b){a=this.__getFlashObject(a);if(a.parentNode){a.parentNode.removeChild(a)}delete this._flashObjects[a.id]}}),__getFlashObject:function(a){if(!a){throw new Error("DOM element is null or undefined!")}if(a.tagName.toLowerCase()!=="object"){a=a.firstChild}if(!a||a.tagName.toLowerCase()!=="object"){throw new Error("DOM element has or is not a flash object!")}return a},__destroyObjectInIE:qx.core.Environment.select("engine.name",{mshtml:qx.event.GlobalError.observeMethod(function(b){for(var a in b){if(typeof b[a]=="function"){b[a]=null}}if(b.parentNode){b.parentNode.removeChild(b)}delete this._flashObjects[b.id]}),"default":null}),__fixOutOfMemoryError:qx.event.GlobalError.observeMethod(function(){for(var a in qx.bom.Flash._flashObjects){qx.bom.Flash.destroy(qx.bom.Flash._flashObjects[a])}window.__flash_unloadHandler=function(){};window.__flash_savedUnloadHandler=function(){};qx.bom.Event.removeNativeListener(window,"beforeunload",qx.bom.Flash.__fixOutOfMemoryError)}),__createSwf:qx.core.Environment.select("engine.name",{mshtml:function(c,a,f,d){f.movie=a.data;delete a.data;delete a.classid;var e="";for(b in f){e+='<param name="'+b+'" value="'+f[b]+'" />'}if(a.id){c.innerHTML='<object id="'+a.id+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">'+e+"</object>";delete a.id}else{c.innerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">'+e+"</object>"}for(var b in a){c.firstChild.setAttribute(b,a[b])}return c.firstChild},"default":function(c,a,g,e){delete a.classid;delete g.movie;var d=qx.bom.Element.create("object",a,e);d.setAttribute("type","application/x-shockwave-flash");var f;for(var b in g){f=qx.bom.Element.create("param",{},e);f.setAttribute("name",b);f.setAttribute("value",g[b]);d.appendChild(f)}c.appendChild(d);return d}})},defer:function(a){if((qx.core.Environment.get("engine.name")=="mshtml")){qx.bom.Event.addNativeListener(window,"beforeunload",a.__fixOutOfMemoryError)}}});qx.Class.define("qx.util.TimerManager",{extend:qx.core.Object,type:"singleton",statics:{__timerQueue:[],__timerData:{},__timerId:0},members:{__timerListenerActive:false,start:function(f,d,e,a,c){if(!c){c=d||0}var b=(new Date()).getTime()+c;this.self(arguments).__timerData[++this.self(arguments).__timerId]={callback:f,userData:a||null,expireAt:b,recurTime:d,context:e||this};this.__insertNewTimer(b,this.self(arguments).__timerId);return this.self(arguments).__timerId},stop:function(a){var d=this.self(arguments).__timerQueue;var c=d.length;for(var b=0;b<c;b++){if(d[b]==a){d.splice(b,1);break}}delete this.self(arguments).__timerData[a];if(d.length==0&&this.__timerListenerActive){qx.event.Idle.getInstance().removeListener("interval",this.__processQueue,this);this.__timerListenerActive=false}},__insertNewTimer:function(b,a){var e=this.self(arguments).__timerQueue;var f=this.self(arguments).__timerData;var d=e.length;for(var c=0;c<d;c++){if(f[e[c]].expireAt>b){e.splice(c,0,a);break}}if(e.length==d){e.push(a)}if(!this.__timerListenerActive){qx.event.Idle.getInstance().addListener("interval",this.__processQueue,this);this.__timerListenerActive=true}},__processQueue:function(){var d=(new Date()).getTime();var e=this.self(arguments).__timerQueue;var f=this.self(arguments).__timerData;while(e.length>0&&f[e[0]].expireAt<=d){var c=e.shift();var a=f[c];a.callback.call(a.context,a.userData,c);if(a.recurTime&&f[c]){var b=(new Date()).getTime();a.expireAt=b+a.recurTime;this.__insertNewTimer(a.expireAt,c)}else{delete f[c]}}if(e.length==0&&this.__timerListenerActive){qx.event.Idle.getInstance().removeListener("interval",this.__processQueue,this);this.__timerListenerActive=false}}}});qx.Class.define("qx.bom.storage.Abstract",{extend:qx.core.Object,type:"abstract",construct:function(a){this.base(arguments);this._type=a;this._storage=window[this._type+"Storage"];this._handleStorageEventBound=qx.lang.Function.bind(this._handleStorageEvent,this);if((qx.core.Environment.get("engine.name")=="mshtml")&&(parseInt(qx.core.Environment.get("browser.documentmode"))<9)){qx.bom.Event.addNativeListener(document,"storage",this._handleStorageEventBound)}else{qx.bom.Event.addNativeListener(window,"storage",this._handleStorageEventBound)}},events:{storage:"qx.event.type.Data"},members:{_handleStorageEventBound:null,_storage:null,_type:null,getLength:function(){return this._storage.length},setItem:function(a,b){this._storage.setItem(a,qx.lang.Json.stringify(b))},getItem:function(a){var b=this._storage.getItem(a);if(qx.lang.Type.isString(b)){b=qx.lang.Json.parse(b)}else{if(b&&b.value&&qx.lang.Type.isString(b.value)){b=qx.lang.Json.parse(b.value)}}return b},removeItem:function(a){this._storage.removeItem(a)},clear:function(){if(!this._storage.clear){var b=this._storage;for(var a=b.length-1;a>=0;a--){b.removeItem(b.key(a))}}else{this._storage.clear()}},getKey:function(a){return this._storage.key(a)},iterate:function(e,c){var d=this.getLength();for(var b=0;b<d;b++){var a=this.getKey(b);e.call(c,a,this.getItem(a))}},_handleStorageEvent:function(b){var a={orig:b,key:b.key,newValue:b.newValue,oldValue:b.oldValue,url:b.url,storageArea:b.storageArea};qx.event.Timer.once(function(){this.fireDataEvent("storage",a)},this,0)}},destruct:function(){this.clear();this._storage=null;if((qx.core.Environment.get("engine.name")=="mshtml")&&(parseInt(qx.core.Environment.get("browser.documentmode"))<9)){qx.bom.Event.removeNativeListener(document,"storage",this._handleStorageEventBound)}else{qx.bom.Event.removeNativeListener(window,"storage",this._handleStorageEventBound)}}});qx.Class.define("qx.bom.storage.Session",{extend:qx.bom.storage.Abstract,type:"singleton",construct:function(){this.base(arguments,"session")}});qx.Class.define("qx.bom.storage.Local",{extend:qx.bom.storage.Abstract,type:"singleton",construct:function(){this.base(arguments,"local")}});qx.Theme.define("qx.theme.simple.Appearance",{appearances:{widget:{},label:{style:function(a){return{textColor:a.disabled?"text-disabled":undefined}}},image:{style:function(a){return{opacity:!a.replacement&&a.disabled?0.3:undefined}}},atom:{},"atom/label":"label","atom/icon":"image",root:{style:function(a){return{backgroundColor:"background",textColor:"text",font:"default"}}},popup:{style:function(a){return{decorator:"popup",backgroundColor:"background-pane"}}},tooltip:{include:"popup",style:function(a){return{backgroundColor:"tooltip",textColor:"tooltip-text",decorator:"tooltip",padding:[1,3,2,3],offset:[15,5,5,5]}}},"tooltip/atom":"atom","tooltip-error":{include:"tooltip",style:function(a){return{textColor:"text-selected",showTimeout:100,hideTimeout:10000,decorator:"tooltip-error",font:"bold",backgroundColor:undefined}}},"tooltip-error/atom":"atom",iframe:{style:function(a){return{backgroundColor:"white",decorator:"main-dark"}}},"move-frame":{style:function(a){return{decorator:"main-dark"}}},"resize-frame":"move-frame","dragdrop-cursor":{style:function(a){var b="nodrop";if(a.copy){b="copy"}else{if(a.move){b="move"}else{if(a.alias){b="alias"}}}return{source:qx.theme.simple.Image.URLS["cursor-"+b],position:"right-top",offset:[2,16,2,6]}}},slidebar:{},"slidebar/scrollpane":{},"slidebar/content":{},"slidebar/button-forward":{alias:"button",include:"button",style:function(a){return{icon:qx.theme.simple.Image.URLS["arrow-"+(a.vertical?"down":"right")]}}},"slidebar/button-backward":{alias:"button",include:"button",style:function(a){return{icon:qx.theme.simple.Image.URLS["arrow-"+(a.vertical?"up":"left")]}}},table:"widget","table/statusbar":{style:function(a){return{decorator:"statusbar",padding:[2,5],backgroundColor:"light-background"}}},"table/column-button":{alias:"button",style:function(a){return{decorator:"table-header-column-button",padding:3,icon:qx.theme.simple.Image.URLS["select-column-order"]}}},"table-column-reset-button":{include:"menu-button",alias:"menu-button",style:function(){return{icon:"icon/16/actions/view-refresh.png"}}},"table-scroller/scrollbar-x":"scrollbar","table-scroller/scrollbar-y":"scrollbar","table-scroller":"widget","table-scroller/header":{style:function(){return{decorator:"table-header"}}},"table-scroller/pane":{},"table-scroller/focus-indicator":{style:function(a){return{decorator:"main"}}},"table-scroller/resize-line":{style:function(a){return{backgroundColor:"button-border",width:3}}},"table-header-cell":{alias:"atom",style:function(a){return{decorator:a.first?"table-header-cell-first":"table-header-cell",minWidth:13,font:"bold",paddingTop:3,paddingLeft:5,cursor:"pointer",sortIcon:a.sorted?(qx.theme.simple.Image.URLS["table-"+(a.sortedAscending?"ascending":"descending")]):undefined}}},"table-header-cell/icon":{include:"atom/icon",style:function(a){return{paddingRight:5}}},"table-header-cell/sort-icon":{style:function(a){return{alignY:"middle",alignX:"right",paddingRight:5}}},"table-editor-textfield":{include:"textfield",style:function(a){return{decorator:undefined,padding:[2,2]}}},"table-editor-selectbox":{include:"selectbox",alias:"selectbox",style:function(a){return{padding:[0,2]}}},"table-editor-combobox":{include:"combobox",alias:"combobox",style:function(a){return{decorator:undefined}}},treevirtual:"table","treevirtual-folder":{style:function(a){return{icon:(a.opened?"icon/16/places/folder-open.png":"icon/16/places/folder.png")}}},"treevirtual-file":{include:"treevirtual-folder",alias:"treevirtual-folder",style:function(a){return{icon:"icon/16/mimetypes/text-plain.png"}}},"treevirtual-line":{style:function(a){return{icon:qx.theme.simple.Image.URLS["treevirtual-line"]}}},"treevirtual-contract":{style:function(a){return{icon:qx.theme.simple.Image.URLS["tree-minus"]}}},"treevirtual-expand":{style:function(a){return{icon:qx.theme.simple.Image.URLS["tree-plus"]}}},"treevirtual-only-contract":{style:function(a){return{icon:qx.theme.simple.Image.URLS["treevirtual-minus-only"]}}},"treevirtual-only-expand":{style:function(a){return{icon:qx.theme.simple.Image.URLS["treevirtual-plus-only"]}}},"treevirtual-start-contract":{style:function(a){return{icon:qx.theme.simple.Image.URLS["treevirtual-minus-start"]}}},"treevirtual-start-expand":{style:function(a){return{icon:qx.theme.simple.Image.URLS["treevirtual-plus-start"]}}},"treevirtual-end-contract":{style:function(a){return{icon:qx.theme.simple.Image.URLS["treevirtual-minus-end"]}}},"treevirtual-end-expand":{style:function(a){return{icon:qx.theme.simple.Image.URLS["treevirtual-plus-end"]}}},"treevirtual-cross-contract":{style:function(a){return{icon:qx.theme.simple.Image.URLS["treevirtual-minus-cross"]}}},"treevirtual-cross-expand":{style:function(a){return{icon:qx.theme.simple.Image.URLS["treevirtual-plus-cross"]}}},"treevirtual-end":{style:function(a){return{icon:qx.theme.simple.Image.URLS["treevirtual-end"]}}},"treevirtual-cross":{style:function(a){return{icon:qx.theme.simple.Image.URLS["treevirtual-cross"]}}},resizer:{style:function(a){return{decorator:"main-dark"}}},splitpane:{},"splitpane/splitter":{style:function(a){return{backgroundColor:"light-background"}}},"splitpane/splitter/knob":{style:function(a){return{source:qx.theme.simple.Image.URLS["knob-"+(a.horizontal?"horizontal":"vertical")],padding:2}}},"splitpane/slider":{style:function(a){return{backgroundColor:"border-light-shadow",opacity:0.3}}},menu:{style:function(b){var a={backgroundColor:"background",decorator:"main",spacingX:6,spacingY:1,iconColumnWidth:16,arrowColumnWidth:4,padding:1,placementModeY:b.submenu||b.contextmenu?"best-fit":"keep-align"};if(b.submenu){a.position="right-top";a.offset=[-2,-3]}if(b.contextmenu){a.offset=4}return a}},"menu/slidebar":"menu-slidebar","menu-slidebar":"widget","menu-slidebar-button":{style:function(a){return{backgroundColor:a.hovered?"background-selected":undefined,padding:6,center:true}}},"menu-slidebar/button-backward":{include:"menu-slidebar-button",style:function(a){return{icon:qx.theme.simple.Image.URLS["arrow-up"+(a.hovered?"-invert":"")]}}},"menu-slidebar/button-forward":{include:"menu-slidebar-button",style:function(a){return{icon:qx.theme.simple.Image.URLS["arrow-down"+(a.hovered?"-invert":"")]}}},"menu-separator":{style:function(a){return{height:0,decorator:"menu-separator",marginTop:4,marginBottom:4,marginLeft:2,marginRight:2}}},"menu-button":{alias:"atom",style:function(a){return{backgroundColor:a.selected?"background-selected":undefined,textColor:a.selected?"text-selected":undefined,padding:[2,6]}}},"menu-button/icon":{include:"image",style:function(a){return{alignY:"middle"}}},"menu-button/label":{include:"label",style:function(a){return{alignY:"middle",padding:1}}},"menu-button/shortcut":{include:"label",style:function(a){return{alignY:"middle",marginLeft:14,padding:1}}},"menu-button/arrow":{include:"image",style:function(a){return{source:qx.theme.simple.Image.URLS["arrow-right"+(a.selected?"-invert":"")],alignY:"middle"}}},"menu-checkbox":{alias:"menu-button",include:"menu-button",style:function(a){return{icon:!a.checked?undefined:qx.theme.simple.Image.URLS["menu-checkbox"+(a.selected?"-invert":"")]}}},"menu-radiobutton":{alias:"menu-button",include:"menu-button",style:function(a){return{icon:!a.checked?undefined:qx.theme.simple.Image.URLS["menu-radiobutton"+(a.selected?"-invert":"")]}}},menubar:{style:function(a){return{backgroundColor:"light-background",padding:[4,2]}}},"menubar-button":{style:function(b){var a;var c=[2,6];if(!b.disabled){if(b.pressed){a="menubar-button-pressed";c=[1,5,2,5]}else{if(b.hovered){a="menubar-button-hovered";c=[1,5]}}}return{padding:c,cursor:b.disabled?undefined:"pointer",textColor:"link",decorator:a}}},"virtual-list":"list","virtual-list/row-layer":"row-layer","row-layer":"widget","column-layer":"widget","group-item":{include:"label",alias:"label",style:function(a){return{padding:4,backgroundColor:"#BABABA",textColor:"white",font:"bold"}}},"virtual-selectbox":"selectbox","virtual-selectbox/dropdown":"popup","virtual-selectbox/dropdown/list":{alias:"virtual-list"},"virtual-combobox":"combobox","virtual-combobox/dropdown":"popup","virtual-combobox/dropdown/list":{alias:"virtual-list"},"virtual-tree":{include:"list",alias:"list",style:function(a){return{padding:a.focused?0:1}}},"virtual-tree-folder":"tree-folder","virtual-tree-file":"tree-file",cell:{style:function(a){return{backgroundColor:a.selected?"table-row-background-selected":"table-row-background-even",textColor:a.selected?"text-selected":"text",padding:[3,6]}}},"cell-string":"cell","cell-number":{include:"cell",style:function(a){return{textAlign:"right"}}},"cell-image":"cell","cell-boolean":"cell","cell-atom":"cell","cell-date":"cell","cell-html":"cell",htmlarea:{include:"widget",style:function(a){return{backgroundColor:"white"}}},scrollbar:{},"scrollbar/slider":{},"scrollbar/slider/knob":{style:function(b){var a="scroll-knob";if(!b.disabled){if(b.hovered&&!b.pressed&&!b.checked){a="scroll-knob-hovered"}else{if(b.hovered&&(b.pressed||b.checked)){a="scroll-knob-pressed-hovered"}else{if(b.pressed||b.checked){a="scroll-knob-pressed"}}}}return{height:14,width:14,cursor:"pointer",decorator:a,minHeight:b.horizontal?undefined:20,minWidth:b.horizontal?20:undefined}}},"scrollbar/button":{style:function(a){var c={};c.padding=4;var b="";if(a.left){b="left";c.marginRight=2}else{if(a.right){b+="right";c.marginLeft=2}else{if(a.up){b+="up";c.marginBottom=2}else{b+="down";c.marginTop=2}}}c.icon=qx.theme.simple.Image.URLS["arrow-"+b];c.cursor="pointer";c.decorator="button-box";return c}},"scrollbar/button-begin":"scrollbar/button","scrollbar/button-end":"scrollbar/button","scrollarea/corner":{style:function(a){return{backgroundColor:"background"}}},scrollarea:"widget","scrollarea/pane":"widget","scrollarea/scrollbar-x":"scrollbar","scrollarea/scrollbar-y":"scrollbar",textfield:{style:function(b){var c;if(b.disabled){c="text-disabled"}else{if(b.showingPlaceholder){c="text-placeholder"}else{c=undefined}}var a;var d;if(b.disabled){a="inset";d=[2,3]}else{if(b.invalid){a="border-invalid";d=[1,2]}else{if(b.focused){a="focused-inset";d=[1,2]}else{d=[2,3];a="inset"}}}return{decorator:a,padding:d,textColor:c,backgroundColor:b.disabled?"background-disabled":"white"}}},textarea:"textfield","radiobutton/icon":{style:function(c){var b="radiobutton";if(c.focused&&!c.invalid){b="radiobutton-focused"}b+=c.invalid&&!c.disabled?"-invalid":"";var a;if(c.disabled&&c.checked){a="background-disabled-checked"}else{if(c.disabled){a="background-disabled"}else{if(c.checked){a="background-selected"}}}return{decorator:b,width:12,height:12,backgroundColor:a}}},radiobutton:{style:function(a){return{icon:qx.theme.simple.Image.URLS.blank}}},checkbox:{alias:"atom",style:function(a){var b;if(a.checked){b=qx.theme.simple.Image.URLS["checkbox-checked"]}else{if(a.undetermined){b=qx.theme.simple.Image.URLS["checkbox-undetermined"]}else{b=qx.theme.simple.Image.URLS.blank}}return{icon:b,gap:6}}},"checkbox/icon":{style:function(b){var a="checkbox";if(b.focused&&!b.invalid){a="checkbox-focused"}a+=b.invalid&&!b.disabled?"-invalid":"";var c;if(b.checked){c=2}else{if(b.undetermined){c=[4,2]}}return{decorator:a,width:12,height:12,padding:c,backgroundColor:"white"}}},spinner:{style:function(a){return{textColor:a.disabled?"text-disabled":undefined}}},"spinner/textfield":"textfield","spinner/upbutton":{alias:"combobox/button",include:"combobox/button",style:function(b){var a="button-box-top-right";if(b.hovered&&!b.pressed&&!b.checked){a="button-box-hovered-top-right"}else{if(b.hovered&&(b.pressed||b.checked)){a="button-box-pressed-hovered-top-right"}else{if(b.pressed||b.checked){a="button-box-pressed-top-right"}}}return{icon:qx.theme.simple.Image.URLS["arrow-up-small"],decorator:a,width:17}}},"spinner/downbutton":{alias:"combobox/button",include:"combobox/button",style:function(b){var a="button-box-bottom-right";if(b.hovered&&!b.pressed&&!b.checked){a="button-box-hovered-bottom-right"}else{if(b.hovered&&(b.pressed||b.checked)){a="button-box-pressed-hovered-bottom-right"}else{if(b.pressed||b.checked){a="button-box-pressed-bottom-right"}}}return{icon:qx.theme.simple.Image.URLS["arrow-down-small"],decorator:a,width:17}}},selectbox:"button-frame","selectbox/atom":"atom","selectbox/popup":"popup","selectbox/list":{alias:"list",include:"list",style:function(){return{decorator:undefined}}},"selectbox/arrow":{include:"image",style:function(a){return{source:qx.theme.simple.Image.URLS["arrow-down"],paddingRight:4,paddingLeft:5}}},combobox:{},"combobox/button":{alias:"button-frame",include:"button-frame",style:function(b){var a="button-box-right-borderless";if(b.hovered&&!b.pressed&&!b.checked){a="button-box-hovered-right-borderless"}else{if(b.hovered&&(b.pressed||b.checked)){a="button-box-pressed-hovered-right-borderless"}else{if(b.pressed||b.checked){a="button-box-pressed-right-borderless"}}}return{icon:qx.theme.simple.Image.URLS["arrow-down"],cursor:"pointer",decorator:a,padding:[0,5],width:19}}},"combobox/popup":"popup","combobox/list":{alias:"list"},"combobox/textfield":"textfield",datefield:"combobox","datefield/button":{alias:"combobox/button",include:"combobox/button",style:function(a){return{icon:"icon/16/apps/office-calendar.png",padding:[0,0,0,3],backgroundColor:undefined,decorator:undefined,width:19}}},"datefield/list":{alias:"datechooser",include:"datechooser",style:function(a){return{decorator:undefined}}},list:{alias:"scrollarea",include:"textfield"},listitem:{alias:"atom",style:function(a){return{gap:4,padding:a.lead?[2,4]:[3,5],backgroundColor:a.selected?"background-selected":undefined,textColor:a.selected?"text-selected":undefined,decorator:a.lead?"lead-item":undefined}}},slider:{style:function(b){var a;var c;if(b.disabled){a="inset";c=[2,3]}else{if(b.invalid){a="border-invalid";c=[1,2]}else{if(b.focused){a="focused-inset";c=[1,2]}else{c=[2,3];a="inset"}}}return{decorator:a,padding:c}}},"slider/knob":"scrollbar/slider/knob","button-frame":{alias:"atom",style:function(b){var a="button-box";if(b.hovered&&!b.pressed&&!b.checked){a="button-box-hovered"}else{if(b.hovered&&(b.pressed||b.checked)){a="button-box-pressed-hovered"}else{if(b.pressed||b.checked){a="button-box-pressed"}}}if(b.invalid&&!b.disabled){a+="-invalid"}else{if(b.focused){a+="-focused"}}return{decorator:a,padding:[3,8],cursor:b.disabled?undefined:"pointer",minWidth:5,minHeight:5}}},"button-frame/label":{alias:"atom/label",style:function(a){return{textColor:a.disabled?"text-disabled":undefined}}},button:{alias:"button-frame",include:"button-frame",style:function(a){return{center:true}}},"hover-button":{alias:"button",include:"button",style:function(a){return{decorator:a.hovered?"button-hover":undefined}}},splitbutton:{},"splitbutton/button":{alias:"atom",style:function(b){var a="button-box";if(b.disabled){a="button-box"}else{if(b.hovered&&!b.pressed&&!b.checked){a="button-box-hovered"}else{if(b.hovered&&(b.pressed||b.checked)){a="button-box-pressed-hovered"}else{if(b.pressed||b.checked){a="button-box-pressed"}}}}a+="-left";return{decorator:a,padding:[3,8],cursor:b.disabled?undefined:"pointer"}}},"splitbutton/arrow":{style:function(b){var a="button-box";if(b.disabled){a="button-box"}else{if(b.hovered&&!b.pressed&&!b.checked){a="button-box-hovered"}else{if(b.hovered&&(b.pressed||b.checked)){a="button-box-pressed-hovered"}else{if(b.pressed||b.checked){a="button-box-pressed"}}}}a+="-right";return{icon:qx.theme.simple.Image.URLS["arrow-down"],decorator:a,cursor:"pointer",padding:[3,4]}}},groupbox:{},"groupbox/legend":{alias:"atom",style:function(a){return{textColor:a.invalid?"invalid":undefined,padding:5,margin:4,font:"bold"}}},"groupbox/frame":{style:function(a){return{backgroundColor:"background",padding:[6,9],margin:[18,2,2,2],decorator:"white-box"}}},"check-groupbox":"groupbox","check-groupbox/legend":{alias:"checkbox",include:"checkbox",style:function(a){return{textColor:a.invalid?"invalid":undefined,padding:5,margin:4,font:"bold"}}},"radio-groupbox":"groupbox","radio-groupbox/legend":{alias:"radiobutton",include:"radiobutton",style:function(a){return{textColor:a.invalid?"invalid":undefined,padding:5,margin:4,font:"bold"}}},"tree-folder/open":{include:"image",style:function(a){return{source:a.opened?qx.theme.simple.Image.URLS["tree-minus"]:qx.theme.simple.Image.URLS["tree-plus"]}}},"tree-folder":{style:function(a){return{padding:[2,8,2,5],icon:a.opened?"icon/16/places/folder-open.png":"icon/16/places/folder.png",backgroundColor:a.selected?"background-selected":undefined,iconOpened:"icon/16/places/folder-open.png"}}},"tree-folder/icon":{include:"image",style:function(a){return{padding:[0,4,0,0]}}},"tree-folder/label":{style:function(a){return{padding:[1,2],textColor:a.selected?"text-selected":undefined}}},"tree-file":{include:"tree-folder",alias:"tree-folder",style:function(a){return{icon:"icon/16/mimetypes/text-plain.png"}}},tree:{include:"list",alias:"list",style:function(a){return{contentPadding:a.invalid&&!a.disabled?[3,0]:[4,1],padding:a.focused?0:1}}},window:{style:function(a){return{contentPadding:[10,10,10,10],backgroundColor:"background",decorator:a.maximized?undefined:a.active?"window-active":"window"}}},"window/pane":{},"window/captionbar":{style:function(a){return{backgroundColor:a.active?"light-background":"background-disabled",padding:8,font:"bold",decorator:"window-caption"}}},"window/icon":{style:function(a){return{marginRight:4}}},"window/title":{style:function(a){return{cursor:"default",font:"bold",marginRight:20,alignY:"middle"}}},"window/minimize-button":{alias:"button",style:function(a){return{icon:qx.theme.simple.Image.URLS["window-minimize"],padding:[1,2],cursor:a.disabled?undefined:"pointer"}}},"window/restore-button":{alias:"button",style:function(a){return{icon:qx.theme.simple.Image.URLS["window-restore"],padding:[1,2],cursor:a.disabled?undefined:"pointer"}}},"window/maximize-button":{alias:"button",style:function(a){return{icon:qx.theme.simple.Image.URLS["window-maximize"],padding:[1,2],cursor:a.disabled?undefined:"pointer"}}},"window/close-button":{alias:"button",style:function(a){return{marginLeft:2,icon:qx.theme.simple.Image.URLS["window-close"],padding:[1,2],cursor:a.disabled?undefined:"pointer"}}},"window/statusbar":{style:function(a){return{decorator:"statusbar",padding:[2,6]}}},"window/statusbar-text":"label",datechooser:{style:function(a){return{decorator:"main"}}},"datechooser/navigation-bar":{style:function(a){return{backgroundColor:"background",textColor:a.disabled?"text-disabled":a.invalid?"invalid":undefined,padding:[2,10]}}},"datechooser/last-year-button-tooltip":"tooltip","datechooser/last-month-button-tooltip":"tooltip","datechooser/next-year-button-tooltip":"tooltip","datechooser/next-month-button-tooltip":"tooltip","datechooser/last-year-button":"datechooser/button","datechooser/last-month-button":"datechooser/button","datechooser/next-year-button":"datechooser/button","datechooser/next-month-button":"datechooser/button","datechooser/button/icon":{},"datechooser/button":{style:function(b){var a={width:17,show:"icon",cursor:"pointer"};if(b.lastYear){a.icon=qx.theme.simple.Image.URLS["arrow-rewind"]}else{if(b.lastMonth){a.icon=qx.theme.simple.Image.URLS["arrow-left"]}else{if(b.nextYear){a.icon=qx.theme.simple.Image.URLS["arrow-forward"]}else{if(b.nextMonth){a.icon=qx.theme.simple.Image.URLS["arrow-right"]}}}}return a}},"datechooser/month-year-label":{style:function(a){return{font:"bold",textAlign:"center"}}},"datechooser/date-pane":{style:function(a){return{decorator:"datechooser-date-pane",backgroundColor:"background"}}},"datechooser/weekday":{style:function(a){return{decorator:"datechooser-weekday",font:"bold",textAlign:"center",textColor:a.disabled?"text-disabled":a.weekend?"background-selected-dark":"background",backgroundColor:a.weekend?"background":"background-selected-dark",paddingTop:2}}},"datechooser/day":{style:function(a){return{textAlign:"center",decorator:a.today?"main":undefined,textColor:a.disabled?"text-disabled":a.selected?"text-selected":a.otherMonth?"text-disabled":undefined,backgroundColor:a.disabled?undefined:a.selected?"background-selected":undefined,padding:[2,4]}}},"datechooser/week":{style:function(a){return{textAlign:"center",textColor:"background-selected-dark",padding:[2,4],decorator:a.header?"datechooser-week-header":"datechooser-week"}}},progressbar:{style:function(a){return{decorator:"progressbar",padding:1,backgroundColor:"white"}}},"progressbar/progress":{style:function(a){return{backgroundColor:a.disabled?"background-disabled-checked":"background-selected"}}},toolbar:{style:function(a){return{backgroundColor:"light-background",padding:0}}},"toolbar/part":{style:function(a){return{margin:[0,15]}}},"toolbar/part/container":{},"toolbar/part/handle":{},"toolbar-separator":{style:function(a){return{decorator:"toolbar-separator",margin:[7,0],width:4}}},"toolbar-button":{alias:"atom",style:function(b){var a="button-box";if(b.disabled){a="button-box"}else{if(b.hovered&&!b.pressed&&!b.checked){a="button-box-hovered"}else{if(b.hovered&&(b.pressed||b.checked)){a="button-box-pressed-hovered"}else{if(b.pressed||b.checked){a="button-box-pressed"}}}}if(b.left){a+="-left"}else{if(b.right){a+="-right"}else{if(b.middle){a+="-middle"}}}var c=[7,10];if(b.left||b.middle||b.right){c=[7,0]}return{cursor:"pointer",decorator:a,margin:c,padding:[3,5]}}},"toolbar-menubutton":{alias:"toolbar-button",include:"toolbar-button",style:function(a){return{showArrow:true}}},"toolbar-menubutton/arrow":{alias:"image",include:"image",style:function(a){return{source:qx.theme.simple.Image.URLS["arrow-down"],cursor:"pointer",padding:[0,5],marginLeft:2}}},"toolbar-splitbutton":{},"toolbar-splitbutton/button":{alias:"toolbar-button",include:"toolbar-button",style:function(b){var a="button-box";if(b.disabled){a="button-box"}else{if(b.hovered&&!b.pressed&&!b.checked){a="button-box-hovered"}else{if(b.hovered&&(b.pressed||b.checked)){a="button-box-pressed-hovered"}else{if(b.pressed||b.checked){a="button-box-pressed"}}}}if(b.left){a+="-left"}else{if(b.right){a+="-middle"}else{if(b.middle){a+="-middle"}}}return{icon:qx.theme.simple.Image.URLS["arrow-down"],decorator:a}}},"toolbar-splitbutton/arrow":{alias:"toolbar-button",include:"toolbar-button",style:function(b){var a="button-box";if(b.disabled){a="button-box"}else{if(b.hovered&&!b.pressed&&!b.checked){a="button-box-hovered"}else{if(b.hovered&&(b.pressed||b.checked)){a="button-box-pressed-hovered"}else{if(b.pressed||b.checked){a="button-box-pressed"}}}}if(b.left){a+="-middle"}else{if(b.right){a+="-right"}else{if(b.middle){a+="-middle"}}}return{icon:qx.theme.simple.Image.URLS["arrow-down"],decorator:a}}},tabview:{},"tabview/bar":{alias:"slidebar",style:function(a){var d=0,c=0,e=0,b=0;if(a.barTop){e-=2}else{if(a.barBottom){d-=2}else{if(a.barRight){b-=2}else{c-=2}}}return{marginBottom:e,marginTop:d,marginLeft:b,marginRight:c}}},"tabview/bar/button-forward":{include:"slidebar/button-forward",alias:"slidebar/button-forward",style:function(b){var a="button-box";if(b.hovered&&!b.pressed&&!b.checked){a="button-box-hovered"}else{if(b.hovered&&(b.pressed||b.checked)){a="button-box-pressed-hovered"}else{if(b.pressed||b.checked){a="button-box-pressed"}}}if(b.barTop){return{marginTop:4,marginBottom:2,decorator:a+"-top-right"}}else{if(b.barBottom){return{marginTop:2,marginBottom:4,decorator:a+"-bottom-right"}}else{if(b.barLeft){return{marginLeft:4,marginRight:2,decorator:a+"-bottom-left"}}else{return{marginLeft:2,marginRight:4,decorator:a+"-bottom-right"}}}}}},"tabview/bar/button-backward":{include:"slidebar/button-backward",alias:"slidebar/button-backward",style:function(b){var a="button-box";if(b.hovered&&!b.pressed&&!b.checked){a="button-box-hovered"}else{if(b.hovered&&(b.pressed||b.checked)){a="button-box-pressed-hovered"}else{if(b.pressed||b.checked){a="button-box-pressed"}}}if(b.barTop){return{marginTop:4,marginBottom:2,decorator:a+"-top-left"}}else{if(b.barBottom){return{marginTop:2,marginBottom:4,decorator:a+"-bottom-left"}}else{if(b.barLeft){return{marginLeft:4,marginRight:2,decorator:a+"-top-left"}}else{return{marginLeft:2,marginRight:4,decorator:a+"-top-right"}}}}}},"tabview/pane":{style:function(a){return{backgroundColor:"background",decorator:"border-blue",padding:10}}},"tabview-page":"widget","tabview-page/button":{style:function(j){var g;var a=0,h=0,f=0,e=0;if(j.barTop||j.barBottom){var i=5,b=5,d=9,c=9}else{var i=8,b=8,d=4,c=4}if(j.barTop||j.barBottom){g="tabview-page-button-top-bottom"}else{if(j.barRight||j.barLeft){g="tabview-page-button-right-left"}}if(j.checked){if(j.barTop){d+=1;c+=1;i+=4}else{if(j.barBottom){d+=1;c+=1;i+=2}else{if(j.barLeft){i+=1;b+=1;d+=4}else{if(j.barRight){i+=1;b+=1;d+=2}}}}}else{if(j.barTop){f+=2;a+=4}else{if(j.barBottom){f+=4;a+=2}else{if(j.barLeft){h+=2;e+=4}else{if(j.barRight){h+=4;e+=2}}}}}if(j.firstTab&&!j.checked){g+="-first"}else{if(j.lastTab&&!j.checked){g+="-last"}}return{zIndex:j.checked?10:5,decorator:j.checked?undefined:g,backgroundColor:j.checked?"background-selected":"tabview-unselected",textColor:"white",padding:[i,c,b,d],margin:[a,h,f,e]}}},"tabview-page/button/label":{alias:"label",style:function(a){return{padding:[0,1,0,1],margin:a.focused?0:1,decorator:a.focused?"keyboard-focus":undefined}}},"tabview-page/button/icon":"image","tabview-page/button/close-button":{alias:"atom",style:function(a){return{cursor:a.disabled?undefined:"pointer",icon:qx.theme.simple.Image.URLS["tabview-close"]}}},colorpopup:{alias:"popup",include:"popup",style:function(a){return{padding:5}}},"colorpopup/field":{style:function(a){return{margin:2,width:14,height:14,backgroundColor:"background",decorator:"main-dark"}}},"colorpopup/selector-button":"button","colorpopup/auto-button":"button","colorpopup/preview-pane":"groupbox","colorpopup/current-preview":{style:function(a){return{height:20,padding:4,marginLeft:4,decorator:"main-dark",allowGrowX:true}}},"colorpopup/selected-preview":{style:function(a){return{height:20,padding:4,marginRight:4,decorator:"main-dark",allowGrowX:true}}},"colorpopup/colorselector-okbutton":{alias:"button",include:"button",style:function(a){return{icon:"icon/16/actions/dialog-ok.png"}}},"colorpopup/colorselector-cancelbutton":{alias:"button",include:"button",style:function(a){return{icon:"icon/16/actions/dialog-cancel.png"}}},colorselector:"widget","colorselector/control-bar":"widget","colorselector/visual-pane":"groupbox","colorselector/control-pane":"widget","colorselector/preset-grid":"widget","colorselector/colorbucket":{style:function(a){return{decorator:"main-dark",width:16,height:16}}},"colorselector/preset-field-set":"groupbox","colorselector/input-field-set":"groupbox","colorselector/preview-field-set":"groupbox","colorselector/hex-field-composite":"widget","colorselector/hex-field":"textfield","colorselector/rgb-spinner-composite":"widget","colorselector/rgb-spinner-red":"spinner","colorselector/rgb-spinner-green":"spinner","colorselector/rgb-spinner-blue":"spinner","colorselector/hsb-spinner-composite":"widget","colorselector/hsb-spinner-hue":"spinner","colorselector/hsb-spinner-saturation":"spinner","colorselector/hsb-spinner-brightness":"spinner","colorselector/preview-content-old":{style:function(a){return{decorator:"main-dark",width:50,height:10}}},"colorselector/preview-content-new":{style:function(a){return{decorator:"main-dark",backgroundColor:"white",width:50,height:10}}},"colorselector/hue-saturation-field":{style:function(a){return{decorator:"main-dark",margin:5}}},"colorselector/brightness-field":{style:function(a){return{decorator:"main-dark",margin:[5,7]}}},"colorselector/hue-saturation-pane":"widget","colorselector/hue-saturation-handle":"widget","colorselector/brightness-pane":"widget","colorselector/brightness-handle":"widget","app-header":{style:function(a){return{font:"headline",textColor:"text-selected",backgroundColor:"background-selected-dark",padding:[8,12]}}},"app-header-label":{style:function(a){return{paddingTop:5}}}}});qx.Class.define("qx.theme.simple.Image",{extend:qx.core.Object,statics:{URLS:{blank:"qx/static/blank.gif","checkbox-checked":"decoration/checkbox/checked.png","checkbox-undetermined":"decoration/checkbox/undetermined.png","window-minimize":"decoration/window/minimize.gif","window-maximize":"decoration/window/maximize.gif","window-restore":"decoration/window/restore.gif","window-close":"decoration/window/close.gif","cursor-copy":"decoration/cursors/copy.gif","cursor-move":"decoration/cursors/move.gif","cursor-alias":"decoration/cursors/alias.gif","cursor-nodrop":"decoration/cursors/nodrop.gif","arrow-right":"decoration/arrows/right.gif","arrow-left":"decoration/arrows/left.gif","arrow-up":"decoration/arrows/up.gif","arrow-down":"decoration/arrows/down.gif","arrow-forward":"decoration/arrows/forward.gif","arrow-rewind":"decoration/arrows/rewind.gif","arrow-down-small":"decoration/arrows/down-small.gif","arrow-up-small":"decoration/arrows/up-small.gif","arrow-up-invert":"decoration/arrows/up-invert.gif","arrow-down-invert":"decoration/arrows/down-invert.gif","arrow-right-invert":"decoration/arrows/right-invert.gif","knob-horizontal":"decoration/splitpane/knob-horizontal.png","knob-vertical":"decoration/splitpane/knob-vertical.png","tree-minus":"decoration/tree/minus.gif","tree-plus":"decoration/tree/plus.gif","select-column-order":"decoration/table/select-column-order.png","table-ascending":"decoration/table/ascending.png","table-descending":"decoration/table/descending.png","treevirtual-line":"decoration/treevirtual/line.gif","treevirtual-minus-only":"decoration/treevirtual/only_minus.gif","treevirtual-plus-only":"decoration/treevirtual/only_plus.gif","treevirtual-minus-start":"decoration/treevirtual/start_minus.gif","treevirtual-plus-start":"decoration/treevirtual/start_plus.gif","treevirtual-minus-end":"decoration/treevirtual/end_minus.gif","treevirtual-plus-end":"decoration/treevirtual/end_plus.gif","treevirtual-minus-cross":"decoration/treevirtual/cross_minus.gif","treevirtual-plus-cross":"decoration/treevirtual/cross_plus.gif","treevirtual-end":"decoration/treevirtual/end.gif","treevirtual-cross":"decoration/treevirtual/cross.gif","menu-checkbox":"decoration/menu/checkbox.gif","menu-checkbox-invert":"decoration/menu/checkbox-invert.gif","menu-radiobutton-invert":"decoration/menu/radiobutton-invert.gif","menu-radiobutton":"decoration/menu/radiobutton.gif","tabview-close":"decoration/tabview/close.gif"}}});qx.Theme.define("qx.theme.simple.Color",{colors:{background:"white","dark-blue":"#5685D6","light-background":"#E0ECFF","background-selected":"#6694E3","background-selected-dark":"#5685D6","background-disabled":"#F7F7F7","background-disabled-checked":"#BBBBBB","background-pane":"#FAFBFE","tabview-unselected":"#1866B5","tabview-button-border":"#134983",link:"#24B","scrollbar-bright":"#F1F1F1","scrollbar-dark":"#EBEBEB",button:"#E8F0E3","button-border":"#BBB","button-border-hovered":"#939393",invalid:"#FF0000","button-box-bright":"#F9F9F9","button-box-dark":"#E3E3E3","button-box-bright-pressed":"#DDDDDD","button-box-dark-pressed":"#F5F5F5","border-lead":"#888888","window-border":"#2E3A46","window-border-inner":"#9DCBFE","white-box-border":"#BCBCBC",shadow:"#666666","border-main":"#6694E3","border-light":"#B7B7B7","border-light-shadow":"#686868","border-separator":"#808080",text:"black","text-disabled":"#A7A6AA","text-selected":"white","text-placeholder":"#CBC8CD",tooltip:"#FFFFE1","tooltip-text":"black","table-header":[242,242,242],"table-focus-indicator":[179,217,255],"table-header-cell":[235,234,219],"table-row-background-focused-selected":[90,138,211],"table-row-background-focused":[221,238,255],"table-row-background-selected":[51,94,168],"table-row-background-even":"white","table-row-background-odd":"white","table-row-selected":[255,255,255],"table-row":[0,0,0],"table-row-line":"#EEE","table-column-line":"#EEE","progressive-table-header":"#AAAAAA","progressive-table-row-background-even":[250,248,243],"progressive-table-row-background-odd":[255,255,255],"progressive-progressbar-background":"gray","progressive-progressbar-indicator-done":"#CCCCCC","progressive-progressbar-indicator-undone":"white","progressive-progressbar-percent-background":"gray","progressive-progressbar-percent-text":"white"}});qx.Mixin.define("qx.dev.unit.MMock",{construct:function(){var a=this.__getSinon();a.assert.expose(this,{includeFail:false});this.__sandbox=a.sandbox},members:{__sandbox:null,__fakeXhr:null,__getSinon:function(){return qx.dev.unit.Sinon.getSinon()},spy:function(a,b){return this.__sandbox.spy.apply(this.__sandbox,arguments)},stub:function(a,b){return this.__sandbox.stub.apply(this.__sandbox,arguments)},mock:function(b){var a=this.__getSinon();return a.mock.apply(a,arguments)},useFakeXMLHttpRequest:function(){return this.__fakeXhr=this.__sandbox.useFakeXMLHttpRequest()},getRequests:function(){return this.__fakeXhr.requests},useFakeServer:function(){return this.__fakeXhr=this.__sandbox.useFakeServer()},getServer:function(){return this.__sandbox.server},getSandbox:function(){return this.__sandbox}}});qx.Class.define("qx.ui.virtual.form.ListController",{extend:qx.core.Object,construct:function(a,b){this.base(arguments);this.__lookupTable=[];this.setSelection(new qx.data.Array());if(a!=null){this.setModel(a)}if(b!=null){this.setTarget(b)}},properties:{target:{check:"qx.ui.virtual.form.List",event:"changeTarget",nullable:true,init:null,apply:"_applyTarget"},model:{check:"qx.data.IListData",event:"changeModel",nullable:true,init:null,apply:"_applyModel"},selection:{check:"qx.data.IListData",event:"changeSelection",apply:"_applySelection"},delegate:{apply:"_applyDelegate",event:"changeDelegate",init:null,nullable:true}},members:{__changeLengthListenerId:null,__changeListenerId:null,__changeBubbleListenerId:null,__changeSelectionListenerId:null,__changeSelectionModelListenerId:null,__changeSelectionLengthModelListenerId:null,__lookupTable:null,_validDelegates:["sorter","filter"],_getRowData:function(b){var a=this.getModel();return a?a.getItem(this.__lookup(b)):null},_getModelRow:function(a){return this.getModel().indexOf(a)},getRowCount:function(){return this.__lookupTable.length},update:function(){this.__buildUpLookupTable();this._syncViewSelectionToModel()},__buildUpLookupTable:function(){var a=this.getModel();if(a==null){return}this.__lookupTable=[];this._runDelegateFilter(a);this._runDelegateSorter(a);if(this.getTarget()!=null){this._syncRowCount()}},_runDelegateSorter:function(a){if(!this._containsDelegateMethod(this.getDelegate(),"sorter")||qx.lang.Type.isObject(a)){return}if(this.__lookupTable.length==0){return}var b=this._getDelegate("sorter");if(b!=null){this.__lookupTable.sort(function(d,c){return b(a.getItem(d),a.getItem(c))})}},_runDelegateFilter:function(b){if(typeof b!=="object"){return}var d=this._getDelegate("filter");for(var c=0,a=b.length;c<a;++c){if(d==null||d(b.getItem(c))){this.__lookupTable.push(c)}}},_containsDelegateMethod:function(d,c){var b=qx.lang.Type;if(b.isObject(d)){if(b.isString(c)){return b.isFunction(d[c])}else{for(var a in this._validDelegates){if(b.isFunction(d[a])){return true}}}}return false},_getDelegate:function(b){var a=this.getDelegate();if(this._containsDelegateMethod(a,b)){return a[b]}return null},__lookup:function(a){return this.__lookupTable[a]},_applyDelegate:function(b,a){if(this.getTarget()==null||this.getModel()==null){return}if(this._containsDelegateMethod(b)){this.__buildUpLookupTable()}},_applyTarget:function(b,a){if(b!=null){b.setDelegate(this);this.__changeSelectionListenerId=b.getSelectionManager().addListener("changeSelection",this._onChangeSelectionView,this)}if(a!=null){a.setDelegate(null);a.getSelectionManager().removeListenerById(this.__changeSelectionListenerId)}if(this.getModel()==null){return}this.__buildUpLookupTable();this._syncRowCount()},_applyModel:function(b,a){if(a!=null){a.removeListenerById(this.__changeLengthListenerId);a.removeListenerById(this.__changeListenerId);a.removeListenerById(this.__changeBubbleListenerId)}if(b!=null){this.__buildUpLookupTable();this.__changeLengthListenerId=b.addListener("changeLength",this._onChangeLengthModel,this);this.__changeListenerId=b.addListener("change",this._onChangeModel,this);this.__changeBubbleListenerId=b.addListener("changeBubble",this._onChangeBubbleModel,this)}if(this.getTarget()!=null){this._syncRowCount()}},_applySelection:function(b,a){if(b!=null){this.__changeSelectionModelListenerId=b.addListener("change",this._onChangeSelectionModel,this);this.__changeSelectionLengthModelListenerId=b.addListener("changeLength",this._onChangeSelectionModel,this);this._syncModelSelectionToView()}if(a!=null){a.removeListenerById(this.__changeSelectionModelListenerId);a.removeListenerById(this.__changeSelectionLengthModelListenerId)}},_onChangeSelectionView:function(a){this._syncViewSelectionToModel()},_onChangeSelectionModel:function(a){this._syncModelSelectionToView()},_onChangeLengthModel:function(a){this.__buildUpLookupTable();this._syncRowCount()},_onChangeModel:function(b){var a=this.getTarget();if(a!=null){this.__buildUpLookupTable();a.update()}},_onChangeBubbleModel:function(b){var a=this.getTarget();if(a!=null){this.__buildUpLookupTable();a.update()}},_syncViewSelectionToModel:function(){if(this._ignoreSelectionChange){return}var d=this.getTarget();if(!d){this.getSelection().removeAll();return}var e=d.getSelectionManager().getSelection();var c=[];for(var b=0;b<e.length;b++){var a=this._getRowData(e[b]);c.push(a)}c.unshift(this.getSelection().length);c.unshift(0);this._ignoreSelectionChange=true;this.getSelection().splice.apply(this.getSelection(),c);this._ignoreSelectionChange=false},_syncModelSelectionToView:function(){if(this._ignoreSelectionChange){return}var d=this.getTarget();if(!d){return}this._ignoreSelectionChange=true;var c=this.getSelection();var b=[];for(var a=c.length;a>=0;a--){var e=this._getModelRow(c.getItem(a));if(e!==-1){b.push(e)}else{c.removeAt(a)}}d.getSelectionManager().replaceSelection(b);this._ignoreSelectionChange=false},_syncRowCount:function(){var a=this.getRowCount();this.getTarget().setRowCount(a)},getCellData:function(a){return this._getRowData(a)||""}},destruct:function(){this.__lookupTable=null}});qx.Class.define("qx.ui.form.renderer.Double",{extend:qx.ui.form.renderer.AbstractRenderer,construct:function(b){var a=new qx.ui.layout.Grid();a.setSpacing(6);a.setColumnAlign(0,"left","top");a.setColumnAlign(1,"left","top");a.setColumnAlign(2,"left","top");a.setColumnAlign(3,"left","top");this._setLayout(a);this.base(arguments,b)},members:{_row:0,_buttonRow:null,addItems:function(a,e,f){if(f!=null){this._add(this._createHeader(f),{row:this._row,column:0,colSpan:4});this._row++}for(var c=0;c<a.length;c++){var b=this._createLabel(e[c],a[c]);this._add(b,{row:this._row,column:(c*2)%4});var d=a[c];b.setBuddy(d);this._connectVisibility(d,b);this._add(d,{row:this._row,column:((c*2)%4)+1});if(c%2==1){this._row++}if(qx.core.Environment.get("qx.dynlocale")){this._names.push({name:e[c],label:b,item:a[c]})}}if(c%2==1){this._row++}},addButton:function(b){if(this._buttonRow==null){this._buttonRow=new qx.ui.container.Composite();this._buttonRow.setMarginTop(5);var a=new qx.ui.layout.HBox();a.setAlignX("right");a.setSpacing(5);this._buttonRow.setLayout(a);this._add(this._buttonRow,{row:this._row,column:0,colSpan:4});this._row++}this._buttonRow.add(b)},getLayout:function(){return this._getLayout()},_createLabel:function(b,c){var a=new qx.ui.basic.Label(this._createLabelText(b,c));a.setRich(true);return a},_createHeader:function(a){var b=new qx.ui.basic.Label(a);b.setFont("bold");if(this._row!=0){b.setMarginTop(10)}return b}},destruct:function(){if(this._buttonRow){this._buttonRow.removeAll();this._disposeObjects("_buttonRow")}}});qx.Class.define("qx.ui.table.model.Remote",{extend:qx.ui.table.model.Abstract,construct:function(){this.base(arguments);this.__sortColumnIndex=-1;this.__sortAscending=true;this.__rowCount=-1;this.__lruCounter=0;this.__firstLoadingBlock=-1;this.__firstRowToLoad=-1;this.__lastRowToLoad=-1;this.__ignoreCurrentRequest=false;this.__rowBlockCache={};this.__rowBlockCount=0;this.__sortableColArr=null;this.__editableColArr=null},properties:{blockSize:{check:"Integer",init:50},maxCachedBlockCount:{check:"Integer",init:15},clearCacheOnRemove:{check:"Boolean",init:false},blockConcurrentLoadRowCount:{check:"Boolean",init:true}},members:{__rowCount:null,__ignoreCurrentRequest:null,__lruCounter:null,__firstLoadingBlock:null,__firstRowToLoad:null,__lastRowToLoad:null,__rowBlockCache:null,__rowBlockCount:null,__sortColumnIndex:null,__sortAscending:null,__editableColArr:null,__sortableColArr:null,__loadRowCountRequestRunning:false,_getIgnoreCurrentRequest:function(){return this.__ignoreCurrentRequest},getRowCount:function(){if(this.__rowCount==-1){if(!this.__loadRowCountRequestRunning||!this.getBlockConcurrentLoadRowCount()){this.__loadRowCountRequestRunning=true;this._loadRowCount()}return(this.__rowCount==-1)?0:this.__rowCount}else{return this.__rowCount}},_loadRowCount:function(){throw new Error("_loadRowCount is abstract")},_onRowCountLoaded:function(a){if(this.getBlockConcurrentLoadRowCount()){this.__loadRowCountRequestRunning=false}if(a==null||a<0){a=0}this.__rowCount=Number(a);var b={firstRow:0,lastRow:a-1,firstColumn:0,lastColumn:this.getColumnCount()-1};this.fireDataEvent("dataChanged",b)},reloadData:function(){this.clearCache();if(this.__firstLoadingBlock!=-1){var a=this._cancelCurrentRequest();if(a){this.__firstLoadingBlock=-1;this.__ignoreCurrentRequest=false}else{this.__ignoreCurrentRequest=true}}this.__firstRowToLoad=-1;this.__lastRowToLoad=-1;this.__loadRowCountRequestRunning=true;this._loadRowCount()},clearCache:function(){this.__rowBlockCache={};this.__rowBlockCount=0},getCacheContent:function(){return{sortColumnIndex:this.__sortColumnIndex,sortAscending:this.__sortAscending,rowCount:this.__rowCount,lruCounter:this.__lruCounter,rowBlockCache:this.__rowBlockCache,rowBlockCount:this.__rowBlockCount}},restoreCacheContent:function(a){if(this.__firstLoadingBlock!=-1){var b=this._cancelCurrentRequest();if(b){this.__firstLoadingBlock=-1;this.__ignoreCurrentRequest=false}else{this.__ignoreCurrentRequest=true}}this.__sortColumnIndex=a.sortColumnIndex;this.__sortAscending=a.sortAscending;this.__rowCount=a.rowCount;this.__lruCounter=a.lruCounter;this.__rowBlockCache=a.rowBlockCache;this.__rowBlockCount=a.rowBlockCount;var c={firstRow:0,lastRow:this.__rowCount-1,firstColumn:0,lastColumn:this.getColumnCount()-1};this.fireDataEvent("dataChanged",c)},_cancelCurrentRequest:function(){return false},iterateCachedRows:function(h,f){var j=this.getBlockSize();var k=Math.ceil(this.getRowCount()/j);for(var d=0;d<=k;d++){var b=this.__rowBlockCache[d];if(b!=null){var i=d*j;var e=b.rowDataArr;for(var a=0;a<e.length;a++){var c=e[a];var g=h.call(f,i+a,c);if(g!=null){e[a]=g}}}}},prefetchRows:function(i,b){if(this.__firstLoadingBlock==-1){var f=this.getBlockSize();var c=Math.ceil(this.__rowCount/f);var h=parseInt(i/f,10)-1;if(h<0){h=0}var d=parseInt(b/f,10)+1;if(d>=c){d=c-1}var a=-1;var g=-1;for(var e=h;e<=d;e++){if(this.__rowBlockCache[e]==null||this.__rowBlockCache[e].isDirty){if(a==-1){a=e}g=e}}if(a!=-1){this.__firstRowToLoad=-1;this.__lastRowToLoad=-1;this.__firstLoadingBlock=a;this._loadRowData(a*f,(g+1)*f-1)}}else{this.__firstRowToLoad=i;this.__lastRowToLoad=b}},_loadRowData:function(b,a){throw new Error("_loadRowCount is abstract")},_onRowDataLoaded:function(b){if(b!=null&&!this.__ignoreCurrentRequest){var f=this.getBlockSize();var h=Math.ceil(b.length/f);if(h==1){this._setRowBlockData(this.__firstLoadingBlock,b)}else{for(var d=0;d<h;d++){var e=d*f;var g=[];var a=Math.min(f,b.length-e);for(var j=0;j<a;j++){g.push(b[e+j])}this._setRowBlockData(this.__firstLoadingBlock+d,g)}}var c={firstRow:this.__firstLoadingBlock*f,lastRow:(this.__firstLoadingBlock+h+1)*f-1,firstColumn:0,lastColumn:this.getColumnCount()-1};this.fireDataEvent("dataChanged",c)}this.__firstLoadingBlock=-1;this.__ignoreCurrentRequest=false;if(this.__firstRowToLoad!=-1){this.prefetchRows(this.__firstRowToLoad,this.__lastRowToLoad)}},_setRowBlockData:function(e,d){if(this.__rowBlockCache[e]==null){this.__rowBlockCount++;while(this.__rowBlockCount>this.getMaxCachedBlockCount()){var c;var f=this.__lruCounter;for(var a in this.__rowBlockCache){var b=this.__rowBlockCache[a].lru;if(b<f&&a>1){f=b;c=a}}delete this.__rowBlockCache[c];this.__rowBlockCount--}}this.__rowBlockCache[e]={lru:++this.__lruCounter,rowDataArr:d}},removeRow:function(h){if(this.getClearCacheOnRemove()){this.clearCache();var d={firstRow:0,lastRow:this.getRowCount()-1,firstColumn:0,lastColumn:this.getColumnCount()-1};this.fireDataEvent("dataChanged",d)}else{var f=this.getBlockSize();var i=Math.ceil(this.getRowCount()/f);var g=parseInt(h/f,10);for(var c=g;c<=i;c++){var a=this.__rowBlockCache[c];if(a!=null){var b=0;if(c==g){b=h-c*f}a.rowDataArr.splice(b,1);if(c==i-1){if(a.rowDataArr.length==0){delete this.__rowBlockCache[c]}}else{var e=this.__rowBlockCache[c+1];if(e!=null){a.rowDataArr.push(e.rowDataArr[0])}else{a.isDirty=true}}}}if(this.__rowCount!=-1){this.__rowCount--}if(this.hasListener("dataChanged")){var d={firstRow:h,lastRow:this.getRowCount()-1,firstColumn:0,lastColumn:this.getColumnCount()-1};this.fireDataEvent("dataChanged",d)}}},getRowData:function(e){var a=this.getBlockSize();var d=parseInt(e/a,10);var c=this.__rowBlockCache[d];if(c==null){return null}else{var b=c.rowDataArr[e-(d*a)];if(c.lru!=this.__lruCounter){c.lru=++this.__lruCounter}return b}},getValue:function(a,d){var c=this.getRowData(d);if(c==null){return null}else{var b=this.getColumnId(a);return c[b]}},setValue:function(a,f,e){var d=this.getRowData(f);if(d==null){return}else{var c=this.getColumnId(a);d[c]=e;if(this.hasListener("dataChanged")){var b={firstRow:f,lastRow:f,firstColumn:a,lastColumn:a};this.fireDataEvent("dataChanged",b)}}},setEditable:function(b){this.__editableColArr=[];for(var a=0;a<this.getColumnCount();a++){this.__editableColArr[a]=b}this.fireEvent("metaDataChanged")},setColumnEditable:function(b,a){if(a!=this.isColumnEditable(b)){if(this.__editableColArr==null){this.__editableColArr=[]}this.__editableColArr[b]=a;this.fireEvent("metaDataChanged")}},isColumnEditable:function(a){return(this.__editableColArr?(this.__editableColArr[a]==true):false)},setColumnSortable:function(a,b){if(b!=this.isColumnSortable(a)){if(this.__sortableColArr==null){this.__sortableColArr=[]}this.__sortableColArr[a]=b;this.fireEvent("metaDataChanged")}},isColumnSortable:function(a){return(this.__sortableColArr?(this.__sortableColArr[a]!==false):true)},sortByColumn:function(b,a){if(this.__sortColumnIndex!=b||this.__sortAscending!=a){this.__sortColumnIndex=b;this.__sortAscending=a;this.clearCache();this.fireEvent("metaDataChanged")}},getSortColumnIndex:function(){return this.__sortColumnIndex},isSortAscending:function(){return this.__sortAscending},setSortColumnIndexWithoutSortingData:function(a){this.__sortColumnIndex=a},setSortAscendingWithoutSortingData:function(a){this.__sortAscending=a}},destruct:function(){this.__sortableColArr=this.__editableColArr=this.__rowBlockCache=null}});qx.Class.define("qx.fx.effect.core.Style",{extend:qx.fx.Base,construct:function(a,c,b){if(c){if(qx.core.Environment.get("qx.debug")){this.assertString(c)}this.__cssAttribute=c}else{throw new Error("A CSS attribute must be specified!")}if(b){if(qx.core.Environment.get("qx.debug")){this.assertFunction(b)}this.__func=b}this.base(arguments,a)},members:{__cssAttribute:null,__func:null,update:function(a){this.base(arguments);var b=this.__func?this.__func(a):a;qx.bom.element.Style.set(this._getElement(),this.__cssAttribute,b)}}});qx.Class.define("qx.ui.form.ToggleButton",{extend:qx.ui.basic.Atom,include:[qx.ui.core.MExecutable],implement:[qx.ui.form.IBooleanForm,qx.ui.form.IExecutable,qx.ui.form.IRadioItem],construct:function(a,b){this.base(arguments,a,b);this.addListener("mouseover",this._onMouseOver);this.addListener("mouseout",this._onMouseOut);this.addListener("mousedown",this._onMouseDown);this.addListener("mouseup",this._onMouseUp);this.addListener("keydown",this._onKeyDown);this.addListener("keyup",this._onKeyUp);this.addListener("execute",this._onExecute,this)},properties:{appearance:{refine:true,init:"button"},focusable:{refine:true,init:true},value:{check:"Boolean",nullable:true,event:"changeValue",apply:"_applyValue",init:false},group:{check:"qx.ui.form.RadioGroup",nullable:true,apply:"_applyGroup"},triState:{check:"Boolean",apply:"_applyTriState",nullable:true,init:null}},members:{_applyGroup:function(b,a){if(a){a.remove(this)}if(b){b.add(this)}},_applyValue:function(b,a){b?this.addState("checked"):this.removeState("checked");if(this.isTriState()){if(b===null){this.addState("undetermined")}else{if(a===null){this.removeState("undetermined")}}}},_applyTriState:function(b,a){this._applyValue(this.getValue())},_onExecute:function(a){this.toggleValue()},_onMouseOver:function(a){if(a.getTarget()!==this){return}this.addState("hovered");if(this.hasState("abandoned")){this.removeState("abandoned");this.addState("pressed")}},_onMouseOut:function(a){if(a.getTarget()!==this){return}this.removeState("hovered");if(this.hasState("pressed")){if(!this.getValue()){this.removeState("pressed")}this.addState("abandoned")}},_onMouseDown:function(a){if(!a.isLeftPressed()){return}this.capture();this.removeState("abandoned");this.addState("pressed");a.stopPropagation()},_onMouseUp:function(a){this.releaseCapture();if(this.hasState("abandoned")){this.removeState("abandoned")}else{if(this.hasState("pressed")){this.execute()}}this.removeState("pressed");a.stopPropagation()},_onKeyDown:function(a){switch(a.getKeyIdentifier()){case"Enter":case"Space":this.removeState("abandoned");this.addState("pressed");a.stopPropagation()}},_onKeyUp:function(a){if(!this.hasState("pressed")){return}switch(a.getKeyIdentifier()){case"Enter":case"Space":this.removeState("abandoned");this.execute();this.removeState("pressed");a.stopPropagation()}}}});qx.Class.define("qx.ui.form.CheckBox",{extend:qx.ui.form.ToggleButton,include:[qx.ui.form.MForm,qx.ui.form.MModelProperty],implement:[qx.ui.form.IForm,qx.ui.form.IModel],construct:function(a){if(qx.core.Environment.get("qx.debug")){this.assertArgumentsCount(arguments,0,1)}this.base(arguments,a);this.setValue(false)},properties:{appearance:{refine:true,init:"checkbox"},allowGrowX:{refine:true,init:false}},members:{_forwardStates:{invalid:true,focused:true,undetermined:true,checked:true,hovered:true}}});qx.Class.define("qx.ui.embed.Html",{extend:qx.ui.core.Widget,include:[qx.ui.core.MNativeOverflow],construct:function(a){this.base(arguments);if(a!=null){this.setHtml(a)}},properties:{html:{check:"String",apply:"_applyHtml",event:"changeHtml",nullable:true},cssClass:{check:"String",init:"",apply:"_applyCssClass"},selectable:{refine:true,init:true},focusable:{refine:true,init:true}},members:{getFocusElement:function(){return this.getContentElement()},_applyHtml:function(c,a){var b=this.getContentElement();b.setAttribute("html",c||"");b.setStyles({padding:"0px",border:"none"})},_applyCssClass:function(b,a){this.getContentElement().setAttribute("class",b)},_applySelectable:function(a){this.base(arguments,a);if((qx.core.Environment.get("engine.name")=="webkit")){this.getContainerElement().setStyle("userSelect",a?"text":"none");this.getContentElement().setStyle("userSelect",a?"text":"none")}},_applyFont:function(c,a){var b=c?qx.theme.manager.Font.getInstance().resolve(c).getStyles():qx.bom.Font.getDefaultStyles();this.getContentElement().setStyles(b)},_applyTextColor:function(b,a){if(b){this.getContentElement().setStyle("color",qx.theme.manager.Color.getInstance().resolve(b))}else{this.getContentElement().removeStyle("color")}}}});qx.Class.define("qx.ui.layout.Flow",{extend:qx.ui.layout.Abstract,construct:function(c,a,b){this.base(arguments);if(c){this.setSpacingX(c)}if(a){this.setSpacingY(a)}if(b){this.setAlignX(b)}},properties:{alignX:{check:["left","center","right"],init:"left",apply:"_applyLayoutChange"},alignY:{check:["top","middle","bottom"],init:"top",apply:"_applyLayoutChange"},spacingX:{check:"Integer",init:0,apply:"_applyLayoutChange"},spacingY:{check:"Integer",init:0,apply:"_applyLayoutChange"},reversed:{check:"Boolean",init:false,apply:"_applyLayoutChange"}},members:{verifyLayoutProperty:qx.core.Environment.select("qx.debug",{"true":function(b,a,c){this.assertEquals("lineBreak",a,"The property '"+a+"' is not supported by the flow layout!")},"false":null}),connectToWidget:function(a){this.base(arguments,a);a.setAllowShrinkY(false)},renderLayout:function(f,b){var d=this._getLayoutChildren();if(this.getReversed()){d=d.concat().reverse()}var e=new qx.ui.layout.LineSizeIterator(d,this.getSpacingX());var c=0;while(e.hasMoreLines()){var a=e.computeNextLine(f);this.__renderLine(a,c,f);c+=a.height+this.getSpacingY()}},__renderLine:function(l,j,g){var f=qx.ui.layout.Util;var c=0;if(this.getAlignX()!="left"){c=g-l.width;if(this.getAlignX()=="center"){c=Math.round(c/2)}}for(var e=0;e<l.children.length;e++){var b=l.children[e];var k=b.getSizeHint();var a=b.getMarginTop();var d=b.getMarginBottom();var h=f.computeVerticalAlignOffset(b.getAlignY()||this.getAlignY(),a+k.height+d,l.height,a,d);b.renderLayout(c+l.gapsBefore[e],j+h,k.width,k.height);c+=l.gapsBefore[e]+k.width}},_computeSizeHint:function(){return this.__computeSize(Infinity)},hasHeightForWidth:function(){return true},getHeightForWidth:function(a){return this.__computeSize(a).height},__computeSize:function(f){var e=new qx.ui.layout.LineSizeIterator(this._getLayoutChildren(),this.getSpacingX());var a=0;var d=0;var c=0;while(e.hasMoreLines()){var b=e.computeNextLine(f);c+=1;d=Math.max(d,b.width);a+=b.height}return{width:d,height:a+this.getSpacingY()*(c-1)}}}});qx.Class.define("qx.ui.progressive.renderer.table.Row",{extend:qx.ui.progressive.renderer.Abstract,construct:function(b){this.base(arguments);this.__columnWidths=b;this.__renderers={};this.__defaultCellRenderer=new qx.ui.progressive.renderer.table.cell.Default();this.__progressive=null;this.__colors={};var a=qx.theme.manager.Color.getInstance();this.__colors.bgcol=[];this.__colors.bgcol[0]=a.resolve("progressive-table-row-background-even");this.__colors.bgcol[1]=a.resolve("progressive-table-row-background-odd");this.__layout=new qx.ui.layout.HBox();this.__layout.connectToWidget(this)},statics:{__clazz:null,__padding:6,__tableCellStyleSheet:"  position: absolute;  top: 0px;  height: 100%;  overflow:hidden;  text-overflow:ellipsis;  -o-text-overflow: ellipsis;  white-space:nowrap;  border-right:1px solid #f2f2f2;  border-bottom:1px solid #eeeeee;  padding : 0px 6px 0px 6px;  cursor:default;  font-size: 11px;  font-family: 'Segoe UI', Corbel, Calibri, Tahoma, 'Lucida Sans Unicode', sans-serif;"+((qx.core.Environment.get("engine.name")=="mshtml")?"":";-moz-user-select:none;")},properties:{defaultRowHeight:{init:16}},members:{__progressive:null,__name:null,__hash:null,__columnWidths:null,__renderers:null,__defaultCellRenderer:null,__colors:null,__layout:null,join:function(e,a){if(this.__progressive){throw new Error("Renderer is already joined to a Progressive.")}this.__progressive=e;this.__name=a;var f=qx.ui.progressive.renderer.table.Row;if(!f.__clazz){f.__clazz={}}var g=e.toHashCode();if(!f.__clazz[g]){f.__clazz[g]={rowstylesheet:null,cellstylesheet:[]};var c=".qx-progressive-"+g+"-row {  width : 100%;}";f.__clazz[g].rowstylesheet=qx.bom.Stylesheet.createElement(c);var d=this.__columnWidths.getData();for(var b=0;b<d.length;b++){var c=".qx-progressive-"+g+"-col-"+b+" {"+f.__tableCellStyleSheet+"}";f.__clazz[g].cellstylesheet[b]=qx.bom.Stylesheet.createElement(c)}this.__hash=g;var h=e.getStructure().getPane();h.addListener("resize",this._resizeColumns,this)}},addRenderer:function(a,c){var b=this.__columnWidths.getData();if(a<0||a>=b.length){throw new Error("Column "+a+" out of range (max: "+(b.length-1)+")")}this.__renderers[a]=c},removeRenderer:function(a){var b=this.__columnWidths.getData();if(a<0||a>=b.length){throw new Error("Column "+a+" out of range (max: "+(b.length-1)+")")}if(!this.__renderers[a]){throw new Error("No existing renderer for column "+a)}delete this.__renderers[a]},render:function(c,j){var h=j.data;var l=[];var f;var n;var o=0;if(c.getRendererData()[this.__name].end===undefined){c.getRendererData()[this.__name]={end:0,start:1,rows:0,totalHeight:0}}var b=document.createElement("div");for(var g=0;g<h.length;g++){var a="qx-progressive-"+this.__hash+"-col-"+g;n=this.__renderers[g]||this.__defaultCellRenderer;f={state:c,rowDiv:b,stylesheet:a,element:j,dataIndex:g,cellData:h[g],height:o};l.push(n.render(f));if(f.height>o){o=f.height}}o=(o>0?o:this.getDefaultRowHeight());var k=c.getRendererData()[this.__name];k.totalHeight+=o;b.style.position="relative";b.style.height=o+"px";b.className="qx-progressive-"+this.__hash+"-row";b.innerHTML=l.join("");switch(j.location){case"end":var m=k.end||0;b.style.backgroundColor=this.__colors.bgcol[m];k.end=(m==0?1:0);c.getPane().getContentElement().getDomElement().appendChild(b);break;case"start":var e=c.getPane().getContentElement().getDomElement();var d=e.childNodes;if(d.length>0){var m=k.start;b.style.backgroundColor=this.__colors.bgcol[m];k.start=(m==0?1:0);e.insertBefore(b,d[0]);break}else{e.appendChild(b)}break;default:throw new Error("Invalid location: "+j.location)}++k.rows},getLayoutChildren:function(){return this.__columnWidths.getData()},_resizeColumns:function(k){var c=this.__progressive.getStructure().getPane();var b=c.getBounds().width-qx.bom.element.Overflow.getScrollbarWidth();var a=".qx-progressive-"+this.__hash+"-row";var l=qx.ui.progressive.renderer.table.Row;qx.bom.Stylesheet.removeRule(l.__clazz[this.__hash].rowstylesheet,a);var n="width: "+b+"px;";qx.bom.Stylesheet.addRule(l.__clazz[this.__hash].rowstylesheet,a,n);this.__layout.renderLayout(b,100);var h=this.__columnWidths.getData();for(var g=0,d=0;g<h.length;g++,d+=b){var a=".qx-progressive-"+this.__hash+"-col-"+g;var l=qx.ui.progressive.renderer.table.Row;qx.bom.Stylesheet.removeRule(l.__clazz[this.__hash].cellstylesheet[g],a);b=h[g].getComputedWidth();if(qx.core.Environment.get("qx.debug")){if(qx.core.Environment.get("qx.tableResizeDebug")){this.debug("col "+g+": width="+b)}}var o;if(qx.core.Environment.get("css.boxmodel")=="content"){o=qx.ui.progressive.renderer.table.Row.__padding*2}else{o=-1}var f=(b-o)+"px;";var m="0px "+qx.ui.progressive.renderer.table.Row.__padding+"px 0px "+qx.ui.progressive.renderer.table.Row.__padding+"px;";var j=d+"px;";var n=l.__tableCellStyleSheet+"width: "+f+"left: "+j+"padding: "+m;qx.bom.Stylesheet.addRule(l.__clazz[this.__hash].cellstylesheet[g],a,n)}}},destruct:function(){var a;for(a in this.__renderers){this.__renderers[a]=null}var e=qx.ui.progressive.renderer.table.Row;var g=this.__progressive.toHashCode();if(e.__clazz&&e.__clazz[g]){if(e.__clazz[g].rowstylesheet){var c=".qx-progressive-"+this.__hash+"-row";var e=qx.ui.progressive.renderer.table.Row;qx.bom.Stylesheet.removeRule(e.__clazz[this.__hash].rowstylesheet,c)}if(e.__clazz[g].cellstylesheet){for(var b=e.__clazz[g].cellstylesheet.length-1;b>=0;b--){var c=".qx-progressive-"+this.__hash+"-col-"+b;var f=e.__clazz[this.__hash].cellstylesheet[b];var e=qx.ui.progressive.renderer.table.Row;qx.bom.Stylesheet.removeRule(f,c)}}}if(this.__progressive&&this.__progressive.getRendererData){var d=this.__progressive.getRendererData();if(d&&d[this.__name]&&d[this.__name].end!==undefined){d[this.__name]=null}}this.__colors=this.__renderers=this.__progressive=this.__columnWidths=null;this._disposeObjects("__layout","__defaultCellRenderer","__columnData")}});qx.Class.define("qx.ui.progressive.renderer.table.cell.Default",{extend:qx.ui.progressive.renderer.table.cell.Abstract,construct:function(){this.base(arguments)},members:{_getContentHtml:function(a){return qx.bom.String.escape(this._formatValue(a.cellData))},_formatValue:function(c){var b;if(c==null){return""}if(typeof c=="string"){return c}else{if(typeof c=="number"){if(!qx.ui.progressive.renderer.table.Row._numberFormat){var a=new qx.util.format.NumberFormat();a.setMaximumFractionDigits(2);qx.ui.progressive.renderer.table.Row._numberFormat=a}b=qx.ui.progressive.renderer.table.Row._numberFormat.format(c)}else{if(c instanceof Date){b=qx.util.format.DateFormat.getDateInstance().format(c)}else{b=c}}}return b}}});qx.Class.define("qx.ui.progressive.Progressive",{extend:qx.ui.container.Composite,construct:function(a){this.base(arguments,new qx.ui.layout.VBox());this.__renderer={};this.set({backgroundColor:"white"});if(!a){a=new qx.ui.progressive.structure.Default()}this.__structure=a;a.applyStructure(this);this.__bInitialRenderComplete=false;this.__bRendering=false;this.__initialNumElements=0},events:{renderStart:"qx.event.type.Data",renderEnd:"qx.event.type.Data",progress:"qx.event.type.Data",progressDetail:"qx.event.type.Data"},properties:{dataModel:{check:"qx.ui.progressive.model.Abstract",apply:"_applyDataModel"},batchSize:{check:"Integer",init:20},flushWidgetQueueAfterBatch:{check:"Boolean",init:false},interElementTimeout:{check:"Integer",init:0}},members:{__renderer:null,__bRendering:null,__t1:null,__initialNumElements:null,__bInitialRenderComplete:null,__structure:null,getStructure:function(){return this.__structure},addRenderer:function(a,b){this.__renderer[a]=b;b.join(this,a)},removeRenderer:function(a){if(!this.__renderer[a]){throw new Error("No existing renderer named "+a)}delete this.__renderer[a]},render:function(){if(this.__bRendering){return}this.__bRendering=true;var a=new qx.ui.progressive.State({progressive:this,model:this.getDataModel(),pane:this.__structure.getPane(),batchSize:this.getBatchSize(),rendererData:this.__createStateRendererData(),userData:{}});this.__t1=new Date();if(this.__bInitialRenderComplete){this.__initialNumElements=a.getModel().getElementCount();this.fireDataEvent("renderStart",{state:a,initial:this.__initialNumElements});this.__renderElementBatch(a)}else{qx.event.Timer.once(function(){this.__initialNumElements=a.getModel().getElementCount();this.fireDataEvent("renderStart",{state:a,initial:this.__initialNumElements});this.__renderElementBatch(a);this.__bInitialRenderComplete=true},this,10)}},_applyDataModel:function(b,a){if(a){a.removeListener("dataAvailable",this.__dataAvailable,this);a.dispose()}b.addListener("dataAvailable",this.__dataAvailable,this)},__renderElementBatch:function(d){var e;var b;var c;for(var a=d.getBatchSize();a>0;a--){e=d.getModel().getNextElement();if(!e){this.debug("Render time: "+(new Date()-this.__t1)+"ms");this.__bRendering=false;this.fireDataEvent("renderEnd",d);d.dispose();return}b=e.element;c=this.__renderer[b.renderer];c.render(d,b);this.fireDataEvent("progressDetail",{initial:this.__initialNumElements,remaining:e.remaining,element:b})}this.fireDataEvent("progress",{initial:this.__initialNumElements,remaining:e.remaining});if(this.getFlushWidgetQueueAfterBatch()){qx.ui.core.queue.Manager.flush()}qx.event.Timer.once(function(){this.__renderElementBatch(d)},this,this.getInterElementTimeout())},__createStateRendererData:function(){var b={};for(var a in this.__renderer){b[a]={}}return b},__dataAvailable:function(a){this.__initialNumElements=a.getData();this.render()}},destruct:function(){for(var a in this.__renderer){this.__renderer[a].dispose()}this.__t1=this.__renderer=this.__structure=null}});qx.Class.define("qx.ui.progressive.structure.Abstract",{type:"abstract",extend:qx.core.Object,construct:function(a){this.base(arguments);if(!a){this.__container=new qx.ui.core.Widget();this.__pane=this.__container}else{this.__container=null;this.__pane=a}this.__pane.getContentElement().setStyle("overflowY","auto")},members:{__container:null,__pane:null,applyStructure:function(a){throw new Error("applyStructure() is abstract")},getPane:function(){return this.__pane}},destruct:function(){if(this.__container){this.__container.dispose()}this.__container=this.__pane=null}});qx.Class.define("qx.ui.progressive.structure.Default",{extend:qx.ui.progressive.structure.Abstract,construct:function(c,b,a){this.base(arguments,a);if(!c){this.__nullHeader=new qx.ui.progressive.headfoot.Null();this.__header=this.__nullHeader}else{this.__nullHeader=null;this.__header=c}if(!b){this.__nullFooter=new qx.ui.progressive.headfoot.Null();this.__footer=this.__nullFooter}else{this.__nullFooter=null;this.__footer=b}},members:{__header:null,__footer:null,__nullHeader:null,__nullFooter:null,applyStructure:function(a){this.__header.join(a);this.__footer.join(a);a.add(this.__header);a.add(this.getPane(),{flex:1});a.add(this.__footer)},getHeader:function(){return this.__header},getFooter:function(){return this.__footer}},destruct:function(){if(this.__nullHeader){this.__nullHeader.dispose();this.__nullHeader=null}if(this.__nullFooter){this.__nullFooter.dispose();this.__nullFooter=null}this.__header=this.__footer=null}});qx.Class.define("qx.ui.progressive.headfoot.Null",{extend:qx.ui.progressive.headfoot.Abstract,construct:function(){this.base(arguments);this.exclude()}});qx.Class.define("qx.ui.progressive.State",{extend:qx.core.Object,construct:function(a){this.base(arguments);this.setProgressive(a.progressive);this.setModel(a.model);this.setPane(a.pane);this.setBatchSize(a.batchSize);this.setRendererData(a.rendererData);this.setUserData(a.userData)},properties:{progressive:{nullable:true},model:{nullable:true},pane:{nullable:true},batchSize:{},rendererData:{},userData:{}},destruct:function(){this.setProgressive(null);this.setModel(null);this.setPane(null)}});qx.Class.define("qx.ui.virtual.layer.HtmlCellSpan",{extend:qx.ui.virtual.layer.HtmlCell,construct:function(b,c,a){this.base(arguments,b);this._spanManager=new qx.ui.virtual.layer.CellSpanManager(c,a)},members:{setCellSpan:function(d,c,b,a){var e=d+"x"+c;this._spanManager.removeCell(e);if(b>1||a>1){this._spanManager.addCell(e,d,c,b,a)}qx.ui.core.queue.Widget.add(this)},__renderCell:function(f,i,d,c,e,a,g){var h=this._cellProvider.getCellProperties(i,d);var b=h.insets||[0,0];f.push("<div ","style='","left:",c,"px;","top:",e,"px;",this._getCellSizeStyle(a,g,b[0],b[1]),h.style||"","' ","class='",h.classes||"","' ",h.attributes||"",">",h.content||"","</div>")},_fullUpdate:function(a,v,d,p){var m=[];var e=this._spanManager.findCellsInWindow(a,v,d.length,p.length);if(e.length>0){var h=this._spanManager.getCellBounds(e,a,v);var s=this._spanManager.computeCellSpanMap(e,a,v,d.length,p.length);for(var t=0,r=e.length;t<r;t++){var b=e[t];var u=h[t];this.__renderCell(m,b.firstRow,b.firstColumn,u.left,u.top,u.width,u.height)}}else{s=[];for(var t=0;t<d.length;t++){s[a+t]=[]}}var f=0;var n=0;var g=a;var c=v;for(var k=0;k<d.length;k++){var f=0;var c=v;var o=d[k];for(var j=0;j<p.length;j++){var q=p[j];if(!s[g][c]){this.__renderCell(m,g,c,f,n,q,o)}c++;f+=q}n+=o;g++}this.getContentElement().setAttribute("html",m.join(""))}},destruct:function(){this._disposeObjects("_spanManager")}});qx.Class.define("qx.ui.tree.FolderOpenButton",{extend:qx.ui.tree.core.FolderOpenButton,construct:function(){this.base(arguments);qx.log.Logger.deprecatedClassWarning(this.constructor,"The class 'qx.ui.tree.FolderOpenButton' is deprecated please use 'qx.ui.tree.core.FolderOpenButton' instead.")}});qx.Class.define("qx.ui.mobile.list.List",{extend:qx.ui.mobile.core.Widget,construct:function(a){this.base(arguments);this.addListener("tap",this._onTap,this);this.__provider=new qx.ui.mobile.list.provider.Provider(this);if(a){this.setDelegate(a)}},events:{changeSelection:"qx.event.type.Data"},properties:{defaultCssClass:{refine:true,init:"list"},delegate:{apply:"_applyDelegate",event:"changeDelegate",init:null,nullable:true},model:{check:"qx.data.Array",apply:"_applyModel",event:"changeModel",nullable:true,init:null},itemCount:{check:"Integer",init:0}},members:{__provider:null,_getTagName:function(){return"ul"},_onTap:function(a){var c=a.getOriginalTarget();var b=-1;if(qx.bom.element.Attribute.get(c,"data-selectable")!="false"&&qx.dom.Element.hasChild(this.getContainerElement(),c)){b=qx.dom.Hierarchy.getElementIndex(c)}if(b!=-1){this.fireDataEvent("changeSelection",b)}},_applyModel:function(b,a){this.setItemCount(b?b.getLength():0);this.__render()},_applyDelegate:function(b,a){this.__provider.setDelegate(b)},clear:function(){this._setHtml("")},__render:function(){this._setHtml("");var e=this.getItemCount();var b=this.getModel();var d=this.getContentElement();for(var a=0;a<e;a++){var c=this.__provider.getItemElement(b.getItem(a),a);d.appendChild(c)}this._domUpdated()}},destruct:function(){this._disposeObjects("__provider")}});qx.Class.define("qx.ui.mobile.list.provider.Provider",{extend:qx.core.Object,properties:{delegate:{event:"changeDelegate",init:null,nullable:true,apply:"_applyDelegate"}},members:{__itemRenderer:null,_setItemRenderer:function(a){this.__itemRenderer=a},_getItemRenderer:function(){return this.__itemRenderer},getItemElement:function(e,f){this.__itemRenderer.reset();this._configureItem(e,f);var a=this.__itemRenderer.getSelectable();var c=this.__itemRenderer.getChildren();for(var b=0,d=c.length;b<d;b++){c[b].setAnonymous(a)}return this.__itemRenderer.getContainerElement().cloneNode(true)},_configureItem:function(b,c){var a=this.getDelegate();if(a!=null&&a.configureItem!=null){a.configureItem(this.__itemRenderer,b,c)}},_createItemRenderer:function(){var b=qx.util.Delegate.getMethod(this.getDelegate(),"createItemRenderer");var a=null;if(b==null){a=new qx.ui.mobile.list.renderer.Default()}else{a=b()}return a},_applyDelegate:function(b,a){this._setItemRenderer(this._createItemRenderer())}},destruct:function(){this.__itemRenderer=null}});qx.Class.define("qx.ui.mobile.list.renderer.Abstract",{extend:qx.ui.mobile.core.Widget,type:"abstract",include:[qx.ui.mobile.core.MChildrenHandling],construct:function(){this.base(arguments);this.initSelectable();this.initShowArrow()},properties:{defaultCssClass:{refine:true,init:"listItem"},selected:{check:"Boolean",init:false,apply:"_applySelected"},selectable:{check:"Boolean",init:true,apply:"_applyAttribute"},showArrow:{check:"Boolean",init:false,apply:"_applyShowArrow"}},members:{reset:function(){if(qx.core.Environment.get("qx.debug")){throw new Error("Abstract method call")}},_getTagName:function(){return"li"},_applyShowArrow:function(b,a){if(b){this.addCssClass("arrow")}else{this.removeCssClass("arrow")}},_applySelected:function(b,a){if(b){this.addCssClass("selected")}else{this.removeCssClass("selected")}}}});qx.Class.define("qx.ui.mobile.list.renderer.Default",{extend:qx.ui.mobile.list.renderer.Abstract,construct:function(){this.base(arguments);this.add(this._create())},members:{__image:null,__title:null,__subTitle:null,setImage:function(a){this.__image.setSource(a)},setTitle:function(a){this.__title.setValue(a)},setSubTitle:function(a){this.__subTitle.setValue(a)},_create:function(){var c=qx.ui.mobile.container.Composite;var a=new c(new qx.ui.mobile.layout.HBox().set({alignY:"middle"}));this.__image=new qx.ui.mobile.basic.Image();this.__image.addCssClass("list-itemimage");a.add(this.__image);var b=new c(new qx.ui.mobile.layout.VBox());a.add(b,{flex:1});this.__title=new qx.ui.mobile.basic.Label();this.__title.addCssClass("list-itemlabel");b.add(this.__title);this.__subTitle=new qx.ui.mobile.basic.Label();this.__subTitle.addCssClass("subtitle");b.add(this.__subTitle);return a},reset:function(){this.__image.setSource(null);this.__title.setValue("");this.__subTitle.setValue("")}}});qx.Class.define("qx.ui.mobile.basic.Image",{extend:qx.ui.mobile.core.Widget,construct:function(a){this.base(arguments);if(a){this.setSource(a)}else{this.initSource()}},events:{loadingFailed:"qx.event.type.Event",loaded:"qx.event.type.Event"},properties:{source:{check:"String",nullable:true,init:null,apply:"_applySource"}},members:{_getTagName:function(){return"img"},_applySource:function(d,a){if(d){var c=qx.util.ResourceManager.getInstance().toUri(d);var b=qx.io.ImageLoader;if(!b.isFailed(c)){b.load(c,this.__loaderCallback,this)}this._setSource(c)}},__loaderCallback:function(b,a){if(a.failed){this.warn("Image could not be loaded: "+b);this.fireEvent("loadingFailed")}else{this.fireEvent("loaded")}this._domUpdated()},_setSource:function(a){this._setAttribute("src",a);this._domUpdated()}}});qx.Class.define("qx.ui.window.Desktop",{extend:qx.ui.core.Widget,include:[qx.ui.core.MChildrenHandling,qx.ui.window.MDesktop,qx.ui.core.MBlocker],implement:qx.ui.window.IDesktop,construct:function(a){this.base(arguments);a=a||new qx.ui.window.Window.DEFAULT_MANAGER_CLASS();this.getContentElement().disableScrolling();this._setLayout(new qx.ui.layout.Canvas());this.setWindowManager(a)}});qx.Class.define("qx.util.fsm.State",{extend:qx.core.Object,construct:function(b,a){this.base(arguments);this.setName(b);if(typeof(a)!="object"){throw new Error("State info must be an object")}for(var c in a){switch(c){case"onentry":this.setOnentry(a[c]);break;case"onexit":this.setOnexit(a[c]);break;case"autoActionsBeforeOnentry":this.setAutoActionsBeforeOnentry(a[c]);break;case"autoActionsAfterOnentry":this.setAutoActionsAfterOnentry(a[c]);break;case"autoActionsBeforeOnexit":this.setAutoActionsBeforeOnexit(a[c]);break;case"autoActionsAfterOnexit":this.setAutoActionsAfterOnexit(a[c]);break;case"events":this.setEvents(a[c]);break;default:this.setUserData(c,a[c]);this.debug("State "+b+": Adding user-provided field to state: "+c);break}}if(!this.getEvents()){throw new Error("The events object must be provided in new state info")}this.transitions={}},statics:{_commonTransformAutoActions:function(h,r){if(typeof(r)!="object"){throw new Error("Invalid "+h+" value: "+typeof(r))}var b;var e="try{";var d;var l;for(var p in r){var c=r[p];if(!c instanceof Array){throw new Error("Invalid function request type: expected array, found "+typeof(c))}for(var n=0;n<c.length;n++){l=c[n];if(typeof(l)!="object"){throw new Error("Invalid function request parameter type: expected object, found "+typeof(c[d]))}var k=l.parameters;if(!k){k=[]}else{if(!k instanceof Array){throw new Error("Invalid function parameters: expected array, found "+typeof(k))}}b=p+"(";for(var m=0;m<k.length;m++){if(m!=0){b+=","}if(typeof(k[m])=="function"){b+="("+k[m]+")(fsm)"}else{if(typeof(k[m])=="string"){b+='"'+k[m]+'"'}else{b+=k[m]}}}b+=")";var q=l.objects;if(!q){q=[]}else{if(!q instanceof Array){throw new Error("Invalid 'objects' list: expected array, got "+typeof(q))}}for(var m=0;m<q.length;m++){if(typeof(q[m])!="string"){throw new Error("Invalid friendly name in 'objects' list: "+q[m])}e+=" fsm.getObject('"+q[m]+"')."+b+";"}var o=l.groups;if(o){if(!o instanceof Array){throw new Error("Invalid 'groups' list: expected array, got "+typeof(o))}for(m=0;m<o.length;m++){e+="  var groupObjects =     fsm.getGroupObjects('"+o[m]+"');  for (var i = 0; i < groupObjects.length; i++)  {    var objName = groupObjects[i];    fsm.getObject(objName)."+b+";  }"}}}}e+="}catch(ex){  fsm.debug(ex);}";return new Function("fsm",e)}},properties:{name:{transform:"__transformName",nullable:true},onentry:{transform:"__transformOnentry",nullable:true,init:function(b,a){}},onexit:{transform:"__transformOnexit",nullable:true,init:function(b,a){}},autoActionsBeforeOnentry:{transform:"__transformAutoActionsBeforeOnentry",nullable:true,init:function(b,a){}},autoActionsAfterOnentry:{transform:"__transformAutoActionsAfterOnentry",nullable:true,init:function(b,a){}},autoActionsBeforeOnexit:{transform:"__transformAutoActionsBeforeOnexit",nullable:true,init:function(b,a){}},autoActionsAfterOnexit:{transform:"__transformAutoActionsAfterOnexit",nullable:true,init:function(b,a){}},events:{transform:"__transformEvents",nullable:true}},members:{__transformName:function(a){if(typeof(a)!="string"||a.length<1){throw new Error("Invalid state name")}return a},__transformOnentry:function(a){switch(typeof(a)){case"undefined":return function(c,b){};case"function":return a;default:throw new Error("Invalid onentry type: "+typeof(a))}},__transformOnexit:function(a){switch(typeof(a)){case"undefined":return function(c,b){};case"function":return a;default:throw new Error("Invalid onexit type: "+typeof(a));return null}},__transformEvents:function(b){if(typeof(b)!="object"){throw new Error("events must be an object")}for(var c in b){var a=b[c];if(typeof(a)=="number"&&a!=qx.util.fsm.FiniteStateMachine.EventHandling.PREDICATE&&a!=qx.util.fsm.FiniteStateMachine.EventHandling.BLOCKED){throw new Error("Invalid numeric value in events object: "+c+": "+a)}else{if(typeof(a)=="object"){for(var d in a){if(typeof(a[d])=="number"&&a[d]!=qx.util.fsm.FiniteStateMachine.EventHandling.PREDICATE&&a[d]!=qx.util.fsm.FiniteStateMachine.EventHandling.BLOCKED){throw new Error("Invalid numeric value in events object ("+c+"): "+d+": "+a[d])}else{if(typeof(a[d])!="string"&&typeof(a[d])!="number"){throw new Error("Invalid value in events object ("+c+"): "+d+": "+a[d])}}}}else{if(typeof(a)!="string"&&typeof(a)!="number"){throw new Error("Invalid value in events object: "+c+": "+b[c])}}}}return b},__transformAutoActionsBeforeOnentry:function(a){return qx.util.fsm.State._commonTransformAutoActions("autoActionsBeforeOnentry",a)},__transformAutoActionsAfterOnentry:function(a){return qx.util.fsm.State._commonTransformAutoActions("autoActionsAfterOnentry",a)},__transformAutoActionsBeforeOnexit:function(a){return qx.util.fsm.State._commonTransformAutoActions("autoActionsBeforeOnexit",a)},__transformAutoActionsAfterOnexit:function(a){return qx.util.fsm.State._commonTransformAutoActions("autoActionsAfterOnexit",a)},addTransition:function(a){if(!a instanceof qx.util.fsm.Transition){throw new Error("Invalid transition: not an instance of qx.util.fsm.Transition")}this.transitions[a.getName()]=a}}});qx.Class.define("qx.util.fsm.FiniteStateMachine",{extend:qx.core.Object,construct:function(a){this.base(arguments);this.setName(a);this.__states={};this.__startState=null;this.__savedStates=[];this.__eventQueue=[];this.__blockedEvents=[];this.__friendlyToObject={};this.__friendlyToHash={};this.__hashToFriendly={};this.__groupToFriendly={};this.__friendlyToGroups={}},statics:{StateChange:{CURRENT_STATE:1,POP_STATE_STACK:2,TERMINATE:3},EventHandling:{PREDICATE:1,BLOCKED:2},DebugFlags:{EVENTS:1,TRANSITIONS:2,FUNCTION_DETAIL:4,OBJECT_NOT_FOUND:8}},properties:{name:{check:"String",nullable:true},state:{check:"String",nullable:true},previousState:{check:"String",nullable:true},nextState:{check:"String",nullable:true},maxSavedStates:{check:"Number",init:2},debugFlags:{check:"Number",init:7}},members:{__states:null,__startState:null,__eventQueue:null,__blockedEvents:null,__savedStates:null,__friendlyToObject:null,__friendlyToHash:null,__hashToFriendly:null,__groupToFriendly:null,__friendlyToGroups:null,__bEventProcessingInProgress:false,addState:function(b){if(!b instanceof qx.util.fsm.State){throw new Error("Invalid state: not an instance of qx.util.fsm.State")}var a=b.getName();if(a in this.__states){throw new Error("State "+a+" already exists")}if(this.__startState==null){this.__startState=a}this.__states[a]=b},replaceState:function(d,b){if(!d instanceof qx.util.fsm.State){throw new Error("Invalid state: not an instance of qx.util.fsm.State")}var c=d.getName();var a=this.__states[c];this.__states[c]=d;if(b){a._bNeedDispose=true}return a},addObject:function(c,e,a){var d=e.toHashCode();this.__friendlyToHash[c]=d;this.__hashToFriendly[d]=c;this.__friendlyToObject[c]=e;if(!a){return}if(typeof(a)=="string"){a=[a]}for(var b=0;b<a.length;b++){var f=a[b];if(!this.__groupToFriendly[f]){this.__groupToFriendly[f]={}}this.__groupToFriendly[f][c]=true;if(!this.__friendlyToGroups[c]){this.__friendlyToGroups[c]=[]}this.__friendlyToGroups[c]=this.__friendlyToGroups[c].concat(a)}},removeObject:function(a){var b=this.__friendlyToHash[a];if(this.__friendlyToGroups[a]){for(var c in this.__friendlyToGroups[a]){delete this.__groupToFriendly[c]}delete this.__friendlyToGroups[a]}delete this.__hashToFriendly[b];delete this.__friendlyToHash[a];delete this.__friendlyToObject[a]},getObject:function(a){return this.__friendlyToObject[a]},getFriendlyName:function(b){var a=b.toHashCode();return a?this.__hashToFriendly[a]:null},getGroupObjects:function(d){var b=[];for(var c in this.__groupToFriendly[d]){b.push(c)}return b},displayAllObjects:function(){for(var a in this.__friendlyToHash){var c=this.__friendlyToHash[a];var b=this.getObject(a);this.debug(a+" => "+c);this.debug("  "+c+" => "+this.__hashToFriendly[c]);this.debug("  "+a+" => "+this.getObject(a));this.debug("  "+this.getObject(a)+" => "+this.getFriendlyName(b))}},start:function(){var b=this.__startState;if(b==null){throw new Error("Machine started with no available states")}this.setState(b);this.setPreviousState(null);this.setNextState(null);var a=(this.getDebugFlags()&qx.util.fsm.FiniteStateMachine.DebugFlags.FUNCTION_DETAIL);if(a){this.debug(this.getName()+"#"+b+"#actionsBeforeOnentry")}this.__states[b].getAutoActionsBeforeOnentry()(this);if(a){this.debug(this.getName()+"#"+b+"#entry")}this.__states[b].getOnentry()(this,null);if(a){this.debug(this.getName()+"#"+b+"#actionsAfterOnentry")}this.__states[b].getAutoActionsAfterOnentry()(this)},pushState:function(a){if(this.__savedStates.length>=this.getMaxSavedStates()){throw new Error("Saved-state stack is full")}if(a===true){this.__savedStates.push(this.getState())}else{if(a){this.__savedStates.push(a)}else{this.__savedStates.push(this.getPreviousState())}}},postponeEvent:function(a){this.__blockedEvents.unshift(a)},enqueueEvent:function(b,a){if(a){this.__eventQueue.push(b)}else{this.__eventQueue.unshift(b)}if(this.getDebugFlags()&qx.util.fsm.FiniteStateMachine.DebugFlags.EVENTS){if(a){this.debug(this.getName()+": Pushed event: "+b.getType())}else{this.debug(this.getName()+": Queued event: "+b.getType())}}},eventListener:function(a){var b=a.clone();this.enqueueEvent(b,false);this.__processEvents()},fireImmediateEvent:function(a,d,c){if(c){var b=qx.event.Registration.createEvent(a,qx.event.type.Data,[c,null,false])}else{var b=qx.event.Registration.createEvent(a,qx.event.type.Event,[false,false])}b.setTarget(d);this.eventListener(b)},scheduleEvent:function(a,d,c,b){qx.event.Timer.once(function(){this.fireImmediateEvent(a,d,c)},this,b||20)},__processEvents:function(){if(this.__bEventProcessingInProgress){return}this.__bEventProcessingInProgress=true;while(this.__eventQueue.length>0){var b=this.__eventQueue.pop();var a=this.__run(b);if(a){b.dispose()}}this.__bEventProcessingInProgress=false},__run:function(b){var k;var s;var p;var c;var o;var l;var g;var f=this.getDebugFlags();var n=f&qx.util.fsm.FiniteStateMachine.DebugFlags.EVENTS;var m=f&qx.util.fsm.FiniteStateMachine.DebugFlags.TRANSITIONS;var a=f&qx.util.fsm.FiniteStateMachine.DebugFlags.FUNCTION_DETAIL;var j=f&qx.util.fsm.FiniteStateMachine.DebugFlags.OBJECT_NOT_FOUND;if(n){this.debug(this.getName()+": Process event: "+b.getType())}k=this.getState();c=this.__states[k];o=c.transitions;l=c.getEvents()[b.getType()];if(!l){if(n){this.debug(this.getName()+": Event '"+b.getType()+"' not handled.  Ignoring.")}return true}if(typeof(l)=="object"){var d=this.getFriendlyName(b.getTarget());if(!d){if(j){this.debug(this.getName()+": Could not find friendly name for '"+b.getType()+"' on '"+b.getTarget()+"'")}return true}g=l[d];if(!g){if(n){this.debug(this.getName()+": Event '"+b.getType()+"' not handled for target "+d+".  Ignoring.")}return true}}else{g=l}switch(g){case qx.util.fsm.FiniteStateMachine.EventHandling.PREDICATE:break;case qx.util.fsm.FiniteStateMachine.EventHandling.BLOCKED:if(n){this.debug(this.getName()+": Event '"+b.getType()+"' blocked.  Re-queuing.")}this.__blockedEvents.unshift(b);return false;default:if(typeof(g)=="string"){if(o[g]){var r=o[g];o={};o[g]=r}else{throw new Error("Explicit transition "+g+" does not exist")}break}}for(var q in o){var r=o[q];switch(r.getPredicate()(this,b)){case true:break;case false:continue;case null:return true;default:throw new Error("Transition "+k+":"+q+" returned a value other than true, false, or null.")}s=r.getNextState();if(typeof(s)=="string"){if(!s in this.__states){throw new Error("Attempt to transition to nonexistent state "+s)}this.setNextState(s)}else{switch(s){case qx.util.fsm.FiniteStateMachine.StateChange.CURRENT_STATE:s=k;this.setNextState(s);break;case qx.util.fsm.FiniteStateMachine.StateChange.POP_STATE_STACK:if(this.__savedStates.length==0){throw new Error("Attempt to transition to POP_STATE_STACK while state stack is empty.")}s=this.__savedStates.pop();this.setNextState(s);break;default:throw new Error("Internal error: invalid nextState");break}}if(a){this.debug(this.getName()+"#"+k+"#"+q+"#autoActionsBeforeOntransition")}r.getAutoActionsBeforeOntransition()(this);if(a){this.debug(this.getName()+"#"+k+"#"+q+"#ontransition")}r.getOntransition()(this,b);if(a){this.debug(this.getName()+"#"+k+"#"+q+"#autoActionsAfterOntransition")}r.getAutoActionsAfterOntransition()(this);if(a){this.debug(this.getName()+"#"+k+"#autoActionsBeforeOnexit")}c.getAutoActionsBeforeOnexit()(this);if(a){this.debug(this.getName()+"#"+k+"#exit")}c.getOnexit()(this,b);if(a){this.debug(this.getName()+"#"+k+"#autoActionsAfterOnexit")}c.getAutoActionsAfterOnexit()(this);if(c._bNeedDispose){c.dispose()}c=this.__states[this.getNextState()];this.setPreviousState(k);this.setState(this.getNextState());this.setNextState(null);p=k;k=s;s=undefined;if(a){this.debug(this.getName()+"#"+k+"#autoActionsBeforeOnentry")}c.getAutoActionsBeforeOnentry()(this);if(a){this.debug(this.getName()+"#"+k+"#entry")}c.getOnentry()(this,b);if(a){this.debug(this.getName()+"#"+k+"#autoActionsAfterOnentry")}c.getAutoActionsAfterOnentry()(this);var l;for(var h=0;h<this.__blockedEvents.length;h++){l=this.__blockedEvents.pop();this.__eventQueue.unshift(l)}if(m){this.debug(this.getName()+"#"+p+" => "+this.getName()+"#"+k)}return true}if(m){this.debug(this.getName()+"#"+k+": event '"+b.getType()+"': no transition found.  No state change.")}return true}},destruct:function(){this._disposeArray("__eventQueue");this._disposeArray("__blockedEvents");this.__savedStates=this.__states=null}});qx.Class.define("qx.util.fsm.Transition",{extend:qx.core.Object,construct:function(b,a){this.base(arguments);this.setName(b);for(var c in a){switch(c){case"predicate":this.setPredicate(a[c]);break;case"nextState":this.setNextState(a[c]);break;case"autoActionsBeforeOntransition":this.setAutoActionsBeforeOntransition(a[c]);break;case"autoActionsAfterOntransition":this.setAutoActionsAfterOntransition(a[c]);break;case"ontransition":this.setOntransition(a[c]);break;default:this.setUserData(c,a[c]);this.debug("Transition "+b+": Adding user-provided field to transition: "+c);break}}},properties:{name:{check:"String",nullable:true},predicate:{init:function(b,a){return true},transform:"__transformPredicate"},nextState:{init:qx.util.fsm.FiniteStateMachine.StateChange.CURRENT_STATE,transform:"__transformNextState"},autoActionsBeforeOntransition:{init:function(b,a){}},autoActionsAfterOntransition:{init:function(b,a){}},ontransition:{init:function(b,a){},transform:"__transformOntransition"}},members:{__transformPredicate:function(a){switch(typeof(a)){case"undefined":return function(c,b){return true};case"boolean":return function(c,b){return a};case"function":return a;default:throw new Error("Invalid transition predicate type: "+typeof(a));break}},__transformNextState:function(a){switch(typeof(a)){case"string":return a;case"number":switch(a){case qx.util.fsm.FiniteStateMachine.StateChange.CURRENT_STATE:case qx.util.fsm.FiniteStateMachine.StateChange.POP_STATE_STACK:case qx.util.fsm.FiniteStateMachine.StateChange.TERMINATE:return a;default:throw new Error("Invalid transition nextState value: "+a+": nextState must be an explicit state name, or one of the Fsm.StateChange constants")}break;default:throw new Error("Invalid transition nextState type: "+typeof(a));break}},__transformOntransition:function(a){switch(typeof(a)){case"undefined":return function(c,b){};case"function":return a;default:throw new Error("Invalid ontransition type: "+typeof(a));break}}}});qx.Class.define("qx.fx.effect.core.Scroll",{extend:qx.fx.Base,properties:{mode:{init:"relative",check:["relative","absolute"]},x:{init:0,check:"Number"},y:{init:0,check:"Number"}},members:{__startOffsets:null,__deltaOffsets:null,start:function(){if(!this.base(arguments)){return}var a=this._getElement();this.__startOffsets={x:a.scrollLeft,y:a.scrollTop};if(this._atEndPosition(this.__startOffsets.x,this.__startOffsets.y)){return}if(this.getMode()=="absolute"){this.__deltaOffsets={left:this.getX()-this.__startOffsets.x,top:this.getY()-this.__startOffsets.y}}},update:function(a){this.base(arguments);var b=this._getElement();if(this.getMode()=="relative"){if(this.getX()!=0){b.scrollLeft=this.__startOffsets.x+(this.getX()*a)}if(this.getY()!=0){b.scrollTop=this.__startOffsets.y+(this.getY()*a)}}else{b.scrollLeft=this.__startOffsets.x+(this.__deltaOffsets.left*a);b.scrollTop=this.__startOffsets.y+(this.__deltaOffsets.top*a)}},_atEndPosition:function(d,c){var b=this._getElement();var a=this.getX();var e=this.getY();return;(((a<0)&&(d==0))||((a>0)&&(d==(b.scrollWidth-b.clientWidth))))&&(((e<0)&&(c==0))||((e>0)&&(c==(b.scrollHeight-b.clientHeight))))}}});qx.Class.define("qx.ui.table.cellrenderer.String",{extend:qx.ui.table.cellrenderer.Conditional,members:{_getContentHtml:function(a){return qx.bom.String.escape(a.value||"")},_getCellClass:function(a){return"qooxdoo-table-cell"}}});qx.Class.define("qx.log.appender.RhinoFile",{statics:{FILENAME:null,__FILEHANDLE:null,log:function(c,b){if(!qx.log.appender.RhinoFile.__FILEHANDLE){qx.log.appender.RhinoFile.create()}var a=qx.log.appender.RhinoFile.__FILEHANDLE;a.write(c);a.newLine();a.flush()},debug:function(a){this.log(a,"debug")},info:function(a){this.log(a,"info")},warn:function(a){this.log(a,"warn")},error:function(a){this.log(a,"error")},process:function(c){var f=c.level||"info";for(var e in c){if(e=="items"){var a=c[e];for(var d in a){var b=a[d];this[f](b.text)}}}},create:function(){if(qx.log.appender.RhinoFile.__FILEHANDLE){qx.log.appender.RhinoFile.__FILEHANDLE.close()}if(!qx.log.appender.RhinoFile.FILENAME){qx.log.appender.RhinoFile.FILENAME="qooxdoo.log"}var a=new java.io.FileWriter(qx.log.appender.RhinoFile.FILENAME,true);qx.log.appender.RhinoFile.__FILEHANDLE=new java.io.BufferedWriter(a)}}});qx.Class.define("qx.fx.effect.combination.Fold",{extend:qx.fx.Base,construct:function(a){this.base(arguments,a)},properties:{modifyDisplay:{init:true,check:"Boolean"},mode:{init:"in",check:["in","out"]}},members:{__outerScaleEffect:null,__innerScaleEffect:null,__oldStyle:null,afterFinish:function(){var a=this._getElement();if((this.getModifyDisplay())&&(this.getMode()=="in")){qx.bom.element.Style.set(a,"display","block")}},start:function(){if(!this.base(arguments)){return}var b=this._getElement();var a=this;this.__outerScaleEffect=new qx.fx.effect.core.Scale(b);this.__innerScaleEffect=new qx.fx.effect.core.Scale(b);this.__outerScaleEffect.afterFinishInternal=function(){a.__innerScaleEffect.start()};this.__innerScaleEffect.afterFinishInternal=function(){a._cleanUp()};this.__oldStyle=this._getStyle();qx.bom.element.Style.set(b,"overflow","hidden");if(this.getMode()=="in"){this.__outerScaleEffect.set({scaleTo:5,scaleContent:false,scaleX:false,duration:this.getDuration()/2,scaleFrom:100,scaleFromCenter:true,alternateDimensions:[]});this.__innerScaleEffect.set({scaleTo:5,scaleContent:false,scaleY:false,duration:this.getDuration()/2,scaleFrom:100,scaleFromCenter:true,alternateDimensions:[]})}else{this.__outerScaleEffect.set({scaleTo:100,scaleContent:false,scaleY:false,duration:this.getDuration()/2,scaleFrom:0,scaleFromCenter:true,alternateDimensions:[this.__oldStyle.width,this.__oldStyle.height]});this.__innerScaleEffect.set({scaleTo:100,scaleContent:false,scaleX:false,duration:this.getDuration()/2,scaleFrom:0,scaleFromCenter:false,alternateDimensions:[this.__oldStyle.width,this.__oldStyle.height]});qx.bom.element.Style.set(b,"display","block");qx.bom.element.Style.set(b,"height","0px");qx.bom.element.Style.set(b,"width","0px")}this.__outerScaleEffect.start()},_cleanUp:function(){var c;var a=this._getElement();if((this.getMode()=="in")&&(this.getModifyDisplay())){qx.bom.element.Style.set(a,"display","none")}for(var b in this.__oldStyle){c=this.__oldStyle[b];if(b!="overflow"){c+="px"}qx.bom.element.Style.set(a,b,c)}qx.bom.element.Style.set(a,"overflow","visible")},_getStyle:function(){var a=this._getElement();var c=(qx.bom.element.Style.get(a,"display")=="none");if(c){qx.bom.element.Style.set(a,"visiblity","hidden");qx.bom.element.Style.set(a,"display","block")}var b={overflow:qx.bom.element.Style.get(a,"overflow"),top:qx.bom.element.Location.getTop(a),left:qx.bom.element.Location.getLeft(a),width:qx.bom.element.Dimension.getContentWidth(a),height:qx.bom.element.Dimension.getContentHeight(a)};if(c){qx.bom.element.Style.set(a,"display","none");qx.bom.element.Style.set(a,"visiblity","visible")}return b}},destruct:function(){this._disposeObjects("__outerScaleEffect","__innerScaleEffect")}});qx.Class.define("qx.bom.media.Abstract",{extend:qx.core.Object,type:"abstract",construct:function(c){this.base(arguments);this._media=c;var b=qx.lang.Function;this._handlePlayEventBound=b.bind(this._handlePlayEvent,this);this._handlePauseEventBound=b.bind(this._handlePauseEvent,this);this._handleTimeUpdateEventBound=b.bind(this._handleTimeUpdateEvent,this);this._handleEndedEventBound=b.bind(this._handleEndedEvent,this);this._handleVolumeChangeEventBound=b.bind(this._handleVolumeChangeEvent,this);this._handleLoadedDataEventBound=b.bind(this._handleLoadedDataEvent,this);this._handleLoadedMetaDataEventBound=b.bind(this._handleLoadedMetaDataEvent,this);var a=qx.bom.Event;a.addNativeListener(this._media,"play",this._handlePlayEventBound);a.addNativeListener(this._media,"pause",this._handlePauseEventBound);a.addNativeListener(this._media,"timeupdate",this._handleTimeUpdateEventBound);a.addNativeListener(this._media,"ended",this._handleEndedEventBound);a.addNativeListener(this._media,"volumechange",this._handleVolumeChangeEventBound);a.addNativeListener(this._media,"loadeddata",this._handleLoadedDataEventBound);a.addNativeListener(this._media,"loadedmetadata",this._handleLoadedMetaDataEventBound);this._media.preload="auto"},events:{play:"qx.event.type.Event",pause:"qx.event.type.Event",timeupdate:"qx.event.type.Event",ended:"qx.event.type.Event",volumechange:"qx.event.type.Event",loadeddata:"qx.event.type.Event",loadedmetadata:"qx.event.type.Event"},members:{_media:null,getMediaObject:function(){return this._media},play:function(){qx.event.Timer.once(function(){this._media.play()},this,0)},pause:function(){this._media.pause()},isPaused:function(){return this._media.paused},isEnded:function(){return this._media.ended},setId:function(a){this._media.id=a},getId:function(){return this._media.id},canPlayType:function(a){return this._media.canPlayType(a)},setVolume:function(a){this._media.volume=a},getVolume:function(){return this._media.volume},setMuted:function(a){this._media.muted=a},isMuted:function(){return this._media.muted},getDuration:function(){return this._media.duration},setCurrentTime:function(a){this._media.currentTime=a},getCurrentTime:function(){return this._media.currentTime},setSource:function(a){this._media.src=a},getSource:function(){return this._media.src},hasControls:function(){return this._media.controls},showControls:function(){this._media.controls=true},hideControls:function(){this._media.controls=false},setAutoplay:function(a){this._media.autoplay=a},getAutoplay:function(){return this._media.autoplay},setPreload:function(a){if(a=="none"||a=="metadata"||a=="auto"){this._media.preload=a}else{this._media.preload="auto"}},getPreload:function(){return this._media.preload},setLoop:function(a){this._media.loop=a},isLoop:function(){return !!this._media.loop},_handlePlayEvent:function(){this.fireEvent("play")},_handlePauseEvent:function(){this.fireEvent("pause")},_handleTimeUpdateEvent:function(){this.fireEvent("timeupdate")},_handleEndedEvent:function(){this.fireEvent("ended")},_handleVolumeChangeEvent:function(){this.fireEvent("volumechange")},_handleLoadedDataEvent:function(){this.fireEvent("loadeddata")},_handleLoadedMetaDataEvent:function(){this.fireEvent("loadedmetadata")}},destruct:function(){var a=qx.bom.Event;a.removeNativeListener(this._media,"play",this._handlePlayEventBound);a.removeNativeListener(this._media,"pause",this._handlePauseEventBound);a.removeNativeListener(this._media,"timeupdate",this._handleTimeUpdateEventBound);a.removeNativeListener(this._media,"ended",this._handleEndedEventBound);a.removeNativeListener(this._media,"volumechange",this._handleVolumeChangeEventBound);a.removeNativeListener(this._media,"loadeddata",this._handleLoadedDataEventBound);a.removeNativeListener(this._media,"loadedmetadata",this._handleLoadedMetaDataEventBound);try{this.pause()}catch(b){}this._media=null}});qx.Class.define("qx.bom.media.Audio",{extend:qx.bom.media.Abstract,construct:function(a){this._audio=new window.Audio(a?a:"");this.base(arguments,this._audio)},members:{_audio:null}});qx.Class.define("qx.ui.tree.Tree",{extend:qx.ui.core.scroll.AbstractScrollArea,implement:[qx.ui.core.IMultiSelection,qx.ui.form.IModelSelection,qx.ui.form.IForm],include:[qx.ui.core.MMultiSelectionHandling,qx.ui.core.MContentPadding,qx.ui.form.MModelSelection,qx.ui.form.MForm],construct:function(){this.base(arguments);this.__content=new qx.ui.container.Composite(new qx.ui.layout.VBox()).set({allowShrinkY:false,allowGrowX:true});this.getChildControl("pane").add(this.__content);this.initOpenMode();this.initRootOpenClose();this.addListener("changeSelection",this._onChangeSelection,this);this.addListener("keypress",this._onKeyPress,this)},events:{addItem:"qx.event.type.Data",removeItem:"qx.event.type.Data"},properties:{openMode:{check:["click","dblclick","none"],init:"dblclick",apply:"_applyOpenMode",event:"changeOpenMode",themeable:true},root:{check:"qx.ui.tree.core.AbstractTreeItem",init:null,nullable:true,event:"changeRoot",apply:"_applyRoot"},hideRoot:{check:"Boolean",init:false,apply:"_applyHideRoot"},rootOpenClose:{check:"Boolean",init:false,apply:"_applyRootOpenClose"},appearance:{refine:true,init:"tree"},focusable:{refine:true,init:true}},members:{__content:null,SELECTION_MANAGER:qx.ui.tree.selection.SelectionManager,getChildrenContainer:function(){return this.__content},_applyRoot:function(c,b){var a=this.getChildrenContainer();if(b){a.remove(b);if(b.hasChildren()){a.remove(b.getChildrenContainer())}}if(c){a.add(c);if(c.hasChildren()){a.add(c.getChildrenContainer())}c.setVisibility(this.getHideRoot()?"excluded":"visible");c.recursiveAddToWidgetQueue()}},_applyHideRoot:function(c,b){var a=this.getRoot();if(!a){return}a.setVisibility(c?"excluded":"visible");a.recursiveAddToWidgetQueue()},_applyRootOpenClose:function(c,b){var a=this.getRoot();if(!a){return}a.recursiveAddToWidgetQueue()},_getContentPaddingTarget:function(){return this.__content},getNextNodeOf:function(e,d){if((d!==false||e.isOpen())&&e.hasChildren()){return e.getChildren()[0]}while(e){var c=e.getParent();if(!c){return null}var a=c.getChildren();var b=a.indexOf(e);if(b>-1&&b<a.length-1){return a[b+1]}e=c}return null},getPreviousNodeOf:function(g,f){var d=g.getParent();if(!d){return null}if(this.getHideRoot()){if(d==this.getRoot()){if(d.getChildren()[0]==g){return null}}}else{if(g==this.getRoot()){return null}}var a=d.getChildren();var b=a.indexOf(g);if(b>0){var e=a[b-1];while((f!==false||e.isOpen())&&e.hasChildren()){var c=e.getChildren();e=c[c.length-1]}return e}else{return d}},getNextSiblingOf:function(c){if(c==this.getRoot()){return null}var b=c.getParent();var d=b.getChildren();var a=d.indexOf(c);if(a<d.length-1){return d[a+1]}return null},getPreviousSiblingOf:function(c){if(c==this.getRoot()){return null}var b=c.getParent();var d=b.getChildren();var a=d.indexOf(c);if(a>0){return d[a-1]}return null},getItems:function(a,b){if(this.getRoot()!=null){return this.getRoot().getItems(a,b,this.getHideRoot())}else{return[]}},getChildren:function(){if(this.getRoot()!=null){return[this.getRoot()]}else{return[]}},getTreeItem:function(a){while(a){if(a==this){return null}if(a instanceof qx.ui.tree.core.AbstractTreeItem){return a}a=a.getLayoutParent()}return null},_applyOpenMode:function(b,a){if(a=="click"){this.removeListener("click",this._onOpen,this)}else{if(a=="dblclick"){this.removeListener("dblclick",this._onOpen,this)}}if(b=="click"){this.addListener("click",this._onOpen,this)}else{if(b=="dblclick"){this.addListener("dblclick",this._onOpen,this)}}},_onOpen:function(b){var a=this.getTreeItem(b.getTarget());if(!a||!a.isOpenable()){return}a.setOpen(!a.isOpen());b.stopPropagation()},_onChangeSelection:function(d){var b=d.getData();for(var a=0;a<b.length;a++){var c=b[a];while(c.getParent()!=null){c=c.getParent();c.setOpen(true)}}},_onKeyPress:function(b){var a=this._getLeadItem();if(a!==null){switch(b.getKeyIdentifier()){case"Left":if(a.isOpenable()&&a.isOpen()){a.setOpen(false)}else{if(a.getParent()){this.setSelection([a.getParent()])}}break;case"Right":if(a.isOpenable()&&!a.isOpen()){a.setOpen(true)}break;case"Enter":case"Space":if(a.isOpenable()){a.toggleOpen()}break}}}},destruct:function(){this._disposeObjects("__content")}});qx.Class.define("qx.ui.table.celleditor.ComboBox",{extend:qx.core.Object,implement:qx.ui.table.ICellEditorFactory,properties:{validationFunction:{check:"Function",nullable:true,init:null},listData:{check:"Array",init:null,nullable:true}},members:{createCellEditor:function(b){var c=new qx.ui.form.ComboBox().set({appearance:"table-editor-combobox"});var h=b.value;c.originalValue=h;var f=b.table.getTableColumnModel().getDataCellRenderer(b.col);var g=f._getContentHtml(b);if(h!=g){h=g}if(h===null||h===undefined){h=""}var e=this.getListData();if(e){var j;for(var d=0,a=e.length;d<a;d++){var k=e[d];if(k instanceof Array){j=new qx.ui.form.ListItem(k[0],k[1])}else{j=new qx.ui.form.ListItem(k,null)}c.add(j)}}c.setValue(""+h);c.addListener("appear",function(){c.selectAllText()});return c},getCellEditorValue:function(b){var c=b.getValue()||"";var a=this.getValidationFunction();if(a){c=a(c,b.originalValue)}if(typeof b.originalValue=="number"){c=parseFloat(c)}return c}}});qx.Class.define("qx.ui.mobile.form.Row",{extend:qx.ui.mobile.container.Composite,construct:function(a){this.base(arguments,a);this.initSelectable()},properties:{defaultCssClass:{refine:true,init:"formRow"},selectable:{check:"Boolean",init:false,apply:"_applyAttribute"}},members:{_getTagName:function(){return"li"}}});qx.Class.define("qx.ui.progressive.renderer.table.cell.String",{extend:qx.ui.progressive.renderer.table.cell.Abstract,construct:function(){this.base(arguments)},members:{_getContentHtml:function(a){return qx.bom.String.escape(a.cellData)}}});qx.Class.define("qx.fx.effect.combination.Puff",{extend:qx.fx.Base,construct:function(a){this.base(arguments,a);this.__scaleEffect=new qx.fx.effect.core.Scale(a);this.__fadeEffect=new qx.fx.effect.core.Fade(a);this.__mainEffect=new qx.fx.effect.core.Parallel(this.__scaleEffect,this.__fadeEffect)},properties:{modifyDisplay:{init:true,check:"Boolean"}},members:{__fadeEffect:null,__scaleEffect:null,__mainEffect:null,afterFinishInternal:function(){if(this.getModifyDisplay()){qx.bom.element.Style.set(this._getElement(),"display","none")}},start:function(){if(!this.base(arguments)){return}var b=this._getElement();var a={opacity:qx.bom.element.Style.get(b,"opacity")};this.__fadeEffect.afterFinishInternal=function(){var c=this._getElement();for(var d in a){qx.bom.element.Style.set(c,d,a[d])}};this.__scaleEffect.set({scaleTo:200,sync:true,scaleFromCenter:true,scaleContent:true,restoreAfterFinish:true});this.__fadeEffect.set({sync:true,to:0,modifyDisplay:false});this.__mainEffect.start()}},destruct:function(){this._disposeArray("_effects");this._disposeObjects("__mainEffect","__scaleEffect","__fadeEffect")}});qx.Class.define("qx.xml.String",{statics:{TO_CHARCODE:{quot:34,amp:38,lt:60,gt:62,apos:39},FROM_CHARCODE:{34:"quot",38:"amp",60:"lt",62:"gt",39:"apos"},escape:function(a){return qx.util.StringEscape.escape(a,this.FROM_CHARCODE)},unescape:function(a){return qx.util.StringEscape.unescape(a,this.TO_CHARCODE)}}});qx.Class.define("qx.util.ExtendedColor",{statics:{EXTENDED:{transparent:[-1,-1,-1],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},isExtendedColor:function(a){return this.EXTENDED[a]!==undefined},toRgb:function(b){var a=this.EXTENDED[b];if(a){return a}throw new Error("Could not convert other than extended colors to RGB: "+b)},toRgbString:function(a){return qx.util.ColorUtil.rgbToRgbString(this.toRgb(a))}}});qx.Class.define("qx.ui.mobile.form.Form",{extend:qx.ui.mobile.core.Widget,include:[qx.ui.mobile.core.MChildrenHandling],properties:{defaultCssClass:{refine:true,init:"form"}},members:{_getTagName:function(){return"ul"}}});qx.Class.define("qx.ui.virtual.selection.CellRectangle",{extend:qx.ui.virtual.selection.Abstract,members:{_getItemCount:function(){return this._pane.getRowConfig().getItemCount()*this._pane.getColumnConfig().getItemCount()},_getSelectableFromMouseEvent:function(b){var a=this._pane.getCellAtPosition(b.getDocumentLeft(),b.getDocumentTop());if(!a){return null}return this._isSelectable(a)?a:null},getSelectables:function(e){var b=[];var c=this._pane.getRowConfig().getItemCount();var f=this._pane.getColumnConfig().getItemCount();for(var g=0;g<c;g++){for(var d=0;d<f;d++){var a={row:g,column:d};if(this._isSelectable(a)){b.push(a)}}}return b},_getSelectableRange:function(e,d){var h=[];var f=Math.min(e.row,d.row);var g=Math.max(e.row,d.row);var c=Math.min(e.column,d.column);var a=Math.max(e.column,d.column);for(var j=f;j<=g;j++){for(var b=c;b<=a;b++){var i={row:j,column:b};if(this._isSelectable(i)){h.push(i)}}}return h},_getFirstSelectable:function(){var b=this._pane.getRowConfig().getItemCount();var d=this._pane.getColumnConfig().getItemCount();for(var e=0;e<b;e++){for(var c=0;c<d;c++){var a={row:e,column:c};if(this._isSelectable(a)){return a}}}return null},_getLastSelectable:function(){var b=this._pane.getRowConfig().getItemCount();var d=this._pane.getColumnConfig().getItemCount();for(var c=d-1;c>=0;c--){for(var e=b-1;e>=0;e--){var a={row:e,column:c};if(this._isSelectable(a)){return a}}}return null},_getRelatedSelectable:function(e,d){var a={row:e.row,column:e.column};switch(d){case"above":for(var g=e.row-1;g>=0;g--){a.row=g;if(this._isSelectable(a)){return a}}break;case"under":var b=this._pane.getRowConfig().getItemCount();for(var g=e.row+1;g<b;g++){a.row=g;if(this._isSelectable(a)){return a}}break;case"left":for(var c=e.column-1;c>=0;c--){a.column=c;if(this._isSelectable(a)){return a}}break;case"right":var f=this._pane.getColumnConfig().getItemCount();for(var c=e.column+1;c<f;c++){a.column=c;if(this._isSelectable(a)){return a}}break}return null},_getPage:function(b,a){if(a){return this._getFirstSelectable()}else{return this._getLastSelectable()}},_selectableToHashCode:function(a){return a.column+"x"+a.row},_scrollItemIntoView:function(a){this._pane.scrollCellIntoView(a.column,a.row)},_getSelectableLocationX:function(d){var a=this._pane.getColumnConfig();var b=a.getItemPosition(d.column);var c=b+a.getItemSize(d.column)-1;return{left:b,right:c}},_getSelectableLocationY:function(c){var d=this._pane.getRowConfig();var b=d.getItemPosition(c.row);var a=b+d.getItemSize(c.row)-1;return{top:b,bottom:a}}}});qx.Class.define("qx.ui.virtual.selection.CellLines",{extend:qx.ui.virtual.selection.CellRectangle,members:{_getSelectableRange:function(e,d){var b=[];var g=this._pane.getColumnConfig().getItemCount();if(e.row<d.row||e.row==d.row&&e.column<d.column){var h=e.row*g+e.column;var c=d.row*g+d.column}else{var h=d.row*g+d.column;var c=e.row*g+e.column}for(var f=h;f<=c;f++){var a={row:Math.floor(f/g),column:f%g};if(this._isSelectable(a)){b.push(a)}}return b}}});qx.Class.define("qx.locale.String",{statics:{getQuotationStart:function(a){return qx.locale.Manager.getInstance().localize("cldr_quotationStart",[],a)},getQuotationEnd:function(a){return qx.locale.Manager.getInstance().localize("cldr_quotationEnd",[],a)},getAlternateQuotationStart:function(a){return qx.locale.Manager.getInstance().localize("cldr_alternateQuotationStart",[],a)},getAlternateQuotationEnd:function(a){return qx.locale.Manager.getInstance().localize("cldr_alternateQuotationEnd",[],a)}}});qx.Class.define("qx.util.StringBuilder",{extend:qx.type.BaseArray,members:{clear:function(){this.length=0},get:function(){return this.join("")},add:null,isEmpty:function(){return this.length===0},size:function(){return this.join("").length}},defer:function(b,a){a.add=a.push;a.toString=a.get;a.valueOf=a.get}});qx.Class.define("qx.application.Inline",{extend:qx.application.AbstractGui,members:{_createRootWidget:function(){return new qx.ui.root.Page(document)}}});qx.Class.define("qx.data.store.Yql",{extend:qx.data.store.Jsonp,construct:function(d,b,e){var c=e?"https":"http";var a=c+"://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent(d)+"&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys";this.base(arguments,a,b,"callback")}});qx.Class.define("qx.bom.Request",{extend:qx.core.Object,construct:function(){this.__headers={};this.__xmlhttp=this.__createNative()},statics:{UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},members:{__async:null,__stateListener:null,__xmlhttp:null,__timeoutListener:null,__timeoutHandle:null,__aborted:null,__lastFired:null,__headers:null,readyState:0,responseText:"",responseXML:null,status:0,statusText:"",timeout:0,onreadystatechange:function(){},ontimeout:function(){},onload:function(){},onerror:function(){},onabort:function(){},open:function(e,b,c,d,a){if(c==null){c=true}this.__async=c;this.__stateListener=qx.lang.Function.bind(this.__onNativeReadyStateChange,this);this.__timeoutListener=qx.lang.Function.bind(this.__onNativeTimeout,this);this.__xmlhttp.onreadystatechange=this.__stateListener;if(arguments.length>4){this.__xmlhttp.open(e,b,c,d,a)}else{if(arguments.length>3){this.__xmlhttp.open(e,b,c,d)}else{this.__xmlhttp.open(e,b,c)}}if((qx.core.Environment.get("engine.name")=="gecko")){if(!c){this.readyState=qx.bom.Request.OPENED;this.__fireReadyStateChange()}}},send:function(b){var c=this.__headers;if(b&&b.nodeType){b=window.XMLSerializer?new XMLSerializer().serializeToString(b):b.xml;if(!c["Content-Type"]){c["Content-Type"]="application/xml"}}for(var a in c){this.__xmlhttp.setRequestHeader(a,c[a])}if(this.timeout!=null&&this.timeout>0){this.__timeoutHandle=window.setTimeout(this.__timeoutListener,this.timeout)}this.__xmlhttp.send(b);if((qx.core.Environment.get("engine.name")=="gecko")){if(!this.__async){this.readyState=qx.bom.Request.OPENED;this.__synchronizeValues(this);while(this.readyState<qx.bom.Request.DONE){this.readyState++;this.__fireReadyStateChange();if(this.__aborted){return}}}}},isSuccessful:function(){var a=this.status;return a===304||(a>=200&&a<300)},abort:function(){if(this.__timeoutHandle){window.clearTimeout(this.__timeoutHandle)}this.__abortHelper();this.onabort();this.dispose()},__onNativeReadyStateChange:qx.event.GlobalError.observeMethod(function(){if((qx.core.Environment.get("engine.name")=="gecko")){if(!this.__async){return}}this.readyState=this.__xmlhttp.readyState;this.__synchronizeValues();if(this.__aborted){this.readyState=qx.bom.Request.UNSENT;return}if(this.readyState==qx.bom.Request.DONE&&this.__timeoutHandle){window.clearTimeout(this.__timeoutHandle)}this.__fireReadyStateChange();if(this.readyState==qx.bom.Request.DONE){this.dispose()}}),__onNativeTimeout:qx.event.GlobalError.observeMethod(function(){this.__abortHelper();this.ontimeout();this.dispose()}),getAllResponseHeaders:function(){try{return this.__xmlhttp.getAllResponseHeaders()}catch(a){return null}},getResponseHeader:function(a){try{return this.__xmlhttp.getResponseHeader(a)}catch(b){return null}},setRequestHeader:function(a,b){if(b==null){delete this.__headers[a]}else{this.__headers[a]=b}},removeRequestHeader:function(a,b){delete this.__headers[a]},getRequestHeader:function(a){return this.__headers[a]||null},__abortHelper:function(){this.__synchronizeValues();if(this.readyState>qx.bom.Request.UNSENT){this.__aborted=true}this.__xmlhttp.abort()},__createNative:qx.core.Environment.select("engine.name",{"default":function(){return new XMLHttpRequest},mshtml:function(){if(window.ActiveXObject&&qx.xml.Document.XMLHTTP){return new ActiveXObject(qx.xml.Document.XMLHTTP)}if(window.XMLHttpRequest){return new XMLHttpRequest}}}),__fireReadyStateChange:function(){if(this.__lastFired===this.readyState){return}this.onreadystatechange();this.__lastFired=this.readyState;if(this.readyState===4){if(this.isSuccessful()){this.onload()}else{this.onerror()}}},__getDocument:function(){var a=this.__xmlhttp.responseXML;if((qx.core.Environment.get("engine.name")=="mshtml")){if(a&&!a.documentElement&&this.__xmlhttp.getResponseHeader("Content-Type").match(/[^\/]+\/[^\+]+\+xml/)){a=new ActiveXObject(qx.xml.Document.DOMDOC);a.loadXML(this.__xmlhttp.responseText)}if(a&&a.parseError!=0){return null}}else{if(!a.documentElement||a.documentElement.tagName=="parsererror"){return null}}return a},__synchronizeValues:function(){var b=this.__xmlhttp;try{this.responseText=b.responseText}catch(a){}try{this.responseXML=this.__getDocument()}catch(a){}try{this.status=b.status}catch(a){}try{this.statusText=b.statusText}catch(a){}if((qx.core.Environment.get("engine.name")=="mshtml")){if(this.status===1223){this.status=204}}if(!this.status&&location.protocol==="file:"){this.status=204}}},destruct:function(){if(this.__timeoutHandle){window.clearTimeout(this.__timeoutHandle);this.__timeoutHandle=null}if(this.__xmlhttp){this.__xmlhttp.onreadystatechange=qx.lang.Function.empty;this.__xmlhttp=null}this.onreadystatechange=this.onload=this.onerror=this.onabort=null;this.__stateListener=null;this.__headers=null}});qx.Class.define("qx.ui.table.cellrenderer.Image",{extend:qx.ui.table.cellrenderer.AbstractImage,construct:function(b,a){this.base(arguments);if(b){this.__imageWidth=b}if(a){this.__imageHeight=a}this.__am=qx.util.AliasManager.getInstance()},members:{__am:null,__imageHeight:16,__imageWidth:16,_identifyImage:function(a){var b={imageWidth:this.__imageWidth,imageHeight:this.__imageHeight};if(a.value==""){b.url=null}else{b.url=this.__am.resolve(a.value)}b.tooltip=a.tooltip;return b}},destruct:function(){this.__am=null}});qx.Interface.define("qx.data.controller.IControllerDelegate",{members:{configureItem:function(a){},filter:function(a){},createItem:function(){},bindItem:function(a,b,c){}}});qx.Class.define("qx.bom.media.Video",{extend:qx.bom.media.Abstract,construct:function(a){this._video=document.createElement("video");if(a){this._video.src=a}this.base(arguments,this._video)},members:{_video:null,getWidth:function(){return this._video.width},setWidth:function(a){this._video.width=a},getHeight:function(){return this._video.height},setHeight:function(a){this._video.width=a},getVideoWidth:function(){return this._video.videoWidth},getVideoHeight:function(){return this._video.videoHeight},getPoster:function(){return this._video.poster},setPoster:function(a){this._video.poster=a}}});qx.Class.define("qx.ui.decoration.AbstractBox",{extend:qx.ui.decoration.Abstract,implement:[qx.ui.decoration.IDecorator],construct:function(c,a,b){this.base(arguments);this._setOrientation(b);if(qx.ui.decoration.css3.BorderImage.IS_SUPPORTED){this.__impl=new qx.ui.decoration.css3.BorderImage();if(c){this.__setBorderImage(c,b)}if(a!=null){this.__impl.setInsets(a)}}else{this.__impl=new qx.ui.decoration.BoxDiv(c,a,b)}},properties:{baseImage:{check:"String",nullable:true,apply:"_applyBaseImage"}},members:{__impl:null,_isHorizontal:null,_setOrientation:function(a){this._isHorizontal=a=="horizontal"},getMarkup:function(){return this.__impl.getMarkup()},resize:function(b,c,a){this.__impl.resize(b,c,a)},tint:function(b,a){},getInsets:function(){return this.__impl.getInsets()},_applyInsets:function(c,a,b){var d="set"+qx.lang.String.firstUp(b);this.__impl[d](c)},_applyBaseImage:function(b,a){if(this.__impl instanceof qx.ui.decoration.BoxDiv){this.__impl.setBaseImage(b)}else{this.__setBorderImage(b)}},__setBorderImage:function(i){this.__impl.setBorderImage(i);var b=qx.util.AliasManager.getInstance().resolve(i);var j=/(.*)(\.[a-z]+)$/.exec(b);var h=j[1];var c=j[2];var d=qx.util.ResourceManager.getInstance();if(qx.core.Environment.get("qx.debug")){if(!d.has(b)){this.warn("The border image '"+b+"' is not available!")}}if(this._isHorizontal){var a=d.getImageWidth(h+"-l"+c);var f=d.getImageWidth(h+"-r"+c);this.__impl.setSlice([0,f,0,a])}else{var g=d.getImageHeight(h+"-b"+c);var e=d.getImageHeight(h+"-t"+c);this.__impl.setSlice([e,0,g,0])}}},destruct:function(){this.__markup=this.__images=this.__edges=null}});qx.Class.define("qx.ui.decoration.HBox",{extend:qx.ui.decoration.AbstractBox,construct:function(b,a){this.base(arguments,b,a,"horizontal")}});qx.Class.define("qx.ui.container.Resizer",{extend:qx.ui.container.Composite,include:qx.ui.core.MResizable,properties:{appearance:{refine:true,init:"resizer"}}});qx.Mixin.define("qx.dev.unit.MRequirements",{statics:{__hasPhp:null},members:{require:function(e){for(var c=0,a=e.length;c<a;c++){var b=e[c];var d="has"+qx.lang.String.capitalize(b);if(!this[d]){throw new Error('Unable to verify requirement: No method "'+d+'" found')}if(!this[d]()){throw new qx.dev.unit.RequirementError(b)}}},hasSsl:function(){return qx.core.Environment.get("io.ssl")},hasHttp:function(){return document.location.protocol.indexOf("http")==0},hasPhp:function(){if(qx.dev.unit.MRequirements.__hasPhp!=null){return qx.dev.unit.MRequirements.__hasPhp}var a=qx.util.ResourceManager.getInstance().toUri("qx/test/xmlhttp/php_version.php");var c=new qx.bom.Request();c.onload=qx.lang.Function.bind(function(){try{qx.lang.Json.parse(c.responseText);qx.dev.unit.MRequirements.__hasPhp=true}catch(d){qx.dev.unit.MRequirements.__hasPhp=false}},this);c.onerror=c.abort=qx.lang.Function.bind(function(){qx.dev.unit.MRequirements.__hasPhp=false},this);c.open("POST",a,false);try{c.send()}catch(b){qx.dev.unit.MRequirements.__hasPhp=false}return qx.dev.unit.MRequirements.__hasPhp},hasGuiApp:function(){try{return qx.core.Init.getApplication() instanceof qx.application.Standalone}catch(a){return false}},hasInlineApp:function(){try{return qx.core.Init.getApplication() instanceof qx.application.Inline}catch(a){return false}},hasNativeApp:function(){try{return qx.core.Init.getApplication() instanceof qx.application.Native}catch(a){return false}},hasTouch:function(){return qx.core.Environment.get("event.touch")},hasFlash:function(){return qx.core.Environment.get("plugin.flash")},hasChrome:function(){return qx.core.Environment.get("browser.name")==="chrome"},hasFirefox:function(){return qx.core.Environment.get("browser.name")==="firefox"},hasGecko:function(){return qx.core.Environment.get("engine.name")=="gecko"},hasIe:function(){return qx.core.Environment.get("browser.name")==="ie"},hasMshtml:function(){return qx.core.Environment.get("engine.name")=="mshtml"},hasOpera:function(){return qx.core.Environment.get("engine.name")=="opera"},hasWebkit:function(){return qx.core.Environment.get("engine.name")=="webkit"}}});qx.Class.define("qx.application.Native",{extend:qx.core.Object,implement:[qx.application.IApplication],members:{main:function(){},finalize:function(){},close:function(){},terminate:function(){}}});qx.Class.define("qx.data.controller.Form",{extend:qx.core.Object,construct:function(a,c,b){this.base(arguments);this._selfUpdate=!!b;this.__bindingOptions={};if(a!=null){this.setModel(a)}if(c!=null){this.setTarget(c)}},properties:{model:{check:"qx.core.Object",apply:"_applyModel",event:"changeModel",nullable:true,dereference:true},target:{check:"qx.ui.form.Form",apply:"_applyTarget",event:"changeTarget",nullable:true,init:null,dereference:true}},members:{__objectController:null,__bindingOptions:null,addBindingOptions:function(c,d,a){this.__bindingOptions[c]=[d,a];if(this.getModel()==null||this.getTarget()==null){return}var e=this.getTarget().getItems()[c];var b=this.__isModelSelectable(e)?"modelSelection[0]":"value";this.__objectController.removeTarget(e,b,c);this.__objectController.addTarget(e,b,c,!this._selfUpdate,d,a)},createModel:function(g){var j=this.getTarget();if(j==null){throw new Error("No target is set.")}var k=j.getItems();var d={};for(var a in k){var l=a.split(".");var c=d;for(var e=0;e<l.length;e++){if(e+1==l.length){var h=k[a].constructor;var b=null;if(qx.Class.hasInterface(h,qx.ui.core.ISingleSelection)){b=k[a].getModelSelection().getItem(0)||null}else{b=k[a].getValue()}if(this.__bindingOptions[a]&&this.__bindingOptions[a][1]){b=this.__bindingOptions[a][1].converter(b)}c[l[e]]=b}else{if(!c[l[e]]){c[l[e]]={}}c=c[l[e]]}}}var f=qx.data.marshal.Json.createModel(d,g);this.setModel(f);return f},updateModel:function(){if(!this._selfUpdate||!this.getModel()||!this.getTarget()){return}var b=this.getTarget().getItems();for(var d in b){var e=b[d];var a=this.__isModelSelectable(e)?"modelSelection[0]":"value";var c=this.__bindingOptions[d];c=c&&this.__bindingOptions[d][1];qx.data.SingleValueBinding.updateTarget(e,a,this.getModel(),d,c)}},_applyTarget:function(b,a){if(a!=null){this.__tearDownBinding(a)}if(this.getModel()==null){return}if(b!=null){this.__setUpBinding()}},_applyModel:function(f,a){if(this.__objectController!=null){var c=this.getTarget().getItems();for(var d in c){var e=c[d];var b=this.__isModelSelectable(e)?"modelSelection[0]":"value";this.__objectController.removeTarget(e,b,d)}}if(this.__objectController!=null){this.__objectController.setModel(f)}if(this.getTarget()==null){return}if(f!=null){this.__setUpBinding()}},__setUpBinding:function(){if(this.__objectController==null){this.__objectController=new qx.data.controller.Object(this.getModel())}var b=this.getTarget().getItems();for(var d in b){var f=b[d];var a=this.__isModelSelectable(f)?"modelSelection[0]":"value";var c=this.__bindingOptions[d];try{if(c==null){this.__objectController.addTarget(f,a,d,!this._selfUpdate)}else{this.__objectController.addTarget(f,a,d,!this._selfUpdate,c[0],c[1])}}catch(e){if(qx.core.Environment.get("qx.debug")){this.warn("Could not bind property "+d+" of "+this.getModel())}}}},__tearDownBinding:function(e){if(this.__objectController==null){return}var b=e.getItems();for(var c in b){var d=b[c];var a=this.__isModelSelectable(d)?"modelSelection[0]":"value";this.__objectController.removeTarget(d,a,c)}},__isModelSelectable:function(a){return qx.Class.hasInterface(a.constructor,qx.ui.core.ISingleSelection)&&qx.Class.hasInterface(a.constructor,qx.ui.form.IModelSelection)}},destruct:function(){if(this.__objectController){this.__objectController.dispose()}}});qx.Class.define("qx.data.controller.Object",{extend:qx.core.Object,construct:function(a){this.base(arguments);this.__bindings={};this.__targets=[];if(a!=null){this.setModel(a)}},properties:{model:{check:"qx.core.Object",event:"changeModel",apply:"_applyModel",nullable:true,dereference:true}},members:{__targets:null,__bindings:null,_applyModel:function(j,b){for(var d=0;d<this.__targets.length;d++){var l=this.__targets[d][0];var h=this.__targets[d][1];var g=this.__targets[d][2];var c=this.__targets[d][3];var m=this.__targets[d][4];var k=this.__targets[d][5];if(b!=undefined&&!b.isDisposed()){this.__removeTargetFrom(l,h,g,b)}if(j!=undefined){this.__addTarget(l,h,g,c,m,k)}else{if(l.isDisposed()||qx.core.ObjectRegistry.inShutDown){continue}if(h.indexOf("[")==-1){l["reset"+qx.lang.String.firstUp(h)]()}else{var e=h.indexOf("[");var f=parseInt(h.substring(e+1,h.length-1),10);h=h.substring(0,e);var a=l["get"+qx.lang.String.firstUp(h)]();if(f=="last"){f=a.length}if(a){a.setItem(f,null)}}}}},addTarget:function(d,b,a,f,c,e){this.__targets.push([d,b,a,f,c,e]);this.__addTarget(d,b,a,f,c,e)},__addTarget:function(h,e,c,b,i,g){if(this.getModel()==null){return}var a=this.getModel().bind(c,h,e,i);var f=null;if(b){f=h.bind(e,this.getModel(),c,g)}var d=h.toHashCode();if(this.__bindings[d]==undefined){this.__bindings[d]=[]}this.__bindings[d].push([a,f,e,c,i,g])},removeTarget:function(c,b,a){this.__removeTargetFrom(c,b,a,this.getModel());for(var d=0;d<this.__targets.length;d++){if(this.__targets[d][0]==c&&this.__targets[d][1]==b&&this.__targets[d][2]==a){this.__targets.splice(d,1)}}},__removeTargetFrom:function(c,b,a,g){if(!(c instanceof qx.core.Object)){return}var e=this.__bindings[c.toHashCode()];if(e==undefined||e.length==0){return}for(var d=0;d<e.length;d++){if(e[d][2]==b&&e[d][3]==a){var f=e[d][0];g.removeBinding(f);if(e[d][1]!=null){c.removeBinding(e[d][1])}e.splice(d,1);return}}}},destruct:function(){if(this.getModel()!=null&&!this.getModel().isDisposed()){this.setModel(null)}}});qx.Class.define("qx.ui.mobile.form.ToggleButton",{extend:qx.ui.mobile.core.Widget,construct:function(a){this.base(arguments);if(a){this.setValue(a)}this.addListener("tap",this._onTap,this);this.addListener("swipe",this._onSwipe,this);this.__child=this._createChild();this._add(this.__child)},properties:{defaultCssClass:{refine:true,init:"toggleButton"},value:{check:"Boolean",init:false,apply:"_applyValue",event:"changeValue"}},members:{__child:null,_getChild:function(){return this.__child},_createChild:function(){return new qx.ui.mobile.container.Composite()},_applyValue:function(b,a){if(b){this._getChild().addCssClass("checked")}else{this._getChild().removeCssClass("checked")}},toggle:function(){this.setValue(!this.getValue())},_onTap:function(a){this.toggle()},_onSwipe:function(a){this.toggle()}},destruct:function(){this.removeListener("tap",this._onTap,this);this.removeListener("swipe",this._onSwipe,this);this.__child=null}});qx.Class.define("qx.ui.progressive.model.Default",{extend:qx.ui.progressive.model.Abstract,construct:function(){this.base(arguments);this.__elements=[]},members:{__elements:null,addElements:function(a){this.__elements=this.__elements.concat(a);this.fireDataEvent("dataAvailable",this.__elements.length)},addElement:function(a){this.__elements.push(a);this.fireDataEvent("dataAvailable",this.__elements.length)},getElementCount:function(){return this.__elements.length},getNextElement:function(){if(this.__elements.length>0){return({element:this.__elements.shift(),remaining:this.__elements.length})}return null}},destruct:function(){this.__elements=null}});qx.Class.define("qx.ui.progressive.renderer.table.cell.Boolean",{extend:qx.ui.progressive.renderer.table.cell.Icon,construct:function(){this.base(arguments);var d=qx.util.AliasManager.getInstance();var a=qx.util.ResourceManager.getInstance();var c=d.resolve("decoration/table/boolean-true.png");var b=d.resolve("decoration/table/boolean-false.png");this.__iconUrlTrue=a.toUri(c);this.__iconUrlFalse=a.toUri(b)},properties:{allowToggle:{check:"Boolean",init:false}},members:{__iconUrlTrue:null,__iconUrlFalse:null,__numericAllowed:null,__conditions:null,__defaultTextAlign:null,__defaultColor:null,__defaultFontStyle:null,__defaultFontWeight:null,_identifyImage:function(a){var b={imageWidth:11,imageHeight:11};switch(a.cellData){case true:b.url=this.__iconUrlTrue;b.extras="celldata='1' ";break;case false:b.url=this.__iconUrlFalse;b.extras="celldata='0' ";break;default:b.url=null;break}if(this.getAllowToggle()){b.extras+="onclick=\"var node = this.attributes.getNamedItem('celldata'); var value = node.nodeValue; var src; if (value == '0') {";if((qx.core.Environment.get("engine.name")=="mshtml")&&/\.png$/i.test(this.__iconUrlTrue)){b.extras+="  this.src='"+this.getBlankImage()+"';   var loader = 'DXImageTransform.Microsoft.AlphaImageLoader';   var filters = this.filters.item(loader);   filters.src='"+this.__iconUrlTrue+"';   filters.sizingMethod = 'scale'; "}else{b.extras+="  this.src='"+this.__iconUrlTrue+"'; "}b.extras+="  node.nodeValue='1'; } else {";if((qx.core.Environment.get("engine.name")=="mshtml")&&/\.png$/i.test(this.__iconUrlFalse)){b.extras+="  this.src='"+this.getBlankImage()+"';   var loader = 'DXImageTransform.Microsoft.AlphaImageLoader';   var filters = this.filters.item(loader);   filters.src='"+this.__iconUrlFalse+"';   filters.sizingMethod = 'scale'; "}else{b.extras+="  this.src='"+this.__iconUrlFalse+"'; "}b.extras+="  node.nodeValue='0'; }";b.extras+="try {   this.attributes.setNamedItem(node); } catch (e) {   var namedItem = document.createAttribute('celldata');   namedItem.value = node.nodeValue;   this.attributes.setNamedItem(namedItem); }\""}return b},_getCellStyle:function(b){var a=this.base(arguments,b);return a}},destruct:function(){this.__iconUrlTrue=this.__iconUrlFalse=null}});qx.Class.define("qx.ui.progressive.renderer.table.cell.Html",{extend:qx.ui.progressive.renderer.table.cell.Abstract});qx.Class.define("qx.util.Validate",{statics:{number:function(a){return function(b){qx.util.Validate.checkNumber(b,null,a)}},checkNumber:function(c,b,a){a=a||qx.locale.Manager.tr("%1 is not a number.",c);if((typeof c!=="number"&&(!(c instanceof Number)))||(!(isFinite(c)))){throw new qx.core.ValidationError("Validation Error",a)}},email:function(a){return function(b){qx.util.Validate.checkEmail(b,null,a)}},checkEmail:function(d,c,a){a=a||qx.locale.Manager.tr("'%1' is not an email address.",(d||""));var b=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;if(b.test(d)===false){throw new qx.core.ValidationError("Validation Error",a)}},string:function(a){return function(b){qx.util.Validate.checkString(b,null,a)}},checkString:function(c,b,a){a=a||qx.locale.Manager.tr("%1 is not a string.",c);if(typeof c!=="string"&&(!(c instanceof String))){throw new qx.core.ValidationError("Validation Error",a)}},url:function(a){return function(b){qx.util.Validate.checkUrl(b,null,a)}},checkUrl:function(d,c,a){a=a||qx.locale.Manager.tr("%1 is not an url.",d);var b=/([A-Za-z0-9])+:\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;if(!b.test(d)){throw new qx.core.ValidationError("Validation Error",a)}},color:function(a){return function(b){qx.util.Validate.checkColor(b,null,a)}},checkColor:function(c,b,a){try{qx.util.ColorUtil.stringToRgb(c)}catch(d){a=a||qx.locale.Manager.tr("%1 is not a color! %2",c,d);throw new qx.core.ValidationError("Validation Error",a)}},range:function(c,b,a){return function(d){a=a||qx.locale.Manager.tr("%1 is not in the range from [%2, %3].",d,c,b);if(d<c||d>b){throw new qx.core.ValidationError("Validation Error",a)}}},inArray:function(b,a){return function(c){a=a||qx.locale.Manager.tr("%1 is not in %2",c,b);if(b.indexOf(c)===-1){throw new qx.core.ValidationError("Validation Error",a)}}},regExp:function(b,a){return function(c){a=a||qx.locale.Manager.tr("%1 does not fit %2.",c,b);if(!b.test(c)){throw new qx.core.ValidationError("Validation Error",a)}}}}});qx.Class.define("qx.ui.progressive.renderer.table.cell.Conditional",{extend:qx.ui.progressive.renderer.table.cell.Abstract,construct:function(d,a,b,c){this.base(arguments);this.__numericAllowed=["==","!=",">","<",">=","<="];this.__betweenAllowed=["between","!between"];this.__conditions=[];this.__defaultTextAlign=d||"";this.__defaultColor=a||"";this.__defaultFontStyle=b||"";this.__defaultFontWeight=c||""},members:{__numericAllowed:null,__betweenAllowed:null,__conditions:null,__defaultTextAlign:null,__defaultColor:null,__defaultFontStyle:null,__defaultFontWeight:null,__applyFormatting:function(b,a){if(b.align){a["text-align"]=b.align}if(b.color){a.color=b.color}if(b.style){a["font-style"]=b.style}if(b.weight){a["font-weight"]=b.weight}},addNumericCondition:function(g,b,f,a,c,d,e){if(!qx.lang.Array.contains(this.__numericAllowed,g)||b==null){throw new Error("Condition not recognized or value is null!")}this.__conditions.push({condition:g,align:f,color:a,style:c,weight:d,value1:b,target:e})},addBetweenCondition:function(h,c,a,g,b,d,e,f){if(!qx.lang.Array.contains(this.__betweenAllowed,h)||c==null||a==null){throw new Error("Condition not recognized or value1/value2 is null!")}this.__conditions.push({condition:h,align:g,color:b,style:d,weight:e,value1:c,value2:a,target:f})},addRegex:function(c,f,a,b,d,e){if(!c){throw new Error("regex cannot be null!")}this.__conditions.push({condition:"regex",align:f,color:a,style:b,weight:d,regex:c,target:e})},_getCellStyle:function(b){if(this.__conditions.length==0){return b.style||""}var d;var c;var j;var a={"text-align":this.__defaultTextAlign,color:this.__defaultColor,"font-style":this.__defaultFontStyle,"font-weight":this.__defaultFontWeight};for(d=0;d<this.__conditions.length;d++){var e=this.__conditions[d];c=false;if(qx.lang.Array.contains(this.__numericAllowed,e.condition)){if(e.target==null){j=b.cellData}else{j=b.element.data[e.target]}switch(e.condition){case"==":if(j==e.value1){c=true}break;case"!=":if(j!=e.value1){c=true}break;case">":if(j>e.value1){c=true}break;case"<":if(j<e.value1){c=true}break;case">=":if(j>=e.value1){c=true}break;case"<=":if(j<=e.value1){c=true}break}}else{if(qx.lang.Array.contains(this.__betweenAllowed,e.condition)){if(e.target==null){j=b.cellData}else{j=b.element.data[e.target]}switch(e.condition){case"between":if(j>=e.value1&&j<=e.value2){c=true}break;case"!between":if(j<e.value1&&j>e.value2){c=true}break}}else{if(e.condition=="regex"){if(e.target==null){j=b.cellData}else{j=b.element.data[e.target]}var f=new RegExp(e.value1,"g");c=f.test(j)}}}if(c){this.__applyFormatting(e,a)}var h=[];for(var g in a){if(a[g]){h.push(g,":",a[g],";")}}}return h.join("")}},destruct:function(){this.__numericAllowed=this.__betweenAllowed=this.__conditions=null}});qx.Class.define("qx.ui.groupbox.RadioGroupBox",{extend:qx.ui.groupbox.GroupBox,implement:[qx.ui.form.IRadioItem,qx.ui.form.IExecutable,qx.ui.form.IBooleanForm,qx.ui.form.IModel],include:[qx.ui.form.MModelProperty],properties:{appearance:{refine:true,init:"radio-groupbox"}},events:{changeValue:"qx.event.type.Data",execute:"qx.event.type.Event"},members:{_createChildControlImpl:function(c,b){var a;switch(c){case"legend":a=new qx.ui.form.RadioButton();a.setAllowGrowX(true);a.setValue(true);a.addListener("changeValue",this._onRadioChangeValue,this);a.addListener("resize",this._repositionFrame,this);a.addListener("execute",this._onExecute,this);this._add(a,{left:0,right:0})}return a||this.base(arguments,c)},_onExecute:function(a){this.fireEvent("execute")},_onRadioChangeValue:function(b){var a=b.getData()?true:false;this.getChildrenContainer().setEnabled(a);this.fireDataEvent("changeValue",a,b.getOldData())},execute:function(){this.getChildControl("legend").execute()},setCommand:function(a){this.getChildControl("legend").setCommand(a)},getCommand:function(){return this.getChildControl("legend").getCommand()},getGroup:function(){return this.getChildControl("legend").getGroup()},setGroup:function(a){if(a!=null){a.add(this)}return},getValue:function(){return this.getChildControl("legend").getValue()},setValue:function(a){this.getChildControl("legend").setValue(a)},resetValue:function(){this.getChildControl("legend").resetValue()},getLabel:function(){return this.getChildControl("legend").getLabel()}}});qx.Class.define("qx.ui.toolbar.CheckBox",{extend:qx.ui.form.ToggleButton,construct:function(a,b){this.base(arguments,a,b);this.removeListener("keydown",this._onKeyDown);this.removeListener("keyup",this._onKeyUp)},properties:{appearance:{refine:true,init:"toolbar-button"},show:{refine:true,init:"inherit"},focusable:{refine:true,init:false}}});qx.Class.define("qx.ui.toolbar.RadioButton",{extend:qx.ui.toolbar.CheckBox,include:[qx.ui.form.MModelProperty],implement:[qx.ui.form.IModel,qx.ui.form.IRadioItem],members:{_applyValue:function(c,b){this.base(arguments,c,b);if(c){var a=this.getGroup();if(a){a.setSelection([this])}}},_onExecute:function(b){var a=this.getGroup();if(a&&a.getAllowEmptySelection()||!a){this.toggleValue()}else{this.setValue(true)}}}});qx.Class.define("qx.bom.Vml",{statics:{create:function(d,a,e){var e=e||window;var c=e.document.createElement("v:"+(d||"shape"));if(a){for(var b in a){c.setAttribute(b,a[b])}}return c},createImage:function(a,b,h,e,c,g,d){var f=qx.bom.Vml.create("rect",{stroked:"False"});var i=qx.bom.Vml.create("fill",{type:"tile"});f.appendChild(i);if(a||b||h){this.updateImage(f,a,b,h,e,c,g,d)}return f},updateImage:function(f,b,d,l,h,e,i,g){var k=qx.bom.element.Style;var c=qx.bom.element.Attribute;k.set(f,"width",d,false);k.set(f,"height",l,false);var m=f.firstChild;c.set(m,"src",b,false);var a=h?(-h)/(i):0;var j=e?(-e)/(g):0;c.set(m,"origin",a.toFixed(2)+","+j,false)}},defer:function(){if((qx.core.Environment.get("engine.name")=="mshtml")){qx.bom.Stylesheet.createElement("v\\: * { behavior:url(#default#VML);display:inline-block; }");/*if(!document.namespaces.v){document.namespaces.add("v","urn:schemas-microsoft-com:vml")}*/}}});qx.Bootstrap.define("qx.bom.client.Feature",{statics:{CSS_POINTER_EVENTS:false,CSS_TEXT_OVERFLOW:false,PLACEHOLDER:false,STANDARD_MODE:false,QUIRKS_MODE:false,HTML5_CLASSLIST:!!(document.documentElement.classList&&qx.Bootstrap.getClass(document.documentElement.classList)==="DOMTokenList"),SSL:window.location.protocol==="https:",GEARS:!!(window.google&&window.google.gears),CONTENT_BOX:false,BORDER_BOX:false,SVG:false,CANVAS:!!window.CanvasRenderingContext2D,VML:false,XPATH:!!document.evaluate,XUL:false,AIR:navigator.userAgent.indexOf("adobeair")!==-1,TOUCH:false,ECMA_OBJECT_COUNT:(({}).__count__==0)},defer:function(d){d.PLACEHOLDER=qx.bom.client.Css.getPlaceholder();d.CSS_TEXT_OVERFLOW=qx.bom.client.Css.getTextOverflow();d.CSS_POINTER_EVENTS=qx.bom.client.Event.getPointer();d.QUIRKS_MODE=qx.bom.client.Browser.getQuirksMode();d.STANDARD_MODE=!d.QUIRKS_MODE;d.BORDER_BOX=qx.bom.client.Css.getBoxModel()=="border";d.CONTENT_BOX=qx.bom.client.Css.getBoxModel()=="content";d.SVG=qx.bom.client.Html.getSvg();d.VML=qx.bom.client.Html.getVml();d.XUL=qx.bom.client.Html.getXul();d.TOUCH=qx.bom.client.Event.getTouch();if(qx.Bootstrap.DEBUG){var c=["STANDARD_MODE","QUIRKS_MODE","CONTENT_BOX","BORDER_BOX","SVG","CANVAS","VML","XPATH","AIR","GEARS","SSL","ECMA_OBJECT_COUNT","CSS_POINTER_EVENTS","XUL","CSS_TEXT_OVERFLOW","HTML5_CLASSLIST","TOUCH","PLACEHOLDER"];for(var a=0;a<c.length;a++){if(d.__defineGetter__){var b=d[c[a]];d.__defineGetter__(c[a],qx.Bootstrap.bind(function(e,g){var f="The constant '"+e+"' of '"+d.classname+"'is deprecated: Please check the API documentation of qx.core.Environment.";if(qx.dev&&qx.dev.StackTrace){f+="\nTrace:"+qx.dev.StackTrace.getStackTrace().join("\n")}qx.Bootstrap.warn(f);return g},d,c[a],b))}}}}});qx.Class.define("qx.ui.tree.TreeFolder",{extend:qx.ui.tree.core.AbstractTreeItem,properties:{appearance:{refine:true,init:"tree-folder"}},members:{_addWidgets:function(){this.addSpacer();this.addOpenButton();this.addIcon();this.addLabel()}}});qx.Class.define("qx.ui.layout.Dock",{extend:qx.ui.layout.Abstract,construct:function(b,a,d,c){this.base(arguments);if(b){this.setSpacingX(b)}if(a){this.setSpacingY(a)}if(d){this.setSeparatorX(d)}if(c){this.setSeparatorY(c)}},properties:{sort:{check:["auto","y","x"],init:"auto",apply:"_applySort"},separatorX:{check:"Decorator",nullable:true,apply:"_applyLayoutChange"},separatorY:{check:"Decorator",nullable:true,apply:"_applyLayoutChange"},connectSeparators:{check:"Boolean",init:false,apply:"_applyLayoutChange"},spacingX:{check:"Integer",init:0,apply:"_applyLayoutChange"},spacingY:{check:"Integer",init:0,apply:"_applyLayoutChange"}},members:{__children:null,__edges:null,verifyLayoutProperty:qx.core.Environment.select("qx.debug",{"true":function(b,a,c){this.assertInArray(a,["flex","edge","height","width"],"The property '"+a+"' is not supported by the Dock layout!");if(a==="edge"){this.assertInArray(c,["north","south","west","east","center"])}else{if(a==="flex"){this.assertNumber(c);this.assert(c>=0)}else{this.assertMatch(c,qx.ui.layout.Util.PERCENT_VALUE)}}},"false":null}),_applySort:function(){this._invalidChildrenCache=true;this._applyLayoutChange()},__edgeMap:{north:1,south:2,west:3,east:4,center:5},__alignMap:{1:"top",2:"bottom",3:"left",4:"right"},__rebuildCache:function(){var l=this._getLayoutChildren();var b,a;var c=l.length;var f=[];var k=[];var d=[];var j=this.getSort()==="y";var e=this.getSort()==="x";for(var h=0;h<c;h++){b=l[h];d=b.getLayoutProperties().edge;if(d==="center"){if(a){throw new Error("It is not allowed to have more than one child aligned to 'center'!")}a=b}else{if(e||j){if(d==="north"||d==="south"){j?f.push(b):k.push(b)}else{if(d==="west"||d==="east"){j?k.push(b):f.push(b)}}}else{f.push(b)}}}var m=f.concat(k);if(a){m.push(a)}this.__children=m;var g=[];for(var h=0;h<c;h++){d=m[h].getLayoutProperties().edge;g[h]=this.__edgeMap[d]||5}this.__edges=g;delete this._invalidChildrenCache},renderLayout:function(I,q){if(this._invalidChildrenCache){this.__rebuildCache()}var n=qx.ui.layout.Util;var u=this.__children;var s=this.__edges;var v=u.length;var N,l,x,y,j,z,a,e,G;var k=[];var J=[];var F=this._getSeparatorWidths();var f=this.getSpacingX();var d=this.getSpacingY();var D=-f;var g=-d;if(F.x){D-=F.x+f}if(F.y){g-=F.y+d}for(var M=0;M<v;M++){l=u[M];y=l.getLayoutProperties();x=l.getSizeHint();a=x.width;e=x.height;if(y.width!=null){a=Math.floor(I*parseFloat(y.width)/100);if(a<x.minWidth){a=x.minWidth}else{if(a>x.maxWidth){a=x.maxWidth}}}if(y.height!=null){e=Math.floor(q*parseFloat(y.height)/100);if(e<x.minHeight){e=x.minHeight}else{if(e>x.maxHeight){e=x.maxHeight}}}k[M]=a;J[M]=e;switch(s[M]){case 1:case 2:g+=e+l.getMarginTop()+l.getMarginBottom()+d;if(F.y){g+=F.y+d}break;case 3:case 4:D+=a+l.getMarginLeft()+l.getMarginRight()+f;if(F.x){D+=F.x+f}break;default:D+=a+l.getMarginLeft()+l.getMarginRight()+f;g+=e+l.getMarginTop()+l.getMarginBottom()+d;if(F.x){D+=F.x+f}if(F.y){g+=F.y+d}}}if(D!=I){N={};z=D<I;for(var M=0;M<v;M++){l=u[M];switch(s[M]){case 3:case 4:case 5:j=l.getLayoutProperties().flex;if(j==null&&s[M]==5){j=1}if(j>0){x=l.getSizeHint();N[M]={min:x.minWidth,value:k[M],max:x.maxWidth,flex:j}}}}var w=n.computeFlexOffsets(N,I,D);for(var M in w){G=w[M].offset;k[M]+=G;D+=G}}if(g!=q){N={};z=g<q;for(var M=0;M<v;M++){l=u[M];switch(s[M]){case 1:case 2:case 5:j=l.getLayoutProperties().flex;if(j==null&&s[M]==5){j=1}if(j>0){x=l.getSizeHint();N[M]={min:x.minHeight,value:J[M],max:x.maxHeight,flex:j}}}}var w=n.computeFlexOffsets(N,q,g);for(var M in w){G=w[M].offset;J[M]+=G;g+=G}}this._clearSeparators();var L=this.getSeparatorX(),K=this.getSeparatorY();var O=this.getConnectSeparators();var b=0,c=0;var h,m,a,e,E,p;var C,P,t,B;var H,A,o,Q;var r=this.__alignMap;for(var M=0;M<v;M++){l=u[M];p=s[M];x=l.getSizeHint();H=l.getMarginTop();A=l.getMarginBottom();o=l.getMarginLeft();Q=l.getMarginRight();switch(p){case 1:case 2:a=I-o-Q;if(a<x.minWidth){a=x.minWidth}else{if(a>x.maxWidth){a=x.maxWidth}}e=J[M];m=b+n.computeVerticalAlignOffset(r[p],e,q,H,A);h=c+n.computeHorizontalAlignOffset(l.getAlignX()||"left",a,I,o,Q);if(F.y){if(p==1){P=b+e+H+d+A}else{P=b+q-e-H-d-A-F.y}C=h;t=I;if(O&&C>0){C-=f+o;t+=(f)*2}else{C-=o}this._renderSeparator(K,{left:C,top:P,width:t,height:F.y})}E=e+H+A+d;if(F.y){E+=F.y+d}q-=E;if(p==1){b+=E}break;case 3:case 4:e=q-H-A;if(e<x.minHeight){e=x.minHeight}else{if(e>x.maxHeight){e=x.maxHeight}}a=k[M];h=c+n.computeHorizontalAlignOffset(r[p],a,I,o,Q);m=b+n.computeVerticalAlignOffset(l.getAlignY()||"top",e,q,H,A);if(F.x){if(p==3){C=c+a+o+f+Q}else{C=c+I-a-o-f-Q-F.x}P=m;B=q;if(O&&P>0){P-=d+H;B+=(d)*2}else{P-=H}this._renderSeparator(L,{left:C,top:P,width:F.x,height:B})}E=a+o+Q+f;if(F.x){E+=F.x+f}I-=E;if(p==3){c+=E}break;default:a=I-o-Q;e=q-H-A;if(a<x.minWidth){a=x.minWidth}else{if(a>x.maxWidth){a=x.maxWidth}}if(e<x.minHeight){e=x.minHeight}else{if(e>x.maxHeight){e=x.maxHeight}}h=c+n.computeHorizontalAlignOffset(l.getAlignX()||"left",a,I,o,Q);m=b+n.computeVerticalAlignOffset(l.getAlignY()||"top",e,q,H,A)}l.renderLayout(h,m,a,e)}},_getSeparatorWidths:function(){var c=this.getSeparatorX(),a=this.getSeparatorY();if(c||a){var e=qx.theme.manager.Decoration.getInstance()}if(c){var d=e.resolve(c);var g=d.getInsets();var i=g.left+g.right}if(a){var b=e.resolve(a);var f=b.getInsets();var h=f.top+f.bottom}return{x:i||0,y:h||0}},_computeSizeHint:function(){if(this._invalidChildrenCache){this.__rebuildCache()}var f=this.__children;var b=this.__edges;var e=f.length;var n,h;var q,p;var a=0,d=0;var l=0,x=0;var z=0,c=0;var k=0,v=0;var g=this._getSeparatorWidths();var u=this.getSpacingX(),t=this.getSpacingY();var y=-u,w=-t;if(g.x){y-=g.x+u}if(g.y){w-=g.y+t}for(var s=0;s<e;s++){h=f[s];n=h.getSizeHint();q=h.getMarginLeft()+h.getMarginRight();p=h.getMarginTop()+h.getMarginBottom();switch(b[s]){case 1:case 2:z=Math.max(z,n.width+a+q);c=Math.max(c,n.minWidth+d+q);k+=n.height+p;v+=n.minHeight+p;w+=t;if(g.y){w+=g.y+t}break;case 3:case 4:l=Math.max(l,n.height+k+p);x=Math.max(x,n.minHeight+v+p);a+=n.width+q;d+=n.minWidth+q;y+=u;if(g.x){y+=g.x+u}break;default:a+=n.width+q;d+=n.minWidth+q;k+=n.height+p;v+=n.minHeight+p;y+=u;if(g.x){y+=g.x+u}w+=t;if(g.y){w+=g.y+t}}}var m=Math.max(d,c)+y;var r=Math.max(a,z)+y;var j=Math.max(x,v)+w;var o=Math.max(l,k)+w;return{minWidth:m,width:r,minHeight:j,height:o}}},destruct:function(){this.__edges=this.__children=null}});qx.Class.define("qx.util.EditDistance",{statics:{OPERATION_DELETE:1,OPERATION_INSERT:2,OPERATION_REPLACE:3,__computeLevenshteinDistance:function(c,b){var f=[];var a,e,d;for(a=0;a<=c.length;a++){f[a]=[];f[a][0]=a}for(e=1;e<=b.length;e++){f[0][e]=e}for(a=1;a<=c.length;a++){for(e=1;e<=b.length;e++){d=c[a-1]===b[e-1]?0:1;if(f[a]===undefined){f[a]=[]}f[a][e]=Math.min(f[a-1][e]+1,f[a][e-1]+1,f[a-1][e-1]+d)}}return f},__computeEditOperations:function(g,e,d){var b=[];var a=e.length;var f=d.length;if(a===0){for(var c=0;c<f;c++){b.push({operation:this.OPERATION_INSERT,pos:c,old:null,value:d[c]})}return b}if(f===0){for(var c=a-1;c>=0;c--){b.push({operation:this.OPERATION_DELETE,pos:c,old:e[c],value:null})}return b}while(a!==0||f!==0){if(a!=0&&g[a][f]==g[a-1][f]+1){b.push({operation:this.OPERATION_DELETE,pos:a-1,old:e[a-1],value:null});a-=1}else{if(f!=0&&g[a][f]==g[a][f-1]+1){b.push({operation:this.OPERATION_INSERT,pos:a,old:null,value:d[f-1]});f-=1}else{if(e[a-1]!==d[f-1]){b.push({operation:this.OPERATION_REPLACE,pos:a-1,old:e[a-1],value:d[f-1]})}a-=1;f-=1}}}return b},getEditOperations:function(c,b){var d=this.__computeLevenshteinDistance(c,b);var a=this.__computeEditOperations(d,c,b);return a}}});qx.Class.define("qx.ui.table.cellrenderer.Number",{extend:qx.ui.table.cellrenderer.Conditional,properties:{numberFormat:{check:"qx.util.format.NumberFormat",init:null,nullable:true}},members:{_getContentHtml:function(a){var b=this.getNumberFormat();if(b){if(a.value||a.value==0){return b.format(a.value)}else{return""}}else{return a.value==0?"0":(a.value||"")}},_getCellClass:function(a){return"qooxdoo-table-cell qooxdoo-table-cell-right"}}});qx.Interface.define("qx.ui.list.core.IListDelegate",{members:{configureItem:function(a){},configureGroupItem:function(a){},createItem:function(){},createGroupItem:function(){},bindItem:function(a,b,c){},bindGroupItem:function(a,b,c){},filter:function(a){},sorter:function(d,c){},group:function(a){}}});qx.Class.define("qx.ui.control.ColorPopup",{extend:qx.ui.popup.Popup,implement:[qx.ui.form.IColorForm],construct:function(){this.base(arguments);this.setLayout(new qx.ui.layout.VBox(5));this._createChildControl("auto-button");this._createBoxes();this._createChildControl("preview-pane");this._createChildControl("selector-button");this.addListener("changeVisibility",this._onChangeVisibility,this)},properties:{appearance:{refine:true,init:"colorpopup"},value:{nullable:true,apply:"_applyValue",event:"changeValue"},red:{check:"Number",init:null,nullable:true,event:"changeRed"},green:{check:"Number",init:null,nullable:true,event:"changeGreen"},blue:{check:"Number",init:null,nullable:true,event:"changeBlue"}},members:{__minZIndex:100000,__boxes:null,__colorSelectorWindow:null,__colorSelector:null,__recentTableId:"recent",__fieldNumber:12,_createChildControlImpl:function(c,b){var a;switch(c){case"field":a=new qx.ui.core.Widget;a.addListener("mousedown",this._onFieldMouseDown,this);a.addListener("mouseover",this._onFieldMouseOver,this);a.addListener("mouseout",this._onFieldMouseOut,this);break;case"auto-button":a=new qx.ui.form.Button(this.tr("Automatic"));a.setAllowStretchX(true);a.addListener("execute",this._onAutomaticBtnExecute,this);this.add(a);break;case"selector-button":a=new qx.ui.form.Button(this.tr("Open ColorSelector"));a.addListener("execute",this._onSelectorButtonExecute,this);this.add(a);break;case"preview-pane":a=new qx.ui.groupbox.GroupBox(this.tr("Preview (Old/New)"));a.setLayout(new qx.ui.layout.HBox);a.add(this._createChildControl("selected-preview",true),{flex:1});a.add(this._createChildControl("current-preview",true),{flex:1});this.add(a);break;case"selected-preview":a=new qx.ui.container.Composite(new qx.ui.layout.Basic);break;case"current-preview":a=new qx.ui.container.Composite(new qx.ui.layout.Basic);break;case"colorselector-okbutton":a=new qx.ui.form.Button(this.tr("OK"));a.addListener("execute",this._onColorSelectorOk,this);break;case"colorselector-cancelbutton":a=new qx.ui.form.Button(this.tr("Cancel"));a.addListener("execute",this._onColorSelectorCancel,this);break}return a||this.base(arguments,c)},_createBoxes:function(){this.__boxes={};var c=this._tables;var f,e,g;var a=0;for(var d in c){f=c[d];e=new qx.ui.groupbox.GroupBox(f.label);e.setLayout(new qx.ui.layout.HBox);this.__boxes[d]=e;this.add(e);for(var b=0;b<this.__fieldNumber;b++){g=this.getChildControl("field#"+(a++));g.setBackgroundColor(f.values[b]||null);e.add(g)}}},_createColorSelector:function(){if(this.__colorSelector){return}var d=new qx.ui.window.Window(this.tr("Color Selector"));this.__colorSelectorWindow=d;d.setLayout(new qx.ui.layout.VBox(16));d.setResizable(false);d.moveTo(20,20);this.__colorSelector=new qx.ui.control.ColorSelector;d.add(this.__colorSelector);var a=new qx.ui.container.Composite(new qx.ui.layout.HBox(8,"right"));d.add(a);var c=this._createChildControl("colorselector-cancelbutton");var b=this._createChildControl("colorselector-okbutton");a.add(c);a.add(b)},_applyValue:function(c,a){if(c===null){this.setRed(null);this.setGreen(null);this.setBlue(null)}else{var b=qx.util.ColorUtil.stringToRgb(c);this.setRed(b[0]);this.setGreen(b[1]);this.setBlue(b[2])}this.getChildControl("selected-preview").setBackgroundColor(c);this._rotatePreviousColors()},_rotatePreviousColors:function(){if(!this._tables){return}var f=this._tables[this.__recentTableId].values;var b=this.__boxes[this.__recentTableId];if(!f){return}var e=this.getValue();if(!e){return}var c=f.indexOf(e);if(c!=-1){qx.lang.Array.removeAt(f,c)}else{if(f.length==this.__fieldNumber){f.shift()}}f.push(e);var a=b.getChildren();for(var d=0;d<a.length;d++){a[d].setBackgroundColor(f[d]||null)}},_onFieldMouseDown:function(b){var a=this.getChildControl("current-preview").getBackgroundColor();this.setValue(a);if(a){this.hide()}},_onFieldMouseOver:function(a){this.getChildControl("current-preview").setBackgroundColor(a.getTarget().getBackgroundColor())},_onFieldMouseOut:function(f){var d=this.getRed();var c=this.getGreen();var a=this.getBlue();var b=null;if(d!==null||c!==null||a!==null){var b=qx.util.ColorUtil.rgbToRgbString([d,c,a])}this.getChildControl("current-preview").setBackgroundColor(b)},_onAutomaticBtnExecute:function(){this.setValue(null);this.hide()},_onSelectorButtonExecute:function(){this._createColorSelector();this.exclude();var c=this.getRed();var b=this.getGreen();var a=this.getBlue();if(c===null||b===null||a===null){c=255;b=255;a=255}this.__colorSelector.setRed(c);this.__colorSelector.setGreen(b);this.__colorSelector.setBlue(a);this.__colorSelectorWindow.open()},_onColorSelectorOk:function(){var a=this.__colorSelector;this.setValue(qx.util.ColorUtil.rgbToRgbString([a.getRed(),a.getGreen(),a.getBlue()]));this.__colorSelectorWindow.close()},_onColorSelectorCancel:function(){this.__colorSelectorWindow.close()},_onChangeVisibility:function(f){if(this.getVisibility()=="visible"){var d=this.getRed();var c=this.getGreen();var a=this.getBlue();var b=null;if(d!==null||c!==null||a!==null){var b=qx.util.ColorUtil.rgbToRgbString([d,c,a])}this.getChildControl("selected-preview").setBackgroundColor(b);this.getChildControl("current-preview").setBackgroundColor(b)}},_tables:{core:{label:"Basic Colors",values:["#000","#333","#666","#999","#CCC","#FFF","red","green","blue","yellow","teal","maroon"]},recent:{label:"Recent Colors",values:[]}}},destruct:function(){this._disposeObjects("__colorSelectorWindow","__colorSelector");this._tables=this.__boxes=null}});qx.Class.define("qx.ui.table.cellrenderer.Dynamic",{extend:qx.ui.table.cellrenderer.Default,construct:function(a){this.base(arguments);if(a){this.setCellRendererFactoryFunction(a)}},properties:{cellRendererFactoryFunction:{check:"Function",nullable:true,init:null}},members:{createDataCellHtml:function(b,a){var c=this.getCellRendererFactoryFunction();if(!c){throw new Error("No function provided! Aborting.")}var d=c(b);return d.createDataCellHtml(b,a)}}});qx.Class.define("qx.ui.groupbox.CheckGroupBox",{extend:qx.ui.groupbox.GroupBox,implement:[qx.ui.form.IExecutable,qx.ui.form.IBooleanForm,qx.ui.form.IModel],include:[qx.ui.form.MModelProperty],properties:{appearance:{refine:true,init:"check-groupbox"}},events:{changeValue:"qx.event.type.Data",execute:"qx.event.type.Event"},members:{_createChildControlImpl:function(c,b){var a;switch(c){case"legend":a=new qx.ui.form.CheckBox();a.setValue(true);a.setAllowGrowX(true);a.addListener("changeValue",this._onRadioChangeValue,this);a.addListener("resize",this._repositionFrame,this);a.addListener("execute",this._onExecute,this);this._add(a,{left:0,right:0})}return a||this.base(arguments,c)},_onExecute:function(a){this.fireEvent("execute")},_onRadioChangeValue:function(b){var a=b.getData()?true:false;this.getChildrenContainer().setEnabled(a);this.fireDataEvent("changeValue",a,b.getOldData())},execute:function(){this.getChildControl("legend").execute()},setCommand:function(a){this.getChildControl("legend").setCommand(a)},getCommand:function(){return this.getChildControl("legend").getCommand()},getValue:function(){return this.getChildControl("legend").getValue()},setValue:function(a){this.getChildControl("legend").setValue(a)},resetValue:function(){this.getChildControl("legend").resetValue()}}});qx.Class.define("qx.dev.ObjectSummary",{statics:{getInfo:function(){var e={};var a=0;var c;var g=qx.core.ObjectRegistry.getRegistry();for(var h in g){c=g[h];if(c&&c.isDisposed()===false){if(e[c.classname]==null){e[c.classname]=1}else{e[c.classname]++}a++}}var j=[];for(var f in e){j.push({classname:f,number:e[f]})}j.sort(function(k,i){return i.number-k.number});var d="Summary: ("+a+" Objects)\n\n";for(var b=0;b<j.length;b++){d+=j[b].number+": "+j[b].classname+"\n"}return d},getNewObjects:function(){var j={};var d=0;var f;var l=qx.core.ObjectRegistry.getRegistry();var k={};var c;for(var m in l){f=l[m];if(f&&f.__disposed===false){var a=f.classname;if(j[a]==null){j[a]=1}else{j[a]++}c=k[a];if(c==null){c=k[a]=new Array()}c[c.length]=f.toHashCode();d++}}if(!this._m_dObjectList){this._m_dObjectList={}}var b={};for(var a in j){if(!(a in this._m_dObjectList)){this._m_dObjectList[a]=0}if(this._m_dObjectList[a]>=0&&this._m_dObjectList[a]<j[a]){b[a]=j[a]-this._m_dObjectList[a]}}this._m_dObjectList=j;var n=[];for(var h in b){n.push({classname:h,number:b[h],aHashCode:k[h]})}n.sort(function(o,i){return i.number-o.number});var g="Summary: ("+d+" Objects)\r\n\r\n";for(var e=0;e<n.length;e++){g+=n[e].number+": "+n[e].classname+" ("+n[e].aHashCode.join(", ")+")\r\n"}return g}}});(function(){var b=function(c,d){return function(n,m,l,j,h,g){var e=this.length;if(e>0){var f=c[d];for(var k=0;k<e;k++){if(this[k].nodeType===1){f.call(c,this[k],n,m,l,j,h,g)}}}return this}};var a=function(c,d){return function(i,g,f,e,k,j){if(this.length>0){var h=this[0].nodeType===1?c[d](this[0],i,g,f,e,k,j):null;if(h&&h.nodeType){return this.__pushStack([h])}else{return h}}return null}};qx.Class.define("qx.bom.Collection",{extend:qx.type.BaseArray,statics:{query:function(d,e){var c=qx.bom.Selector.query(d,e);return qx.lang.Array.cast(c,qx.bom.Collection)},id:function(d){var c=document.getElementById(d);if(c&&c.id!=d){return qx.bom.Collection.query("#"+d)}if(c){return new qx.bom.Collection(c)}else{return new qx.bom.Collection()}},html:function(e,d){var c=qx.bom.Html.clean([e],d);return qx.lang.Array.cast(c,qx.bom.Collection)},__expr:/^[^<]*(<(.|\s)+>)[^>]*$|^#([\w-]+)$/,create:function(c,e){var f=qx.bom.Collection;if(c.nodeType){return new f(c)}else{if(typeof c==="string"){var d=f.__expr.exec(c);if(d){return d[1]?f.html(d[1],e):f.id(d[3].substring(1))}else{return f.query(c,e)}}else{return qx.lang.Array.cast(c,qx.bom.Collection)}}}},members:{__prevObject:null,setAttribute:b(qx.bom.element.Attribute,"set"),resetAttribute:b(qx.bom.element.Attribute,"reset"),getAttribute:a(qx.bom.element.Attribute,"get"),addClass:b(qx.bom.element.Class,"add"),getClass:a(qx.bom.element.Class,"get"),hasClass:a(qx.bom.element.Class,"has"),removeClass:b(qx.bom.element.Class,"remove"),replaceClass:b(qx.bom.element.Class,"replace"),toggleClass:b(qx.bom.element.Class,"toggle"),setValue:b(qx.bom.Input,"setValue"),getValue:a(qx.bom.Input,"getValue"),setStyle:b(qx.bom.element.Style,"set"),setStyles:b(qx.bom.element.Style,"setStyles"),resetStyle:b(qx.bom.element.Style,"reset"),getStyle:a(qx.bom.element.Style,"get"),setCss:b(qx.bom.element.Style,"setCss"),getCss:b(qx.bom.element.Style,"getCss"),getOffset:a(qx.bom.element.Location,"get"),getPosition:a(qx.bom.element.Location,"getPosition"),getOffsetParent:a(qx.bom.element.Location,"getOffsetParent"),setScrollLeft:function(f){var d=qx.dom.Node;for(var e=0,c=this.length,g;e<c;e++){g=this[e];if(d.isElement(g)){g.scrollLeft=f}else{if(d.isWindow(g)){g.scrollTo(f,this.getScrollTop(g))}else{if(d.isDocument(g)){d.getWindow(g).scrollTo(f,this.getScrollTop(g))}}}}return this},setScrollTop:function(f){var d=qx.dom.Node;for(var e=0,c=this.length,g;e<c;e++){g=this[e];if(d.isElement(g)){g.scrollTop=f}else{if(d.isWindow(g)){g.scrollTo(this.getScrollLeft(g),f)}else{if(d.isDocument(g)){d.getWindow(g).scrollTo(this.getScrollLeft(g),f)}}}}return this},getScrollLeft:function(){var d=this[0];if(!d){return null}var c=qx.dom.Node;if(c.isWindow(d)||c.isDocument(d)){return qx.bom.Viewport.getScrollLeft()}return d.scrollLeft},getScrollTop:function(){var d=this[0];if(!d){return null}var c=qx.dom.Node;if(c.isWindow(d)||c.isDocument(d)){return qx.bom.Viewport.getScrollTop()}return d.scrollTop},getWidth:function(){var d=this[0];var c=qx.dom.Node;if(d){if(c.isElement(d)){return qx.bom.element.Dimension.getWidth(d)}else{if(c.isDocument(d)){return qx.bom.Document.getWidth(c.getWindow(d))}else{if(c.isWindow(d)){return qx.bom.Viewport.getWidth(d)}}}}return null},getContentWidth:function(){var c=this[0];if(qx.dom.Node.isElement(c)){return qx.bom.element.Dimension.getContentWidth(c)}return null},getHeight:function(){var d=this[0];var c=qx.dom.Node;if(d){if(c.isElement(d)){return qx.bom.element.Dimension.getHeight(d)}else{if(c.isDocument(d)){return qx.bom.Document.getHeight(c.getWindow(d))}else{if(c.isWindow(d)){return qx.bom.Viewport.getHeight(d)}}}}return null},getContentHeight:function(){var c=this[0];if(qx.dom.Node.isElement(c)){return qx.bom.element.Dimension.getContentHeight(c)}return null},addListener:b(qx.bom.Element,"addListener"),removeListener:b(qx.bom.Element,"removeListener"),eq:function(c){return this.slice(c,+c+1)},filter:function(c,e){var d;if(qx.lang.Type.isFunction(c)){d=qx.type.BaseArray.prototype.filter.call(this,c,e)}else{d=qx.bom.Selector.matches(c,this)}return this.__pushStack(d)},is:function(c){return !!c&&qx.bom.Selector.matches(c,this).length>0},__simple:/^.[^:#\[\.,]*$/,not:function(c){if(this.__simple.test(c)){var d=qx.bom.Selector.matches(":not("+c+")",this);return this.__pushStack(d)}var d=qx.bom.Selector.matches(c,this);return this.filter(function(e){return d.indexOf(e)===-1})},add:function(d,f){var e=qx.bom.Selector.query(d,f);var c=qx.lang.Array.unique(this.concat(e));return this.__pushStack(c)},children:function(c){var f=[];for(var e=0,d=this.length;e<d;e++){f.push.apply(f,qx.dom.Hierarchy.getChildElements(this[e]))}if(c){f=qx.bom.Selector.matches(c,f)}return this.__pushStack(f)},closest:function(d){var c=new qx.bom.Collection(1);var e=qx.bom.Selector;var f=this.map(function(g){while(g&&g.ownerDocument){c[0]=g;if(e.matches(d,c).length>0){return g}g=g.parentNode}});return this.__pushStack(qx.lang.Array.unique(f))},contents:function(){var e=[];var f=qx.lang.Array;for(var d=0,c=this.length;d<c;d++){e.push.apply(e,f.fromCollection(this[d].childNodes))}return this.__pushStack(e)},find:function(c){var e=qx.bom.Selector;if(this.length===1){return this.__pushStack(e.query(c,this[0]))}else{var f=[];for(var g=0,d=this.length;g<d;g++){f.push.apply(f,e.query(c,this[g]))}return this.__pushStack(qx.lang.Array.unique(f))}},next:function(c){var e=qx.dom.Hierarchy;var d=this.map(e.getNextElementSibling,e);if(c){d=qx.bom.Selector.matches(c,d)}return this.__pushStack(d)},nextAll:function(c){return this.__hierarchyHelper("getNextSiblings",c)},prev:function(c){var e=qx.dom.Hierarchy;var d=this.map(e.getPreviousElementSibling,e);if(c){d=qx.bom.Selector.matches(c,d)}return this.__pushStack(d)},prevAll:function(c){return this.__hierarchyHelper("getPreviousSiblings",c)},parent:function(c){var d=qx.dom.Element;var e=qx.lang.Array.unique(this.map(d.getParentElement,d));if(c){e=qx.bom.Selector.matches(c,e)}return this.__pushStack(e)},parents:function(c){return this.__hierarchyHelper("getAncestors",c)},siblings:function(c){return this.__hierarchyHelper("getSiblings",c)},__hierarchyHelper:function(j,c){var h=[];var f=qx.dom.Hierarchy;for(var g=0,d=this.length;g<d;g++){h.push.apply(h,f[j](this[g]))}var e=qx.lang.Array.unique(h);if(c){e=qx.bom.Selector.matches(c,e)}return this.__pushStack(e)},__pushStack:function(c){var d=new qx.bom.Collection;d.__prevObject=this;c=Array.prototype.slice.call(c,0);d.push.apply(d,c);return d},andSelf:function(){return this.add(this.__prevObject)},end:function(){return this.__prevObject||new qx.bom.Collection()},__manipulate:function(m,q){var g=this[0];var o=g.ownerDocument||g;var k=o.createDocumentFragment();var e=qx.bom.Html.clean(m,o,k);var h=k.firstChild;if(h){var p=this.length-1;for(var f=0,d=p;f<d;f++){q.call(this,this[f],k.cloneNode(true))}q.call(this,this[p],k)}if(e){var n;var c=qx.io.ScriptLoader;var j=qx.lang.Function;for(var f=0,d=e.length;f<d;f++){n=e[f];if(n.src){c.get().load(n.src)}else{j.globalEval(n.text||n.textContent||n.innerHTML||"")}if(n.parentNode){n.parentNode.removeChild(n)}}}return this},__manipulateTo:function(g,j){var d=qx.bom.Selector;var k=qx.lang.Array;var f=[];for(var h=0,c=g.length;h<c;h++){if(qx.core.Environment.get("qx.debug")){if(typeof g[h]!=="string"){throw new Error("Invalid argument for selector query: "+g[h])}}f.push.apply(f,d.query(g[h]))}f=k.cast(k.unique(f),qx.bom.Collection);for(var h=0,e=this.length;h<e;h++){f[j](this[h])}return this},append:function(c){return this.__manipulate(arguments,this.__appendCallback)},prepend:function(c){return this.__manipulate(arguments,this.__prependCallback)},__appendCallback:function(c,d){c.appendChild(d)},__prependCallback:function(c,d){c.insertBefore(d,c.firstChild)},appendTo:function(c){return this.__manipulateTo(arguments,"append")},prependTo:function(c){return this.__manipulateTo(arguments,"prepend")},before:function(c){return this.__manipulate(arguments,this.__beforeCallback)},after:function(c){return this.__manipulate(arguments,this.__afterCallback)},__beforeCallback:function(c,d){c.parentNode.insertBefore(d,c)},__afterCallback:function(c,d){c.parentNode.insertBefore(d,c.nextSibling)},insertBefore:function(c){return this.__manipulateTo(arguments,"before")},insertAfter:function(c){return this.__manipulateTo(arguments,"after")},wrapAll:function(d){var e=this[0];if(e){var c=qx.bom.Collection.create(d,e.ownerDocument).clone();if(e.parentNode){e.parentNode.insertBefore(c[0],e)}c.map(this.__getInnerHelper).append(this)}return this},__getInnerHelper:function(c){while(c.firstChild){c=c.firstChild}return c},wrapInner:function(f){var e=new qx.bom.Collection(1);for(var d=0,c=this.length;d<c;d++){e[0]=this[d];e.contents().wrapAll(f)}return this},wrap:function(f){var e=new qx.bom.Collection(1);for(var d=0,c=this.length;d<c;d++){e[0]=this[d];e.wrapAll(f)}return this},replaceWith:function(c){return this.after(c).remove()},replaceAll:function(c){return this.__manipulateTo(arguments,"replaceWith")},remove:function(c){var f=this;if(c){f=this.filter(c);if(f.length==0){return this}}for(var e=0,d=f.length,g;e<d;e++){g=f[e];if(g.parentNode){g.parentNode.removeChild(g)}}return f},destroy:function(g){if(this.length==0){return this}var e=qx.bom.Selector;var c=this;if(g){c=this.filter(g);if(c.length==0){return this}}var d=qx.event.Registration.getManager(this[0]);for(var m=0,f=c.length,n,o;m<f;m++){n=c[m];d.removeAllListeners(n);o=e.query("*",n);for(var h=0,k=o.length;h<k;h++){d.removeAllListeners(o[h])}if(n.parentNode){n.parentNode.removeChild(n)}}if(g){c.end();qx.lang.Array.exclude(this,c)}else{this.length=0}return this},empty:function(){var e=qx.bom.Collection;for(var d=0,c=this.length;d<c;d++){e.query(">*",this[d]).destroy();while(this.firstChild){this.removeChild(this.firstChild)}}return this},clone:function(d){var c=qx.bom.Element;return d?this.map(function(e){return c.clone(e,true)}):this.map(c.clone,c)}},defer:function(c){if(window.$==null){window.$=c.create}}})})();qx.Class.define("qx.ui.form.TextArea",{extend:qx.ui.form.AbstractField,construct:function(a){this.base(arguments,a);this.initWrap();this.addListener("mousewheel",this._onMousewheel,this)},properties:{wrap:{check:"Boolean",init:true,apply:"_applyWrap"},appearance:{refine:true,init:"textarea"},singleStep:{check:"Integer",init:20},minimalLineHeight:{check:"Integer",apply:"_applyMinimalLineHeight",init:4},autoSize:{check:"Boolean",apply:"_applyAutoSize",init:false}},members:{__areaClone:null,__areaHeight:null,__originalAreaHeight:null,setValue:function(a){a=this.base(arguments,a);this.__autoSize();return a},_onMousewheel:function(d){var c=this.getContentElement();var b=c.getScrollY();c.scrollToY(b+d.getWheelDelta()*this.getSingleStep());var a=c.getScrollY();if(a!=b){d.stop()}},__autoSize:function(){if(this.isAutoSize()){var e=this.__getAreaClone();if(e){this.__originalAreaHeight=this.__originalAreaHeight||this._getAreaHeight();var b=this._getScrolledAreaHeight();if(this.getMaxHeight()){var a=this.getInsets();var d=-a.top+this.getMaxHeight()-a.bottom;if(b>d){this.getContentElement().setStyle("overflowY","auto")}else{this.getContentElement().setStyle("overflowY","hidden")}}var c=Math.max(b,this.__originalAreaHeight);this._setAreaHeight(c)}else{this.addListenerOnce("appear",function(){if(qx.core.Environment.get("engine.name")=="webkit"){var f=this.getContentElement();var g=this.getValue();f.setStyle("overflowY","hidden",true);this.setValue("");this.setValue(g)}this.__autoSize()},this)}}},_getAreaHeight:function(){return this.getInnerSize().height},_setAreaHeight:function(a){if(this._getAreaHeight()!==a){this.__areaHeight=a;qx.ui.core.queue.Layout.add(this);qx.ui.core.queue.Manager.flush()}},_getScrolledAreaHeight:function(){var c=this.__getAreaClone();var a=c.getDomElement();var b=this.getValue();a.style.overflow="hidden";c.setValue(b);c.setWrap(this.getWrap(),true);if(a){if(!a.parentNode){qx.html.Element.flush();return this._getScrolledAreaHeight()}this.__scrollCloneToBottom(c);if(qx.core.Environment.get("engine.name")=="mshtml"){if(!a.scrollTop){qx.html.Element.flush()}return a.scrollTop+this._getTextSize().height}return a.scrollTop}},__getAreaClone:function(){this.__areaClone=this.__areaClone||this.__createAreaClone();return this.__areaClone},__createAreaClone:function(){var d,c,b,a;d=this.getContentElement();if(!d.getDomElement()){return}b=qx.bom.Collection.create(d.getDomElement()).clone()[0];a=new qx.html.Input("textarea");a.useElement(b);c=a;c.setStyles({position:"absolute",top:0,left:-9999,height:0,overflow:"visible"},true);c.removeAttribute("id");c.removeAttribute("name");c.setAttribute("tabIndex","-1");c.setValue(d.getValue());c.insertBefore(d);this.__scrollCloneToBottom(c);return c},__scrollCloneToBottom:function(a){var a=a.getDomElement();if(a){a.scrollTop=10000}},_createInputElement:function(){return new qx.html.Input("textarea",{overflowX:"auto",overflowY:"auto"})},_applyWrap:function(b,a){this.getContentElement().setWrap(b);this.__autoSize()},_applyMinimalLineHeight:function(){qx.ui.core.queue.Layout.add(this)},_applyAutoSize:function(b,a){if(qx.core.Environment.get("qx.debug")){this.__warnAutoSizeAndHeight()}if(b){this.__autoSize();this.addListener("input",this.__autoSize,this);this.addListenerOnce("appear",function(){this.getContentElement().setStyle("overflowY","hidden")})}else{this.removeListener("input",this.__autoSize);this.getContentElement().setStyle("overflowY","auto")}},_applyDimension:function(a){this.base(arguments);if(qx.core.Environment.get("qx.debug")){this.__warnAutoSizeAndHeight()}if(a===this.getMaxHeight()){this.__autoSize()}},__warnAutoSizeAndHeight:function(){if(this.isAutoSize()&&this.getHeight()){this.warn("autoSize is ignored when the height property is set. If you want to set an initial height, use the minHeight property instead.")}},_getContentHint:function(){var a=this.base(arguments);a.height=a.height*this.getMinimalLineHeight();a.width=this._getTextSize().width*20;if(this.isAutoSize()){a.height=this.__areaHeight||a.height}return a}}});qx.Theme.define("qx.theme.simple.Decoration",{aliases:{decoration:"qx/decoration/Simple"},decorations:{"border-blue":{decorator:qx.ui.decoration.Uniform,style:{width:4,color:"background-selected"}},main:{decorator:qx.ui.decoration.Uniform,style:{width:1,color:"background-selected"}},"main-dark":{decorator:qx.ui.decoration.Uniform,style:{width:1,color:"button-border"}},popup:{decorator:[qx.ui.decoration.MSingleBorder,qx.ui.decoration.MBoxShadow,qx.ui.decoration.MBackgroundColor],style:{width:1,color:"window-border",shadowLength:2,shadowBlurRadius:5,shadowColor:"shadow"}},"button-box":{decorator:[qx.ui.decoration.MLinearBackgroundGradient,qx.ui.decoration.MBorderRadius,qx.ui.decoration.MSingleBorder,qx.ui.decoration.MBackgroundColor],style:{radius:3,width:1,color:"button-border",gradientStart:["button-box-bright",40],gradientEnd:["button-box-dark",70],backgroundColor:"button-box-bright"}},"button-box-pressed":{include:"button-box",style:{gradientStart:["button-box-bright-pressed",40],gradientEnd:["button-box-dark-pressed",70],backgroundColor:"button-box-bright-pressed"}},"button-box-pressed-hovered":{include:"button-box-pressed",style:{color:"button-border-hovered"}},"button-box-hovered":{include:"button-box",style:{color:"button-border-hovered"}},"button-box-invalid":{include:"button-box",style:{color:"invalid"}},"button-box-pressed-invalid":{include:"button-box-pressed",style:{color:"invalid"}},"button-box-hovered-invalid":{include:"button-box-invalid"},"button-box-pressed-hovered-invalid":{include:"button-box-pressed-invalid"},"button-box-focused":{include:"button-box",style:{color:"background-selected"}},"button-box-pressed-focused":{include:"button-box-pressed",style:{color:"background-selected"}},"button-box-hovered-focused":{include:"button-box-focused"},"button-box-pressed-hovered-focused":{include:"button-box-pressed-focused"},"button-box-right":{include:"button-box",style:{radius:[0,3,3,0]}},"button-box-pressed-right":{include:"button-box-pressed",style:{radius:[0,3,3,0]}},"button-box-pressed-hovered-right":{include:"button-box-pressed-hovered",style:{radius:[0,3,3,0]}},"button-box-hovered-right":{include:"button-box-hovered",style:{radius:[0,3,3,0]}},"button-box-right-borderless":{include:"button-box",style:{radius:[0,3,3,0],width:[1,1,1,0]}},"button-box-pressed-right-borderless":{include:"button-box-pressed",style:{radius:[0,3,3,0],width:[1,1,1,0]}},"button-box-pressed-hovered-right-borderless":{include:"button-box-pressed-hovered",style:{radius:[0,3,3,0],width:[1,1,1,0]}},"button-box-hovered-right-borderless":{include:"button-box-hovered",style:{radius:[0,3,3,0],width:[1,1,1,0]}},"button-box-top-right":{include:"button-box",style:{radius:[0,3,0,0],width:[1,1,1,0]}},"button-box-pressed-top-right":{include:"button-box-pressed",style:{radius:[0,3,0,0],width:[1,1,1,0]}},"button-box-pressed-hovered-top-right":{include:"button-box-pressed-hovered",style:{radius:[0,3,0,0],width:[1,1,1,0]}},"button-box-hovered-top-right":{include:"button-box-hovered",style:{radius:[0,3,0,0],width:[1,1,1,0]}},"button-box-bottom-right":{include:"button-box",style:{radius:[0,0,3,0],width:[0,1,1,0]}},"button-box-pressed-bottom-right":{include:"button-box-pressed",style:{radius:[0,0,3,0],width:[0,1,1,0]}},"button-box-pressed-hovered-bottom-right":{include:"button-box-pressed-hovered",style:{radius:[0,0,3,0],width:[0,1,1,0]}},"button-box-hovered-bottom-right":{include:"button-box-hovered",style:{radius:[0,0,3,0],width:[0,1,1,0]}},"button-box-bottom-left":{include:"button-box",style:{radius:[0,0,0,3],width:[0,0,1,1]}},"button-box-pressed-bottom-left":{include:"button-box-pressed",style:{radius:[0,0,0,3],width:[0,0,1,1]}},"button-box-pressed-hovered-bottom-left":{include:"button-box-pressed-hovered",style:{radius:[0,0,0,3],width:[0,0,1,1]}},"button-box-hovered-bottom-left":{include:"button-box-hovered",style:{radius:[0,0,0,3],width:[0,0,1,1]}},"button-box-top-left":{include:"button-box",style:{radius:[3,0,0,0],width:[1,0,0,1]}},"button-box-pressed-top-left":{include:"button-box-pressed",style:{radius:[3,0,0,0],width:[1,0,0,1]}},"button-box-pressed-hovered-top-left":{include:"button-box-pressed-hovered",style:{radius:[3,0,0,0],width:[1,0,0,1]}},"button-box-hovered-top-left":{include:"button-box-hovered",style:{radius:[3,0,0,0],width:[1,0,0,1]}},"button-box-middle":{include:"button-box",style:{radius:0,width:[1,0,1,1]}},"button-box-pressed-middle":{include:"button-box-pressed",style:{radius:0,width:[1,0,1,1]}},"button-box-pressed-hovered-middle":{include:"button-box-pressed-hovered",style:{radius:0,width:[1,0,1,1]}},"button-box-hovered-middle":{include:"button-box-hovered",style:{radius:0,width:[1,0,1,1]}},"button-box-left":{include:"button-box",style:{radius:[3,0,0,3],width:[1,0,1,1]}},"button-box-pressed-left":{include:"button-box-pressed",style:{radius:[3,0,0,3],width:[1,0,1,1]}},"button-box-pressed-hovered-left":{include:"button-box-pressed-hovered",style:{radius:[3,0,0,3],width:[1,0,1,1]}},"button-box-hovered-left":{include:"button-box-hovered",style:{radius:[3,0,0,3],width:[1,0,1,1]}},"separator-horizontal":{decorator:qx.ui.decoration.Single,style:{widthLeft:1,colorLeft:"border-separator"}},"separator-vertical":{decorator:qx.ui.decoration.Single,style:{widthTop:1,colorTop:"border-separator"}},"scroll-knob":{decorator:[qx.ui.decoration.MBorderRadius,qx.ui.decoration.MSingleBorder,qx.ui.decoration.MBackgroundColor],style:{radius:3,width:1,color:"button-border",backgroundColor:"scrollbar-bright"}},"scroll-knob-pressed":{include:"scroll-knob",style:{backgroundColor:"scrollbar-dark"}},"scroll-knob-hovered":{include:"scroll-knob",style:{color:"button-border-hovered"}},"scroll-knob-pressed-hovered":{include:"scroll-knob-pressed",style:{color:"button-border-hovered"}},"button-hover":{decorator:[qx.ui.decoration.MBackgroundColor,qx.ui.decoration.MBorderRadius],style:{backgroundColor:"button",radius:3}},window:{decorator:[qx.ui.decoration.MDoubleBorder,qx.ui.decoration.MBoxShadow,qx.ui.decoration.MBackgroundColor],style:{width:1,color:"window-border",innerWidth:4,innerColor:"window-border-inner",shadowLength:1,shadowBlurRadius:3,shadowColor:"shadow",backgroundColor:"background"}},"window-active":{include:"window",style:{shadowLength:2,shadowBlurRadius:5}},"window-caption":{decorator:qx.ui.decoration.Single,style:{width:[0,0,2,0],color:"window-border-inner"}},"white-box":{decorator:[qx.ui.decoration.MBorderRadius,qx.ui.decoration.MBoxShadow,qx.ui.decoration.MSingleBorder,qx.ui.decoration.MBackgroundColor],style:{width:1,color:"white-box-border",shadowBlurRadius:2,shadowColor:"#999999",radius:7,backgroundColor:"white"}},inset:{decorator:qx.ui.decoration.Single,style:{width:1,color:["border-light-shadow","border-light","border-light","border-light"]}},"focused-inset":{decorator:qx.ui.decoration.Uniform,style:{width:2,color:"background-selected"}},"border-invalid":{decorator:qx.ui.decoration.Uniform,style:{width:2,color:"invalid"}},"lead-item":{decorator:qx.ui.decoration.Uniform,style:{width:1,style:"dotted",color:"border-lead"}},tooltip:{decorator:[qx.ui.decoration.MSingleBorder,qx.ui.decoration.MBackgroundColor,qx.ui.decoration.MBoxShadow],style:{width:1,color:"tooltip-text",shadowLength:1,shadowBlurRadius:2,shadowColor:"shadow"}},"tooltip-error":{decorator:[qx.ui.decoration.MBorderRadius,qx.ui.decoration.MBackgroundColor],style:{radius:5,backgroundColor:"invalid"}},"toolbar-separator":{decorator:qx.ui.decoration.Single,style:{widthLeft:1,colorLeft:"button-border"}},"menu-separator":{decorator:qx.ui.decoration.Single,style:{widthTop:1,colorTop:"background-selected"}},"menubar-button-hovered":{decorator:[qx.ui.decoration.MSingleBorder,qx.ui.decoration.MBorderRadius,qx.ui.decoration.MBackgroundColor],style:{width:1,color:"background-selected",radius:3,backgroundColor:"white"}},"menubar-button-pressed":{include:"menubar-button-hovered",style:{radius:[3,3,0,0],width:[1,1,0,1]}},"datechooser-date-pane":{decorator:qx.ui.decoration.Single,style:{widthTop:1,colorTop:"gray",style:"solid"}},"datechooser-weekday":{decorator:qx.ui.decoration.Single,style:{widthBottom:1,colorBottom:"gray",style:"solid"}},"datechooser-week":{decorator:qx.ui.decoration.Single,style:{widthRight:1,colorRight:"gray",style:"solid"}},"datechooser-week-header":{decorator:qx.ui.decoration.Single,style:{widthBottom:1,colorBottom:"gray",widthRight:1,colorRight:"gray",style:"solid"}},"tabview-page-button-top-bottom":{decorator:qx.ui.decoration.Single,style:{width:[0,1],color:"tabview-button-border"}},"tabview-page-button-top-bottom-first":{include:"tabview-page-button-top-bottom",style:{color:["tabview-button-border","tabview-button-border","tabview-button-border","tabview-unselected"]}},"tabview-page-button-top-bottom-last":{include:"tabview-page-button-top-bottom",style:{color:["tabview-button-border","tabview-unselected","tabview-button-border","tabview-button-border"]}},"tabview-page-button-right-left":{decorator:qx.ui.decoration.Single,style:{width:[1,0],color:"tabview-button-border"}},"tabview-page-button-right-left-first":{include:"tabview-page-button-right-left",style:{color:["tabview-unselected","tabview-button-border","tabview-button-border","tabview-button-border"]}},"tabview-page-button-right-left-last":{include:"tabview-page-button-right-left",style:{color:["tabview-button-border","tabview-button-border","tabview-unselected","tabview-button-border"]}},"keyboard-focus":{decorator:qx.ui.decoration.Single,style:{width:1,color:"black",style:"dotted"}},statusbar:{decorator:qx.ui.decoration.Single,style:{widthTop:1,colorTop:"background-selected",styleTop:"solid"}},"table-scroller-focus-indicator":{decorator:qx.ui.decoration.Single,style:{width:2,color:"table-focus-indicator",style:"solid"}},"table-header":{include:"button-box",style:{radius:0,width:[1,0,1,0]}},"table-header-column-button":{include:"table-header",style:{width:1,color:"button-border"}},"table-header-cell":{decorator:qx.ui.decoration.Single,style:{widthRight:1,color:"button-border"}},"table-header-cell-first":{include:"table-header-cell",style:{widthLeft:1}},progressbar:{decorator:qx.ui.decoration.Single,style:{backgroundColor:"#FFF",width:1,color:"border-separator"}},radiobutton:{decorator:[qx.ui.decoration.MBorderRadius,qx.ui.decoration.MDoubleBorder,qx.ui.decoration.MBackgroundColor],style:{radius:10,width:1,color:"button-border",innerColor:"background",innerWidth:2}},"radiobutton-focused":{include:"radiobutton",style:{color:"background-selected"}},"radiobutton-invalid":{include:"radiobutton",style:{color:"invalid"}},checkbox:{decorator:[qx.ui.decoration.MSingleBorder,qx.ui.decoration.MBackgroundColor],style:{width:1,color:"button-border"}},"checkbox-focused":{include:"checkbox",style:{color:"background-selected"}},"checkbox-invalid":{include:"checkbox",style:{color:"invalid"}}}});qx.Class.define("qx.ui.virtual.layer.WidgetCellSpan",{extend:qx.ui.virtual.layer.Abstract,include:[qx.ui.core.MChildrenHandling],construct:function(b,c,a){this.base(arguments);this.setZIndex(2);this._spanManager=new qx.ui.virtual.layer.CellSpanManager(c,a);this._cellProvider=b;this.__spacerPool=[];this._cellLayer=new qx.ui.virtual.layer.WidgetCell(this.__getCellProviderForNonSpanningCells());this._cellLayer.setZIndex(0);this._setLayout(new qx.ui.layout.Grow());this._add(this._cellLayer)},properties:{anonymous:{refine:true,init:false}},members:{getRenderedCellWidget:function(g,e){var f=this._cellLayer.getRenderedCellWidget(g,e);if(!f||f.getUserData("cell.spanning")){var d=this._getChildren();for(var c=0,b=d.length;c<b;c++){var h=d[c];if(h==this._cellLayer){continue}var a={row:h.getUserData("cell.row"),column:h.getUserData("cell.column"),rowSpan:h.getUserData("cell.rowspan"),colSpan:h.getUserData("cell.colspan")};if(a.row<=g&&g<a.row+a.rowSpan&&a.column<=e&&e<a.column+a.colSpan){return h}}return null}return f},__spacerPool:null,setCellSpan:function(d,c,b,a){var e=d+"x"+c;this._spanManager.removeCell(e);if(b>1||a>1){this._spanManager.addCell(e,d,c,b,a)}qx.ui.core.queue.Widget.add(this)},__getCellProviderForNonSpanningCells:function(){var c=this;var d=this._cellProvider;var a=this.__spacerPool;var b={getCellWidget:function(g,e){if(!c._spanMap[g][e]){var f=d.getCellWidget(g,e)}else{var f=a.pop();if(!f){f=new qx.ui.core.Spacer();f.setUserData("cell.spanning",1)}}return f},poolCellWidget:function(e){if(e.getUserData("cell.spanning")){a.push(e)}else{d.poolCellWidget(e)}}};return b},__updateCellSpanData:function(e,d,a,c){this._cells=this._spanManager.findCellsInWindow(e,d,a,c);if(this._cells.length>0){this._bounds=this._spanManager.getCellBounds(this._cells,e,d);this._spanMap=this._spanManager.computeCellSpanMap(this._cells,e,d,a,c)}else{this._bounds=[];this._spanMap=[];for(var b=0;b<a;b++){this._spanMap[e+b]=[]}}},__updateCellSpanWidgets:function(){var d=this.getChildren();for(var c=d.length-1;c>=0;c--){var g=d[c];if(g!==this._cellLayer){this._cellProvider.poolCellWidget(g);this._remove(g)}}for(var c=0,b=this._cells.length;c<b;c++){var a=this._cells[c];var e=this._bounds[c];var f=this._cellProvider.getCellWidget(a.firstRow,a.firstColumn);if(f){f.setUserBounds(e.left,e.top,e.width,e.height);f.setUserData("cell.row",a.firstRow);f.setUserData("cell.column",a.firstColumn);f.setUserData("cell.rowspan",a.lastRow-a.firstRow+1);f.setUserData("cell.colspan",a.lastColumn-a.firstColumn+1);this._add(f)}}},_fullUpdate:function(d,c,a,b){this.__updateCellSpanData(d,c,a.length,b.length);this.__updateCellSpanWidgets();this._cellLayer.fullUpdate(d,c,a,b)},_updateLayerWindow:function(d,c,a,b){this.__updateCellSpanData(d,c,a.length,b.length);this.__updateCellSpanWidgets();this._cellLayer.updateLayerWindow(d,c,a,b)}},destruct:function(){var b=this._getChildren();for(var a=0;a<b.length;a++){b[a].dispose()}this._disposeObjects("_spanManager","_cellLayer");this._cellProvider=this.__spacerPool=this._cells=this._bounds=this._spanMap=null}});qx.Class.define("qx.ui.menubar.MenuBar",{extend:qx.ui.toolbar.ToolBar,properties:{appearance:{refine:true,init:"menubar"}}});qx.Mixin.define("qx.ui.mobile.form.MValue",{construct:function(a){if(a){this.setValue(a)}this.initPlaceholder();this.initReadOnly();qx.event.Registration.addListener(this.getContentElement(),"change",this._onChangeContent,this);qx.event.Registration.addListener(this.getContentElement(),"input",this._onInput,this)},events:{input:"qx.event.type.Data",changeValue:"qx.event.type.Data"},properties:{liveUpdate:{check:"Boolean",init:false},placeholder:{check:"String",nullable:true,init:null,apply:"_applyAttribute"},readOnly:{check:"Boolean",nullable:true,init:null,apply:"_applyAttribute"}},members:{__oldValue:null,_convertValue:function(a){return a||""},setValue:function(a){a=this._convertValue(a);if(this.__oldValue!=a){this._setAttribute("value",a);this.__fireChangeValue(a)}},getValue:function(){return this._convertValue(this._getAttribute("value"))},resetValue:function(){this.setValue(null)},_onChangeContent:function(a){this.__fireChangeValue(this._convertValue(a.getData()))},_onInput:function(a){this.fireDataEvent("input",a.getData(),true);if(this.getLiveUpdate()){this.setValue(a.getData())}},__fireChangeValue:function(a){if(this.__oldValue!=a){this.__oldValue=a;this.fireDataEvent("changeValue",a)}}}});qx.Class.define("qx.ui.mobile.form.Input",{extend:qx.ui.mobile.core.Widget,include:[qx.ui.mobile.form.MValue],type:"abstract",construct:function(){this.base(arguments);this.initType();this.initMaxLength()},properties:{type:{check:"String",nullable:true,init:null,apply:"_applyAttribute"},maxLength:{check:"PositiveInteger",nullable:true,init:null,apply:"_applyAttribute"}},members:{_getTagName:function(){return"input"}},defer:function(a){qx.ui.mobile.core.Widget.addAttributeMapping("maxLength",{attribute:"maxlength"})}});qx.Class.define("qx.ui.mobile.form.PasswordField",{extend:qx.ui.mobile.form.Input,properties:{type:{refine:true,init:"password"},defaultCssClass:{refine:true,init:"passwordField"}}});qx.Class.define("qx.data.Conversion",{statics:{toString:function(a){return a+""},TOSTRINGOPTIONS:{converter:null},toNumber:function(a){return parseFloat(a)},TONUMBEROPTIONS:{converter:null},toBoolean:function(a){return !!a},TOBOOLEANOPTIONS:{converter:null}},defer:function(){qx.data.Conversion.TOSTRINGOPTIONS.converter=qx.data.Conversion.toString;qx.data.Conversion.TONUMBEROPTIONS.converter=qx.data.Conversion.toNumber;qx.data.Conversion.TOBOOLEANOPTIONS.converter=qx.data.Conversion.toBoolean}});qx.Class.define("qx.ui.virtual.cell.Image",{extend:qx.ui.virtual.cell.AbstractImage,properties:{appearance:{refine:true,init:"cell-image"}},members:{_identifyImage:function(a){return a}}});qx.Theme.define("qx.theme.simple.Font",{fonts:{"default":{size:13,family:["arial","sans-serif"]},bold:{size:13,family:["arial","sans-serif"],bold:true},headline:{size:24,family:["sans-serif","arial"]},small:{size:11,family:["arial","sans-serif"]},monospace:{size:11,family:["DejaVu Sans Mono","Courier New","monospace"]}}});qx.Class.define("qx.dev.Pollution",{statics:{names:{window:window,document:document,body:document.body},ignore:{window:["qx","java","sun","Packages","__firebug__","Components","controllers","sessionStorage","globalStorage","console","event","offscreenBuffering","clipboardData","clientInformation","Option","Image","external","screenTop","screenLeft","length","window","document","location","navigator","netscape","parent","frames","top","scrollbars","name","scrollX","scrollY","self","screen","history","content","menubar","toolbar","locationbar","personalbar","statusbar","directories","closed","crypto","pkcs11","opener","status","defaultStatus","innerWidth","innerHeight","outerWidth","outerHeight","screenX","screenY","pageXOffset","pageYOffset","scrollMaxX","scrollMaxY","fullScreen","frameElement","XMLHttpRequest","applicationCache","localStorage"],document:["domConfig","location","compatMode","implementation","defaultView","title","body","styleSheets","documentElement","nodeName","nodeType","firstChild","lastChild","doctype","images","applets","links","forms","anchors","cookie","embeds","plugins","designMode","childNodes"],body:["textContent","innerHTML","outerHTML","innerText","outerText","scopeName","parentElement","tagName","filters","contentEditable","document","currentStyle","isMultiLine","clientHeight","clientWidth","lastChild","firstChild","offsetTop","offsetLeft","offsetWidth","offsetHeight","tabIndex","className","attributes","previousSibling","nextSibling","ownerDocument","localName","childNodes","parentNode","nodeType","nodeName","style","scrollTop","scrollLeft","scrollWidth","scrollHeight"]},getInfo:function(b){var a=qx.dev.Pollution.getTextList(b||"window");if(a){return"Global namespace is polluted by the following unknown objects:\n\n"+a}else{return"Global namespace is not polluted by any unknown objects."}},extract:function(g){var d=[];var c=qx.dev.Pollution.ignore[g];if((qx.core.Environment.get("engine.name")=="mshtml")){if(g=="window"){c=c.slice(0);for(var f=0;f<window.length;f++){c.push(""+f)}}}var e=qx.dev.Pollution.names[g];for(var b in e){try{if(qx.core.Environment.get("engine.name")=="mshtml"||qx.core.Environment.get("engine.name")=="opera"){if(g=="window"&&b=="external"){continue}}if(typeof e[b]=="undefined"||e[b]===null){continue}if(typeof e[b]=="function"&&e[b].toString().indexOf("[native code]")!=-1){continue}if(typeof e[b].constructor=="function"){if((e[b].constructor.toString().indexOf("[native code]")!=-1)||(e[b].constructor.toString().indexOf("[function]")!=-1)){continue}}if(qx.lang.Array.contains(c,b)){continue}}catch(a){continue}d.push({key:b,value:e[b]})}return d},getHtmlTable:function(g){var d=[];var e="<tr style='vertical-align:top'><td>";var b="</td><td>";var f="</td></tr>";d.push("<table>");var c=this.extract(g);for(var a=0;a<c.length;a++){d.push(e+c[a].key+b+c[a].value+f)}d.push("</table>");return d.join("")},getTextList:function(f){var d=[];var b=": ";var e="\n";var c=this.extract(f);for(var a=0;a<c.length;a++){d.push(c[a].key+b+c[a].value+e)}return d.join("")}}});qx.Class.define("qx.ui.virtual.behavior.Prefetch",{extend:qx.core.Object,construct:function(a,b){if(qx.core.Environment.get("qx.debug")){this.assertObject(b);this.assertPositiveInteger(b.minLeft);this.assertPositiveInteger(b.maxLeft);this.assertPositiveInteger(b.minRight);this.assertPositiveInteger(b.maxRight);this.assertPositiveInteger(b.minAbove);this.assertPositiveInteger(b.maxAbove);this.assertPositiveInteger(b.minBelow);this.assertPositiveInteger(b.maxBelow)}this.base(arguments);this.setPrefetchX(b.minLeft,b.maxLeft,b.minRight,b.maxRight);this.setPrefetchY(b.minAbove,b.maxAbove,b.minBelow,b.maxBelow);this.__timer=new qx.event.Timer(this.getInterval());this.__timer.addListener("interval",this._onInterval,this);if(a){this.setScroller(a)}},properties:{scroller:{check:"qx.ui.virtual.core.Scroller",nullable:true,init:null,apply:"_applyScroller"},interval:{check:"Integer",init:200,apply:"_applyInterval"}},members:{__prefetchX:null,__prefetchY:null,__timer:null,__onScrollXId:null,__onScrollYId:null,setPrefetchX:function(a,b,c,d){this.__prefetchX=[a,b,c,d]},setPrefetchY:function(b,c,d,a){this.__prefetchY=[b,c,d,a]},_onInterval:function(){var b=this.__prefetchX;if(b[1]&&b[3]){this.getScroller().getPane().prefetchX(b[0],b[1],b[2],b[3]);qx.ui.core.queue.Manager.flush()}var a=this.__prefetchY;if(a[1]&&a[3]){this.getScroller().getPane().prefetchY(a[0],a[1],a[2],a[3]);qx.ui.core.queue.Manager.flush()}},_applyScroller:function(b,a){if(a){if(this.__onScrollXId){a.getChildControl("scrollbar-x").removeListenerById(this.__onScrollXId)}if(this.__onScrollYId){a.getChildControl("scrollbar-y").removeListenerById(this.__onScrollYId)}}if(b){if(!b.getContainerElement().getDomElement()){this.__timer.stop();b.addListenerOnce("appear",this.__timer.start,this.__timer)}else{this.__timer.restart()}this.__onScrollXId=b.getChildControl("scrollbar-x").addListener("scroll",this.__timer.restart,this.__timer);this.__onScrollYId=b.getChildControl("scrollbar-y").addListener("scroll",this.__timer.restart,this.__timer)}else{this.__timer.stop()}},_applyInterval:function(b,a){this.__timer.setInterval(b)}},destruct:function(){this.setScroller(null);this.__prefetchX=this.__prefetchY=null;this._disposeObjects("__timer")}});qx.Class.define("qx.ui.table.cellrenderer.Date",{extend:qx.ui.table.cellrenderer.Conditional,properties:{dateFormat:{check:"qx.util.format.DateFormat",init:null,nullable:true}},members:{_getContentHtml:function(a){var b=this.getDateFormat();if(b){if(a.value){return qx.bom.String.escape(b.format(a.value))}else{return""}}else{return a.value||""}},_getCellClass:function(a){return"qooxdoo-table-cell"}}});qx.Class.define("qx.ui.mobile.form.TextField",{extend:qx.ui.mobile.form.Input,construct:function(a){this.base(arguments)},properties:{type:{refine:true,init:"text"},defaultCssClass:{refine:true,init:"textField"}}});qx.Class.define("qx.ui.table.celleditor.Dynamic",{extend:qx.core.Object,implement:qx.ui.table.ICellEditorFactory,construct:function(a){this.base(arguments);if(a){this.setCellEditorFactoryFunction(a)}this.__infos={}},properties:{cellEditorFactoryFunction:{check:"Function",nullable:true,init:null}},members:{__cellEditorFactory:null,__infos:null,createCellEditor:function(a){var c=this.getCellEditorFactoryFunction();if(qx.core.Environment.get("qx.debug")){this.assertFunction(c,"No function provided! Aborting.")}this.__cellEditorFactory=c(a);var b=this.__cellEditorFactory.createCellEditor(a);this.__infos[b.toHashCode()]=a;return b},getCellEditorValue:function(b){var d=this.getCellEditorFactoryFunction();if(qx.core.Environment.get("qx.debug")){this.assertFunction(d,"No function provided! Aborting.")}var a=this.__infos[b.toHashCode()];this.__cellEditorFactory=d(a);var c=this.__cellEditorFactory.getCellEditorValue(b);return c}},destruct:function(){this.__cellEditorFactory=null}});qx.Class.define("qx.ui.table.cellrenderer.Replace",{extend:qx.ui.table.cellrenderer.Default,properties:{replaceMap:{check:"Object",nullable:true,init:null},replaceFunction:{check:"Function",nullable:true,init:null}},members:{_getContentHtml:function(c){var d=c.value;var b=this.getReplaceMap();var e=this.getReplaceFunction();var a;if(b){a=b[d];if(typeof a!="undefined"){c.value=a;return qx.bom.String.escape(this._formatValue(c))}}if(e){c.value=e(d)}return qx.bom.String.escape(this._formatValue(c))},addReversedReplaceMap:function(){var c=this.getReplaceMap();for(var a in c){var b=c[a];c[b]=a}return true}}});qx.Class.define("qx.ui.mobile.tabbar.TabBar",{extend:qx.ui.mobile.core.Widget,construct:function(){this.base(arguments);this._setLayout(new qx.ui.mobile.layout.HBox(null,"middle"));this.addListener("tap",this._onTap,this)},properties:{defaultCssClass:{refine:true,init:"tabBar"},selection:{check:"qx.ui.mobile.tabbar.TabButton",nullable:false,init:null,apply:"_applySelection",event:"changeSelection"}},members:{_onTap:function(a){var b=a.getTarget();if(b instanceof qx.ui.mobile.tabbar.TabButton){this.setSelection(b)}},_applySelection:function(b,a){if(a){a.removeCssClass("selected");if(a.getView()){a.getView().exclude()}}b.addCssClass("selected");if(b.getView()){b.getView().show()}},add:function(a){this._add(a,{flex:1});if(!this.getSelection()){this.setSelection(a)}a.addListener("changeView",this._onChangeView,this)},_onChangeView:function(a){if(this.getSelection()==a.getTarget()){a.getData().show()}},remove:function(a){this._remove(a);a.removeListener("changeView",this._onChangeView,this)}},destruct:function(){this.removeListener("tap",this._onTap,this)}});qx.Class.define("qx.ui.mobile.tabbar.TabButton",{extend:qx.ui.mobile.form.Button,properties:{defaultCssClass:{refine:true,init:"tabButton"},view:{check:"qx.ui.mobile.core.Widget",nullable:false,init:null,apply:"_applyView",event:"changeView"}},members:{_applyView:function(b,a){b.exclude()}}});qx.Class.define("qx.dev.unit.TestLoaderNative",{extend:qx.application.Native,properties:{suite:{check:"qx.dev.unit.TestSuite",nullable:true}},members:{main:function(){this.base(arguments);qx.log.appender.Console;this.setTestNamespace(this.__getClassNameFromUrl());if(window.top.jsUnitTestSuite){this.runJsUnit();return}if(window==window.top){this.runStandAlone();return}},__getClassNameFromUrl:function(){var b=window.location.search;var a=b.match(/[\?&]testclass=([A-Za-z0-9_\.]+)/);if(a){a=a[1]}else{a="__unknown_class__"}return a},setTestNamespace:function(b){var a=new qx.dev.unit.TestSuite();a.add(b);this.setSuite(a)},runJsUnit:function(){var a=new qx.dev.unit.JsUnitTestResult();this.getSuite().run(a);a.exportToJsUnit()},runStandAlone:function(){this.warn(this.getTestDescriptions());var a=new qx.dev.unit.TestResult();a.addListener("failure",function(c){var b=c.getData().exception;var d=c.getData().test;this.error("Test '"+d.getFullName()+"' failed: "+b.message+" - "+b.getComment());if(b.getStackTrace){this.error("Stack trace: "+b.getStackTrace().join("\n"))}});a.addListener("error",function(c){var b=c.getData().exception;this.error("The test '"+c.getData().test.getFullName()+"' had an error: "+b,b)});this.getSuite().run(a)},getTestDescriptions:function(){var g=[];var f=this.getSuite().getTestClasses();for(var e=0;e<f.length;e++){var b=f[e];var a={};a.classname=b.getName();a.tests=[];var c=b.getTestMethods();for(var d=0;d<c.length;d++){a.tests.push(c[d].getName())}g.push(a)}return qx.lang.Json.stringify(g)},runTests:function(a,g,c){var f=this.getSuite().getTestClasses();for(var e=0;e<f.length;e++){if(g==f[e].getName()){var b=f[e].getTestMethods();for(var d=0;d<b.length;d++){if(c&&b[d].getName()!=c){continue}b[d].run(a)}return}}},runTestsFromNamespace:function(a,b){var d=this.getSuite().getTestClasses();for(var c=0;c<d.length;c++){if(d[c].getName().indexOf(b)==0){d[c].run(a)}}}}});qx.Class.define("qx.ui.form.Form",{extend:qx.core.Object,construct:function(){this.base(arguments);this.__groups=[];this._buttons=[];this._buttonOptions=[];this._validationManager=new qx.ui.form.validation.Manager();this._resetter=new qx.ui.form.Resetter()},members:{__groups:null,_validationManager:null,_groupCounter:0,_buttons:null,_buttonOptions:null,_resetter:null,add:function(e,c,d,b,f,a){if(this.__isFirstAdd()){this.__groups.push({title:null,items:[],labels:[],names:[],options:[],headerOptions:{}})}this.__groups[this._groupCounter].items.push(e);this.__groups[this._groupCounter].labels.push(c);this.__groups[this._groupCounter].options.push(a);if(b==null){b=c.replace(/\s+|&|-|\+|\*|\/|\||!|\.|,|:|\?|;|~|%|\{|\}|\(|\)|\[|\]|<|>|=|\^|@|\\/g,"")}this.__groups[this._groupCounter].names.push(b);this._validationManager.add(e,d,f);this._resetter.add(e)},addGroupHeader:function(b,a){if(!this.__isFirstAdd()){this._groupCounter++}this.__groups.push({title:b,items:[],labels:[],names:[],options:[],headerOptions:a})},addButton:function(b,a){this._buttons.push(b);this._buttonOptions.push(a||null)},__isFirstAdd:function(){return this.__groups.length===0},reset:function(){this._resetter.reset();this._validationManager.reset()},redefineResetter:function(){this._resetter.redefine()},validate:function(){return this._validationManager.validate()},getValidationManager:function(){return this._validationManager},getGroups:function(){return this.__groups},getButtons:function(){return this._buttons},getButtonOptions:function(){return this._buttonOptions},getItems:function(){var a={};for(var d=0;d<this.__groups.length;d++){var e=this.__groups[d];for(var c=0;c<e.names.length;c++){var b=e.names[c];a[b]=e.items[c]}}return a}},destruct:function(){this.__groups=this._buttons=this._buttonOptions=null}});qx.Bootstrap.define("qx.dev.Profile",{statics:{__profileData:{},__callStack:[],__doProfile:true,__callOverhead:undefined,__calibrateCount:4000,start:function(){this.__doProfile=true;this.__profileData={};this.__callStack.splice(0,this.__callStack.length-2)},stop:function(){this.__doProfile=false},getProfileData:function(){return this.__profileData},showResults:function(a){this.stop();this.normalizeProfileData();var d=qx.lang.Object.getValues(this.__profileData);d=d.sort(function(i,h){return i.calibratedOwnTime<h.calibratedOwnTime?1:-1});d=d.slice(0,a||100);var g=["<table><tr><th>Name</th><th>Type</th><th>Own time</th><th>Avg time</th><th>calls</th></tr>"];for(var b=0;b<d.length;b++){var c=d[b];if(c.name=="qx.core.Aspect.__calibrateHelper"){continue}g.push("<tr><td>");g.push(c.name,"()");g.push("</td><td>");g.push(c.type);g.push("</td><td>");g.push(c.calibratedOwnTime.toPrecision(3));g.push("ms</td><td>");g.push((c.calibratedOwnTime/c.callCount).toPrecision(3));g.push("ms</td><td>");g.push(c.callCount);g.push("</td></tr>")}g.push("</table>");var f=window.open("about:blank","profileLog");var e=f.document;e.open();e.write("<html><head><style type='text/css'>body{font-family:monospace;font-size:11px;background:white;color:black;}</style></head><body>");e.write(g.join(""));e.write("</body></html>");e.close()},__calibrate:function(count){var fcn;var code=["var fcn = function(){ var fcn=qx.dev.Profile.__calibrateHelper;"];for(var i=0;i<count;i++){code.push("fcn();")}code.push("};");eval(code.join(""));var start=new Date();fcn();var end=new Date();var profTime=end-start;var code=["var plainFunc = function() {};","var fcn = function(){ var fcn=plainFunc;"];for(var i=0;i<count;i++){code.push("fcn();")}code.push("};");eval(code.join(""));var start=new Date();fcn();var end=new Date();var plainTime=end-start;return((profTime-plainTime)/count)},__calibrateHelper:function(){},normalizeProfileData:function(){if(this.__callOverhead==undefined){this.__callOverhead=this.__calibrate(this.__calibrateCount)}for(var a in this.__profileData){var b=this.__profileData[a];b.calibratedOwnTime=Math.max(b.ownTime-(b.subRoutineCalls*this.__callOverhead),0);b.calibratedAvgTime=b.calibratedOwnTime/b.callCount}},profileBefore:function(f,e,c,b){var d=qx.dev.Profile;if(!d.__doProfile){return}var a={subRoutineTime:0,subRoutineCalls:0};d.__callStack.push(a);a.startTime=new Date()},profileAfter:function(d,l,h,f,b){var g=qx.dev.Profile;if(!g.__doProfile){return}var e=new Date();var c=g.__callStack.pop();var a=e-c.startTime;var i=a-c.subRoutineTime;if(g.__callStack.length>0){var j=g.__callStack[g.__callStack.length-1];j.subRoutineTime+=a;j.subRoutineCalls+=1}var k=d+" ("+h+")";if(g.__profileData[k]===undefined){g.__profileData[k]={totalTime:0,ownTime:0,callCount:0,subRoutineCalls:0,name:d,type:h}}var m=g.__profileData[k];m.totalTime+=a;m.ownTime+=i;m.callCount+=1;m.subRoutineCalls+=c.subRoutineCalls}},defer:function(a){if(qx.core.Environment.get("qx.aspects")){qx.Bootstrap.debug("Enable global profiling...");qx.core.Aspect.addAdvice(a.profileBefore,"before");qx.core.Aspect.addAdvice(a.profileAfter,"after");a.__calibrateHelper=qx.core.Aspect.wrap("qx.dev.Profile.__calibrateHelper",a.__calibrateHelper,"static")}}});qx.Class.define("qx.ui.virtual.cell.String",{extend:qx.ui.virtual.cell.Cell,construct:function(){this.base(arguments)},properties:{appearance:{refine:true,init:"cell-string"}},members:{getContent:function(b,a){return b?qx.bom.String.escape(b):""}}});qx.Class.define("qx.ui.indicator.ProgressBar",{extend:qx.ui.container.Composite,construct:function(a,b){this.base(arguments);this._createChildControl("progress");this.set({width:200,height:20,layout:new qx.ui.layout.HBox()});if(a!=null){this.setValue(a)}if(b!=null){this.setMaximum(b)}},properties:{appearance:{refine:true,init:"progressbar"}},events:{complete:"qx.event.type.Event",change:"qx.event.type.Data"},members:{__value:0,__maximum:100,getValue:function(){return this.__value},setValue:function(b){var a=this.getMaximum();if(!qx.lang.Type.isNumber(b)||!isFinite(b)){return}if(b<0){b=0}if(b>a){b=a}this.__value=b;this.__changeProgress(b/a);return b},getMaximum:function(){return this.__maximum},setMaximum:function(b){var a=b;var c=this.getValue();if(!qx.lang.Type.isNumber(a)||!isFinite(a)||a<=0){return}if(a<c){a=c}this.__maximum=a;this.__changeProgress(c/a);return a},_createChildControlImpl:function(c,b){var a;switch(c){case"progress":a=new qx.ui.container.Composite(new qx.ui.layout.Canvas());this._add(a,{width:"0%"});break}return a||this.base(arguments,c)},__changeProgress:function(b){var a=this.getChildControl("progress");var d=Math.floor(b*100);var c=parseInt(a.getLayoutProperties().width,10);a.setLayoutProperties({width:d+"%"});if(d!=c){this.fireDataEvent("change",d,c)}if(d===100){this.fireEvent("complete")}}}});qx.Class.define("qx.ui.mobile.form.Group",{extend:qx.ui.mobile.container.Composite,properties:{defaultCssClass:{refine:true,init:"group"}}});qx.Class.define("qx.io.remote.Rpc",{extend:qx.core.Object,construct:function(a,b){this.base(arguments);if(a!==undefined){this.setUrl(a)}if(b!=null){this.setServiceName(b)}if(qx.core.ServerSettings){this.__currentServerSuffix=qx.core.ServerSettings.serverPathSuffix}},events:{completed:"qx.event.type.Event",aborted:"qx.event.type.Event",failed:"qx.event.type.Event",timeout:"qx.event.type.Event"},statics:{origin:{server:1,application:2,transport:3,local:4},localError:{timeout:1,abort:2},makeServerURL:function(a){var b=null;if(qx.core.ServerSettings){b=qx.core.ServerSettings.serverPathPrefix+"/.qxrpc"+qx.core.ServerSettings.serverPathSuffix;if(a!=null){b+="?instanceId="+a}}return b}},properties:{timeout:{check:"Integer",nullable:true},crossDomain:{check:"Boolean",init:false},url:{check:"String",nullable:true},serviceName:{check:"String",nullable:true},serverData:{check:"Object",nullable:true},username:{check:"String",nullable:true},password:{check:"String",nullable:true},useBasicHttpAuth:{check:"Boolean",nullable:true}},members:{__previousServerSuffix:null,__currentServerSuffix:null,createRequest:function(){return new qx.io.remote.Request(this.getUrl(),"POST","application/json")},createRpcData:function(e,d,c,b){var a={service:d=="refreshSession"?null:this.getServiceName(),method:d,id:e,params:c};if(b){a.server_data=b}return a},_callInternal:function(args,callType,refreshSession){var self=this;var offset=(callType==0?0:1);var whichMethod=(refreshSession?"refreshSession":args[offset]);var handler=args[0];var argsArray=[];var eventTarget=this;for(var i=offset+1;i<args.length;++i){argsArray.push(args[i])}var req=this.createRequest();var serverData=this.getServerData();var rpcData=this.createRpcData(req.getSequenceNumber(),whichMethod,argsArray,serverData);req.setCrossDomain(this.getCrossDomain());if(this.getUsername()){req.setUseBasicHttpAuth(this.getUseBasicHttpAuth());req.setUsername(this.getUsername());req.setPassword(this.getPassword())}req.setTimeout(this.getTimeout());var ex=null;var id=null;var result=null;var response=null;var handleRequestFinished=function(eventType,eventTarget){switch(callType){case 0:break;case 1:handler(result,ex,id);break;case 2:if(!ex){eventTarget.fireDataEvent(eventType,response)}else{ex.id=id;if(args[0]){eventTarget.fireDataEvent("failed",ex)}else{eventTarget.fireDataEvent(eventType,ex)}}}};var addToStringToObject=function(obj){obj.toString=function(){switch(obj.origin){case qx.io.remote.Rpc.origin.server:return"Server error "+obj.code+": "+obj.message;case qx.io.remote.Rpc.origin.application:return"Application error "+obj.code+": "+obj.message;case qx.io.remote.Rpc.origin.transport:return"Transport error "+obj.code+": "+obj.message;case qx.io.remote.Rpc.origin.local:return"Local error "+obj.code+": "+obj.message;default:return("UNEXPECTED origin "+obj.origin+" error "+obj.code+": "+obj.message)}}};var makeException=function(origin,code,message){var ex=new Object();ex.origin=origin;ex.code=code;ex.message=message;addToStringToObject(ex);return ex};req.addListener("failed",function(evt){var code=evt.getStatusCode();ex=makeException(qx.io.remote.Rpc.origin.transport,code,qx.io.remote.Exchange.statusCodeToString(code));id=this.getSequenceNumber();handleRequestFinished("failed",eventTarget)});req.addListener("timeout",function(evt){this.debug("TIMEOUT OCCURRED");ex=makeException(qx.io.remote.Rpc.origin.local,qx.io.remote.Rpc.localError.timeout,"Local time-out expired for "+whichMethod);id=this.getSequenceNumber();handleRequestFinished("timeout",eventTarget)});req.addListener("aborted",function(evt){ex=makeException(qx.io.remote.Rpc.origin.local,qx.io.remote.Rpc.localError.abort,"Aborted "+whichMethod);id=this.getSequenceNumber();handleRequestFinished("aborted",eventTarget)});req.addListener("completed",function(evt){response=evt.getContent();id=response.id;if(id!=this.getSequenceNumber()){this.warn("Received id ("+id+") does not match requested id ("+this.getSequenceNumber()+")!")}var eventType="completed";var exTest=response.error;if(exTest!=null){result=null;addToStringToObject(exTest);ex=exTest;eventType="failed"}else{result=response.result;if(refreshSession){result=eval("("+result+")");var newSuffix=qx.core.ServerSettings.serverPathSuffix;if(self.__currentServerSuffix!=newSuffix){self.__previousServerSuffix=self.__currentServerSuffix;self.__currentServerSuffix=newSuffix}self.setUrl(self.fixUrl(self.getUrl()))}}handleRequestFinished(eventType,eventTarget)});req.setData(qx.util.Json.stringify(rpcData));req.setAsynchronous(callType>0);if(req.getCrossDomain()){req.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}else{req.setRequestHeader("Content-Type","application/json")}req.send();if(callType==0){if(ex!=null){var error=new Error(ex.toString());error.rpcdetails=ex;throw error}return result}else{return req}},fixUrl:function(b){if(this.__previousServerSuffix==null||this.__currentServerSuffix==null||this.__previousServerSuffix==""||this.__previousServerSuffix==this.__currentServerSuffix){return b}var a=b.indexOf(this.__previousServerSuffix);if(a==-1){return b}return(b.substring(0,a)+this.__currentServerSuffix+b.substring(a+this.__previousServerSuffix.length))},callSync:function(a){return this._callInternal(arguments,0)},callAsync:function(b,a){return this._callInternal(arguments,1)},callAsyncListeners:function(b,a){return this._callInternal(arguments,2)},refreshSession:function(a){if(qx.core.ServerSettings&&qx.core.ServerSettings.serverPathSuffix){var b=(new Date()).getTime()-qx.core.ServerSettings.lastSessionRefresh;if(b/1000>(qx.core.ServerSettings.sessionTimeoutInSeconds-30)){this._callInternal([a],1,true)}else{a(true)}}else{a(false)}},abort:function(a){a.abort()}}});qx.Theme.define("qx.theme.Simple",{title:"Simple",meta:{color:qx.theme.simple.Color,decoration:qx.theme.simple.Decoration,font:qx.theme.simple.Font,appearance:qx.theme.simple.Appearance,icon:qx.theme.icon.Tango}});qx.Class.define("qx.ui.tree.TreeFile",{extend:qx.ui.tree.core.AbstractTreeItem,properties:{appearance:{refine:true,init:"tree-file"}},members:{_addWidgets:function(){this.addSpacer();this.addIcon();this.addLabel()}}});qx.Class.define("qx.ui.form.DateField",{extend:qx.ui.form.ComboBox,implement:[qx.ui.form.IDateForm],construct:function(){this.base(arguments);this.setDateFormat(qx.ui.form.DateField.getDefaultDateFormatter());if(qx.core.Environment.get("qx.dynlocale")){this.__localeListenerId=qx.locale.Manager.getInstance().addListener("changeLocale",function(){this.setDateFormat(qx.ui.form.DateField.getDefaultDateFormatter())},this)}},properties:{appearance:{refine:true,init:"datefield"},dateFormat:{check:"qx.util.format.DateFormat",apply:"_applyDateFormat"}},statics:{__dateFormat:null,__formatter:null,getDefaultDateFormatter:function(){var a=qx.locale.Date.getDateFormat("medium").toString();if(a==this.__dateFormat){return this.__formatter}if(this.__formatter){this.__formatter.dispose()}this.__formatter=new qx.util.format.DateFormat(a,qx.locale.Manager.getInstance().getLocale());this.__dateFormat=a;return this.__formatter}},members:{__localeListenerId:null,setValue:function(c){var b=this.getChildControl("textfield");b.setValue(this.getDateFormat().format(c));var a=this.getChildControl("list");a.setValue(c)},getValue:function(){var b=this.getChildControl("textfield").getValue();try{return this.getDateFormat().parse(b)}catch(a){return null}},resetValue:function(){var b=this.getChildControl("textfield");b.setValue("");var a=this.getChildControl("list");a.setValue(null)},_applyDateFormat:function(f,b){if(!b){return}try{var e=this.getChildControl("textfield");var c=e.getValue();var a=b.parse(c);e.setValue(f.format(a))}catch(d){}},_createChildControlImpl:function(c,b){var a;switch(c){case"list":a=new qx.ui.control.DateChooser();a.setFocusable(false);a.setKeepFocus(true);a.addListener("execute",this._onChangeDate,this);break;case"popup":a=new qx.ui.popup.Popup(new qx.ui.layout.VBox);a.setAutoHide(false);a.add(this.getChildControl("list"));a.addListener("mouseup",this._onChangeDate,this);a.addListener("changeVisibility",this._onPopupChangeVisibility,this);break}return a||this.base(arguments,c)},_onChangeDate:function(c){var a=this.getChildControl("textfield");var b=this.getChildControl("list").getValue();a.setValue(this.getDateFormat().format(b));this.close()},_onKeyPress:function(c){var b=c.getKeyIdentifier();if(b=="Down"&&c.isAltPressed()){this.toggle();c.stopPropagation();return}var a=this.getChildControl("popup");if(a.getVisibility()=="hidden"){return}if(b=="Escape"){this.close();c.stopPropagation();return}if(b==="Left"||b==="Right"||b==="Down"||b==="Up"){c.preventDefault()}this.getChildControl("list").handleKeyPress(c)},_onPopupChangeVisibility:function(d){var a=this.getChildControl("popup");if(a.isVisible()){var c=this.getChildControl("list");var b=this.getValue();c.setValue(b)}},_onTextFieldChangeValue:function(c){var a=this.getValue();if(a!=null){var b=this.getChildControl("list");b.setValue(a)}this.fireDataEvent("changeValue",this.getValue())},isEmpty:function(){var a=this.getChildControl("textfield").getValue();return a==null||a==""}},destruct:function(){if(qx.core.Environment.get("qx.dynlocale")){if(this.__localeListenerId){this.removeListenerById(this.__localeListenerId)}}}});qx.Class.define("qx.fx.effect.core.Custom",{extend:qx.fx.Base,construct:function(a,b){if(qx.core.Environment.get("qx.debug")){this.assertFunction(b)}this.__func=b;this.base(arguments,a)},members:{__func:null,update:function(a){this.base(arguments);this.__func(this,a)}}});qx.Class.define("qx.ui.form.VirtualComboBox",{extend:qx.ui.form.core.AbstractVirtualBox,implement:[qx.ui.form.IStringForm],construct:function(a){this.base(arguments,a);this._createChildControl("textfield");this._createChildControl("button");var b=this.getChildControl("dropdown");b.getChildControl("list").setSelectionMode("single");this.__selection=b.getSelection();this.__selection.addListener("change",this.__onSelectionChange,this)},properties:{appearance:{refine:true,init:"virtual-combobox"},width:{refine:true,init:120},value:{nullable:true,event:"changeValue",apply:"_applyValue"},defaultFormat:{check:"Function",init:null,nullable:true}},members:{__selection:null,__ignoreChangeSelection:null,getTextSelection:function(){return this.getChildControl("textfield").getTextSelection()},getTextSelectionLength:function(){return this.getChildControl("textfield").getTextSelectionLength()},setTextSelection:function(b,a){this.getChildControl("textfield").setTextSelection(b,a)},clearTextSelection:function(){this.getChildControl("textfield").clearTextSelection()},selectAllText:function(){this.getChildControl("textfield").selectAllText()},resetAllTextSelection:function(){this.clearTextSelection();this.selectAllText()},tabFocus:function(){var a=this.getChildControl("textfield");a.getFocusElement().focus();a.selectAllText()},focus:function(){this.base(arguments);this.getChildControl("textfield").getFocusElement().focus()},_createChildControlImpl:function(c,b){var a;switch(c){case"textfield":a=new qx.ui.form.TextField();a.setFocusable(false);a.addState("inner");this._add(a,{flex:1});break;case"button":a=new qx.ui.form.Button();a.setFocusable(false);a.setKeepActive(true);a.addState("inner");this._add(a);break}return a||this.base(arguments,c,b)},_beforeOpen:function(){this.__selectFirstMatch()},_handleKeyboard:function(a){var b=this._getAction(a);switch(b){case"select":this.setValue(this.getChildControl("textfield").getValue());break;default:this.base(arguments,a);break}},_getAction:function(c){var d=c.getKeyIdentifier();var a=this.getChildControl("dropdown").isVisible();var b=this._isModifierPressed(c);if(!a&&!b&&d==="Enter"){return"select"}else{return this.base(arguments,c)}},_handleMouse:function(b){this.base(arguments,b);var a=b.getType();if(a!=="click"){return}var c=b.getTarget();if(c==this.getChildControl("button")){this.toggle()}else{this.close()}},__onSelectionChange:function(b){if(this.__ignoreChangeSelection==true){return}var a=this.__selection.getItem(0);a=this.__convertValue(a);this.setValue(a);this.getChildControl("textfield").setValue(a)},_applyValue:function(c,a){var b=this.getChildControl("textfield");b.setValue(c)},__selectFirstMatch:function(){var g=this.getChildControl("textfield").getValue();var j=this.getChildControl("dropdown");var h=j.getSelection();if(this.__convertValue(h.getItem(0))!==g){this.__ignoreChangeSelection=true;h.removeAll();this.__ignoreChangeSelection=false;if(g==null||g==""){return}var e=this.getModel();var f=j.getChildControl("list")._getLookupTable();for(var c=0,b=f.length;c<b;c++){var d=e.getItem(f[c]);var a=this.__convertValue(d);if(a&&a.indexOf(g)==0){j.setPreselected(d);break}}}},__convertValue:function(d){var b=this.getLabelOptions();var c=this.getDefaultFormat();var f=this.getLabelPath();var a=null;if(f!=null){a=qx.data.SingleValueBinding.getValueFromObject(d,f)}else{if(qx.lang.Type.isString(d)){a=d}}var e=qx.util.Delegate.getMethod(b,"converter");if(e!=null){a=e(a)}if(a!=null&&c!=null){a=c(qx.lang.String.stripTags(a))}return a}},destruct:function(){this.__selection.removeListener("change",this.__onSelectionChange,this);this.__selection=null}});qx.Class.define("qx.ui.mobile.dialog.Manager",{extend:qx.core.Object,type:"singleton",members:{alert:function(e,d,c,b,a){if(qx.core.Environment.get("phonegap")&&qx.core.Environment.get("phonegap.notification")){var f=function(){if(c){c.call(b)}};if(d){d=""+d}if(e){e=""+e}if(a){a=""+a}navigator.notification.alert(d,f,e,a)}else{alert(d);if(c){c.call(b)}}},confirm:function(g,f,d,c,e){if(qx.core.Environment.get("phonegap")&&qx.core.Environment.get("phonegap.notification")){var h=function(i){d.call(c,i)};if(f){f=""+f}if(g){g=""+g}if(e){e=e.join(",")}navigator.notification.confirm(f,h,g,e)}else{var a=confirm(f);var b=a?1:2;d.call(c,b)}}}});qx.Class.define("qx.ui.virtual.layer.Column",{extend:qx.ui.virtual.layer.AbstractBackground,properties:{appearance:{refine:true,init:"column-layer"}},members:{_fullUpdate:function(j,p,c,a){var o=[];var s=qx.lang.Array.sum(c);var e=[];var d=0;var g=p;var m=0;for(var r=0;r<a.length;r++){var k=this.getBackground(g);if(k){e.push({childIndex:m,decorator:k,width:a[r],height:s});o.push("<div style='","position: absolute;","top: 0;","left:",d,"px;","'>",k.getMarkup(),"</div>");m++}else{var h=this.getColor(g);if(h){o.push("<div style='","position: absolute;","top: 0;","left:",d,"px;","width:",a[r],"px;","height:",s,"px;","background-color:",h,"'>","</div>");m++}}d+=a[r];g+=1}var b=this.getContentElement().getDomElement();b.style.display="none";b.innerHTML=o.join("");for(var n=0,f=e.length;n<f;n++){var q=e[n];q.decorator.resize(b.childNodes[q.childIndex].firstChild,q.width,q.height)}b.style.display="block";this._height=s},updateLayerWindow:function(d,c,a,b){if(c!==this.getFirstColumn()||b.length!==this.getColumnSizes().length||this._height<qx.lang.Array.sum(a)){this._fullUpdate(d,c,a,b)}},setColor:function(c,b){this.base(arguments,c,b);var d=this.getFirstColumn();var a=d+this.getColumnSizes().length-1;if(c>=d&&c<=a){this.updateLayerData()}}}});qx.Class.define("qx.ui.progressive.renderer.FunctionCaller",{extend:qx.ui.progressive.renderer.Abstract,members:{render:function(b,a){a.data(b.getUserData())}}});qx.Class.define("qx.util.Base64",{statics:{__keystr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(d){var b=this.__keystr;var a="";var l,j,g;var k,h,f,e;var c=0;do{l=d.charCodeAt(c++);j=d.charCodeAt(c++);g=d.charCodeAt(c++);k=l>>2;h=((l&3)<<4)|(j>>4);f=((j&15)<<2)|(g>>6);e=g&63;if(isNaN(j)){f=e=64}else{if(isNaN(g)){e=64}}a+=b.charAt(k)+b.charAt(h)+b.charAt(f)+b.charAt(e)}while(c<d.length);return a},decode:function(d){var b=this.__keystr;var a="";var l,j,g;var k,h,f,e;var c=0;d=d.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(c<d.length){k=b.indexOf(d.charAt(c++));h=b.indexOf(d.charAt(c++));f=b.indexOf(d.charAt(c++));e=b.indexOf(d.charAt(c++));l=(k<<2)|(h>>4);j=((h&15)<<4)|(f>>2);g=((f&3)<<6)|e;a=a+String.fromCharCode(l);if(f!=64){a=a+String.fromCharCode(j)}if(e!=64){a=a+String.fromCharCode(g)}}return a}}});qx.Class.define("qx.ui.decoration.VBox",{extend:qx.ui.decoration.AbstractBox,construct:function(b,a){this.base(arguments,b,a,"vertical")}});qx.Class.define("qx.ui.mobile.embed.Html",{extend:qx.ui.mobile.core.Widget,construct:function(a){this.base(arguments);if(a){this.setHtml(a)}},properties:{html:{check:"String",init:"",apply:"_applyHtml"}},members:{_applyHtml:function(b,a){this._setHtml(b)}}});qx.Class.define("qx.util.Permutation",{statics:{permute:function(j,f,c){var h=qx.lang.Object.getKeys(j);var b={};var g=[];for(var d=0;d<h.length;d++){g[d]=0;var e=h[d];b[e]=j[e][0]}var a=function(l,o){if(l>=h.length){return}var n=h[l];var k=j[n];for(var m=0;m<k.length;m++){if(o!==m){g[l]=m;b[n]=k[m];f.call(c||window,b)}a(l+1,g[l+1])}};a(0,-1)}}});qx.Class.define("qx.ui.table.celleditor.PasswordField",{extend:qx.ui.table.celleditor.AbstractField,members:{_createEditor:function(){var a=new qx.ui.form.PasswordField();a.setAppearance("table-editor-textfield");return a}}});qx.Class.define("qx.ui.form.PasswordField",{extend:qx.ui.form.TextField,members:{_createInputElement:function(){var a=new qx.html.Input("password");a.addListener("input",this._onHtmlInput,this);return a}}});qx.Class.define("qx.dev.unit.TestLoaderInline",{extend:qx.application.Inline,properties:{suite:{check:"qx.dev.unit.TestSuite",nullable:true}},members:{main:function(){this.base(arguments);qx.log.appender.Console;this.setTestNamespace(this.__getClassNameFromUrl());if(window.top.jsUnitTestSuite){this.runJsUnit();return}if(window==window.top){this.runStandAlone();return}},__getClassNameFromUrl:function(){var b=window.location.search;var a=b.match(/[\?&]testclass=([A-Za-z0-9_\.]+)/);if(a){a=a[1]}else{a="__unknown_class__"}return a},setTestNamespace:function(b){var a=new qx.dev.unit.TestSuite();a.add(b);this.setSuite(a)},runJsUnit:function(){var a=new qx.dev.unit.JsUnitTestResult();this.getSuite().run(a);a.exportToJsUnit()},runStandAlone:function(){this.warn(this.getTestDescriptions());var a=new qx.dev.unit.TestResult();a.addListener("failure",function(c){var b=c.getData().exception;var d=c.getData().test;this.error("Test '"+d.getFullName()+"' failed: "+b.message+" - "+b.getComment());if(b.getStackTrace){this.error("Stack trace: "+b.getStackTrace().join("\n"))}});a.addListener("error",function(c){var b=c.getData().exception;this.error("The test '"+c.getData().test.getFullName()+"' had an error: "+b,b)});this.getSuite().run(a)},getTestDescriptions:function(){var g=[];var f=this.getSuite().getTestClasses();for(var e=0;e<f.length;e++){var b=f[e];var a={};a.classname=b.getName();a.tests=[];var c=b.getTestMethods();for(var d=0;d<c.length;d++){a.tests.push(c[d].getName())}g.push(a)}return qx.lang.Json.stringify(g)},runTests:function(a,g,c){var f=this.getSuite().getTestClasses();for(var e=0;e<f.length;e++){if(g==f[e].getName()){var b=f[e].getTestMethods();for(var d=0;d<b.length;d++){if(c&&b[d].getName()!=c){continue}b[d].run(a)}return}}},runTestsFromNamespace:function(a,b){var d=this.getSuite().getTestClasses();for(var c=0;c<d.length;c++){if(d[c].getName().indexOf(b)==0){d[c].run(a)}}}}});qx.Class.define("qx.log.appender.PhoneGap",{statics:{process:function(b){var a=qx.log.appender.Util.toText(b);var c=b.level;if(c=="warn"){debug.warn(a)}else{if(c=="error"){debug.error(a)}else{debug.log(a)}}}},defer:function(b){function a(){if(window.debug){qx.log.Logger.register(b)}else{window.setTimeout(a,200)}}a()}});qx.Interface.define("qx.ui.mobile.list.IListDelegate",{members:{configureItem:function(a,b,c){},createItemRenderer:function(){}}});qx.Class.define("qx.ui.tree.AbstractTreeItem",{extend:qx.ui.tree.core.AbstractTreeItem,type:"abstract",construct:function(a){this.base(arguments,a);qx.log.Logger.deprecatedClassWarning(this.constructor,"The abstract class 'qx.ui.tree.AbstractTreeItem' is deprecated please use 'qx.ui.tree.core.AbstractTreeItem' instead.")}});qx.Class.define("qx.ui.table.cellrenderer.Boolean",{extend:qx.ui.table.cellrenderer.AbstractImage,construct:function(){this.base(arguments);this.__aliasManager=qx.util.AliasManager.getInstance();this.initIconTrue();this.initIconFalse()},properties:{iconTrue:{check:"String",init:"decoration/table/boolean-true.png",apply:"_applyIconTrue"},iconFalse:{check:"String",init:"decoration/table/boolean-false.png",apply:"_applyIconFalse"}},members:{__iconUrlTrue:null,__iconUrlFalse:false,__aliasManager:null,_applyIconTrue:function(a){this.__iconUrlTrue=this.__aliasManager.resolve(a)},_applyIconFalse:function(a){this.__iconUrlFalse=this.__aliasManager.resolve(a)},_insetY:5,_getCellStyle:function(a){return this.base(arguments,a)+";padding-top:4px;"},_identifyImage:function(a){var b={imageWidth:11,imageHeight:11};switch(a.value){case true:b.url=this.__iconUrlTrue;break;case false:b.url=this.__iconUrlFalse;break;default:b.url=null;break}return b}},destruct:function(){this.__aliasManager=null}});qx.Bootstrap.define("qx.bom.client.Version",{statics:{NAME:"unknown",TITLE:"unknown 0.0",VERSION:0},defer:function(h){var e=navigator.userAgent;var b,a;if(/Presto[\s\/]([0-9]+\.[0-9\.]+)/.test(e)){b="presto";a=parseFloat(RegExp.$1);if(a>=2.4){a=4}else{if(a>=2.2){a=3}else{if(a>=2.1){a=2}else{a=1}}}}else{if(/Opera[\s\/]([0-9]+)\.([0-9])/.test(e)){b="presto";a=parseFloat(RegExp.$1+"."+RegExp.$2);if(a>=9.7){a=3}else{if(a>=9.5){a=2}else{a=1}}}else{if(/AppleWebKit\/([^ ]+)/.test(e)){b="webkit";a=RegExp.$1;var g=RegExp("[^\\.0-9]").exec(a);if(g){a=a.slice(0,g.index)}a=parseFloat(a);if(a>=526){a=4}else{if(a>=525){a=3}else{if(a>=522){a=2}else{a=1}}}}else{if(/rv\:([^\);]+)(\)|;)/.test(e)){b="gecko";a=RegExp.$1;if(a>="1.9.2"){a=6}else{if(a>="1.9.1"){a=5}else{if(a>="1.9"){a=4}else{if(a>="1.8.1"){a=3}else{if(a>="1.8"){a=2}else{if(a>="1.7"){a=1}else{a=0}}}}}}}else{if(/MSIE\s+([^\);]+)(\)|;)/.test(e)){b="trident";a=parseInt(RegExp.$1,10);a=Math.max(a-4,0)}else{return}}}}}h.NAME=b;h.VERSION=a;h.TITLE=b+" "+a;if(qx.Bootstrap.DEBUG){var f=["NAME","TITLE","VERSION"];for(var c=0;c<f.length;c++){if(h.__defineGetter__){var d=h[f[c]];h.__defineGetter__(f[c],qx.Bootstrap.bind(function(i,k){var j="The constant '"+i+"' of '"+h.classname+"'is deprecated: Please check the API documentation of qx.core.Environment.";if(qx.dev&&qx.dev.StackTrace){j+="\nTrace:"+qx.dev.StackTrace.getStackTrace().join("\n")}qx.Bootstrap.warn(j);return k},h,f[c],d))}}}}});qx.Class.define("qx.util.Template",{extend:qx.core.Object,construct:function(a){this.base(arguments);if(a!=null){this.setContent(a)}},properties:{content:{check:"String",nullable:true,apply:"_applyContent"}},members:{_applyContent:function(b,a){if(b){this.run=new Function("values","return ['"+b.replace(this.__reg,this.__replace)+"'].join('')")}else{delete this.run}},run:function(a){throw new Error("Please define any content first!")},__replace:function(b,a){return"',(values."+a+" === undefined ? '' : values."+a+"),'"},__reg:/\{([\w-]+)}/g}});qx.Interface.define("qx.ui.virtual.selection.ISelectionDelegate",{members:{isItemSelectable:function(a){},styleSelectable:function(b,a,c){}}});qx.Class.define("qx.fx.effect.core.Property",{extend:qx.fx.Base,construct:function(a,c,b){if(c){if(qx.core.Environment.get("qx.debug")){this.assertString(c)}this.__qxProperty=c}else{throw new Error("A qooxdoo property must be specified!")}if(b){if(qx.core.Environment.get("qx.debug")){this.assertFunction(b)}this.__func=b}this.base(arguments,a)},members:{__qxProperty:null,__func:null,update:function(a){this.base(arguments);var c=this.__func?this.__func(a):a;var b={};b[this.__qxProperty]=c;this._getElement().set(b)}}});qx.Class.define("qx.ui.table.cellrenderer.Debug",{extend:qx.ui.table.cellrenderer.Abstract,members:{_getContentHtml:function(a){var b="<div style='height:"+a.styleHeight+"px;overflow:auto;'>"+qx.dev.Debug.debugObjectToString(a.value,"row="+a.row+", col="+a.col,10,true)+"</div>";return b}}});qx.Class.define("qx.dev.Debug",{statics:{debugObject:function(c,b,a){qx.log.Logger.debug(this,qx.dev.Debug.debugObjectToString(c,b,a,false))},debugObjectToString:function(d,e,j,c){if(!j){j=10}var h=(c?"</span><br>":"\n");var i=function(n){var l;if(!c){l="";for(var m=0;m<n;m++){l+="  "}}else{l="<span style='padding-left:"+(n*8)+"px;'>"}return l};var k="";var b=function(n,p,l){if(p>l){k+=(i(p)+"*** TOO MUCH RECURSION: not displaying ***"+h);return}if(typeof(n)!="object"){k+=i(p)+n+h;return}for(var o in n){if(typeof(n[o])=="object"){try{if(n[o] instanceof Array){k+=i(p)+o+": Array"+h}else{if(n[o]===null){k+=i(p)+o+": null"+h;continue}else{if(n[o]===undefined){k+=i(p)+o+": undefined"+h;continue}else{k+=i(p)+o+": Object"+h}}}b(n[o],p+1,l)}catch(m){k+=i(p)+o+": EXCEPTION expanding property"+h}}else{k+=i(p)+o+": "+n[o]+h}}};if(e){k+=i(0)+e+h}if(d instanceof Array){k+=i(0)+"Array, length="+d.length+":"+h}else{if(typeof(d)=="object"){var f=0;for(var a in d){f++}k+=i(0)+"Object, count="+f+":"+h}}k+=i(0)+"------------------------------------------------------------"+h;try{b(d,0,j)}catch(g){k+=i(0)+"*** EXCEPTION ("+g+") ***"+h}k+=i(0)+"============================================================"+h;return k},getFunctionName:function(b,c){var a=b.self;if(!a){return null}while(b.wrapper){b=b.wrapper}switch(c){case"construct":return b==a?"construct":null;case"members":return qx.lang.Object.getKeyFromValue(a,b);case"statics":return qx.lang.Object.getKeyFromValue(a.prototype,b);default:if(b==a){return"construct"}return(qx.lang.Object.getKeyFromValue(a.prototype,b)||qx.lang.Object.getKeyFromValue(a,b)||null)}},debugProperties:function(e,h,d,a){if(h==null){h=10}if(a==null){a=1}var f="";d?f="<br>":f="\r\n";var l="";if(qx.lang.Type.isNumber(e)||qx.lang.Type.isString(e)||qx.lang.Type.isBoolean(e)||e==null||h<=0){return e}else{if(qx.Class.hasInterface(e.constructor,qx.data.IListData)){for(var c=0;c<e.length;c++){for(var b=0;b<a;b++){l+="-"}l+="index("+c+"): "+this.debugProperties(e.getItem(c),h-1,d,a+1)+f}return l+f}else{if(e.constructor!=null){var g=e.constructor.$$properties;for(var k in g){l+=f;for(var b=0;b<a;b++){l+="-"}l+=" "+k+": "+this.debugProperties(e["get"+qx.lang.String.firstUp(k)](),h-1,d,a+1)}return l}}}return""}}});qx.Class.define("qx.ui.table.cellrenderer.Password",{extend:qx.ui.table.cellrenderer.Default,members:{_getContentHtml:function(a){var b=a.value;if(b===null){b=""}a.value=b.replace(/./g,"*");return qx.bom.String.escape(this._formatValue(a))}}});qx.Class.define("qx.ui.mobile.form.TextArea",{extend:qx.ui.mobile.core.Widget,include:[qx.ui.mobile.form.MValue],construct:function(a){this.base(arguments)},properties:{defaultCssClass:{refine:true,init:"textArea"}},members:{_getTagName:function(){return"textarea"}}});qx.Class.define("qx.ui.progressive.headfoot.Progress",{extend:qx.ui.progressive.headfoot.Abstract,construct:function(c,d){this.base(arguments);this.setHeight(16);this.setPadding(0);this.__colors={};var a=qx.theme.manager.Color.getInstance();this.__colors.background=a.resolve("progressive-progressbar-background");this.__colors.indicatorDone=a.resolve("progressive-progressbar-indicator-done");this.__colors.indicatorUndone=a.resolve("progressive-progressbar-indicator-undone");this.__colors.percentBackground=a.resolve("progressive-progressbar-percent-background");this.__colors.percentText=a.resolve("progressive-progressbar-percent-text");this.set({backgroundColor:this.__colors.background});this.__progressBar=new qx.ui.core.Widget();this.__progressBar.set({width:0,backgroundColor:this.__colors.indicatorDone});this.add(this.__progressBar);var b=new qx.ui.core.Widget();b.set({backgroundColor:this.__colors.indicatorUndone});this.add(b,{flex:1});this.__percentDone=new qx.ui.basic.Atom("0%");this.__percentDone.set({width:100,backgroundColor:this.__colors.percentBackground,textColor:this.__colors.percentText});this.add(this.__percentDone);this.exclude()},members:{__total:null,__colors:null,__progressBar:null,__percentDone:null,join:function(a){this.base(arguments,a);a.addListener("renderStart",function(b){this.__total=b.getData().initial;this.show()},this);a.addListener("progress",function(g){var b=1-(g.getData().remaining/this.__total);var c=this.getBounds();if(c){var d=Math.floor((c.width-this.__percentDone.getBounds().width)*b);var f=Math.floor(b*100)+"%";if(!isNaN(d)){this.__progressBar.setMinWidth(d);this.__percentDone.setLabel(f)}}},this);a.addListener("renderEnd",function(b){this.exclude()},this)}},destruct:function(){this.__colors=null;this._disposeObjects("__progressBar","__percentDone")}});qx.Class.define("qx.ui.mobile.form.Title",{extend:qx.ui.mobile.basic.Label,members:{_getTagName:function(){return"h2"}}});qx.Class.define("qx.data.controller.Tree",{extend:qx.core.Object,include:qx.data.controller.MSelection,construct:function(a,d,c,b){this.base(arguments);this.__bindings={};this.__boundProperties=[];this.__childrenRef={};if(c!=null){this.setChildPath(c)}if(b!=null){this.setLabelPath(b)}if(a!=null){this.setModel(a)}if(d!=null){this.setTarget(d)}},properties:{model:{check:"qx.core.Object",apply:"_applyModel",event:"changeModel",nullable:true,dereference:true},target:{apply:"_applyTarget",event:"changeTarget",init:null,dereference:true},childPath:{check:"String",apply:"_applyChildPath",nullable:true},labelPath:{check:"String",apply:"_applyLabelPath",nullable:true},iconPath:{check:"String",apply:"_applyIconPath",nullable:true},labelOptions:{apply:"_applyLabelOptions",nullable:true},iconOptions:{apply:"_applyIconOptions",nullable:true},delegate:{apply:"_applyDelegate",init:null,nullable:true}},members:{__childrenRef:null,__bindings:null,__boundProperties:null,_applyDelegate:function(b,a){this._setConfigureItem(b,a);this._setCreateItem(b,a);this._setBindItem(b,a)},_applyIconOptions:function(b,a){this.__renewBindings()},_applyLabelOptions:function(b,a){this.__renewBindings()},_applyTarget:function(c,a){if(a!=undefined){var b=a.getRoot();a.setRoot(null);b.destroy()}if(this.getModel()!=null){this.__buildTree()}this._addChangeTargetListener(c,a)},_applyModel:function(b,a){this.__buildTree()},_applyChildPath:function(b,a){this.__buildTree()},_applyIconPath:function(b,a){this.__renewBindings()},_applyLabelPath:function(b,a){this.__renewBindings()},__changeModelChildren:function(c){var b=c.getTarget();var d=this.__childrenRef[b.toHashCode()].treeNode;var a=this.__childrenRef[b.toHashCode()].modelNode;this.__updateTreeChildren(d,a);this._updateSelection()},__changeChildrenArray:function(f){var b=f.getData();var c=f.getOldData();var i=this.__childrenRef[c.toHashCode()];c.removeListenerById(i.changeListenerId);delete this.__childrenRef[c.toHashCode()];i.modelNode.removeListenerById(i.changeChildernListenerId);var h=i.modelNode;var j=qx.Class.getPropertyDefinition(i.modelNode.constructor,this.getChildPath());var d=j.event;var a=h.addListener(d,this.__changeChildrenArray,this);var g=i.treeNode;this.__childrenRef[b.toHashCode()]={modelNode:h,treeNode:g,changeListenerId:i.changeListenerId,changeChildernListenerId:a};this.__updateTreeChildren(g,h);this._updateSelection()},_createItem:function(){var a=this.getDelegate();if(a!=null&&a.createItem!=null){var b=a.createItem()}else{var b=new qx.ui.tree.TreeFolder()}if(a!=null&&a.configureItem!=null){a.configureItem(b)}return b},__buildTree:function(){if(this.getTarget()==null||this.getChildPath()==null){return}if((this.getLabelPath()==null&&this.getDelegate()==null)||(this.getLabelPath()==null&&this.getDelegate()!=null&&this.getDelegate().bindItem==null)){return}var b=this.getTarget().getRoot();if(b!=null){this.getTarget().resetRoot();b.destroy();this.__childrenRef={}}if(this.getModel()!=null){var a=this._createItem();a.setModel(this.getModel());this.getTarget().setRoot(a);this.__addBinding(this.getModel(),a);this.__updateTreeChildren(a,this.getModel())}},__updateTreeChildren:function(d,n){if(n["get"+qx.lang.String.firstUp(this.getChildPath())]==undefined){return}var c=n["get"+qx.lang.String.firstUp(this.getChildPath())]();if(this.__childrenRef[c.toHashCode()]==undefined){var e=c.addListener("change",this.__changeModelChildren,this);var o=qx.Class.getPropertyDefinition(n.constructor,this.getChildPath());var h=o.event;var a=n.addListener(h,this.__changeChildrenArray,this);this.__childrenRef[c.toHashCode()]={modelNode:n,treeNode:d,changeListenerId:e,changeChildernListenerId:a}}for(var g=0;g<c.length;g++){if(d.getChildren()[g]==null||c.getItem(g)!=d.getChildren()[g].getModel()){for(var f=g;f<d.getChildren().length;f++){if(d.getChildren()[f].getModel()===c.getItem(g)){var m=f;break}}if(m!=undefined){var b=d.getChildren()[m];if(this.getTarget().isSelected(b)){var k=true}d.removeAt(m);d.addAt(b,g);if(k){this.getTarget().addToSelection(b)}}else{var l=this._createItem();l.setModel(c.getItem(g));d.addAt(l,g);this.__addBinding(c.getItem(g),l);this.__updateTreeChildren(l,c.getItem(g))}}}for(var g=d.getChildren().length-1;g>=c.length;g--){var p=d.getChildren()[g];this.__removeFolder(p,d)}},__emptyTarget:function(){if(this.getTarget()==null){return}var a=this.getTarget().getRoot();if(a!=null){this.getTarget().setRoot(null);this.__removeAllFolders(a);this.__removeBinding(a.getModel());a.destroy();this.__childrenRef={}}},__removeAllFolders:function(c){var b=c.getChildren();for(var a=b.length-1;a>=0;a--){if(b[a].getChildren().length>0){this.__removeAllFolders(b[a])}this.__removeFolder(b[a],c)}},__removeFolder:function(e,a){var b=e.getModel();var d="get"+qx.lang.String.firstUp(this.getChildPath());if(b[d]!=undefined){var c=b[d]();var f=this.__childrenRef[c.toHashCode()];c.removeListenerById(f.changeListenerId);b.removeListenerById(f.changeChildernListenerId);this.__removeAllFolders(e);delete this.__childrenRef[c.toHashCode()]}this.__removeBinding(b);a.remove(e);e.destroy()},bindProperty:function(d,g,a,c,b){var f=b.bind(d,c,g,a);if(this.__bindings[g]==null){this.__bindings[g]={}}var e=this.__bindings[g];if(e[b.toHashCode()]){e[b.toHashCode()].reverseId=f}else{e[b.toHashCode()]={id:f,reverseId:null,treeNode:c}}if(!qx.lang.Array.contains(this.__boundProperties,g)){this.__boundProperties.push(g)}},bindPropertyReverse:function(g,d,b,a,c){var f=a.bind(d,c,g,b);if(this.__bindings[d]==null){this.__bindings[d]={}}var e=this.__bindings[d];if(e[c.toHashCode()]){e[c.toHashCode()].reverseId=f}else{e[c.toHashCode()]={id:null,reverseId:f,treeNode:a}}if(!qx.lang.Array.contains(this.__boundProperties,d)){this.__boundProperties.push(d)}},bindDefaultProperties:function(b,a){this.bindProperty(this.getLabelPath(),"label",this.getLabelOptions(),b,a);if(this.getIconPath()!=null){this.bindProperty(this.getIconPath(),"icon",this.getIconOptions(),b,a)}},__renewBindings:function(){var a;for(var c in this.__bindings){a=c;break}for(var e in this.__bindings[a]){var d=this.__bindings[a][e].treeNode;var b=qx.core.ObjectRegistry.fromHashCode(e);this.__removeBinding(b);this.__addBinding(b,d)}},__addBinding:function(a,c){var b=this.getDelegate();if(b!=null&&b.bindItem!=null){b.bindItem(this,c,a)}else{this.bindDefaultProperties(c,a)}},__removeBinding:function(b){for(var a=0;a<this.__boundProperties.length;a++){var d=this.__boundProperties[a];var c=this.__bindings[d][b.toHashCode()];if(c!=null){if(c.id){b.removeBinding(c.id)}if(c.reverseId){c.treeNode.removeBinding(c.reverseId)}delete this.__bindings[d][b.toHashCode()]}}},_setConfigureItem:function(d,a){if(d!=null&&d.configureItem!=null&&this.getTarget()!=null&&this.getModel()!=null){var c=this.getTarget().getRoot().getItems(true,true,false);for(var b=0;b<c.length;b++){d.configureItem(c[b])}}},_setCreateItem:function(b,a){if(this.getTarget()==null||this.getModel()==null){return}if(b==null||b.createItem==null){return}if(a&&a.createItem&&b&&b.createItem&&a.createItem==b.createItem){return}this._startSelectionModification();this.__emptyTarget();this.__buildTree();this._endSelectionModification();this._updateSelection()},_setBindItem:function(b,a){if(b!=null&&b.bindItem!=null){if(a!=null&&a.bindItem!=null&&b.bindItem==a.bindItem){return}this.__buildTree()}}},destruct:function(){this.__bindings=this.__childrenRef=this.__boundProperties=null}});qx.Class.define("qx.io.HttpRequest",{extend:qx.core.Object,construct:function(a){this.base(arguments);this.__headers={};if(a!=null){this.setUrl(a)}},statics:{__modified:{}},events:{change:"qx.event.type.Data",timeout:"qx.event.type.Event",load:"qx.event.type.Event",error:"qx.event.type.Event",abort:"qx.event.type.Event"},properties:{refresh:{check:"Boolean",init:false},data:{nullable:true},method:{check:["GET","POST","PUT","HEAD","DELETE","OPTIONS"],init:"GET"},async:{check:"Boolean",init:true},mime:{check:["text/plain","text/javascript","application/json","application/xml","text/html"],init:"text/plain"},url:{check:"String",init:""},username:{check:"String",nullable:true},password:{check:"String",nullable:true},auth:{check:["http","basic"],init:"http"},timeout:{check:"Integer",nullable:true},cache:{check:"Boolean",init:false}},members:{__req:null,__headers:null,setRequestHeader:function(a,b){this.__headers[a]=b},removeRequestHeader:function(a){delete this.__headers[a]},getRequestHeader:function(a){var b=this.__headers[a];if(b===undefined){b=null}return b},getResponseText:function(){var a=this.__req;if(a){return a.responseText}},getResponseXml:function(){var a=this.__req;if(a){return a.responseXML}},getResponseHeader:function(a){var b=this.__req;if(b){return b.getResponseHeader(a)}},getAllResponseHeaders:function(){var a=this.__req;if(a){return a.getAllResponseHeaders()}},isNotModified:function(){var b=this.__req;if(!b){return false}var a=b.getResponseHeader("Last-Modified");return b.status===304||qx.io.HttpRequest.__modified[this.getUrl()]===a},isSuccessful:function(){var a=this.__req;return !a||a.isSuccessful()},getStatusCode:function(){var a=this.__req;if(a){return a.status}},getStatusText:function(){var a=this.__req;if(a){return a.statusText}},getReadyState:function(){var a=this.__req;if(a){return a.readyState}},send:function(){if(this.__req){if(this.getReadyState()!==4){throw new Error("Request is still pending at ready state: "+this.getReadyState())}this.__req.dispose()}var d=this.__req=new qx.bom.Request;d.onreadystatechange=qx.lang.Function.bind(this.__onchange,this);d.ontimeout=qx.lang.Function.bind(this.__ontimeout,this);d.onload=qx.lang.Function.bind(this.__onload,this);d.onerror=qx.lang.Function.bind(this.__onerror,this);d.onabort=qx.lang.Function.bind(this.__onabort,this);var f=this.getUsername();var c=this.getPassword();if(this.getAuth()=="basic"){d.setRequestHeader("Authorization","Basic "+qx.util.Base64.encode(f+":"+c));f=c=null}var b=this.getUrl();d.timeout=this.getTimeout();d.open(this.getMethod(),b,this.getAsync(),f,c);if(!this.getCache()){d.setRequestHeader("Cache-Control","no-cache")}if(this.getRefresh()){d.setRequestHeader("If-Modified-Since",qx.io.HttpRequest.__modified[b]||"Thu, 01 Jan 1970 00:00:00 GMT")}d.setRequestHeader("X-Requested-With","XMLHttpRequest");if(this.getMethod()==="POST"){d.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}d.setRequestHeader("Accept",this.getMime());var e=this.__headers;for(var a in e){d.setRequestHeader(a,e[a])}d.send(this.getData())},abort:function(){if(this.__req){this.__req.abort()}},__onchange:qx.event.GlobalError.observeMethod(function(){this.fireDataEvent("change",this.getReadyState());if(this.getRefresh()&&this.getReadyState()===4&&this.isSuccessful()){var a=this.getResponseHeader("Last-Modified");if(a){qx.io.HttpRequest.__modified[this.getUrl()]=a}}}),__ontimeout:qx.event.GlobalError.observeMethod(function(){if(this.hasListener("timeout")){this.fireEvent("timeout")}}),__onload:qx.event.GlobalError.observeMethod(function(){if(this.hasListener("load")){this.fireEvent("load")}}),__onerror:qx.event.GlobalError.observeMethod(function(){if(this.hasListener("error")){this.fireEvent("error")}}),__onabort:qx.event.GlobalError.observeMethod(function(){if(this.hasListener("abort")){this.fireEvent("abort")}})},destruct:function(){this._disposeObjects("__req");this.__headers=null}});qx.Class.define("qx.ui.table.celleditor.CheckBox",{extend:qx.core.Object,implement:qx.ui.table.ICellEditorFactory,members:{createCellEditor:function(a){var b=new qx.ui.container.Composite(new qx.ui.layout.HBox().set({alignX:"center",alignY:"middle"})).set({focusable:true});var c=new qx.ui.form.CheckBox().set({value:a.value});b.add(c);b.addListener("focus",function(){c.focus()});b.addListener("activate",function(){c.activate()});c.addListener("keydown",function(f){if(f.getKeyIdentifier()=="Enter"){var g=qx.event.Pool.getInstance().getObject(qx.event.type.KeySequence);var d=b.getContainerElement().getDomElement();g.init(f.getNativeEvent(),d,f.getKeyIdentifier());g.setType("keypress");qx.event.Registration.dispatchEvent(d,g)}},this);return b},getCellEditorValue:function(a){return a.getChildren()[0].getValue()}}});qx.Class.define("qx.bom.client.Multimedia",{statics:{__db:{quicktime:{plugin:"QuickTime",control:"QuickTimeCheckObject.QuickTimeCheck.1"},wmv:{plugin:"Windows Media",control:"WMPlayer.OCX.7"},divx:{plugin:"DivX Web Player",control:"npdivx.DivXBrowserPlugin.1"},silverlight:{plugin:"Silverlight",control:"AgControl.AgControl"}},has:function(c,a){qx.log.Logger.deprecatedMethodWarning(arguments.callee,"Please use qx.core.Environment.get insead.");if(this.__db[c]){var b=this.__db[c];if(b.installed){if(a==null||(b.version>=parseFloat(a))){return true}}}return false},__init:qx.core.Environment.select("engine.name",{mshtml:function(){var e=window.ActiveXObject;if(!e){return}var a=this.__db;var c,d;for(var f in a){c=a[f];try{d=new ActiveXObject(c.control)}catch(b){continue}switch(f){case"quicktime":c.version=0;break;case"wmv":c.version=d.versionInfo;break;case"divx":c.version=0;break;case"silverlight":try{c.version=d.version===undefined?0:d.version}catch(b){try{c.version=d.settings.version===undefined?0:d.settings.version}catch(b){c.version=0}}break}c.installed=true}},"default":function(){var c=navigator.plugins;if(!c){return}var j=this.__db;var g=/([0-9]\.[0-9])/g;var e,a,h;for(var d=0,f=c.length;d<f;d++){e=c[d];a=e.name;for(var b in j){h=j[b];if(!h.installed&&a.indexOf(h.plugin)!==-1){h.installed=true;if(g.test(e.name)||g.test(e.description)){h.version=parseFloat(RegExp.$1)}else{h.version=0}break}}}}})},defer:function(a){a.__init()}});qx.Class.define("qx.dev.Tokenizer",{extend:qx.core.Object,statics:{tokenizeJavaScript:function(h){var r={"break":1,"case":1,"catch":1,"continue":1,"default":1,"delete":1,"do":1,"else":1,"finally":1,"for":1,"function":1,"if":1,"in":1,"instanceof":1,"new":1,"return":1,"switch":1,"throw":1,"try":1,"typeof":1,"var":1,"while":1,"with":1};var k={"void":1,"null":1,"true":1,"false":1,"NaN":1,"Infinity":1,"this":1};var t={statics:1,members:1,construct:1,destruct:1,events:1,properties:1,extend:1,implement:1};var o=function(a){return new RegExp("^"+a+"$")};var x="\\/\\/.*?[\\n\\r$]";var E="\\/\\*(?:.|[\\n\\r])*?\\*\\/";var C="[a-zA-Z_][a-zA-Z0-9_]*\\b";var g="[+-]?\\d+";var l="[+-]?\\d+(([.]\\d+)*([eE][+-]?\\d+))?";var A='["][^"]*["]';var w="['][^']*[']";var m="\\t";var d="\\r\\n|\\r|\\n";var c="\\s";var H="(?:\\/(?!\\*)[^\\t\\n\\r\\f\\v\\/]+?\\/[mgi]*)";var z=["\\.(?:match|search|split)\\s*\\(\\s*\\(*\\s*"+H+"\\s*\\)*\\s*\\)","\\.(?:replace)\\s*\\(\\s*\\(*\\s*"+H+"\\s*\\)*\\s*?,?","\\s*\\(*\\s*"+H+"\\)*\\.(?:test|exec)\\s*\\(\\s*","(?::|=|\\?)\\s*\\(*\\s*"+H+"\\s*\\)*","[\\(,]\\s*"+H+"\\s*[,\\)]"].join("|");var b=o(x);var n=o(E);var u=o(C);var s=o(g);var I=o(l);var j=o(A);var f=o(w);var y=o(m);var e=o(d);var F=o(c);var B=o(z);var q=new RegExp([x,E,C,g,l,A,w,w,m,d,c,z,"."].join("|"),"g");var v=[];var G=h.match(q);for(var D=0;D<G.length;D++){var p=G[D];if(p.match(b)){v.push({type:"linecomment",value:p})}else{if(p.match(n)){v.push({type:"fullcomment",value:p})}else{if(p.match(B)){v.push({type:"regexp",value:p})}else{if(p.match(f)){v.push({type:"qstr",value:p})}else{if(p.match(j)){v.push({type:"qqstr",value:p})}else{if(r[p]){v.push({type:"keyword",value:p})}else{if(k[p]){v.push({type:"atom",value:p})}else{if(t[p]){v.push({type:"qxkey",value:p})}else{if(p.match(u)){v.push({type:"ident",value:p})}else{if(p.match(I)){v.push({type:"real",value:p})}else{if(p.match(s)){v.push({type:"int",value:p})}else{if(p.match(e)){v.push({type:"nl",value:p})}else{if(p.match(o(F))){v.push({type:"ws",value:p})}else{if(p.match(y)){v.push({type:"tab",value:p})}else{if(p==">"){v.push({type:"sym",value:">"})}else{if(p=="<"){v.push({type:"sym",value:"<"})}else{if(p=="&"){v.push({type:"sym",value:"&"})}else{v.push({type:"sym",value:p})}}}}}}}}}}}}}}}}}}return v},javaScriptToHtml:function(g,e){var j=qx.dev.Tokenizer.tokenizeJavaScript(g);var b=new qx.util.StringBuilder();for(var f=0;f<j.length;f++){var d=j[f];var c=qx.bom.String.escape(d.value);switch(d.type){case"regexp":b.add("<span class='regexp'>",c,"</span>");break;case"ident":b.add("<span class='ident'>",c,"</span>");break;case"linecomment":case"fullcomment":b.add("<span class='comment'>",c,"</span>");break;case"qstr":case"qqstr":b.add("<span class='string'>",c,"</span>");break;case"keyword":case"atom":case"qxkey":b.add("<span class='",d.type,"'>",c,"</span>");break;case"nl":var a=qx.core.Environment.get("engine.name")=="mshtml"&&!e?"<br>":"\n";b.add(a);break;case"ws":var h=qx.core.Environment.get("engine.name")=="mshtml"&&!e?"&nbsp;":" ";b.add(h);break;default:b.add(c)}}return b.get()}}});qx.Class.define("qx.ui.table.celleditor.SelectBox",{extend:qx.core.Object,implement:qx.ui.table.ICellEditorFactory,properties:{validationFunction:{check:"Function",nullable:true,init:null},listData:{check:"Array",init:null,nullable:true}},members:{createCellEditor:function(b){var d=new qx.ui.form.SelectBox().set({appearance:"table-editor-selectbox"});var j=b.value;d.originalValue=j;var g=b.table.getTableColumnModel().getDataCellRenderer(b.col);var h=g._getContentHtml(b);if(j!=h){j=h}if(j===null){j=""}var f=this.getListData();if(f){var k;for(var e=0,a=f.length;e<a;e++){var m=f[e];if(m instanceof Array){k=new qx.ui.form.ListItem(m[0],m[1]);k.setUserData("row",m[2])}else{k=new qx.ui.form.ListItem(m,null);k.setUserData("row",m)}d.add(k)}}var c=d.getChildrenContainer().findItem(""+j);if(c){d.setSelection([c])}else{d.resetSelection()}d.addListener("appear",function(){d.open()});return d},getCellEditorValue:function(c){var b=c.getSelection();var d="";if(b&&b[0]){d=b[0].getUserData("row")||b[0].getLabel()}var a=this.getValidationFunction();if(a){d=a(d,c.originalValue)}if(typeof c.originalValue=="number"){d=parseFloat(d)}return d}}});qx.Class.define("qx.ui.root.Inline",{extend:qx.ui.root.Abstract,include:[qx.ui.core.MLayoutHandling],construct:function(a,c,b){if(qx.core.Environment.get("qx.debug")){this.assertElement(a,"Please use a DOM element to create an inline root.")}this.__elem=a;a.style.overflow="hidden";a.style.textAlign="left";this.__dynX=c||false;this.__dynY=b||false;this.__initDynamicMode();this.base(arguments);this._setLayout(new qx.ui.layout.Basic());qx.ui.core.queue.Layout.add(this);qx.ui.core.FocusHandler.getInstance().connectTo(this);if((qx.core.Environment.get("engine.name")=="opera")){this.setSelectable(true)}if((qx.core.Environment.get("engine.name")=="mshtml")){this.setKeepFocus(true)}},members:{__dynX:false,__dynY:false,__elem:null,__initDynamicMode:function(){if(this.__dynX||this.__dynY){var a=qx.bom.element.Dimension.getSize(this.__elem);if(this.__dynX&&a.width<1){throw new Error("The root element "+this.__elem+" of "+this+" needs a width when its width size should be used!")}if(this.__dynY){if(a.height<1){throw new Error("The root element "+this.__elem+" of "+this+" needs a height when its height size should be used!")}if(a.height>=1&&qx.bom.element.Style.get(this.__elem,"height",3)==""){qx.bom.element.Style.set(this.__elem,"height",a.height+"px")}}qx.event.Registration.addListener(this.__elem,"resize",this._onResize,this)}},_createContainerElement:function(){var b=this.__elem;if(this.__dynX||this.__dynY){var k=document.createElement("div");b.appendChild(k);if((qx.core.Environment.get("engine.name")=="mshtml")&&qx.core.Environment.get("engine.version")==6){var e=qx.dom.Node.getBodyElement(b);var a;var g;var c=false;var l=qx.dom.Hierarchy.getAncestors(b);for(var f=0,d=l.length;f<d;f++){a=l[f];if(a!=e){g=qx.bom.element.Style.get(a,"position");if(g=="relative"){c=true;break}}else{break}}if(c){b.style.position="relative"}}}else{k=b}var h=new qx.html.Root(k);k.style.position="relative";h.setAttribute("$$widget",this.toHashCode());qx.event.Timer.once(function(i){this.fireEvent("appear")},this,0);return h},_onResize:function(b){var a=b.getData();if((a.oldWidth!==a.width)&&this.__dynX||(a.oldHeight!==a.height)&&this.__dynY){qx.ui.core.queue.Layout.add(this)}},_computeSizeHint:function(){var d=this.__dynX;var c=this.__dynY;if(!d||!c){var f=this.base(arguments)}else{f={}}var e=qx.bom.element.Dimension;if(d){var b=e.getContentWidth(this.__elem);f.width=b;f.minWidth=b;f.maxWidth=b}if(c){var a=e.getContentHeight(this.__elem);f.height=a;f.minHeight=a;f.maxHeight=a}return f}},defer:function(b,a){qx.ui.core.MLayoutHandling.remap(a)},destruct:function(){qx.event.Registration.removeListener(this.__elem,"resize",this._onResize,this);this.__elem=null}});qx.Class.define("qx.ui.progressive.renderer.table.Widths",{extend:qx.core.Object,construct:function(b){this.base(arguments);this.__columnData=[];for(var a=0;a<b;a++){this.__columnData[a]=new qx.ui.core.ColumnData()}},members:{__columnData:null,getData:function(){return this.__columnData},set:function(b,c){for(var a in c){switch(a){case"width":this.setWidth(b,c[a]);break;case"minWidth":this.setMinWidth(b,c[a]);break;case"maxWidth":this.setMaxWidth(b,c[a]);break;default:throw new Error("Unrecognized key: "+a)}}},setWidth:function(b,a){if(b>this.__columnData.length-1||b<0){throw new Error("Column number out of range")}this.__columnData[b].setColumnWidth(a)},setMinWidth:function(b,a){if(b>this.__columnData.length-1||b<0){throw new Error("Column number out of range")}this.__columnData[b].setMinWidth(a)},setMaxWidth:function(b,a){if(b>this.__columnData.length-1||b<0){throw new Error("Column number out of range")}this.__columnData[b].setMaxWidth(a)}}});